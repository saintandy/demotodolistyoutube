{"version":3,"file":"bundle.js","sources":["../../../node_modules/stem-core/src/base/PageTitleManager.js","../../js/AppConfig.js","../../../node_modules/stem-core/src/base/Utils.js","../../../node_modules/stem-core/src/base/Dispatcher.js","../../../node_modules/stem-core/src/ui/NodeAttributes.js","../../../node_modules/stem-core/src/ui/UIBase.js","../../../node_modules/stem-core/src/ui/Constants.js","../../../node_modules/stem-core/src/ui/Utils.js","../../../node_modules/stem-core/src/ui/StyleElement.jsx","../../../node_modules/stem-core/src/decorators/Utils.js","../../../node_modules/stem-core/src/decorators/LazyInitialize.js","../../../node_modules/stem-core/src/decorators/Style.js","../../../node_modules/stem-core/src/ui/Style.js","../../../node_modules/stem-core/src/base/Device.js","../../../node_modules/stem-core/src/ui/Draggable.js","../../../node_modules/stem-core/src/ui/Color.js","../../../node_modules/stem-core/src/ui/style/Theme.js","../../../node_modules/stem-core/src/ui/GlobalStyle.js","../../../node_modules/stem-core/src/ui/Bootstrap3.jsx","../../../node_modules/stem-core/src/ui/UIPrimitives.jsx","../../../node_modules/stem-core/src/ui/input/Style.js","../../../node_modules/stem-core/src/ui/input/Input.jsx","../../../node_modules/stem-core/src/ui/form/Style.js","../../../node_modules/stem-core/src/ui/form/Form.jsx","../../../node_modules/stem-core/src/ui/svg/SVGNodeAttributes.js","../../../node_modules/stem-core/src/ui/svg/SVGBase.js","../../../node_modules/stem-core/src/ui/svg/SVGText.js","../../../node_modules/stem-core/src/math.js","../../../node_modules/stem-core/src/ui/svg/SVGPrimitives.js","../../../node_modules/stem-core/src/ui/Transition.js","../../../node_modules/stem-core/src/ui/svg/Animations.js","../../../node_modules/stem-core/src/ui/Switcher.jsx","../../../node_modules/stem-core/src/ui/Router.jsx","../../../node_modules/stem-core/src/ui/Translation.js","../../../node_modules/stem-core/src/ui/tabs/Style.js","../../../node_modules/stem-core/src/ui/tabs/TabArea.jsx","../../../node_modules/stem-core/src/data-structures/MultiMap.js","../../../node_modules/stem-core/src/polyfill/Headers.js","../../../node_modules/stem-core/src/polyfill/URLSearchParams.js","../../../node_modules/stem-core/src/polyfill/Body.js","../../../node_modules/stem-core/src/polyfill/Request.js","../../../node_modules/stem-core/src/polyfill/Response.js","../../../node_modules/stem-core/src/base/Fetch.js","../../../node_modules/stem-core/src/base/Ajax.js","../../../node_modules/stem-core/src/ui/button/ButtonStyle.js","../../../node_modules/stem-core/src/ui/button/Button.jsx","../../../node_modules/stem-core/src/ui/button/ButtonGroup.jsx","../../../node_modules/stem-core/src/ui/CardPanel.jsx","../../../node_modules/stem-core/src/ui/RowList.jsx","../../../node_modules/stem-core/src/ui/collapsible/Style.js","../../../node_modules/stem-core/src/ui/collapsible/CollapsibleMixin.jsx","../../../node_modules/stem-core/src/ui/collapsible/CollapsiblePanel.jsx","../../../node_modules/stem-core/src/ui/modal/Style.js","../../../node_modules/stem-core/src/ui/modal/FloatingWindow.jsx","../../../node_modules/stem-core/src/ui/modal/Modal.jsx","../../../node_modules/stem-core/src/ui/global-container/Style.js","../../../node_modules/stem-core/src/ui/global-container/GlobalContainer.jsx","../../../node_modules/stem-core/src/ui/section-divider/Divider.jsx","../../../node_modules/stem-core/src/ui/section-divider/Style.js","../../../node_modules/stem-core/src/ui/section-divider/SectionDivider.jsx","../../../node_modules/stem-core/src/ui/FontAwesome.jsx","../../../node_modules/stem-core/src/ui/section-divider/Accordion.jsx","../../../node_modules/stem-core/src/ui/Carousel.jsx","../../../node_modules/stem-core/src/ui/RangePanelStyle.js","../../../node_modules/stem-core/src/ui/RangePanel.jsx","../../../node_modules/stem-core/src/ui/table/Style.js","../../../node_modules/stem-core/src/ui/table/Table.jsx","../../../node_modules/stem-core/src/ui/table/CollapsibleTable.jsx","../../../node_modules/stem-core/src/ui/table/SortableTable.jsx","../../../node_modules/stem-core/src/time/Duration.js","../../../node_modules/stem-core/src/time/Date.js","../../../node_modules/stem-core/src/time/Time.js","../../../node_modules/stem-core/src/ui/DateTimePicker.jsx","../../../node_modules/stem-core/src/ui/CodeEditor.jsx","../../js/IndexPage.jsx","../../../node_modules/stem-core/src/state/State.js","../../../node_modules/stem-core/src/state/Store.js","../../../node_modules/stem-core/src/state/StoreMixins.js","../../../establishment/localization/js/state/LanguageStore.js","../../../establishment/content/js/state/ArticleStore.js","../../../establishment/blog/js/state/BlogStore.js","../../../node_modules/stem-core/src/markup/MarkupParser.js","../../../node_modules/stem-core/src/markup/MarkupRenderer.js","../../../establishment/content/js/markup/MarkupEditor.jsx","../../../establishment/accounts/js/state/UserStore.js","../../../establishment/accounts/js/UserHandle.jsx","../../../establishment/content/js/ArticleRenderer.jsx","../../../establishment/blog/js/BlogStyle.js","../../../establishment/blog/js/BlogArticleRenderer.jsx","../../../establishment/content/js/ArticleManager.jsx","../../../establishment/content/js/ArticleEditor.jsx","../../../establishment/accounts/js/state/UserReactionStore.js","../../../establishment/chat/js/state/MessageThreadStore.js","../../../establishment/content/js/Popup.jsx","../../../establishment/content/js/markup/MarkupEditorModal.jsx","../../../establishment/chat/js/ChatMarkupRenderer.jsx","../../../node_modules/stem-core/src/base/Require.js","../../../establishment/localization/js/state/TranslationStore.js","../../../establishment/errors/js/state/ErrorMessageStore.js","../../../establishment/errors/js/ErrorHandlers.js","../../../establishment/socialaccount/js/SocialAccountManager.js","../../../establishment/socialaccount/js/state/SocialAppStore.js","../../../establishment/accounts/js/GoogleManager.js","../../../establishment/accounts/js/FacebookManager.js","../../../establishment/accounts/js/GithubManager.js","../../../establishment/localization/js/state/CountryStore.js","../../../establishment/accounts/js/LoginStyle.js","../../../establishment/accounts/js/Login.jsx","../../../establishment/accounts/js/LoginModal.jsx","../../../establishment/chat/js/VotingWidgetStyle.js","../../../establishment/chat/js/VotingWidget.jsx","../../../establishment/chat/js/ChatStyle.js","../../../node_modules/stem-core/src/base/Plugin.js","../../../establishment/chat/js/ChatWidget.jsx","../../../establishment/chat/js/CommentWidgetStyle.js","../../../establishment/chat/js/CommentWidget.jsx","../../../node_modules/stem-core/src/ui/ConcentricCirclesLoadingScreen.jsx","../../../node_modules/stem-core/src/ui/DelayedElement.js","../../../node_modules/stem-core/src/ui/StateDependentElement.jsx","../../../establishment/blog/js/BlogPanel.jsx","../../../establishment/forum/js/state/ForumStore.js","../../../establishment/forum/js/EditThreadReplyButton.jsx","../../../establishment/forum/js/DeleteThreadReplyButton.jsx","../../../establishment/forum/js/ForumStyle.js","../../../establishment/forum/js/CreateThreadReplyButton.jsx","../../../establishment/forum/js/ForumThread.jsx","../../../establishment/forum/js/ForumPanel.jsx","../../js/Routes.js","../../../node_modules/stem-core/src/ui/navmanager/NavStyle.js","../../../node_modules/stem-core/src/base/StorageMap.js","../../../node_modules/stem-core/src/ui/navmanager/NavElement.jsx","../../../node_modules/stem-core/src/ui/navmanager/NavIcon.jsx","../../../node_modules/stem-core/src/ui/navmanager/NavSwipeDetection.js","../../../node_modules/stem-core/src/ui/navmanager/NavManager.jsx","../../../establishment/accounts/js/Logout.js","../../js/AppNavManager.jsx","../../../node_modules/stem-core/src/app/StemApp.jsx","../../../establishment/funnel/js/websocket/WebsocketStreamHandler.js","../../../establishment/funnel/js/websocket/WebsocketSubscriber.js","../../../establishment/webapp/js/GlobalStyleSheet.js","../../../establishment/webapp/js/EstablishmentApp.js","../../js/App.jsx"],"sourcesContent":["export class PageTitleManager {\n    static title = null;\n    static defaultTitle = \"Website\";\n    static prefix = null;\n\n    static getPrefix() {\n        return this.prefix ? \"(\" + this.prefix + \") \" : \"\";\n    }\n\n    static setPrefix(prefix) {\n        this.prefix = prefix;\n        this.updatePageTitle();\n    }\n\n    static setDefaultTitle(defaultTitle) {\n        this.defaultTitle = defaultTitle;\n    }\n\n    static getTitle() {\n        return this.title || this.defaultTitle;\n    }\n\n    static setTitle(title) {\n        this.title = title;\n        this.updatePageTitle();\n    }\n\n    static getFullPageTitle() {\n        return this.getPrefix() + this.getTitle();\n    }\n\n    static updatePageTitle() {\n        document.title = this.getFullPageTitle();\n    }\n\n    static setIcon() {\n        throw Error(\"Not implemented yet!\");\n    }\n}\n","import {PageTitleManager} from \"base/PageTitleManager\";\n\nPageTitleManager.setDefaultTitle(\"\");","// TODO: should this be renamed to \"toUnwrappedArray\"?\nexport function unwrapArray(elements) {\n    if (!elements) {\n        return [];\n    }\n\n    if (!Array.isArray(elements)) {\n        // In case this is an iterable, convert to array\n        if (elements[Symbol.iterator]) {\n            return unwrapArray(Array.from(elements));\n        } else {\n            return [elements];\n        }\n    }\n\n    // Check if the passed in array is valid, and try to return it if possible to preserve references\n    let allProperElements = true;\n    for (let i = 0; i < elements.length; i++) {\n        if (Array.isArray(elements[i]) || elements[i] == null) {\n            allProperElements = false;\n            break;\n        }\n    }\n\n    if (allProperElements) {\n        // Return the exact same array as was passed in\n        return elements;\n    }\n\n    let result = [];\n    for (let i = 0; i < elements.length; i++) {\n        if (Array.isArray(elements[i])) {\n            let unwrappedElement = unwrapArray(elements[i]);\n            for (let j = 0; j < unwrappedElement.length; j += 1) {\n                result.push(unwrappedElement[j]);\n            }\n        } else {\n            if (elements[i] != null) {\n                result.push(elements[i]);\n            }\n        }\n    }\n    return result;\n}\n\nexport function isLocalUrl(url, host=self.location.host, origin=self.location.origin) {\n    // Empty url is considered local\n    if (!url) {\n        return true;\n    }\n    // Protocol-relative url is local if the host matches\n    if (url.startsWith(\"//\")) {\n        return url.startsWith(\"//\" + host);\n    }\n    // Absolute url is local if the origin matches\n    let r = new RegExp(\"^(?:[a-z]+:)?//\", \"i\");\n    if (r.test(url)) {\n        return url.startsWith(origin);\n    }\n    // Root-relative and document-relative urls are always local\n    return true;\n}\n\n// Trims a local url to root-relative or document-relative url.\n// If the url is protocol-relative, removes the starting \"//\"+host, transforming it in a root-relative url.\n// If the url is absolute, removes the origin, transforming it in a root-relative url.\n// If the url is root-relative or document-relative, leaves it as is.\nexport function trimLocalUrl(url, host=self.location.host, origin=self.location.origin) {\n    if (!isLocalUrl(url, host, origin)) {\n        throw Error(\"Trying to trim non-local url!\");\n    }\n    if (!url) {\n        return url;\n    }\n    if (url.startsWith(\"//\" + host)) {\n        return url.slice((\"//\" + host).length);\n    }\n    if (url.startsWith(origin)) {\n        return url.slice(origin.length);\n    }\n    return url;\n}\n\n// Split the passed in array into arrays with at most maxChunkSize elements\nexport function splitInChunks(array, maxChunkSize) {\n    let chunks = [];\n    while (array.length > 0) {\n        chunks.push(array.splice(0, maxChunkSize));\n    }\n    return chunks;\n}\n\nexport function isIterable(obj) {\n    if (obj == null) {\n        return false;\n    }\n    return obj[Symbol.iterator] !== undefined;\n}\n\nexport function defaultComparator(a, b) {\n    if (a == null && b == null) {\n        return 0;\n    }\n\n    if (b == null) {\n        return 1;\n    }\n\n    if (a == null) {\n        return -1;\n    }\n\n    // TODO: might want to use valueof here\n    if (isNumber(a) && isNumber(b)) {\n        return a - b;\n    }\n\n    let aStr = a.toString();\n    let bStr = b.toString();\n\n    if (aStr === bStr) {\n        return 0;\n    }\n    return aStr < bStr ? -1 : 1;\n}\n\nexport function slugify(string) {\n    string = string.trim();\n\n    string = string.replace((/[^a-zA-Z0-9-\\s]/g), \"\"); // remove anything non-latin alphanumeric\n    string = string.replace((/\\s+/g), \"-\"); // replace whitespace with dashes\n    string = string.replace((/-{2,}/g), \"-\"); // remove consecutive dashes\n    string = string.toLowerCase();\n\n    return string;\n}\n\n// If the first argument is a number, it's returned concatenated with the suffix, otherwise it's returned unchanged\nexport function suffixNumber(value, suffix) {\n    if (typeof value === \"number\" || value instanceof Number) {\n        return value + suffix;\n    }\n    return value;\n}\n\nexport function setObjectPrototype(obj, Class) {\n    obj.__proto__ = Class.prototype;\n    return obj;\n}\n\nexport function isNumber(obj) {\n    return (typeof obj === \"number\") || (obj instanceof Number);\n}\n\nexport function isString(obj) {\n    return (typeof obj === \"string\") || (obj instanceof String);\n}\n\nexport function isPlainObject(obj) {\n    if (!obj || typeof obj !== \"object\" || obj.nodeType) {\n        return false;\n    }\n    if (obj.constructor && obj.constructor != Object) {\n        return false;\n    }\n    return true;\n}\n\nexport function deepCopy() {\n\tlet target = arguments[0] || {};\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif (typeof target !== \"object\" && typeof target !== \"function\") {\n\t\ttarget = {};\n\t}\n\n\tfor (let i = 1; i < arguments.length; i += 1) {\n        let obj = arguments[i];\n        if (obj == null) {\n            continue;\n        }\n\n        // Extend the base object\n        for (let [key, value] of Object.entries(obj)) {\n            // Recurse if we're merging plain objects or arrays\n            if (value && isPlainObject(value) || Array.isArray(value)) {\n                let clone;\n                let src = target[key];\n\n                if (Array.isArray(value)) {\n                    clone = (src && Array.isArray(src)) ? src : [];\n                } else {\n                    clone = (src && isPlainObject(src)) ? src : {};\n                }\n\n                target[key] = deepCopy(clone, value);\n            } else {\n                // TODO: if value has .clone() method, use that?\n                target[key] = value;\n            }\n        }\n\t}\n\n\treturn target;\n}\n\nexport function objectFromKeyValue(key, value) {\n    return {\n        [key]: value,\n    }\n}\n\nexport function dashCase(str) {\n    let rez = \"\";\n    for (let i = 0; i < str.length; i++) {\n        if (\"A\" <= str[i] && str[i] <= \"Z\") {\n            if (i > 0) {\n                rez += \"-\";\n            }\n            rez += str[i].toLowerCase();\n        } else {\n            rez += str[i];\n        }\n    }\n    return (rez == str) ? str : rez;\n}\n\n// TODO: have a Cookie helper file\nexport function getCookie(name) {\n    let cookies = (document.cookie || \"\").split(\";\");\n    for (let cookie of cookies) {\n        cookie = cookie.trim();\n        if (cookie.startsWith(name + \"=\")) {\n            return decodeURIComponent(cookie.substring(name.length + 1));\n        }\n    }\n    return null;\n}\n\nexport function uniqueId(obj) {\n    if (!uniqueId.objectWeakMap) {\n        uniqueId.objectWeakMap = new WeakMap();\n        uniqueId.constructorWeakMap = new WeakMap();\n        uniqueId.totalObjectCount = 0;\n    }\n    let objectWeakMap = uniqueId.objectWeakMap;\n    let constructorWeakMap = uniqueId.constructorWeakMap;\n    if (!objectWeakMap.has(obj)) {\n        const objConstructor = obj.constructor || obj.__proto__ || Object;\n        // Increment the object count\n        const objIndex = (constructorWeakMap.get(objConstructor) || 0) + 1;\n        constructorWeakMap.set(objConstructor, objIndex);\n\n        const objUniqueId = objIndex + \"-\" + (++uniqueId.totalObjectCount);\n        objectWeakMap.set(obj, objUniqueId);\n    }\n    return objectWeakMap.get(obj);\n}\n\n// TODO: should be done with String.padLeft\nexport function padNumber(num, minLength) {\n    let strNum = String(num);\n    while (strNum.length < minLength) {\n        strNum = \"0\" + strNum;\n    }\n    return strNum;\n}\n\n// Returns the english ordinal suffix of a number\nexport function getOrdinalSuffix(num) {\n    let suffixes = [\"th\", \"st\", \"nd\", \"rd\"];\n    let lastDigit = num % 10;\n    let isTeen = Math.floor(num / 10) % 10 === 1;\n    return (!isTeen && suffixes[lastDigit]) || suffixes[0];\n}\n\nexport function suffixWithOrdinal(num) {\n    return num + getOrdinalSuffix(num);\n}\n\nexport function instantiateNative(BaseClass, NewClass, ...args) {\n    let obj = new BaseClass(...args);\n    obj.__proto__ = NewClass.prototype;\n    return obj;\n}\n\n// This function can be used as a decorator in case we're extending native classes (Map/Set/Date)\n// and we want to fix the way babel breaks this scenario\n// WARNING: it destroys the code in constructor\n// If you want a custom constructor, you need to implement a static create method that generates new objects\n// Check the default constructor this code, or an example where this is done.\nexport function extendsNative(targetClass) {\n    if (targetClass.toString().includes(\" extends \")) {\n        // Native extended classes are cool, leave them as they are\n        return;\n    }\n    let BaseClass = targetClass.__proto__;\n    let allKeys = Object.getOwnPropertySymbols(targetClass).concat(Object.getOwnPropertyNames(targetClass));\n\n    // Fill in the default constructor\n    let newClass = targetClass.create || function create() {\n        return instantiateNative(BaseClass, newClass, ...arguments);\n        };\n    for (const key of allKeys) {\n        let property = Object.getOwnPropertyDescriptor(targetClass, key);\n        Object.defineProperty(newClass, key, property);\n    }\n    newClass.prototype = targetClass.prototype;\n    newClass.__proto__ = targetClass.__proto__;\n\n    newClass.prototype.constructor = newClass;\n\n    return newClass;\n}\n\nexport const NOOP_FUNCTION = () => {};\n\n// Helpers to wrap iterators, to wrap all values in a function or to filter them\nexport function* mapIterator(iter, func) {\n    for (let value of iter) {\n        yield func(value);\n    }\n}\n\nexport function* filterIterator(iter, func) {\n    for (let value of iter) {\n        if (func(value)) {\n            yield value;\n        }\n    }\n}\n","class DispatcherHandle {\n    constructor(dispatcher, callback) {\n        this.dispatcher = dispatcher;\n        this.callback = callback;\n    }\n\n    remove() {\n        if (!this.dispatcher) {\n            console.warn(\"Removing a dispatcher twice\");\n            return;\n        }\n        this.dispatcher.removeListener(this.callback);\n        this.dispatcher = undefined;\n        this.callback = undefined;\n    }\n\n    cleanup() {\n        this.remove();\n    }\n}\n\nclass Dispatcher {\n    constructor(options = {}) {\n        this.options = options;\n        this.listeners = [];\n    }\n\n    callbackExists(callback) {\n        for (let i = 0; i < this.listeners.length; i += 1) {\n            if (this.listeners[i] === callback) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    addListener(callback) {\n        if (!(typeof callback === \"function\")) {\n            console.error(\"The listener needs to be a function: \", callback);\n            return;\n        }\n        if (this.callbackExists(callback)) {\n            console.error(\"Can't re-register for the same callback: \", this, \" \", callback);\n            return;\n        }\n\n        this.listeners.push(callback);\n        return new DispatcherHandle(this, callback);\n    };\n\n    addListenerOnce(callback) {\n        let handler = this.addListener(function () {\n            callback(...arguments);\n            handler.remove();\n        });\n        return handler;\n    }\n\n    removeListener(callback) {\n        for (let i = 0; i < this.listeners.length; i += 1) {\n            if (this.listeners[i] === callback) {\n                // Erase and return\n                return this.listeners.splice(i, 1)[0];\n            }\n        }\n    };\n\n    removeAllListeners() {\n        this.listeners = [];\n    }\n\n    dispatch(payload) {\n        for (let i = 0; i < this.listeners.length; ) {\n            let listener = this.listeners[i];\n            // TODO: optimize common cases\n            listener(...arguments);\n            // In case the current listener deleted itself, keep the loop counter the same\n            // If it deleted listeners that were executed before it, that's just wrong and there are no guaranteed about\n            if (listener === this.listeners[i]) {\n                i++;\n            }\n        }\n    };\n}\n\nexport const DispatchersSymbol = Symbol(\"Dispatchers\");\n\nclass Dispatchable {\n    get dispatchers() {\n        return this[DispatchersSymbol] || (this[DispatchersSymbol] = new Map());\n    }\n\n    getDispatcher(name) {\n        return this.dispatchers.get(name);\n    }\n\n    dispatch(name, payload) {\n        let dispatcher = this.getDispatcher(name);\n        if (dispatcher) {\n            // Optimize the average case\n            if (arguments.length <= 2) {\n                dispatcher.dispatch(payload);\n            } else {\n                let args = Array.prototype.slice.call(arguments, 1);\n                dispatcher.dispatch(...args);\n            }\n        }\n    }\n\n    addListener(name, callback) {\n        if (Array.isArray(name)) {\n            return new CleanupJobs(name.map(x => this.addListener(x, callback)));\n        }\n        let dispatcher = this.getDispatcher(name);\n        if (!dispatcher) {\n            dispatcher = new Dispatcher();\n            this.dispatchers.set(name, dispatcher);\n        }\n        return dispatcher.addListener(callback);\n    }\n\n    // TODO: remove some duplicated logic with method above\n    addListenerOnce(name, callback) {\n        if (Array.isArray(name)) {\n            return new CleanupJobs(name.map(x => this.addListenerOnce(x, callback)));\n        }\n        let dispatcher = this.getDispatcher(name);\n        if (!dispatcher) {\n            dispatcher = new Dispatcher();\n            this.dispatchers.set(name, dispatcher);\n        }\n        return dispatcher.addListenerOnce(callback);\n    }\n\n    removeListener(name, callback) {\n        let dispatcher = this.getDispatcher(name);\n        if (dispatcher) {\n            dispatcher.removeListener(callback);\n        }\n    }\n\n    cleanup() {\n        this.runCleanupJobs();\n        delete this[DispatchersSymbol];\n    }\n\n    // These function don't really belong here, but they don't really hurt here and I don't want a long proto chain\n    // Add anything that needs to be called on cleanup here (dispatchers, etc)\n    addCleanupJob(cleanupJob) {\n        if (!this.hasOwnProperty(\"_cleanupJobs\")) {\n            this._cleanupJobs = new CleanupJobs();\n        }\n        this._cleanupJobs.add(cleanupJob);\n        return cleanupJob;\n    }\n\n    runCleanupJobs() {\n        if (this._cleanupJobs) {\n            this._cleanupJobs.cleanup();\n        }\n    }\n\n    detachListener(dispatcherHandle) {\n        if (this._cleanupJobs) {\n            this._cleanupJobs.remove(dispatcherHandle);\n        } else {\n            dispatcherHandle.remove();\n        }\n    }\n}\n\n// Creates a method that calls the method methodName on obj, and adds the result as a cleanup task\nfunction getAttachCleanupJobMethod(methodName) {\n    return function (obj) {\n        let args = Array.prototype.slice.call(arguments, 1);\n        let handler = obj[methodName](...args);\n        this.addCleanupJob(handler);\n        return handler;\n    }\n}\n\n// Not sure if these should be added here, but meh\nDispatchable.prototype.attachListener       = getAttachCleanupJobMethod(\"addListener\");\nDispatchable.prototype.attachEventListener  = getAttachCleanupJobMethod(\"addEventListener\");\nDispatchable.prototype.attachCreateListener = getAttachCleanupJobMethod(\"addCreateListener\");\nDispatchable.prototype.attachUpdateListener = getAttachCleanupJobMethod(\"addUpdateListener\");\nDispatchable.prototype.attachDeleteListener = getAttachCleanupJobMethod(\"addDeleteListener\");\n\nDispatcher.Global = new Dispatchable();\n\nclass RunOnce {\n    run(callback, timeout = 0) {\n        if (this.timeout) {\n            return;\n        }\n        this.timeout = setTimeout(() => {\n            callback();\n            this.timeout = undefined;\n        }, timeout);\n    }\n}\n\nclass CleanupJobs {\n    constructor(jobs = []) {\n        this.jobs = jobs;\n    }\n\n    add(job) {\n        this.jobs.push(job);\n    }\n\n    cleanup() {\n        for (let job of this.jobs) {\n            if (typeof job.cleanup === \"function\") {\n                job.cleanup();\n            } else if (typeof job.remove === \"function\" ) {\n                job.remove();\n            } else {\n                job();\n            }\n        }\n        this.jobs = [];\n    }\n\n    remove(job) {\n        if (job) {\n            const index = this.jobs.indexOf(job);\n            if (index >= 0) {\n                this.jobs.splice(index, 1);\n            }\n            job.remove();\n        } else {\n            this.cleanup();\n        }\n    }\n}\n\n// Class that can be used to pass around ownership of a resource.\n// It informs the previous owner of the change (once) and dispatches the new element for all listeners\n// TODO: a better name\nclass SingleActiveElementDispatcher extends Dispatcher {\n    setActive(element, addChangeListener, forceDispatch) {\n        if (!forceDispatch && element === this._active) {\n            return;\n        }\n        this._active = element;\n        this.dispatch(element);\n        if (addChangeListener) {\n            this.addListenerOnce((newElement) => {\n                if (newElement != element) {\n                    addChangeListener(newElement);\n                }\n            });\n        }\n    }\n\n    getActive() {\n        return this._active;\n    }\n}\n\nexport {Dispatcher, Dispatchable, RunOnce, CleanupJobs, SingleActiveElementDispatcher, getAttachCleanupJobMethod};\n","import {dashCase, setObjectPrototype} from \"../base/Utils\";\n\nexport const defaultToPixelsAttributes = new Set([\n    \"border-bottom-width\",\n    \"border-left-width\",\n    \"border-right-width\",\n    \"border-top-width\",\n    \"border-width\",\n    \"bottom\",\n    \"font-size\",\n    \"font-stretch\",\n    \"height\",\n    \"layer-grid-char\",\n    \"layer-grid-char-spacing\",\n    \"layer-grid-line\",\n    \"left\",\n    \"letter-spacing\",\n    \"line-height\",\n    \"margin\",\n    \"margin-bottom\",\n    \"margin-left\",\n    \"margin-right\",\n    \"margin-top\",\n    \"marker-offset\",\n    \"max-height\",\n    \"max-width\",\n    \"min-height\",\n    \"min-width\",\n    \"outline-width\",\n    \"padding\",\n    \"padding-bottom\",\n    \"padding-left\",\n    \"padding-right\",\n    \"padding-top\",\n    \"right\",\n    \"size\",\n    \"top\",\n    \"width\",\n    \"word-spacing\",\n]);\n\nexport function CreateNodeAttributesMap(oldAttributesMap, allowedAttributesArray) {\n    let allowedAttributesMap = new Map(oldAttributesMap);\n\n    for (let attribute of allowedAttributesArray || []) {\n        if (!attribute) continue;\n        if (!Array.isArray(attribute)) {\n            attribute = [attribute];\n        }\n        allowedAttributesMap.set(attribute[0], attribute[1] || {});\n    }\n\n    allowedAttributesMap.reverseNameMap = new Map();\n\n    for (let [key, value] of allowedAttributesMap) {\n        value = value || {};\n\n        value.domName = value.domName || key;\n\n        allowedAttributesMap.reverseNameMap.set(value.domName, key);\n\n        allowedAttributesMap.set(key, value);\n    }\n    return allowedAttributesMap;\n}\n\n// A class that can be used to work with a className field as with a Set, while having a toString() usable in the DOM\n// It's used when a UI object has a className attribute, that a string, but we still want it to be modified if we call addClass and removeClass\n// In that case, the string gets converted to a ClassNameSet\nexport class ClassNameSet extends Set {\n    // Can't use classic super in constructor since Set is build-in type and will throw an error\n    // TODO: see if could still be made to have this as constructor\n    static create(className) {\n        let value = new Set(String(className || \"\").split(\" \"));\n        return setObjectPrototype(value, this);\n    }\n\n    toString() {\n        return Array.from(this).join(\" \");\n    }\n}\n\nexport class NodeAttributes {\n    constructor(obj) {\n        Object.assign(this, obj);\n        // className and style should be deep copied to be modifiable, the others shallow copied\n        if (this.className instanceof ClassNameSet) {\n            this.className = ClassNameSet.create(String(this.className));\n        }\n        if (this.style) {\n            this.style = Object.assign({}, this.style);\n        }\n    }\n\n    // TODO: should this use the domName or the reverseName? Still needs work\n    setAttribute(key, value, node, attributesMap=this.constructor.defaultAttributesMap) {\n        // TODO: might want to find a better way than whitelistAttributes field to do this\n        if (!attributesMap.has(key)) {\n            this.whitelistedAttributes = this.whitelistedAttributes || {};\n            this.whitelistedAttributes[key] = true;\n        }\n        this[key] = value;\n        if (node) {\n            this.applyAttribute(key, node, attributesMap);\n        }\n    }\n\n    applyStyleToNode(key, value, node) {\n        if (typeof value === \"function\") {\n            value = value();\n        }\n        if ((value instanceof Number || typeof value === \"number\") &&\n            value != 0 && defaultToPixelsAttributes.has(dashCase(key))) {\n            value = value + \"px\";\n        }\n        if (node && node.style[key] !== value) {\n            node.style[key] = value;\n        }\n    }\n\n    setStyle(key, value, node) {\n        if (!(typeof key === \"string\" || key instanceof String)) {\n            // If the key is not a string, it should be a plain object\n            for (const styleKey of Object.keys(key)) {\n                this.setStyle(styleKey, key[styleKey], node);\n            }\n            return;\n        }\n        if (value === undefined) {\n            this.removeStyle(key, node);\n            return;\n        }\n        this.style = this.style || {};\n        this.style[key] = value;\n        this.applyStyleToNode(key, value, node);\n    }\n\n    removeStyle(key, node) {\n        if (this.style) {\n            delete this.style[key];\n        }\n        if (node && node.style[key]) {\n            delete node.style[key];\n        }\n    }\n\n    static getClassArray(classes) {\n        if (!classes) {\n            return [];\n        }\n        if (Array.isArray(classes)) {\n            return classes.map(x => String(x).trim());\n        } else {\n            return String(classes).trim().split(\" \");\n        }\n    }\n\n    getClassNameSet() {\n        if (!(this.className instanceof ClassNameSet)) {\n            this.className = ClassNameSet.create(this.className || \"\");\n        }\n        return this.className;\n    }\n\n    addClass(classes, node) {\n        classes = this.constructor.getClassArray(classes);\n\n        for (let cls of classes) {\n            this.getClassNameSet().add(cls);\n            if (node) {\n                node.classList.add(cls);\n            }\n        }\n    }\n\n    removeClass(classes, node) {\n        classes = this.constructor.getClassArray(classes);\n\n        for (let cls of classes) {\n            this.getClassNameSet().delete(cls);\n            if (node) {\n                node.classList.remove(cls);\n            }\n        }\n    }\n\n    hasClass(className) {\n        return this.getClassNameSet().has(className);\n    }\n\n    applyAttribute(key, node, attributesMap) {\n        let attributeOptions = attributesMap.get(key);\n        if (!attributeOptions) {\n            if (this.whitelistedAttributes && (key in this.whitelistedAttributes)) {\n                attributeOptions = {\n                    domName: key,\n                }\n            } else {\n                return;\n            }\n        }\n        let value = this[key];\n        if (typeof value === \"function\") {\n            value = value();\n        }\n        if (attributeOptions.noValue) {\n            if (value) {\n                value = \"\";\n            } else {\n                value = undefined;\n            }\n        }\n        if (typeof value !== \"undefined\") {\n            node.setAttribute(attributeOptions.domName, value);\n        } else {\n            node.removeAttribute(attributeOptions.domName);\n        }\n    }\n\n    applyClassName(node) {\n        if (this.className) {\n            const className = String(this.className);\n            if (node.className != className) {\n                node.className = className;\n            }\n        } else {\n            if (node.className) {\n                node.removeAttribute(\"class\");\n            }\n        }\n    }\n\n    apply(node, attributesMap) {\n        let addedAttributes = {};\n        let whitelistedAttributes = this.whitelistedAttributes || {};\n\n        // First update existing node attributes and delete old ones\n        // TODO: optimize to not run this if the node was freshly created\n        let nodeAttributes = node.attributes;\n        for (let i = nodeAttributes.length - 1; i >= 0; i--) {\n            let attr = nodeAttributes[i];\n            let attributeName = attr.name;\n            if (attributeName === \"style\" || attributeName === \"class\") {\n                // TODO: maybe should do work here?\n                continue;\n            }\n\n            let key = attributesMap.reverseNameMap.get(attributeName);\n\n            if (this.hasOwnProperty(key)) {\n                let value = this[key];\n                let attributeOptions = attributesMap.get(key);\n                if (attributeOptions && attributeOptions.noValue) {\n                    if (value) {\n                        value = \"\";\n                    } else {\n                        value = undefined;\n                    }\n                }\n                if (value != null) {\n                    node.setAttribute(attributeName, value);\n                    addedAttributes[key] = true;\n                } else {\n                    node.removeAttribute(attributeName);\n                }\n            } else {\n                node.removeAttribute(attributeName);\n            }\n        }\n        // Add new attributes\n        for (let key in this) {\n            if (addedAttributes[key]) {\n                continue;\n            }\n            this.applyAttribute(key, node, attributesMap);\n            // TODO: also whitelist data- and aria- keys here\n        }\n\n        this.applyClassName(node);\n\n        node.removeAttribute(\"style\");\n        if (this.style) {\n            for (let key in this.style) {\n                this.applyStyleToNode(key, this.style[key], node);\n            }\n        }\n    }\n}\n\n// Default node attributes, should be as few of these as possible\nNodeAttributes.defaultAttributesMap = CreateNodeAttributesMap([\n    [\"id\"],\n    [\"action\"],\n    [\"colspan\"],\n    [\"default\"],\n    [\"disabled\", {noValue: true}],\n    [\"fixed\"],\n    [\"forAttr\", {domName: \"for\"}], // TODO: have a consistent nomenclature for there!\n    [\"hidden\"],\n    [\"href\"],\n    [\"rel\"],\n    [\"minHeight\"],\n    [\"minWidth\"],\n    [\"role\"],\n    [\"target\"],\n    [\"HTMLtitle\", {domName: \"title\"}],\n    [\"type\"],\n    [\"placeholder\"],\n    [\"src\"],\n    [\"height\"],\n    [\"width\"],\n    //[\"value\"], // Value is intentionally disabled\n]);\n","import {unwrapArray, setObjectPrototype, suffixNumber, NOOP_FUNCTION} from \"../base/Utils\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {NodeAttributes} from \"./NodeAttributes\";\n\nvar UI = {\n    renderingStack: [], //keeps track of objects that are redrawing, to know where to assign refs automatically\n};\n\nclass BaseUIElement extends Dispatchable {\n    canOverwrite(existingChild) {\n        return this.constructor === existingChild.constructor &&\n               this.getNodeType() === existingChild.getNodeType();\n    }\n\n    applyRef() {\n        if (this.options && this.options.ref) {\n            let obj = this.options.ref.parent;\n            let name = this.options.ref.name;\n            obj[name] = this;\n        }\n    }\n\n    removeRef() {\n        if (this.options && this.options.ref) {\n            let obj = this.options.ref.parent;\n            let name = this.options.ref.name;\n            if (obj[name] === this) {\n                obj[name] = undefined;\n            }\n        }\n    }\n\n    // Lifecycle methods, called when the element was first inserted in the DOM, and before it's removed\n    onMount() {}\n\n    onUnmount() {}\n\n    destroyNode() {\n        this.onUnmount();\n        this.cleanup();\n        this.removeRef();\n        this.node && this.node.remove();\n        delete this.node; // Clear for gc\n    }\n}\n\nUI.TextElement = class UITextElement extends BaseUIElement {\n    constructor(value=\"\") {\n        super();\n        if (value && value.hasOwnProperty(\"value\")) {\n            this.value = value.value;\n            this.options = value;\n        } else {\n            this.value = (value != null) ? value : \"\";\n        }\n    }\n\n    mount(parent, nextSibling) {\n        this.parent = parent;\n        if (!this.node) {\n            this.createNode();\n            this.applyRef();\n        } else {\n            this.redraw();\n        }\n        parent.node.insertBefore(this.node, nextSibling);\n        this.onMount();\n    }\n\n    getNodeType() {\n        return Node.TEXT_NODE;\n    }\n\n    copyState(element) {\n        this.value = element.value;\n        this.options = element.options;\n    }\n\n    createNode() {\n        this.node = document.createTextNode(this.getValue());\n        if (document.STEM_DEBUG) {\n            this.node.stemElement = this;\n        }\n        return this.node;\n    }\n\n    setValue(value) {\n        this.value = (value != null) ? value : \"\";\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    getValue() {\n        return String(this.value);\n    }\n\n    redraw() {\n        if (this.node) {\n            let newValue = this.getValue();\n            // TODO: check if this is best for performance\n            if (this.node.nodeValue !== newValue) {\n                this.node.nodeValue = newValue;\n            }\n        }\n        this.applyRef();\n    }\n};\n\n// TODO: rename to Element\nclass UIElement extends BaseUIElement {\n    constructor(options={}) {\n        super();\n        this.children = [];\n        this.options = options; // TODO: this is a hack, to not break all the code that references this.options in setOptions\n        this.setOptions(options);\n    };\n\n    getDefaultOptions(options) {}\n\n    getPreservedOptions() {}\n\n    setOptions(options) {\n        let defaultOptions = this.getDefaultOptions(options);\n        if (defaultOptions) {\n            options = Object.assign(defaultOptions, options);\n        }\n        this.options = options;\n    }\n\n    updateOptions(options) {\n        this.setOptions(Object.assign(this.options, options));\n        this.redraw();\n    }\n\n    setChildren(...args) {\n        this.updateOptions({children: unwrapArray(args)})\n    }\n\n    // Used when we want to reuse the current element, with the options from the passed in argument\n    // Is only called when element.canOverwrite(this) is true\n    copyState(element) {\n        let options = element.options;\n        let preservedOptions = this.getPreservedOptions();\n        if (preservedOptions) {\n            options = Object.assign({}, options, preservedOptions);\n        }\n        this.setOptions(options);\n        this.addListenersFromOptions();\n    }\n\n    getNodeType() {\n        return this.options.nodeType || \"div\";\n    }\n\n    static create(parentNode, options) {\n        let uiElement = new this(options);\n        uiElement.mount(parentNode, null);\n        return uiElement;\n    }\n\n    // TODO: should be renamed to renderContent\n    getGivenChildren() {\n        return this.options.children || [];\n    }\n\n    render() {\n        return this.options.children;\n    };\n\n    createNode() {\n        this.node = document.createElement(this.getNodeType());\n        if (document.STEM_DEBUG) {\n            this.node.stemElement = this;\n        }\n        return this.node;\n    }\n\n    // Abstract, gets called when removing DOM node associated with the\n    cleanup() {\n        this.runCleanupJobs();\n        for (let child of this.children) {\n            child.destroyNode();\n        }\n        this.clearNode();\n        super.cleanup();\n    }\n\n    overwriteChild(existingChild, newChild) {\n        existingChild.copyState(newChild);\n        return existingChild;\n    }\n\n    getElementKeyMap(elements) {\n        if (!elements || !elements.length) {\n            return;\n        }\n        let childrenKeyMap = new Map();\n\n        for (let i = 0; i < elements.length; i += 1) {\n            let childKey = (elements[i].options && elements[i].options.key) || (\"autokey\" + i);\n\n            childrenKeyMap.set(childKey, elements[i]);\n        }\n\n        return childrenKeyMap;\n    }\n\n    getChildrenToRender() {\n        return this.render();\n    }\n\n    getChildrenForRedraw() {\n        UI.renderingStack.push(this);\n        let children = unwrapArray(this.getChildrenToRender());\n        UI.renderingStack.pop();\n        return children;\n    }\n\n    redraw() {\n        if (!this.node) {\n            console.error(\"Element not yet mounted. Redraw aborted!\", this);\n            return false;\n        }\n\n        let newChildren = this.getChildrenForRedraw();\n\n        if (newChildren === this.children) {\n            for (let i = 0; i < newChildren.length; i += 1) {\n                newChildren[i].redraw();\n            }\n            this.applyNodeAttributes();\n            this.applyRef();\n            return true;\n        }\n\n        let domNode = this.node;\n        let childrenKeyMap = this.getElementKeyMap(this.children);\n\n        for (let i = 0; i < newChildren.length; i++) {\n            let newChild = newChildren[i];\n            let prevChildNode = (i > 0) ? newChildren[i - 1].node : null;\n            let currentChildNode = (prevChildNode) ? prevChildNode.nextSibling : domNode.firstChild;\n\n            // Not a UIElement, to be converted to a TextElement\n            if (!newChild.getNodeType) {\n                newChild = newChildren[i] = new UI.TextElement(newChild);\n            }\n\n            let newChildKey = (newChild.options && newChild.options.key) || (\"autokey\" + i);\n            let existingChild = childrenKeyMap && childrenKeyMap.get(newChildKey);\n\n            if (existingChild && newChildren[i].canOverwrite(existingChild)) {\n                // We're replacing an existing child element, it might be the very same object\n                if (existingChild !== newChildren[i]) {\n                    newChildren[i] = this.overwriteChild(existingChild, newChildren[i]);\n                }\n                newChildren[i].redraw();\n                if (newChildren[i].node !== currentChildNode) {\n                    domNode.insertBefore(newChildren[i].node, currentChildNode);\n                }\n            } else {\n                // Getting here means we are not replacing anything, should just render\n                newChild.mount(this, currentChildNode);\n            }\n        }\n\n        if (this.children.length) {\n            // Remove children that don't need to be here\n            let newChildrenSet = new Set(newChildren);\n\n            for (let i = 0; i < this.children.length; i += 1) {\n                if (!newChildrenSet.has(this.children[i])) {\n                    this.children[i].destroyNode();\n                }\n            }\n        }\n\n        this.children = newChildren;\n\n        this.applyNodeAttributes();\n\n        this.applyRef();\n\n        return true;\n    }\n\n    getOptionsAsNodeAttributes() {\n        return setObjectPrototype(this.options, NodeAttributes);\n    }\n\n    getNodeAttributes(returnCopy=true) {\n        if (returnCopy) {\n            return new NodeAttributes(this.options);\n        } else {\n            return this.getOptionsAsNodeAttributes();\n        }\n    }\n\n    extraNodeAttributes(attr) {}\n\n    applyNodeAttributes() {\n        let attr;\n        if (this.extraNodeAttributes != NOOP_FUNCTION) {\n            // Create a copy of options, that is modifiable\n            attr = this.getNodeAttributes(true);\n            this.extraNodeAttributes(attr);\n        } else {\n            attr = this.getNodeAttributes(false);\n        }\n        attr.apply(this.node, this.constructor.domAttributesMap);\n    }\n\n    setAttribute(key, value) {\n        this.getOptionsAsNodeAttributes().setAttribute(key, value, this.node, this.constructor.domAttributesMap);\n    }\n\n    setStyle(key, value) {\n        this.getOptionsAsNodeAttributes().setStyle(key, value, this.node);\n    }\n\n    removeStyle(key) {\n        this.getOptionsAsNodeAttributes().removeStyle(key, this.node);\n    }\n\n    addClass(className) {\n        this.getOptionsAsNodeAttributes().addClass(className, this.node);\n    }\n\n    removeClass(className) {\n        this.getOptionsAsNodeAttributes().removeClass(className, this.node);\n    }\n\n    hasClass(className) {\n        return this.getOptionsAsNodeAttributes().hasClass(className);\n    }\n\n    toggleClass(className) {\n        if (!this.hasClass(className)) {\n            this.addClass(className);\n        } else {\n            this.removeClass(className);\n        }\n    }\n\n    get styleSheet() {\n        return this.getStyleSheet();\n    }\n\n    set styleSheet(value) {\n        this.options.styleSheet = value;\n        this.redraw();\n    }\n\n    addListenersFromOptions() {\n        for (const key in this.options) {\n            if (typeof key === \"string\" && key.startsWith(\"on\") && key.length > 2) {\n                const eventType = key.substring(2);\n\n                const addListenerMethodName = \"add\" + eventType + \"Listener\";\n                const handlerMethodName = \"on\" + eventType + \"Handler\";\n\n                // The handlerMethod might have been previously added\n                // by a previous call to this function or manually by the user\n                if (typeof this[addListenerMethodName] === \"function\" && !this.hasOwnProperty(handlerMethodName)) {\n                    this[handlerMethodName] = (event) => {\n                        UI.event = event;\n                        if (this.options[key]) {\n                            // TODO: arguments should be (event, this)!\n                            this.options[key](this, event);\n                        }\n                    };\n\n                    // Actually add the listener\n                    this[addListenerMethodName](this[handlerMethodName]);\n                }\n            }\n        }\n    }\n\n    refLink(name) {\n        return {parent: this, name: name};\n    }\n\n    refLinkArray(arrayName, index) {\n        if (!this.hasOwnProperty(arrayName)) {\n            this[arrayName] = [];\n        }\n        return {parent: this[arrayName], name: index};\n    }\n\n    bindToNode(node, doRedraw) {\n        this.node = node;\n        if (doRedraw) {\n            this.clearNode();\n            this.redraw();\n        }\n        return this;\n    }\n\n    mount(parent, nextSiblingNode) {\n        if (!parent.node) {\n            parent = new UI.Element().bindToNode(parent);\n        }\n        this.parent = parent;\n        if (this.node) {\n            parent.insertChildNodeBefore(this, nextSiblingNode);\n            this.dispatch(\"changeParent\", this.parent);\n            return;\n        }\n\n        this.createNode();\n        this.redraw();\n\n        parent.insertChildNodeBefore(this, nextSiblingNode);\n\n        this.addListenersFromOptions();\n\n        this.onMount();\n    }\n\n    // You need to overwrite the next child manipulation rutines if this.options.children !== this.children\n    appendChild(child) {\n        // TODO: the next check should be done with a decorator\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle appendChild, you need to implement it for \" + this.constructor;\n        }\n        this.options.children.push(child);\n        child.mount(this, null);\n        return child;\n    }\n\n    insertChild(child, position) {\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle insertChild, you need to implement it for \" + this.constructor;\n        }\n        position = position || 0;\n\n        this.options.children.splice(position, 0, child);\n\n        const nextChildNode = position + 1 < this.options.children.length ? this.children[position + 1].node : null;\n\n        child.mount(this, nextChildNode);\n\n        return child;\n    }\n\n    eraseChild(child, destroy = true) {\n        let index = this.options.children.indexOf(child);\n\n        if (index < 0) {\n            // child not found\n            return null;\n        }\n        return this.eraseChildAtIndex(index, destroy);\n    }\n\n    eraseChildAtIndex(index, destroy=true) {\n        if (index < 0 || index >= this.options.children.length) {\n            console.error(\"Erasing child at invalid index \", index, this.options.children.length);\n            return;\n        }\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle eraseChild, you need to implement it for \" + this.constructor;\n        }\n        let erasedChild = this.options.children.splice(index, 1)[0];\n        if (destroy) {\n            erasedChild.destroyNode();\n        } else {\n            this.node.removeChild(erasedChild.node);\n        }\n        return erasedChild;\n    }\n\n    eraseAllChildren() {\n        while (this.children.length > 0) {\n            this.eraseChildAtIndex(this.children.length - 1);\n        }\n    }\n\n    show() {\n        this.removeClass(\"hidden\");\n    }\n\n    hide() {\n        this.addClass(\"hidden\");\n    }\n\n    insertChildNodeBefore(childElement, nextSiblingNode) {\n        this.node.insertBefore(childElement.node, nextSiblingNode);\n    }\n\n    // TODO: should be renamed emptyNode()\n    clearNode() {\n        while (this.node && this.node.lastChild) {\n            this.node.removeChild(this.node.lastChild);\n        }\n    }\n\n    isInDocument() {\n        return document.body.contains(this.node);\n    }\n\n    // TODO: this method also doesn't belong here\n    getWidthOrHeight(parameter) {\n        let node = this.node;\n        if (!node) {\n            return 0;\n        }\n        let value = parseFloat(parameter === \"width\" ? node.offsetWidth : node.offsetHeight);\n        return value || 0;\n    }\n\n    getHeight() {\n        return this.getWidthOrHeight(\"height\");\n    };\n\n    getWidth() {\n        return this.getWidthOrHeight(\"width\");\n    }\n\n    setHeight(value) {\n        this.setStyle(\"height\", suffixNumber(value, \"px\"));\n        this.dispatch(\"resize\");\n    };\n\n    setWidth(value) {\n        this.setStyle(\"width\", suffixNumber(value, \"px\"));\n        this.dispatch(\"resize\");\n    }\n\n    addNodeListener(name, callback, ...args) {\n        this.node.addEventListener(name, callback, ...args);\n        const handler = {\n            remove: () => {\n                this.removeNodeListener(name, callback, ...args);\n            }\n        };\n        this.addCleanupJob(handler);\n        return handler;\n    }\n\n    removeNodeListener(name, callback) {\n        this.node.removeEventListener(name, callback);\n    }\n\n    // TODO: methods can be automatically generated by addNodeListener(UI.Element, \"dblclick\", \"DoubleClick\") for instance\n    addClickListener(callback) {\n        return this.addNodeListener(\"click\", callback);\n    }\n\n    removeClickListener(callback) {\n        this.removeNodeListener(\"click\", callback);\n    }\n\n    addDoubleClickListener(callback) {\n        return this.addNodeListener(\"dblclick\", callback);\n    }\n\n    removeDoubleClickListener(callback) {\n        this.removeNodeListener(\"dblclick\", callback);\n    }\n\n    addChangeListener(callback) {\n        return this.addNodeListener(\"change\", callback);\n    }\n}\n\nUI.createElement = function (tag, options, ...children) {\n    if (!tag) {\n        console.error(\"Create element needs a valid object tag, did you mistype a class name?\");\n        return;\n    }\n\n    options = options || {};\n\n    options.children = unwrapArray(children);\n\n    if (options.ref) {\n        if (typeof options.ref === \"string\") {\n            if (UI.renderingStack.length > 0) {\n                options.ref = {\n                    parent: UI.renderingStack[UI.renderingStack.length - 1],\n                    name: options.ref\n                };\n            } else {\n                throw Error(\"Failed to automatically link ref, there needs to be an element in the rendering stack\");\n            }\n        }\n\n        if (options.key) {\n            console.error(\"Warning! UI Element cannot have both a key and a ref fieldname. Key will be overriden.\\n\" +\n                          \"Are you using the options from another object? Shame!\", options);\n        }\n\n        options.key = \"_ref\" + options.ref.name;\n    }\n\n    if (options.hasOwnProperty(\"class\")) {\n        console.error(\"Invalid UI Element attribute: class. Did you mean className?\");\n    }\n\n    if (typeof tag === \"string\") {\n        options.nodeType = tag;\n        tag = UIElement;\n    }\n\n    return new tag(options);\n};\n\nUIElement.domAttributesMap = NodeAttributes.defaultAttributesMap;\n\n// Explicitly know that extraNodeAttributes doesn't do anything, but have it to be callable when doing inheritance\nUIElement.prototype.extraNodeAttributes = NOOP_FUNCTION;\n\nUI.Element = UIElement;\n\nUI.str = function (value) {\n    return new UI.TextElement(value);\n};\n\n// Keep a map for every base class, and for each base class keep a map for each nodeType, to cache classes\nlet primitiveMap = new WeakMap();\n\nUI.Primitive = (BaseClass, nodeType) => {\n    if (!nodeType) {\n        nodeType = BaseClass;\n        BaseClass = UI.Element;\n    }\n    let baseClassPrimitiveMap = primitiveMap.get(BaseClass);\n    if (!baseClassPrimitiveMap) {\n        baseClassPrimitiveMap = new Map();\n        primitiveMap.set(BaseClass, baseClassPrimitiveMap);\n    }\n    let resultClass = baseClassPrimitiveMap.get(nodeType);\n    if (resultClass) {\n        return resultClass;\n    }\n    resultClass = class Primitive extends BaseClass {\n        getNodeType() {\n            return nodeType;\n        }\n    };\n    baseClassPrimitiveMap.set(nodeType, resultClass);\n    return resultClass;\n};\n\nexport {UIElement, UI};\n","export const Orientation = {\n    HORIZONTAL: 1,\n    VERTICAL: 2,\n};\n\nexport const Direction = {\n    UP: \"up\",\n    LEFT: \"left\",\n    DOWN: \"down\",\n    RIGHT: \"right\",\n};\n\nexport const Level = {\n    NONE: null,\n    DEFAULT: \"default\",\n    INFO: \"info\",\n    PRIMARY: \"primary\",\n    SECONDARY: \"secondary\",\n    SUCCESS: \"success\",\n    WARNING: \"warning\",\n    DANGER: \"danger\",\n    ERROR: \"danger\",\n};\n\nexport const Size = {\n    NONE: null,\n    EXTRA_SMALL: \"xs\",\n    SMALL: \"sm\",\n    MEDIUM: \"default\",\n    DEFAULT: \"default\",\n    LARGE: \"lg\",\n    EXTRA_LARGE: \"xl\",\n};\n\nexport const VoteStatus = {\n    NONE: null,\n    LIKE: 1,\n    DISLIKE: -1\n};\n\nexport const ActionStatus = {\n    DEFAULT: 1,\n    RUNNING: 2,\n    SUCCESS: 3,\n    FAILED: 4,\n};\n","import {UI} from \"./UIBase\";\n\nexport function getOffset(node) {\n    if (node instanceof UI.Element) {\n        node = node.node;\n    }\n    if (!node) {\n        return {left: 0, top: 0};\n    }\n    let nodePosition = node.style && node.style.position;\n    let left = 0;\n    let top = 0;\n    while (node) {\n        let nodeStyle = node.style || {};\n        if (nodePosition === \"absolute\" && nodeStyle.position === \"relative\") {\n            return {left: left, top: top};\n        }\n        left += node.offsetLeft;\n        top += node.offsetTop;\n        node = node.offsetParent;\n    }\n    return {left: left, top: top};\n}\n\nexport function getComputedStyle(node, attribute) {\n    if (node instanceof UI.Element) {\n        node = node.node;\n    }\n    let computedStyle = window.getComputedStyle(node, null);\n    return (attribute) ? computedStyle.getPropertyValue(attribute) : computedStyle;\n}\n\nexport function changeParent(element, newParent) {\n    const currentParent = element.parent;\n    currentParent.eraseChild(element, false);\n    newParent.appendChild(element);\n}\n","import {UI} from \"./UIBase\";\nimport {dashCase} from \"../base/Utils\";\nimport {NodeAttributes, defaultToPixelsAttributes} from \"./NodeAttributes\";\n\n// TODO: should this be actually better done throught the dynamic CSS API, without doing through the DOM?\n// So far it's actually better like this, since browsers like Chrome allow users to edit classes\nclass StyleInstance extends UI.TextElement {\n    constructor(options) {\n        super(options);\n        this.setOptions(options);\n    }\n\n    setOptions(options) {\n        this.options = options;\n        this.options.attributes = this.options.attributes || {};\n        this.attributes = new Map();\n        for (let key in this.options.attributes) {\n            this.attributes.set(key, this.options.attributes[key]);\n        }\n    }\n\n    getValue() {\n        let str = this.options.selector + \"{\";\n        for (let [key, value] of this.attributes) {\n            if (typeof value === \"function\") {\n                value = value();\n            }\n            // Ignore keys with null or undefined value\n            if (value == null) {\n                continue;\n            }\n\n            key = dashCase(key);\n\n            // If it's a size property, and the value is a number, assume it's in pixels\n            if ((value instanceof Number || typeof value === \"number\") &&\n                value != 0 && defaultToPixelsAttributes.has(key)) {\n                value = value + \"px\";\n            }\n\n            // TODO: if key starts with vendor-, replace it with the browser specific one (and the plain one)\n            str += key + \":\" + value + \";\";\n        }\n        return str + \"}\";\n    }\n\n    copyState(element) {\n        this.setOptions(element.options);\n    }\n\n    setAttribute(name, value) {\n        this.attributes.set(name, value);\n        this.redraw();\n    }\n\n    deleteAttribute(name) {\n        this.attributes.delete(name);\n        this.redraw();\n    }\n}\n\nclass StyleElement extends UI.Primitive(\"style\") {\n    getNodeAttributes() {\n        // TODO: allow custom style attributes (media, scoped, etc)\n        let attr = new NodeAttributes({});\n        if (this.options.name) {\n            attr.setAttribute(\"name\", this.options.name);\n        }\n        return attr;\n    }\n}\n\nconst ALLOWED_SELECTOR_STARTS = new Set([\":\", \">\", \" \", \"+\", \"~\", \"[\", \".\"]);\n\n// TODO: figure out how to work with animation frames, this only creates a wrapper class\nclass DynamicStyleElement extends StyleElement {\n    toString() {\n        return this.getClassName();\n    }\n\n    // Overwrite valueOf, so when using the + operator should seamlessly concatenate to create a valid className\n    valueOf() {\n        return \" \" + this.getClassName();\n    }\n\n    // TODO: use a cached decorator here\n    getClassName() {\n        if (this.className) {\n            return this.className;\n        }\n        this.constructor.instanceCounter = (this.constructor.instanceCounter || 0) + 1;\n        this.className = (this.options.name ||  \"autocls\") + \"-\" + this.constructor.instanceCounter;\n        return this.className;\n    }\n\n    getSelector() {\n        return this.options.selectorName || \".\" + this.getClassName();\n    }\n\n    // A cyclic dependency in the style object will cause an infinite loop here\n    getStyleInstances(selector, style) {\n        let result = [];\n        let ownStyle = {}, haveOwnStyle = false;\n        for (let key in style) {\n            let value = style[key];\n            if (value == null) {\n                continue;\n            }\n            let isProperValue = (typeof value === \"string\" || value instanceof String\n                              || typeof value === \"number\" || value instanceof Number\n                              || typeof value === \"function\");\n            if (isProperValue) {\n                ownStyle[key] = value;\n                haveOwnStyle = true;\n            } else {\n                // Check that this actually is a valid subselector\n                let firstChar = String(key).charAt(0);\n                if (!ALLOWED_SELECTOR_STARTS.has(firstChar)) {\n                    console.error(\"First character of your selector is invalid.\");\n                    continue;\n                }\n                // TODO: maybe optimize for waste here?\n                let subStyle = this.getStyleInstances(selector + key, value);\n                result.push(...subStyle);\n            }\n        }\n\n        if (haveOwnStyle) {\n            result.unshift(new StyleInstance({selector: selector, key: selector, attributes: ownStyle}));\n        }\n        return result;\n    }\n\n    render() {\n        let style = this.options.style || {};\n        if (typeof style === \"function\") {\n            style = style();\n        }\n        if (style.selectorName) {\n            this.options.selectorName = style.selectorName;\n            delete style.selectorName;\n        }\n        return this.getStyleInstances(this.getSelector(), style);\n    }\n\n    setStyle(key, value) {\n        this.options.style[key] = value;\n        this.children[0].setAttribute(key, value);\n    }\n\n    setSubStyle(selector, key, value) {\n        throw Error(\"Implement me!\");\n    }\n\n    getStyleObject() {\n        return this.options.style;\n    }\n}\n\nclass KeyframeElement extends StyleElement {\n    toString() {\n        return this.getKeyframeName();\n    }\n\n    getKeyframeName() {\n        if (this.keyframeName) {\n            return this.keyframeName;\n        }\n        this.constructor.instanceCounter = (this.constructor.instanceCounter || 0) + 1;\n        this.keyframeName = (this.options.name || \"autokeyframe\") + \"-\" + this.constructor.instanceCounter;\n        return this.keyframeName;\n    }\n\n    getValue(style) {\n        let str = \"{\";\n        for (let key in style) {\n            let value = style[key];\n            if (typeof value === \"function\") {\n                value = value();\n            }\n            if (value == null) {\n                continue;\n            }\n            str += dashCase(key) + \":\" + value + \";\";\n        }\n        return str + \"}\";\n    }\n\n    getKeyframeInstance(keyframe) {\n        let result = \"{\";\n        for (let key in keyframe) {\n            let value = keyframe[key];\n            result += key + \" \" + this.getValue(value);\n        }\n        return result + \"}\";\n    }\n\n    render() {\n        return \"@keyframes \" + this.getKeyframeName() + this.getKeyframeInstance(this.options.keyframe || {});\n    }\n}\n\nexport {StyleInstance, StyleElement, KeyframeElement, DynamicStyleElement}\n","export function isDescriptor(desc) {\n    if (!desc || !desc.hasOwnProperty) {\n        return false;\n    }\n\n    const keys = ['value', 'initializer', 'get', 'set'];\n\n    for (let key of keys) {\n        if (desc.hasOwnProperty(key)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function decorate(handleDescriptor, entryArgs) {\n    if (isDescriptor(entryArgs[entryArgs.length - 1])) {\n        return handleDescriptor(...entryArgs, []);\n    } else {\n        return function () {\n            return handleDescriptor(...arguments, entryArgs);\n        };\n    }\n}\n\nexport function createDefaultSetter(key) {\n    return function set(newValue) {\n        Object.defineProperty(this, key, {\n            configurable: true,\n            writable: true,\n            // IS enumerable when reassigned by the outside word\n            enumerable: true,\n            value: newValue\n        });\n\n        return newValue;\n    };\n}\n","import {decorate, createDefaultSetter} from './Utils';\n\nfunction handleDescriptor(target, key, descriptor) {\n    const { configurable, enumerable, initializer, value } = descriptor;\n    // The \"key\" property is constructed with accessor descriptor (getter / setter),\n    // but the first time the getter is used, the property is reconstructed with data descriptor.\n    return {\n        configurable,\n        enumerable,\n\n        get() {\n            // This happens if someone accesses the property directly on the prototype\n            if (this === target) {\n                return;\n            }\n\n            const ret = initializer ? initializer.call(this) : value;\n\n            Object.defineProperty(this, key, {\n                configurable,\n                enumerable,\n                writable: true,\n                value: ret\n            });\n\n            return ret;\n        },\n\n        set: createDefaultSetter(key)\n    };\n}\n\nexport function lazyInitialize(...args) {\n    return decorate(handleDescriptor, args);\n}\n\nlet lazyInit = lazyInitialize;\n\nexport {lazyInit};\n","import {deepCopy} from \"../base/Utils\";\nimport {decorate} from \"./Utils\";\nimport {lazyInit} from \"./LazyInitialize\";\n\nfunction evaluateStyleRuleObject(target, initializer, value, options) {\n    let result = initializer ? initializer.call(target) : value;\n    if (typeof result === \"function\") {\n        result = result();\n    }\n    if (Array.isArray(result)) {\n        result = Object.assign({}, ...result);\n    }\n    return result;\n}\n\nfunction getStyleRuleKey(key) {\n    return \"__style__\" + key;\n}\n\nfunction getKeyframesRuleKey(key) {\n    return \"__keyframes__\" + key;\n}\n\n// TODO: this function can be made a lot more generic, to wrap plain object initializer with inheritance support\nfunction styleRuleWithOptions() {\n    let options = Object.assign({}, ...arguments); //Simpler notation?\n    // TODO: Remove this if you don't think it's appropiate, I thought a warning would do no harm\n    if (!options.targetMethodName) {\n        console.error(\"WARNING: targetMethodName not specified in the options (default is \\\"css\\\")\");\n    }\n    let targetMethodName = options.targetMethodName || \"css\";\n\n    function styleRuleDecorator(target, key, descriptor) {\n        const {initializer, value} = descriptor;\n\n        descriptor.objInitializer = function () {\n            let style = evaluateStyleRuleObject(this, initializer, value, options);\n\n            // TODO: a bit of a hack, clean this up\n            style[\"prefferedClassName\"] = key;\n\n            if (options.selector) {\n                style[\"selectorName\"] = options.selector;\n            }\n\n            if (options.inherit) {\n                // Get the value we set in the prototype of the parent class\n                let parentDesc = Object.getPrototypeOf(target)[getStyleRuleKey(key)];\n                if (!parentDesc) {\n                    console.error(\"You're trying to inherit a rule that isn't implemented in the parent: \" + key);\n                }\n                let parentStyle = evaluateStyleRuleObject(this, parentDesc.objInitializer, parentDesc.value, options);\n                style = deepCopy({}, parentStyle, style);\n                return style;\n            }\n\n            return style;\n        };\n\n        // Change the prototype of this object to be able to access the old descriptor/value\n        target[options.getKey(key)] = Object.assign({}, descriptor);\n\n        descriptor.initializer = function () {\n            let style = descriptor.objInitializer.call(this);\n            return this[targetMethodName](style);\n        };\n\n        delete descriptor.value;\n\n        return lazyInit(target, key, descriptor);\n    }\n\n    return styleRuleDecorator;\n}\n\n// TODO: Second argument is mostly useless (implied from targetMethodName)\nlet styleRule = styleRuleWithOptions({\n    targetMethodName: \"css\",\n    getKey: getStyleRuleKey,\n    inherit: false,\n});\n\nlet styleRuleInherit = styleRuleWithOptions({\n    targetMethodName: \"css\",\n    getKey: getStyleRuleKey,\n    inherit: true,\n});\n\nexport function styleRuleCustom(options) {\n    return styleRuleWithOptions(Object.assign({\n        targetMethodName: \"css\",\n        getKey: getStyleRuleKey,\n        inherit: false,\n    }, options));\n}\n\nlet keyframesRule = styleRuleWithOptions({\n    targetMethodName: \"keyframes\",\n    getKey: getKeyframesRuleKey,\n    inherit: false,\n});\n\n// TODO: This is currently not working (I think)\nlet keyframesRuleInherit = styleRuleWithOptions({\n    targetMethodName: \"keyframes\",\n    getKey: getKeyframesRuleKey,\n    inherit: true,\n});\n\nexport {styleRule, styleRuleInherit, keyframesRule, keyframesRuleInherit, styleRuleWithOptions}\n\n","import {StyleElement, KeyframeElement, DynamicStyleElement} from \"./StyleElement\";\nimport {Dispatchable} from \"../base/Dispatcher\";\n\n// Class meant to group multiple classes inside a single <style> element, for convenience\n// TODO: pattern should be more robust, to be able to only update classes\nclass StyleSheet extends Dispatchable {\n    constructor(options={}) {\n        super();\n        this.options = Object.assign({\n            updateOnResize: false,\n            parent: document.head,\n            name: options.name || this.constructor.getElementName(), // call only if needed\n        }, options);\n        this.elements = new Set();\n        if (this.options.updateOnResize) {\n            this.attachEventListener(window, \"resize\", () => {\n                this.update();\n            });\n        }\n        if (!this.options.delayedMount) {\n            this.ensureMounted();\n        }\n        this.getTheme().addStyleSheet(this);\n    }\n\n    ensureMounted() {\n        if (this.styleElement) {\n            return;\n        }\n        const styleElementOptions = {\n            children: [],\n            name: this.options.name,\n        };\n        this.styleElement = StyleElement.create(this.options.parent, styleElementOptions);\n    }\n\n    static getInstance() {\n        if (!this.hasOwnProperty(\"singletonInstance\")) {\n            this.singletonInstance = new this();\n        }\n        return this.singletonInstance;\n    }\n\n    // Generate an instance, and also make sure to instantiate all style elements\n    static initialize() {\n        const styleSheet = this.getInstance();\n\n        for (const key in this.prototype) {\n            // Just hit the getter to instantiate the style\n            if (!styleSheet[key]) {\n                console.log(\"This is here to prevent a bundling optimization bug\");\n            }\n        }\n    }\n\n    static getElementName() {\n        this.elementNameCounter = (this.elementNameCounter || 0) + 1;\n        let name = this.name;\n        if (this.elementNameCounter > 1) {\n            name += \"-\" + this.elementNameCounter;\n        }\n        return name;\n    }\n\n    getTheme() {\n        return this.options.theme || this.constructor.theme;\n    }\n\n    setTheme(theme) {\n        this.options.theme = theme;\n    }\n\n    getThemeProperty(key, defaultValue) {\n        const theme = this.getTheme();\n        return (theme && theme.getProperty(key, defaultValue)) || defaultValue;\n    }\n\n    get themeProperties() {\n        const theme = this.getTheme();\n        return (theme && theme.getProperties()) || {};\n    }\n\n    ensureFirstUpdate() {\n        if (this._firstUpdate) {\n            return;\n        }\n\n        this._firstUpdate = true;\n        this.ensureMounted();\n        // Call all listeners before update for the very first time, to update any possible variables\n        this.dispatch(\"beforeUpdate\", this);\n    }\n\n    css(style) {\n        this.ensureFirstUpdate();\n        if (arguments.length > 1) {\n            style = Object.assign({}, ...arguments);\n        }\n        let elementOptions = {style: style};\n\n        // Get the preferred name, maybe cleanup later\n        const nameKey = \"prefferedClassName\";\n        if (style[nameKey]) {\n            elementOptions.name = style[nameKey];\n            delete style[nameKey];\n        }\n\n        let element = new DynamicStyleElement(elementOptions);\n        this.elements.add(element);\n        let styleInstances = element.render();\n        for (let styleInstance of styleInstances) {\n            this.styleElement.appendChild(styleInstance);\n        }\n        return element;\n    }\n\n    keyframes(keyframes) {\n        this.ensureFirstUpdate();\n        // This is not really necessarily as I don't believe it will ever be used\n        if (arguments.length > 1) {\n            keyframes = Object.assign({}, ...arguments);\n        }\n        let element = new KeyframeElement({keyframe: keyframes});\n        this.elements.add(element);\n        this.styleElement.appendChild(element);\n        return element;\n    }\n\n    addBeforeUpdateListener(callback) {\n        return this.addListener(\"beforeUpdate\", callback);\n    }\n\n    update() {\n        if (!this._firstUpdate) {\n            return;\n        }\n        this.dispatch(\"beforeUpdate\", this);\n\n        for (const key of Object.keys(this)) {\n            if (this[key] instanceof DynamicStyleElement) {\n                const desc = this[\"__style__\" + key];\n                const func = desc && desc.objInitializer;\n                if (func) {\n                    this[key].options.style = func.call(this);\n                }\n            }\n        }\n\n        let children = [];\n        for (let value of this.elements) {\n            if (value instanceof StyleElement) {\n                let styleElements = value.render();\n                children.push(...styleElements);\n            }\n        }\n        this.styleElement.options.children = children;\n        this.styleElement.redraw();\n    }\n}\n\n// Helper class, meant to only keep one class active for an element from a set of classes\n// TODO: move to another file\nclass ExclusiveClassSet {\n    constructor(classList, element) {\n        // TODO: check that classList is an array (or at least iterable)\n        this.classList = classList;\n        this.element = element;\n    }\n\n    static fromObject(obj, element) {\n        let classList = [];\n        for (let key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                classList.push(obj[key]);\n            }\n        }\n        return Object.assign(new ExclusiveClassSet(classList, element), obj);\n    }\n\n    set(element, classInstance) {\n        if (!classInstance) {\n            classInstance = element;\n            element = this.element;\n        }\n        for (let cls of this.classList) {\n            if (cls === classInstance) {\n                element.addClass(cls);\n            } else {\n                element.removeClass(cls);\n            }\n        }\n    }\n}\n\nfunction wrapCSS(context, style) {\n    return {\n        [context]: style\n    };\n}\n\nfunction hover(style) {\n    return wrapCSS(\":hover\", style);\n}\n\nfunction active(style) {\n    return wrapCSS(\":active\", style);\n}\n\nfunction focus(style) {\n    return wrapCSS(\":focus\", style);\n}\n\nlet styleMap = new WeakMap();\n\nexport {StyleSheet, ExclusiveClassSet, styleMap, wrapCSS, hover, focus, active};\n\nexport * from \"../decorators/Style\";\n","// Primitive utils for wrapping browser info\nclass Device {\n    static isTouchDevice() {\n        if (!this.hasOwnProperty(\"_isTouchDevice\")) {\n            this._isTouchDevice = !!((\"createTouch\" in window.document) ||\n                                            (navigator.MaxTouchPoints > 0) ||\n                                            (navigator.msMaxTouchPoints > 0) ||\n                                            (\"ontouchstart\" in window));\n        }\n        return this._isTouchDevice;\n    }\n\n    static isMobileDevice() {\n        if (!this.hasOwnProperty(\"_isMobileDevice\")) {\n            const mobileDevices = [\"Android\", \"webOS\", \"iPad\", \"iPhone\", \"iPod\", \"BlackBerry\", \"Windows Phone\"];\n            this._isMobileDevice = false;\n            for (let device of mobileDevices) {\n                if (navigator.userAgent.indexOf(device) !== -1) {\n                    this._isMobileDevice = true;\n                }\n            }\n        }\n        return this._isMobileDevice;\n    }\n\n    static getEventTouchIdentifier(event) {\n        return Math.min(...[...event.touches].map(touch => touch.identifier));\n    }\n\n    static getEventTouch(event) {\n        const identifier = this.getEventTouchIdentifier(event);\n        return [...event.touches].find(touch => touch.identifier === identifier);\n    }\n\n    static getEventCoord(event, axis, reference=\"client\") {\n        let coordName = reference + axis;\n        if (event[coordName]) {\n            return event[coordName];\n        }\n        if (event.touches) {\n            return this.getEventTouch(event)[coordName];\n        }\n        if (event.originalEvent) {\n            return this.getEventCoord(event.originalEvent, axis, reference);\n        }\n\n        console.warn(\"Couldn't find coordinates for event. Maybe wrong reference point? (client/page/screen)\");\n    }\n\n    static getEventX(event, reference=\"client\") {\n        return this.getEventCoord(event, \"X\", reference);\n    }\n\n    static getEventY(event, reference=\"client\") {\n        return this.getEventCoord(event, \"Y\", reference);\n    }\n\n    static getBrowser() {\n        // TODO: should try to use navigator\n        if ((!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0) {\n            return \"Opera\";\n        }\n        if (typeof InstallTrigger !== 'undefined') {\n            return \"Firefox\";\n        }\n        if (Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0) {\n            return \"Safari\";\n        }\n        if (document.documentMode) {\n            return \"Internet Explorer\";\n        }\n        if (window.StyleMedia) {\n            return \"Edge\";\n        }\n        if (window.chrome && window.chrome.webstore) {\n            return \"Chrome\";\n        }\n        return \"Unknown\";\n    }\n\n    static supportsEvent(eventName) {\n        if (!this.cachedSupportedValues.has(eventName)) {\n            var element = document.createElement(\"div\");\n            let onEventName = \"on\" + eventName;\n            var isSupported = (onEventName in element);\n            if (!isSupported) {\n                element.setAttribute(onEventName, \"return;\");\n                isSupported = typeof element[onEventName] === \"function\";\n            }\n            element = null;\n            this.cachedSupportedValues.set(eventName, isSupported);\n        }\n        return this.cachedSupportedValues.get(eventName);\n    }\n}\n\nDevice.cachedSupportedValues = new Map();\n\nexport {Device};","import {Device} from \"../base/Device\";\n\nexport const Draggable = (BaseClass) => class Draggable extends BaseClass {\n    _clickCallbacks = new Map();\n    _clickDragListeners = new Map();\n\n    addClickListener(callback) {\n        if (this._clickCallbacks.has(callback)) {\n            return;\n        }\n        let callbackWrapper = () => {\n            if (this._okForClick) {\n                callback();\n            }\n        };\n        this._clickCallbacks.set(callback, callbackWrapper);\n        super.addClickListener(callbackWrapper);\n\n        if (this._clickDragListeners.has(callback)) {\n            return;\n        }\n        let clickDragListener = {\n            onStart: () => { this.dragForClickStarted(); },\n            onDrag: () => { this.dragForClick(); }\n        };\n        this._clickDragListeners.set(callback, clickDragListener);\n        this.addDragListener(clickDragListener);\n    }\n\n    dragForClickStarted() {\n        this._okForClick = true;\n    }\n\n    dragForClick() {\n        this._okForClick = false;\n    }\n\n    removeClickListener(callback) {\n        let callbackWrapper = this._clickCallbacks.get(callback);\n        if (callbackWrapper) {\n            this._clickCallbacks.delete(callback);\n            super.removeClickListener(callbackWrapper);\n        }\n        if (!this._clickDragListeners) {\n            return;\n        }\n        let clickDragListener = this._clickDragListeners.get(callback);\n        if (clickDragListener) {\n            this._clickDragListeners.delete(callback);\n            this.removeDragListener(clickDragListener);\n        }\n    }\n\n    createDragListenerWrapper(listeners) {\n        let listenerWrapper = Object.assign({}, listeners);\n\n        listenerWrapper.onWrapperDrag = (event) => {\n            const eventX = Device.getEventX(event), eventY = Device.getEventY(event);\n\n            let deltaX = eventX - listenerWrapper._lastX;\n            listenerWrapper._lastX = eventX;\n\n            let deltaY = eventY - listenerWrapper._lastY;\n            listenerWrapper._lastY = eventY;\n\n            listeners.onDrag(deltaX, deltaY);\n        };\n\n        listenerWrapper.onWrapperStart = (event) => {\n            listenerWrapper._lastX = Device.getEventX(event);\n            listenerWrapper._lastY = Device.getEventY(event);\n\n            if (listeners.onStart) {\n                listeners.onStart(event);\n            }\n\n            // TODO: Replace with our body\n            document.body.addEventListener(\"mousemove\", listenerWrapper.onWrapperDrag);\n        };\n\n        listenerWrapper.onWrapperEnd = (event) => {\n            if (listeners.onEnd) {\n                listeners.onEnd(event);\n            }\n            // TODO: Replace with our body\n            document.body.removeEventListener(\"mousemove\", listenerWrapper.onWrapperDrag);\n        };\n        return listenerWrapper;\n    }\n\n    createTouchDragListenerWrapper(listeners) {\n        let listenerWrapper = Object.assign({}, listeners);\n\n        listenerWrapper.onWrapperDrag = (event) => {\n            const eventX = Device.getEventX(event), eventY = Device.getEventY(event);\n\n            let deltaX = eventX - listenerWrapper._lastX;\n            listenerWrapper._lastX = eventX;\n\n            let deltaY = eventY - listenerWrapper._lastY;\n            listenerWrapper._lastY = eventY;\n\n            listeners.onDrag(deltaX, deltaY);\n        };\n\n        listenerWrapper.onWrapperStart = (event) => {\n            listenerWrapper._lastX = Device.getEventX(event);\n            listenerWrapper._lastY = Device.getEventY(event);\n            listenerWrapper.touchEventIdentifier = Device.getEventTouchIdentifier(event);\n\n            if (listeners.onStart) {\n                listeners.onStart(event);\n            }\n            event.preventDefault();\n\n            // TODO: Replace with our body\n            document.body.addEventListener(\"touchmove\", listenerWrapper.onWrapperDrag);\n        };\n\n        listenerWrapper.onWrapperEnd = (event) => {\n            if (event.touches.length && Device.getEventTouchIdentifier(event) === listenerWrapper.touchEventIdentifier) {\n                return;\n            }\n            if (listeners.onEnd) {\n                listeners.onEnd(event);\n            }\n            // TODO: Replace with our body\n            document.body.removeEventListener(\"touchmove\", listenerWrapper.onWrapperDrag);\n        };\n        return listenerWrapper;\n    }\n\n    addDragListener(listeners) {\n        let listenerWrapper = this.createDragListenerWrapper(listeners);\n        let touchListenerWrapper = this.createTouchDragListenerWrapper(listeners);\n        this.addNodeListener(\"touchstart\", touchListenerWrapper.onWrapperStart);\n        this.addNodeListener(\"mousedown\", listenerWrapper.onWrapperStart);\n        // TODO: Replace with our body\n        document.body.addEventListener(\"touchend\", touchListenerWrapper.onWrapperEnd);\n        document.body.addEventListener(\"mouseup\", listenerWrapper.onWrapperEnd);\n\n        if (!this.hasOwnProperty(\"_dragListeners\")) {\n            this._dragListeners = [];\n        }\n        this._dragListeners.push(touchListenerWrapper);\n        this._dragListeners.push(listenerWrapper);\n    }\n\n    removeDragListener(listeners) {\n        if (this._dragListeners) {\n            for (let i = this._dragListeners.length - 1; i >= 0; i -= 1) {\n                if (this._dragListeners[i].onStart === listeners.onStart &&\n                    this._dragListeners[i].onDrag === listeners.onDrag &&\n                    this._dragListeners[i].onEnd === listeners.onEnd) {\n\n                    this.removeNodeListener(\"touchstart\", this._dragListeners[i].onWrapperStart);\n                    document.body.removeEventListener(\"touchmove\", this._dragListeners[i].onWrapperDrag);\n                    document.body.removeEventListener(\"touchmove\", this._dragListeners[i].onWrapperEnd);\n                    this.removeNodeListener(\"mousedown\", this._dragListeners[i].onWrapperStart);\n                    document.body.removeEventListener(\"mousemove\", this._dragListeners[i].onWrapperDrag);\n                    document.body.removeEventListener(\"mousemove\", this._dragListeners[i].onWrapperEnd);\n\n                    this._dragListeners.splice(i, 1);\n                }\n            }\n        }\n    }\n};\n","const COLORS_BY_NAME = {\n    aliceblue: \"#f0f8ff\",\n    antiquewhite: \"#faebd7\",\n    aqua: \"#00ffff\",\n    aquamarine: \"#7fffd4\",\n    azure: \"#f0ffff\",\n    beige: \"#f5f5dc\",\n    bisque: \"#ffe4c4\",\n    black: \"#000000\",\n    blanchedalmond: \"#ffebcd\",\n    blue: \"#0000ff\",\n    blueviolet: \"#8a2be2\",\n    brown: \"#a52a2a\",\n    burlywood: \"#deb887\",\n    cadetblue: \"#5f9ea0\",\n    chartreuse: \"#7fff00\",\n    chocolate: \"#d2691e\",\n    coral: \"#ff7f50\",\n    cornflowerblue: \"#6495ed\",\n    cornsilk: \"#fff8dc\",\n    crimson: \"#dc143c\",\n    cyan: \"#00ffff\",\n    darkblue: \"#00008b\",\n    darkcyan: \"#008b8b\",\n    darkgoldenrod: \"#b8860b\",\n    darkgray: \"#a9a9a9\",\n    darkgreen: \"#006400\",\n    darkkhaki: \"#bdb76b\",\n    darkmagenta: \"#8b008b\",\n    darkolivegreen: \"#556b2f\",\n    darkorange: \"#ff8c00\",\n    darkorchid: \"#9932cc\",\n    darkred: \"#8b0000\",\n    darksalmon: \"#e9967a\",\n    darkseagreen: \"#8fbc8f\",\n    darkslateblue: \"#483d8b\",\n    darkslategray: \"#2f4f4f\",\n    darkturquoise: \"#00ced1\",\n    darkviolet: \"#9400d3\",\n    deeppink: \"#ff1493\",\n    deepskyblue: \"#00bfff\",\n    dimgray: \"#696969\",\n    dodgerblue: \"#1e90ff\",\n    firebrick: \"#b22222\",\n    floralwhite: \"#fffaf0\",\n    forestgreen: \"#228b22\",\n    fuchsia: \"#ff00ff\",\n    gainsboro: \"#dcdcdc\",\n    ghostwhite: \"#f8f8ff\",\n    gold: \"#ffd700\",\n    goldenrod: \"#daa520\",\n    gray: \"#808080\",\n    green: \"#008000\",\n    greenyellow: \"#adff2f\",\n    honeydew: \"#f0fff0\",\n    hotpink: \"#ff69b4\",\n    indianred: \"#cd5c5c\",\n    indigo: \"#4b0082\",\n    ivory: \"#fffff0\",\n    khaki: \"#f0e68c\",\n    lavender: \"#e6e6fa\",\n    lavenderblush: \"#fff0f5\",\n    lawngreen: \"#7cfc00\",\n    lemonchiffon: \"#fffacd\",\n    lightblue: \"#add8e6\",\n    lightcoral: \"#f08080\",\n    lightcyan: \"#e0ffff\",\n    lightgoldenrodyellow: \"#fafad2\",\n    lightgray: \"#d3d3d3\",\n    lightgreen: \"#90ee90\",\n    lightpink: \"#ffb6c1\",\n    lightsalmon: \"#ffa07a\",\n    lightseagreen: \"#20b2aa\",\n    lightskyblue: \"#87cefa\",\n    lightslategray: \"#778899\",\n    lightsteelblue: \"#b0c4de\",\n    lightyellow: \"#ffffe0\",\n    lime: \"#00ff00\",\n    limegreen: \"#32cd32\",\n    linen: \"#faf0e6\",\n    magenta: \"#ff00ff\",\n    maroon: \"#800000\",\n    mediumaquamarine: \"#66cdaa\",\n    mediumblue: \"#0000cd\",\n    mediumorchid: \"#ba55d3\",\n    mediumpurple: \"#9370db\",\n    mediumseagreen: \"#3cb371\",\n    mediumslateblue: \"#7b68ee\",\n    mediumspringgreen: \"#00fa9a\",\n    mediumturquoise: \"#48d1cc\",\n    mediumvioletred: \"#c71585\",\n    midnightblue: \"#191970\",\n    mintcream: \"#f5fffa\",\n    mistyrose: \"#ffe4e1\",\n    moccasin: \"#ffe4b5\",\n    navajowhite: \"#ffdead\",\n    navy: \"#000080\",\n    oldlace: \"#fdf5e6\",\n    olive: \"#808000\",\n    olivedrab: \"#6b8e23\",\n    orange: \"#ffa500\",\n    orangered: \"#ff4500\",\n    orchid: \"#da70d6\",\n    palegoldenrod: \"#eee8aa\",\n    palegreen: \"#98fb98\",\n    paleturquoise: \"#afeeee\",\n    palevioletred: \"#db7093\",\n    papayawhip: \"#ffefd5\",\n    peachpuff: \"#ffdab9\",\n    peru: \"#cd853f\",\n    pink: \"#ffc0cb\",\n    plum: \"#dda0dd\",\n    powderblue: \"#b0e0e6\",\n    purple: \"#800080\",\n    red: \"#ff0000\",\n    rosybrown: \"#bc8f8f\",\n    royalblue: \"#4169e1\",\n    saddlebrown: \"#8b4513\",\n    salmon: \"#fa8072\",\n    sandybrown: \"#f4a460\",\n    seagreen: \"#2e8b57\",\n    seashell: \"#fff5ee\",\n    sienna: \"#a0522d\",\n    silver: \"#c0c0c0\",\n    skyblue: \"#87ceeb\",\n    slateblue: \"#6a5acd\",\n    slategray: \"#708090\",\n    snow: \"#fffafa\",\n    springgreen: \"#00ff7f\",\n    steelblue: \"#4682b4\",\n    tan: \"#d2b48c\",\n    teal: \"#008080\",\n    thistle: \"#d8bfd8\",\n    tomato: \"#ff6347\",\n    turquoise: \"#40e0d0\",\n    violet: \"#ee82ee\",\n    wheat: \"#f5deb3\",\n    white: \"#ffffff\",\n    whitesmoke: \"#f5f5f5\",\n    yellow: \"#ffff00\",\n    yellowgreen: \"#9acd32\"\n};\n\n/*\n * This class contains methods for operating with colors. Its objects are kept in hsva format with normalized\n * attributes (each attribute has value between 0 and 1 inclusive), and can be converted from/to rgba.\n */\nclass Color {\n    constructor(color) {\n        if (color) {\n            this.setColor(color);\n        }\n    }\n\n    setColor(color) {\n        this.color = this.constructor.parseColor(color);\n    }\n\n    getColor() {\n        let rgba = this.getRgba();\n        return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3]})`;\n    }\n\n    /*\n     * @param color A color string of the types: native name, hex3, hex6, rgb, rgba, hsl, hsla\n     *              or a Color object, or a hsla color array\n     */\n    static parseColor(color) {\n        if (color instanceof Color) {\n            return color.color;\n        } else if (color instanceof Array) {\n            // Add the alpha parameter at the end\n            if (color.length === 3) {\n                color.push(1);\n            }\n            return color;\n        }\n\n        color = color.trim().toLowerCase();\n\n        // Check if color is given by name\n        if (COLORS_BY_NAME.hasOwnProperty(color)) {\n            color = COLORS_BY_NAME[color];\n        }\n\n        let values = [];\n\n        // Check for hex3 (e.g. \"#f00\")\n        let hex3 = color.match(/^#([0-9a-f]{3})$/i);\n        if (hex3) {\n            values = [\n                parseInt(hex3[1].charAt(0), 16) * 0x11,\n                parseInt(hex3[1].charAt(1), 16) * 0x11,\n                parseInt(hex3[1].charAt(2), 16) * 0x11,\n                1\n            ];\n        }\n\n        // Check for hex6 (e.g. \"#ff0000\")\n        let hex6 = color.match(/^#([0-9a-f]{6})$/i);\n        if (hex6) {\n            values = [\n                parseInt(hex6[1].substr(0, 2), 16),\n                parseInt(hex6[1].substr(2, 2), 16),\n                parseInt(hex6[1].substr(4, 2), 16),\n                1\n            ];\n        }\n\n        // Check for rgba (e.g. \"rgba(255, 0, 0, 0.5)\")\n        let rgba = color.match(/^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+.*\\d*)\\s*\\)$/i);\n        if (rgba) {\n            values = [\n                parseInt(rgba[1]),\n                parseInt(rgba[2]),\n                parseInt(rgba[3]),\n                parseFloat(rgba[4])\n            ];\n        }\n\n        // Check for rgb (e.g. \"rgb(255, 0, 0)\")\n        let rgb = color.match(/^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i);\n        if (rgb) {\n            values = [\n                parseInt(rgb[1]),\n                parseInt(rgb[2]),\n                parseInt(rgb[3]),\n                1\n            ];\n        }\n        return values;\n    }\n\n    // TODO: this should be implemented as a factory that generates an interpolator object, that just takes in a t\n    static interpolate(firstColor, secondColor, t = 0.5) {\n        let firstColorArray = Color.parseColor(firstColor);\n        let secondColorArray = Color.parseColor(secondColor);\n\n        return Color.convertToRgba([\n            parseInt(firstColorArray[0] * (1 - t) + secondColorArray[0] * t),\n            parseInt(firstColorArray[1] * (1 - t) + secondColorArray[1] * t),\n            parseInt(firstColorArray[2] * (1 - t) + secondColorArray[2] * t),\n            parseInt(firstColorArray[3] * (1 - t) + secondColorArray[3] * t)\n        ]);\n    }\n\n    static convertToRgba(rgba) {\n        return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3]})`;\n    }\n\n    static isLight(color) {\n        let values = Color.parseColor(color);\n        return values[0] * 0.3 + values[1] * 0.59 + values[2] * 0.11 > 188;\n    }\n}\n\nfunction lighten(color, amount) {\n    if (amount >= 0) {\n        return Color.interpolate(color, \"#fff\", amount);\n    } else {\n        return darken(color, -amount);\n    }\n};\n\nfunction darken(color, amount) {\n    if (amount >= 0) {\n        let rgba = Color.parseColor(Color.interpolate(color, \"#000\", amount));\n        for (let i = 0; i < 3; i += 1) {\n            let root = Math.pow(255 - rgba[i], 0.7);\n            rgba[i] = parseInt(rgba[i] - root * amount);\n            if (rgba[i] < 0) {\n                rgba[i] = 0;\n            }\n        }\n        return Color.convertToRgba(rgba);\n    } else {\n        return lighten(color, -amount);\n    }\n};\n\nfunction enhance(color, amount) {\n    if (Color.isLight(color)) {\n        return darken(color, amount);\n    } else {\n        return lighten(color, amount);\n    }\n}\n\nfunction buildColors(color, dark=true) {\n    let colors = [];\n    let darkenPercents;\n    if (!dark) {\n        darkenPercents = [0.1, 0, -0.2, -0.3, -0.35, -0.2, -1];\n    } else if (Color.isLight(color)) {\n        darkenPercents = [0.05, 0, 0.05, 0.1, 0.15, 0.3, 0.8];\n    } else {\n        darkenPercents = [-0.3, 0, 0.1, 0.2, 0.23, 0.1, -1];\n    }\n    for (let i = 0; i < darkenPercents.length; i += 1) {\n        colors.push(darken(color, darkenPercents[i]));\n    }\n    return colors;\n}\n\nexport {Color, lighten, darken, enhance, buildColors};\n","import {Dispatchable} from \"../../base/Dispatcher\";\nimport {UI} from \"../UIBase\";\nimport {StyleSheet} from \"../Style\";\n\nfunction getInstance(styleSheet) {\n    if (typeof styleSheet === \"function\") {\n        if (typeof styleSheet.getInstance === \"function\") {\n            styleSheet = styleSheet.getInstance();\n        } else {\n            styleSheet = styleSheet();\n        }\n    }\n    return styleSheet;\n}\n\nfunction getInstanceForObject(obj) {\n    if (!obj) {\n        return null;\n    }\n    let styleSheet = (obj.theme && obj.theme.get(obj)) || obj.styleSheet;\n    return getInstance(styleSheet);\n}\n\nclass Theme extends Dispatchable {\n    constructor(name=\"\") {\n        super();\n        this.styleSheetSymbol = Symbol(\"Theme\" + name);\n        this.classSet = new Set();\n        this.styleSheetSet = new Set();\n        this.properties = {}\n    }\n\n    register(cls, styleSheet) {\n        cls.theme = this;\n        if (!cls.styleSheet) {\n            cls.styleSheet = styleSheet;\n        }\n        this.set(cls, styleSheet);\n    }\n\n    set(cls, styleSheet) {\n        cls[this.styleSheetSymbol] = styleSheet;\n        this.classSet.add(cls);\n    }\n\n    get(cls) {\n        if (!(typeof cls === \"function\")) {\n            cls = cls.constructor;\n        }\n        return cls[this.styleSheetSymbol];\n    }\n\n    getProperties() {\n        return this.properties;\n    }\n\n    getProperty(key, defaultValue) {\n        return this.properties[key] || defaultValue;\n    }\n\n    setProperties(properties, update=true) {\n        Object.assign(this.properties, properties);\n        if (update) {\n            this.updateStyleSheets();\n        }\n    }\n\n    setProperty(key, value) {\n        this.properties[key] = value;\n    }\n\n    getAllStyleSheets() {\n        let styleSheetSet = new Set(this.styleSheetSet);\n        for (const cls of this.classSet.values()) {\n            styleSheetSet.add(this.get(cls));\n        }\n        return Array.from(styleSheetSet).map(styleSheet => {\n            if (styleSheet.getInstance) {\n                return styleSheet.getInstance();\n            }\n            return styleSheet;\n        });\n    }\n\n    addStyleSheet(styleSheet) {\n        this.styleSheetSet.add(styleSheet);\n    }\n\n    removeStyleSheet(styleSheet) {\n        this.styleSheetSet.delete(styleSheet);\n    }\n\n    updateStyleSheets() {\n        for (const styleSheet of this.getAllStyleSheets()) {\n            if (styleSheet.update) {\n                styleSheet.update();\n            }\n\n        }\n    }\n\n    static register(cls, styleSheet) {\n        return this.Global.register(...arguments);\n    }\n\n    static get(cls) {\n        return this.Global.get(...arguments);\n    }\n\n    static addStyleSheet(styleSheet) {\n        this.Global.addStyleSheet(styleSheet);\n    }\n}\n\nTheme.Global = new Theme(\"Global\");\n\nUI.Element.prototype.getStyleSheet = function styleSheetGetter() {\n    return getInstanceForObject(this.options) || getInstanceForObject(this.constructor);\n};\n\nfunction registerStyle(styleClass, theme=Theme.Global) {\n    return (target) => {\n        theme.register(target, styleClass);\n    }\n}\n\nStyleSheet.theme = Theme.Global;\n\nexport {Theme, registerStyle};\n","import {StyleSheet} from \"./Style\";\nimport {styleRule} from \"../decorators/Style\";\nimport {buildColors, enhance} from \"./Color\";\nimport {Device} from \"../base/Device\";\nimport {Orientation, Level, Size} from \"./Constants\";\nimport {Theme} from \"style/Theme\";\n\n// TODO: export these properly, don't use a namespace here\nlet GlobalStyle = {\n};\n\nTheme.Global.setProperties({\n    COLOR_PLAIN: \"#fff\",\n    COLOR_PLAIN_ALTERNATIVE: \"#eee\",\n    COLOR_GRAY: \"#777\",\n    COLOR_PRIMARY: \"#337ab7\",\n    COLOR_SECONDARY: \"#358ba4\",\n    COLOR_SUCCESS: \"#5cb85c\",\n    COLOR_INFO: \"#5bc0de\",\n    COLOR_WARNING: \"#f0ad4e\",\n    COLOR_DANGER: \"#d9534f\",\n\n    FONT_SIZE_EXTRA_SMALL: \"9px\",\n    FONT_SIZE_SMALL: \"10px\",\n    FONT_SIZE_DEFAULT: \"12px\",\n    FONT_SIZE_LARGE: \"17px\",\n    FONT_SIZE_EXTRA_LARGE: \"21px\",\n\n    BASE_BORDER_RADIUS: 0,\n    BASE_BOX_SHADOW: \"0px 0px 10px rgb(160, 162, 168)\",\n    BASE_BORDER_WIDTH: 0,\n    BASE_BORDER_STYLE: \"solid\",\n    BASE_BORDER_COLOR: \"#ddd\",\n\n    BUTTON_BORDER_RADIUS: \"0.2rem\",\n\n    CARD_PANEL_HEADER_HEIGHT: 30,\n    CARD_PANEL_HEADER_HEIGHT_LARGE: 40,\n    CARD_PANEL_HEADING_PADDING: 10,\n    CARD_PANEL_HEADING_PADDING_LARGE: 20,\n    CARD_PANEL_TEXT_TRANSFORM: \"inherit\",\n\n    ROW_LIST_ROW_HEIGHT: 30,\n    ROW_LIST_ROW_HEIGHT_LARGE: 40,\n    ROW_LIST_ROW_PADDING: 10,\n    ROW_LIST_ROW_PADDING_LARGE: 20,\n    ROW_LIST_ROW_BORDER_WIDTH: 1,\n\n    FONT_FAMILY_SANS_SERIF: \"Lato, 'Segoe UI', 'Lucida Sans Unicode', 'Helvetica Neue', Helvetica, Arial, sans-serif\",\n    FONT_FAMILY_SERIF: \"serif\",\n    FONT_FAMILY_MONOSPACE: \"'Source Code Pro', Menlo, Monaco, Consolas, 'Courier New', monospace\",\n\n    NAV_MANAGER_NAVBAR_HEIGHT: 50,\n    NAV_MANAGER_BOX_SHADOW_NAV_MANAGER: \"0px 0px 10px rgb(0, 0, 0)\",\n    NAV_MANAGER_BOX_SHADOW_SIDE_PANEL: \"0px 0px 10px #202e3e\",\n\n    MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE: 0,\n});\n\nexport class BasicLevelSizeStyleSheet extends StyleSheet {\n    Level(level) {\n        if (this[level]) {\n            return this[level];\n        }\n        for (let type of Object.keys(Level)) {\n            if (level == Level[type]) {\n                return this[type];\n            }\n        }\n        return \"\";\n    }\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n        return \"\";\n    }\n}\n\nexport const BasicLevelStyleSheet = (colorToStyleFunction) => class BasicLevelStyleClass extends BasicLevelSizeStyleSheet {\n    colorStyleRule(color, textColor) {\n        if (!textColor) {\n            textColor = enhance(color, 1);\n        }\n        return colorToStyleFunction(color, textColor);\n    }\n\n    @styleRule\n    PRIMARY = this.colorStyleRule(this.themeProperties.COLOR_PRIMARY);\n\n    @styleRule\n    SECONDARY = this.colorStyleRule(this.themeProperties.COLOR_SECONDARY);\n\n    @styleRule\n    PLAIN = this.colorStyleRule(this.themeProperties.COLOR_PLAIN);\n\n    @styleRule\n    SUCCESS = this.colorStyleRule(this.themeProperties.COLOR_SUCCESS);\n\n    @styleRule\n    INFO = this.colorStyleRule(this.themeProperties.COLOR_INFO);\n\n    @styleRule\n    WARNING = this.colorStyleRule(this.themeProperties.COLOR_WARNING);\n\n    @styleRule\n    DANGER = this.colorStyleRule(this.themeProperties.COLOR_DANGER);\n};\n\n\nclass FlexContainerStyle extends StyleSheet {\n    @styleRule\n    HORIZONTAL = {\n        display: \"flex\",\n        \">*\": {\n            marginLeft: \"20px\",\n            flex: \"1\",\n        },\n        \">:first-child\": {\n            marginLeft: \"0px\",\n        },\n    };\n\n    @styleRule\n    VERTICAL = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        \">*\": {\n            marginTop: \"20px\",\n            flex: \"1\",\n        },\n        \">:first-child\": {\n            marginTop: \"0px\",\n        }\n    };\n\n    Orientation(orientation) {\n        for (let type of Object.keys(Orientation)) {\n            if (orientation == Orientation[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nclass ContainerStyle extends StyleSheet {\n    getSizeStyle(mobilePixels, desktopPercent) {\n        return {\n            margin: Device.isMobileDevice() ? `0 ${mobilePixels}px` : `0% ${desktopPercent}%`,\n        }\n    }\n\n    @styleRule\n    EXTRA_SMALL = this.getSizeStyle(6, 15);\n\n    @styleRule\n    SMALL = this.getSizeStyle(4, 10);\n\n    @styleRule\n    MEDIUM = this.getSizeStyle(4, 6);\n\n    @styleRule\n    LARGE = this.getSizeStyle(2, 3);\n\n    @styleRule\n    EXTRA_LARGE = this.getSizeStyle(2, 1);\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\n\nclass Utils extends StyleSheet {\n    @styleRule\n    fullHeight = {\n        height: \"100%\",\n    };\n\n    @styleRule\n    hidden = {\n        display: \"hidden\"\n    };\n}\n\nGlobalStyle.FlexContainer = FlexContainerStyle.getInstance();\nGlobalStyle.Container = ContainerStyle.getInstance();\nGlobalStyle.Utils = Utils.getInstance();\n\nexport {GlobalStyle};\n","import {UI} from \"./UIBase\";\nimport {BasicLevelStyleSheet, GlobalStyle} from \"./GlobalStyle\";\nimport {Orientation} from \"./Constants\";\nimport {registerStyle} from \"./style/Theme\";\nimport {buildColors} from \"./Color\";\nimport {styleRule} from \"../decorators/Style\";\n\nclass SimpleStyledElement extends UI.Element {\n    getLevel() {\n        return this.options.level || (this.parent && this.parent.getLevel && this.parent.getLevel());\n    }\n\n    setLevel(level) {\n        this.updateOptions({level});\n    }\n\n    getSize() {\n        return this.options.size || (this.parent && this.parent.getSize && this.parent.getSize());\n    }\n\n    setSize(size) {\n        this.updateOptions({size});\n    }\n}\n\n\nclass IconableInterface extends SimpleStyledElement {\n    render() {\n        return [this.beforeChildren(), this.getLabel(), super.render()];\n    };\n\n    getLabel() {\n        return (this.options.label != null) ? this.options.label : \"\";\n    }\n\n    setLabel(label) {\n        this.updateOptions({label: label});\n    }\n\n    //TODO: this should live in a base iconable class, of which you'd only use this.beforeChildren\n    getFaIcon() {\n        return this.options.faIcon;\n    }\n\n    setFaIcon(value) {\n        this.options.faIcon = value;\n        this.redraw();\n    }\n\n    beforeChildren() {\n        if (!this.getFaIcon()) {\n            return null;\n        }\n        let iconOptions = {\n            className: \"fa fa-\" + this.getFaIcon(),\n        };\n        if (this.getLabel()) {\n            iconOptions.style = {\n                marginRight: \"5px\",\n            }\n        }\n\n        return <span {...iconOptions} />;\n    }\n}\n\nlet labelColorToStyle = (color) => {\n    const colors = buildColors(color);\n    let darker = {\n        backgroundColor: colors[2],\n        color: colors[6],\n        textDecoration: \"none\",\n    };\n    let regular = {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n    return Object.assign({}, regular, {\n        \":hover\": darker,\n        \":hover:disabled\": regular,\n        \":focus\": darker,\n        \":active\": darker,\n    });\n};\n\nexport class LabelStyle extends BasicLevelStyleSheet(labelColorToStyle) {\n    // DEFAULT uses MEDIUM as size and PLAIN as level\n    @styleRule\n    DEFAULT = [{\n        fontWeight: \"bold\",\n        border: \"0.1em solid transparent\",\n        padding: \"0.07em 0.4em\",\n        borderRadius: \"0.3em\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"bottom\",\n        lineHeight: 4/3 + \"\",\n        display: \"inline-block\",\n        touchAction: \"manipulation\",\n        \":disabled\": {\n            opacity: \"0.7\",\n            cursor: \"not-allowed\",\n        },\n    }, {\n        \"font-size\": \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_GRAY)];\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"10px\",\n        padding: \"0.05em 0.2em\",\n        borderWidth: \"0.05em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.05em 0.2em\",\n    };\n}\n\n\n@registerStyle(LabelStyle)\nclass Label extends UI.Primitive(IconableInterface, \"span\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n}\n\nlet badgeColorToStyle = (color) => {\n    const colors = buildColors(color);\n    return {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n};\n\nexport class BadgeStyle extends BasicLevelStyleSheet(badgeColorToStyle) {\n    // DEFAULT uses MEDIUM as size and PLAIN as level\n    @styleRule\n    DEFAULT = [{\n        display: \"inline-block\",\n        padding: \"0.25em 0.55em\",\n        fontWeight: \"700\",\n        lineHeight: \"1\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        backgroundColor: \"#777\",\n        borderRadius: \"0.8em\",\n    }, {\n        \"font-size\": \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_GRAY)];\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"10px\",\n        padding: \"0.1em 0.2em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.1em 0.2em\",\n    };\n}\n\n\n@registerStyle(BadgeStyle)\nclass Badge extends UI.Primitive(IconableInterface, \"span\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n}\n\nlet progressBarColorToStyle = (color) => {\n    let colors = buildColors(color);\n    return {\n        backgroundColor: colors[1],\n    };\n};\n\nclass ProgressBarStyle extends BasicLevelStyleSheet(progressBarColorToStyle) {\n    @styleRule\n    container = {\n        height: \"20px\",\n        marginBottom: \"20px\",\n        overflow: \"hidden\",\n        backgroundColor: \"#f5f5f5\",\n        borderRadius: \"4px\",\n        boxShadow: \"inset 0 1px 2px rgba(0, 0, 0, .1)\",\n    };\n\n    @styleRule\n    DEFAULT = [{\n        float: \"left\",\n        width: \"0\",\n        height: \"100%\",\n        lineHeight: \"20px\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        backgroundColor: \"#337ab7\",\n        boxShadow: \"inset 0 -1px 0 rgba(0, 0, 0, .15)\",\n        transition: \"width .6s ease\",\n        fontColor: \"#ffffff\",\n    }, {\n        fontSize: \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_PRIMARY)];\n\n    @styleRule\n    striped = {\n        backgroundImage: \"linear-gradient(45deg, rgba(255, 255, 255, .15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .15) 50%, rgba(255, 255, 255, .15) 75%, transparent 75%, transparent)\",\n        backgroundSize: \"40px 40px\",\n    };\n\n    @styleRule\n    active = {\n        animation: \"progress-bar-stripes 2s linear infinite\",\n    };\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"8px\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.1em 0.2em\",\n    };\n}\n\n@registerStyle(ProgressBarStyle)\nclass ProgressBar extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    render() {\n        let valueInPercent = (this.options.value || 0) * 100;\n        let orientation = Orientation.HORIZONTAL;\n        if (this.options.hasOwnProperty(\"orientation\")) {\n            orientation = this.options.orientation;\n        }\n        let barStyle;\n        if (orientation === Orientation.HORIZONTAL) {\n            barStyle = {\n                width: valueInPercent + \"%\",\n                height: this.options.height + \"px\",\n            };\n        } else {\n            barStyle = {\n                height: valueInPercent + \"%\",\n                width: \"5px\",\n            }\n        }\n        let barOptions = {\n            className: this.styleSheet.DEFAULT,\n            style: barStyle,\n        };\n\n        if (this.options.disableTransition) {\n            Object.assign(barOptions.style, {\n                transition: \"none\",\n            });\n        }\n\n        if (this.options.level) {\n            barOptions.className += \" \" + this.styleSheet.Level(this.getLevel());\n        }\n        if (this.options.striped) {\n            barOptions.className += \" \" + this.styleSheet.striped;\n        }\n        if (this.options.active) {\n            barOptions.className += \" \" + this.styleSheet.active;\n        }\n        if (this.options.color) {\n            barOptions.style.backgroundColor = this.options.color;\n        }\n\n        return <div {...barOptions}>\n            <span>{this.options.label}</span>\n        </div>;\n    }\n\n    set(value) {\n        if (value < 0)\n            value = 0;\n        else if (value > 1)\n            value = 1;\n        this.options.value = value;\n        this.redraw();\n    }\n}\n\n\nexport {SimpleStyledElement, IconableInterface, Label, Badge, ProgressBar};\n","// TODO: this file existed to hold generic classes in a period of fast prototyping, has a lot of old code\nimport {UI} from \"./UIBase\";\nimport {Device} from \"../base/Device\";\nimport {Draggable} from \"./Draggable\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {getOffset} from \"./Utils\";\nimport {Orientation} from \"./Constants\";\nimport {ProgressBar} from \"./Bootstrap3\";\n\n// A very simple class, all this does is implement the `getTitle()` method\nclass Panel extends UI.Element {\n    getTitle() {\n        return this.options.title;\n    }\n}\n\nclass SlideBar extends Draggable(UI.Element) {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            value: 0,\n        });\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setStyle(\"display\", \"inline-block\");\n        attr.setStyle(\"position\", \"relative\");\n        attr.setStyle(\"cursor\", \"pointer\");\n    }\n\n    getSliderValue() {\n        return this.options.value * this.options.size - (this.options.barSize / 2);\n    }\n\n    render() {\n        return [\n            <ProgressBar ref=\"progressBar\" active=\"true\" value={this.options.value} disableTransition={true}\n                            orientation={this.getOrientation()}\n                            style={Object.assign({\n                                position: \"relative\",\n                            }, this.getProgressBarStyle())}\n            />,\n            <div ref=\"slider\" style={Object.assign({\n                                backgroundColor: \"black\",\n                                position: \"absolute\",\n                            }, this.getSliderStyle())}>\n            </div>\n        ];\n    }\n\n    setValue(value) {\n        value = Math.max(value, 0);\n        value = Math.min(value, 1);\n\n        this.options.value = value;\n        this.progressBar.set(this.options.value);\n        this.slider.setStyle(this.getOrientationAttribute(), this.getSliderValue() + \"px\");\n\n        this.dispatch(\"change\", this.options.value);\n    }\n\n    getValue() {\n        return this.options.value;\n    }\n\n    onMount() {\n        this.addDragListener(this.getDragConfig());\n    }\n}\n\nclass HorizontalSlideBar extends SlideBar {\n    setOptions(options) {\n        options.size = options.size || options.width || 100;\n        options.barSize = options.barSize || options.barWidth || 5;\n        super.setOptions(options);\n    }\n\n    getProgressBarStyle() {\n        return {\n            height: \"5px\",\n            width: this.options.size + \"px\",\n            top: \"15px\",\n        };\n    }\n\n    getSliderStyle() {\n        return {\n            width: this.options.barSize + \"px\",\n            height: \"20px\",\n            left: this.getSliderValue() + \"px\",\n            top: \"7.5px\"\n        };\n    }\n\n    getOrientationAttribute() {\n        return \"left\";\n    }\n\n    getOrientation() {\n        return Orientation.HORIZONTAL;\n    }\n\n    getDragConfig() {\n        return {\n            onStart: (event) => {\n                this.setValue((Device.getEventX(event) - getOffset(this.progressBar)[this.getOrientationAttribute()]) / this.options.size);\n            },\n            onDrag: (deltaX, deltaY) => {\n                this.setValue(this.options.value + deltaX / this.options.size);\n            },\n        };\n    }\n}\nclass VerticalSlideBar extends SlideBar {\n    setOptions(options) {\n        options.size = options.size || options.height || 100;\n        options.barSize = options.barSize || options.barHeight || 5;\n        super.setOptions(options);\n    }\n\n    getProgressBarStyle() {\n        return {\n            height: this.options.size + \"px\",\n            width: \"5px\",\n            left: \"15px\",\n        };\n    }\n\n    getSliderStyle() {\n        return {\n            height: this.options.barSize + \"px\",\n            width: \"20px\",\n            top: this.getSliderValue() + \"px\",\n            left: \"7.5px\"\n        };\n    }\n\n    getOrientationAttribute() {\n        return \"top\";\n    }\n\n    getOrientation() {\n        return Orientation.VERTICAL;\n    }\n\n    getDragConfig() {\n        return {\n            onStart: (event) => {\n                this.setValue((Device.getEventY(event) - getOffset(this.progressBar)[this.getOrientationAttribute()]) / this.options.size);\n            },\n            onDrag: (deltaX, deltaY) => {\n                this.setValue(this.options.value + deltaY / this.options.size);\n            },\n        };\n    }\n}\n\nclass Link extends UI.Primitive(\"a\") {\n    extraNodeAttributes(attr) {\n        // TODO: do we want this as a default?\n        attr.setStyle(\"cursor\", \"pointer\");\n    }\n\n    getDefaultOptions() {\n        return {\n            newTab: false,\n        }\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n\n        if (this.options.newTab) {\n            this.options.target = \"_blank\";\n        }\n\n        return options;\n    }\n\n    render() {\n        if (this.options.value) {\n            return [this.options.value];\n        }\n        return super.render();\n    }\n}\n\nclass Image extends UI.Primitive(\"img\") {\n}\n\n// Beware coder: If you ever use this class, you should have a well documented reason\nclass RawHTML extends UI.Element {\n    getInnerHTML() {\n        return this.options.innerHTML || this.options.__innerHTML;\n    }\n\n    redraw() {\n        this.node.innerHTML = this.getInnerHTML();\n        this.applyNodeAttributes();\n        this.applyRef();\n    }\n}\n\nclass ViewportMeta extends UI.Primitive(\"meta\") {\n    getDefaultOptions() {\n        return {\n            scale: this.getDesiredScale(),\n            initialScale: 1,\n            maximumScale: 1,\n        }\n    }\n\n    getDesiredScale() {\n        const MIN_WIDTH = this.options.minDeviceWidth;\n        return (MIN_WIDTH) ? Math.min(window.screen.availWidth, MIN_WIDTH) / MIN_WIDTH : 1;\n    }\n\n    getContent() {\n        let rez = \"width=device-width\";\n        rez += \",initial-scale=\" + this.options.scale;\n        rez += \",maximum-scale=\" + this.options.scale;\n        rez += \",user-scalable=no\";\n        return rez;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setAttribute(\"name\", \"viewport\");\n        attr.setAttribute(\"content\", this.getContent());\n    }\n\n    maybeUpdate() {\n        const desiredScale = this.getDesiredScale();\n        if (desiredScale != this.options.scale) {\n            this.updateOptions({scale: desiredScale});\n        }\n    }\n\n    onMount() {\n        window.addEventListener(\"resize\", () => this.maybeUpdate());\n    }\n}\n\nclass TemporaryMessageArea extends UI.Primitive(\"span\") {\n    getDefaultOptions() {\n        return {\n            margin: 10\n        };\n    }\n\n    render() {\n        return [<UI.TextElement ref=\"textElement\" value={this.options.value || \"\"}/>];\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        // TODO: nope, not like this\n        attr.setStyle(\"marginLeft\", this.options.margin + \"px\");\n        attr.setStyle(\"marginRight\", this.options.margin + \"px\");\n        return attr;\n    }\n\n    setValue(value) {\n        this.options.value = value;\n        this.textElement.setValue(value);\n    }\n\n    setColor(color) {\n        this.setStyle(\"color\", color);\n    }\n\n    showMessage(message, color=\"black\", displayDuration=2000) {\n        this.setColor(color);\n        this.clear();\n        this.setValue(message);\n        if (displayDuration) {\n            this.clearValueTimeout = setTimeout(() => this.clear(), displayDuration);\n        }\n    }\n\n    clear() {\n        this.setValue(\"\");\n        if (this.clearValueTimeout) {\n            clearTimeout(this.clearValueTimeout);\n            this.clearValueTimeout = null;\n        }\n    }\n}\n\n// Just putting in a lot of methods, to try to think of an interface\nclass ScrollableMixin extends UI.Element {\n    getDesiredExcessHeightTop() {\n        return 600;\n    }\n\n    getDesiredExcessHeightBottom() {\n        return 600;\n    }\n\n    getHeightScrollPercent() {\n        let scrollHeight = this.node.scrollHeight;\n        let height = this.node.clientHeight;\n        if (scrollHeight === height) {\n            return 0;\n        }\n        return this.node.scrollTop / (scrollHeight - height);\n    }\n\n    getExcessTop() {\n        return this.node.scrollTop;\n    }\n\n    getExcessBottom() {\n        let scrollHeight = this.node.scrollHeight;\n        let height = this.node.clientHeight;\n        return scrollHeight - height - this.node.scrollTop;\n    }\n\n    haveExcessTop() {\n        return this.getExcessTop() > this.getDesiredExcessHeightTop();\n    }\n\n    haveExcessBottom() {\n        return this.getExcessBottom() > this.getDesiredExcessHeightBottom();\n    }\n\n    popChildTop() {\n        this.eraseChildAtIndex(0);\n    }\n\n    popChildBottom() {\n        this.eraseChildAtIndex(this.children.length - 1);\n    }\n\n    removeExcessTop() {\n        while (this.haveExcessTop()) {\n            this.popChildTop();\n        }\n    }\n\n    removeExcessBottom() {\n        while (this.haveExcessBottom()) {\n            this.popChildBottom();\n        }\n    }\n\n    pushChildTop(element, removeExcessBottom=true) {\n        if (removeExcessBottom) {\n            this.removeExcessBottom();\n        }\n        this.insertChild(element, 0);\n    }\n\n    pushChildBottom(element, removeExcessTop=true) {\n        if (removeExcessTop) {\n            this.removeExcessTop();\n        }\n        this.appendChild(element);\n        this.appendChild(element);\n    }\n\n    saveScrollPosition() {\n        // If at top or bottom, save that\n        // If anywhere in the middle, save the offset of the first child with a positive offset, and keep that constant\n        this.options.scrollTop = this.node.scrollTop;\n        let maxScrollTop = this.node.scrollHeight - this.node.clientHeight;\n        this.options.scrollInfo = {\n            scrollAtTop: (this.options.scrollTop === 0),\n            scrollAtBottom: (this.options.scrollTop === maxScrollTop),\n            // visibleChildrenOffsets: {}\n        };\n    }\n\n    applyScrollPosition() {\n        this.node.scrollTop = this.options.scrollTop || this.node.scrollTop;\n    }\n\n    scrollToHeight(height) {\n        this.node.scrollTop = height;\n    }\n\n    scrollToTop() {\n        this.scrollToHeight(0);\n    }\n\n    scrollToBottom() {\n        this.scrollToHeight(this.node.scrollHeight);\n    }\n};\n\n//TODO: this class would need some binary searches\nclass InfiniteScrollable extends ScrollableMixin {\n    setOptions(options) {\n        options = Object.assign({\n            entries: [],\n            entryComparator: (a, b) => {\n                return a.id - b.id;\n            },\n            firstRenderedEntry: 0,\n            lastRenderedEntry: -1,\n        }, options);\n        super.setOptions(options);\n        // TODO: TEMP for testing\n        this.options.children = [];\n        if (this.options.staticTop) {\n            this.options.children.push(this.options.staticTop);\n        }\n        for (let entry of this.options.entries) {\n            this.options.children.push(this.renderEntry(entry));\n        }\n    }\n\n    getFirstVisibleIndex() {\n    }\n\n    getLastVisibleIndex() {\n    }\n\n    renderEntry(entry) {\n        if (this.options.entryRenderer) {\n            return this.options.entryRenderer(entry);\n        } else {\n            console.error(\"You need to pass option entryRenderer or overwrite the renderEntry method\");\n        }\n    }\n\n    pushEntry(entry) {\n        this.insertEntry(entry, this.options.entries.length);\n    }\n\n    insertEntry(entry, index) {\n        let entries = this.options.entries;\n        if (index == null) {\n            index = 0;\n            while (index < entries.length &&\n                this.options.entryComparator(entries[index], entry) <= 0) {\n                index++;\n            }\n        }\n        entries.splice(index, 0, entry);\n\n        // Adjust to the children\n        if (this.options.staticTop) {\n            index += 1;\n        }\n\n        // TODO: only if in the rendered range, insert in options.children;\n        let uiElement = this.renderEntry(entry);\n        this.insertChild(uiElement, index);\n    }\n}\n\nclass TimePassedSpan extends UI.Primitive(\"span\") {\n    render() {\n        return this.getTimeDeltaDisplay(this.options.timeStamp);\n    }\n\n    getDefaultOptions() {\n        return {\n            style: {\n                color: \"#aaa\"\n            }\n        }\n    }\n\n    getTimeDeltaDisplay(timeStamp) {\n        let timeNow = Date.now();\n        let timeDelta = parseInt((timeNow - timeStamp * 1000) / 1000);\n        let timeUnitsInSeconds = [31556926, 2629743, 604800, 86400, 3600, 60];\n        let timeUnits = [\"year\", \"month\", \"week\", \"day\", \"hour\", \"minute\"];\n        if (timeDelta < 0) {\n            timeDelta = 0;\n        }\n        for (let i = 0; i < timeUnits.length; i += 1) {\n            let value = parseInt(timeDelta / timeUnitsInSeconds[i]);\n            if (timeUnitsInSeconds[i] <= timeDelta) {\n                return value + \" \" + timeUnits[i] + (value > 1 ? \"s\" : \"\") + \" ago\";\n            }\n        }\n        return \"Few seconds ago\";\n    }\n\n    static addIntervalListener(callback) {\n        if (!this.updateFunction) {\n            this.TIME_DISPATCHER = new Dispatchable();\n            this.updateFunction = setInterval(() => {\n                this.TIME_DISPATCHER.dispatch(\"updateTimeValue\");\n            }, 5000);\n        }\n        return this.TIME_DISPATCHER.addListener(\"updateTimeValue\", callback);\n    }\n\n    onMount() {\n        this._updateListener = this.constructor.addIntervalListener(() => {\n            this.redraw();\n        })\n    }\n\n    onUnmount() {\n        this._updateListener && this._updateListener.remove();\n    }\n};\n\n// TODO: deprecate this, to use lazyInit decorators\nexport function ConstructorInitMixin(BaseClass) {\n    class ConstructorInitMixin extends BaseClass {\n        static ensureInit() {\n            if (!this._haveInit) {\n                this._haveInit = true;\n                if (typeof this.init === \"function\") {\n                    this.init();\n                }\n            }\n        }\n\n        createNode() {\n            this.constructor.ensureInit();\n            return super.createNode();\n        }\n    };\n\n    return ConstructorInitMixin;\n};\n\n\nexport {Link, Panel, Image, RawHTML, TimePassedSpan, TemporaryMessageArea, SlideBar, VerticalSlideBar,\n    HorizontalSlideBar, ScrollableMixin, InfiniteScrollable, ViewportMeta};","import {StyleSheet, styleRule} from \"../Style\";\n\nclass InputStyle extends StyleSheet {\n    @styleRule\n    inputElement = {\n        transition: \"border-color ease-in-out .15s, box-shadow ease-in-out .15s\",\n        padding: \"0.4em 0.54em\",\n        border: \"1px solid #ccc\",\n        borderRadius: \"4px\",\n        fontSize: \"90%\",\n        \":focus\": {\n            outline: \"0\",\n            borderColor: \"#66afe9\",\n            boxShadow: \"inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102,175,233,.6)\",\n        },\n    };\n\n    @styleRule\n    checkboxInput = {\n        marginLeft: \"0.2em\",\n        display: \"inline-block\",\n        width: \"initial !important\",\n        marginRight:\"0.5em\",\n    };\n\n    @styleRule\n    select = {\n        height: \"2.12em\",\n    };\n}\n\nexport {InputStyle};\n","import {UI} from \"../UIBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {InputStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n\n@registerStyle(InputStyle)\nclass InputableElement extends UI.Element {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.inputElement);\n    }\n}\n\n\nclass Input extends UI.Primitive(InputableElement, \"input\") {\n    extraNodeAttributes(attr) {\n        let type = this.getInputType();\n        if (type) {\n            attr.setAttribute(\"type\", type);\n        }\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.hasOwnProperty(\"value\")) {\n            this.setValue(this.options.value);\n        }\n    }\n\n    getValue() {\n        return this.node.value;\n    }\n\n    setValue(newValue) {\n        this.node.value = newValue;\n    }\n\n    getInputType() {\n        // Must be overloaded\n        return null;\n    }\n\n    onInput(callback) {\n        this.addNodeListener(\"input change\", callback);\n    }\n\n    onKeyUp(callback) {\n        this.addNodeListener(\"keyup\", callback);\n    }\n}\nInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"autocomplete\"],\n    [\"autofocus\", {noValue: true}],\n    [\"formaction\"],\n    [\"maxLength\", {domName: \"maxlength\"}],\n    [\"minLength\", {domName: \"minlength\"}],\n    [\"name\"],\n    [\"placeholder\"],\n    [\"readonly\"],\n    [\"required\"],\n    [\"value\"],\n]);\n\n\nclass SubmitInput extends Input {\n    getInputType() {\n        return \"submit\";\n    }\n}\nSubmitInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"formenctype\"],\n    [\"formmethod\"],\n    [\"formnovalidate\"],\n    [\"formtarget\"]\n]);\n\n\nclass TextInput extends Input {\n    getInputType() {\n        return \"text\";\n    }\n};\n\n\nclass NumberInput extends Input {\n    getInputType() {\n        return \"number\";\n    }\n\n    getValue() {\n        let val = super.getValue();\n        return parseInt(val) || parseFloat(val);\n    }\n};\nNumberInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"min\"],\n    [\"max\"],\n    [\"step\"],\n]);\n\n\nclass EmailInput extends Input {\n    getInputType() {\n        return \"email\";\n    }\n};\n\n\nclass PasswordInput extends Input {\n    getInputType() {\n        return \"password\";\n    }\n};\n\n\nclass FileInput extends Input {\n    getInputType() {\n        return \"file\";\n    }\n\n    getFiles() {\n        return this.node.files;\n    }\n\n    getFile() {\n        // TODO: this is valid only if multipleFiles is false\n        return this.getFiles()[0];\n    }\n\n    getAsFormData() {\n        let formData = new FormData();\n        for (let file of this.getFiles()) {\n            formData.append(file.name, file);\n        }\n        return formData;\n    }\n};\n\nFileInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"multipleFiles\", {domName: \"multiple\", noValue: true}],\n    [\"fileTypes\", {domName: \"accept\"}],\n]);\n\n\nclass CheckboxInput extends Input {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.checkboxInput);\n    }\n\n    getInputType() {\n        return \"checkbox\";\n    }\n\n    getValue() {\n        return this.node.checked;\n    }\n\n    setValue(newValue) {\n        this.node.checked = newValue;\n    }\n}\nCheckboxInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"checked\", {noValue: true}]\n]);\n\n\nclass TextArea extends UI.Primitive(InputableElement, \"textarea\") {\n    applyNodeAttributes() {\n        super.applyNodeAttributes();\n        this.node.readOnly = this.options.readOnly || false;\n    }\n\n    setReadOnly(value) {\n        this.options.readOnly = value;\n        this.node.readOnly = value;\n    }\n\n    getValue() {\n        return this.node.value;\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.value) {\n            this.node.value = this.options.value + \"\";\n        }\n    }\n\n    setValue(value) {\n        this.options.value = value;\n        this.node.value = value;\n    }\n\n    onInput(callback) {\n        this.addNodeListener(\"input change\", callback);\n    }\n\n    onKeyUp(callback) {\n        this.addNodeListener(\"keyup\", callback);\n    }\n}\n\n\nclass Select extends UI.Primitive(InputableElement, \"select\") {\n    render() {\n        this.givenOptions = this.options.options || [];\n        let selectOptions = [];\n\n        for (let i = 0; i < this.givenOptions.length; i += 1) {\n            let options = {\n                key: i\n            };\n            if (this.givenOptions[i] == this.options.selected) {\n                options.selected = true;\n            }\n            selectOptions.push(<option {...options}>{this.givenOptions[i].toString()}</option>);\n        }\n\n        return selectOptions;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.select);\n    }\n\n    get() {\n        let selectedIndex = this.getIndex();\n        return this.givenOptions[selectedIndex];\n    }\n\n    set(value) {\n        for (let i = 0; i < this.givenOptions.length; i++) {\n            if (this.givenOptions[i] === value) {\n                this.setIndex(i);\n                return;\n            }\n        }\n        console.error(\"Can't set the select option \", value, \"\\nAvailable options: \", this.givenOptions);\n    }\n\n    getIndex() {\n        return this.node.selectedIndex;\n    }\n\n    setIndex(index) {\n        this.node.selectedIndex = index;\n        this.options.selected = this.givenOptions[index];\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.selected) {\n            this.set(this.options.selected);\n        }\n    }\n}\n\nexport {InputStyle, Input, SubmitInput, TextInput, NumberInput, EmailInput, PasswordInput, FileInput,\n        CheckboxInput, TextArea, Select};\n","import {StyleSheet, styleRule} from \"../Style\";\n\nclass FormStyle extends StyleSheet {\n    @styleRule\n    form = {\n        margin: \"0 auto\",\n    };\n\n    @styleRule\n    formGroup = {\n        marginBottom: \"10px\",\n    };\n\n    @styleRule\n    formField = {\n        \">label\": {\n            width: \"100%\",\n        },\n        display: \"block\",\n        padding: \"6px 0px\",\n        lineHeight: \"1.42857143\",\n        color: \"#555\",\n        maxWidth: \"600px\",\n        margin: \"0 auto\",\n        \"[disabled]\": {\n            opacity: \"1\",\n            cursor: \"not-allowed\",\n        },\n        \"[readonly]\": {\n            opacity: \"1\",\n        },\n    };\n\n    @styleRule\n    sameLine = {\n        \">label>*:nth-child(1)\": {\n            display: \"inline-block\",\n            textAlign: \"right\",\n            paddingRight: \"1em\",\n            width: \"30%\",\n            verticalAlign: \"middle\",\n        },\n        \">label>*:nth-child(2)\": {\n            display: \"inline-block\",\n            width: \"70%\",\n            verticalAlign: \"middle\",\n        },\n    };\n\n    separatedLineInputStyle = {\n        marginRight: \"0.5em\",\n        width: \"100%\",\n        height: \"2.4em\",\n    };\n\n    @styleRule\n    separatedLine = {\n        padding: \"6px 10px\",\n        \">label>*:nth-child(1)\": {\n            verticalAlign: \"sub\",\n        },\n        \">label>input\": this.separatedLineInputStyle,\n        \">label>select\": this.separatedLineInputStyle,\n        \">label>textarea\": this.separatedLineInputStyle,\n        \">label>input[type='checkbox']\": {\n            marginLeft: \"10px\",\n            verticalAlign: \"middle\",\n        }\n    };\n\n    @styleRule\n    hasError = {\n        color: \"#a94442\",\n    };\n}\n\nexport {FormStyle};\n","import {FormStyle} from \"./Style\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(FormStyle)\nclass Form extends UI.Primitive(\"form\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.form);\n    }\n\n    onMount() {\n        // Form elements by default refresh the page when a button inside them is clicked, so we prevent that.\n        this.addNodeListener(\"submit\", (event) => event.preventDefault());\n    }\n}\n\n@registerStyle(FormStyle)\nclass FormGroup extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.formGroup);\n    }\n\n    setError(errorMessage) {\n        this.errorField.node.textContent = errorMessage;\n        this.addClass(this.styleSheet.hasError);\n    }\n\n    removeError() {\n        this.errorField.node.textContent = \"\";\n        this.removeClass(this.styleSheet.hasError);\n    }\n\n    getErrorField() {\n        return <span ref=\"errorField\" style={{float: \"right\"}}></span>;\n    }\n\n    render() {\n        return [this.getGivenChildren(), this.getErrorField()];\n    }\n}\n\n\nclass FormField extends FormGroup {\n    inline() {\n        return !(this.options.inline === false ||\n                 (this.parent && this.parent.options && this.parent.options.inline === false));\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.formField);\n        if (this.inline()) {\n            attr.addClass(this.styleSheet.sameLine);\n        } else {\n            attr.addClass(this.styleSheet.separatedLine);\n        }\n    }\n\n    getLabel() {\n        if (this.options.label) {\n            return <strong>{this.options.label}</strong>;\n        }\n        return null;\n    }\n\n    getGivenChildren() {\n        if (this.options.contentFirst) {\n            return [<label>{[super.getGivenChildren(),this.getLabel()]}</label>];\n        } else {\n            return [<label>{[this.getLabel(),super.getGivenChildren()]}</label>];\n        }\n    }\n}\n\nexport {Form, FormGroup, FormField};\n","import {NodeAttributes} from \"../NodeAttributes\";\n\n// Setting these attributes as styles in mozilla has no effect.\n// To maintain compatibility between moz and webkit, whenever\n// one of these attributes is set as a style, it is also set as a\n// node attribute.\nconst MozStyleElements = new Set([\"width\", \"height\", \"rx\", \"ry\", \"cx\", \"cy\", \"x\", \"y\"]);\n\nexport class SVGNodeAttributes extends NodeAttributes {\n    fixMozAttributes(node) {\n        if (this.hasOwnProperty(\"style\")) {\n            for (let attributeName of MozStyleElements.values()) {\n                if (this.style.hasOwnProperty(attributeName) && !this.hasOwnProperty(attributeName)) {\n                    this.setAttribute(attributeName, this.style[attributeName], node);\n                }\n            }\n        }\n    }\n\n    setStyle(attributeName, value, node) {\n        super.setStyle(attributeName, value, node);\n        if (MozStyleElements.has(attributeName)) {\n            this.setAttribute(attributeName, value, node);\n        }\n    }\n\n    applyClassName(node) {\n        // SVG elements have a different API for setting the className than regular DOM nodes\n        if (this.className) {\n            node.setAttribute(\"class\", String(this.className));\n        } else {\n            node.removeAttribute(\"class\");\n        }\n    }\n\n    apply(node, attributesMap) {\n        this.transform = this.transform || this.translate;\n        super.apply(node, attributesMap);\n        this.fixMozAttributes(node);\n    }\n}\n","import {UI} from \"../UIBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {deepCopy, uniqueId} from \"../../base/Utils\";\nimport {SVGNodeAttributes} from \"./SVGNodeAttributes\";\nimport {Device} from \"../../base/Device\";\n\nlet SVG = {};\n\nSVG.Element = class SVGElement extends UI.Element {\n    createNode() {\n        this.node = document.createElementNS(\"http://www.w3.org/2000/svg\", this.getNodeType());\n        if (document.STEM_DEBUG) {\n            this.node.stemElement = this;\n        }\n        return this.node;\n    }\n\n    getScreenCoordinatedForPoint(point) {\n        const node = this.node;\n        // TODO: this is a good argument to always keep a reference to the Stem element in the nodes\n        const svgNode = node.ownerSVGElement || node;\n\n        if (svgNode.createSVGPoint) {\n            // Using native SVG transformations\n            // See https://msdn.microsoft.com/en-us/library/hh535760(v=vs.85).aspx\n            let svgPoint = svgNode.createSVGPoint();\n            svgPoint.x = point.x;\n            svgPoint.y = point.y;\n            return svgPoint.matrixTransform(node.getScreenCTM().inverse());\n        }\n\n        const rect = this.getBoundingClientRect();\n        return {\n        \tx: point.x - rect.left - node.clientLeft,\n        \ty: point.y - rect.top - node.clientTop,\n        };\n    }\n\n    getMouseCoordinatesForEvent(event=window.event) {\n        return this.getScreenCoordinatedForPoint({x: Device.getEventX(event), y: Device.getEventY(event)});\n    }\n\n    saveState() {\n        let state = {};\n        state.options = Object.assign({}, this.options);\n        return state;\n    }\n\n    setState(state) {\n        this.setOptions(state.options);\n    }\n\n    getOptionsAsNodeAttributes() {\n        let attr = this.options;\n        attr.__proto__ = SVGNodeAttributes.prototype;\n        return attr;\n    }\n\n    getNodeAttributes(returnCopy=true) {\n        if (returnCopy) {\n            return new SVGNodeAttributes(this.options);\n        } else {\n            return this.getOptionsAsNodeAttributes();\n        }\n    }\n\n    translate(x=0, y=0) {\n        this.options.translate = \"translate(\" + x + \",\" + y + \")\";\n    }\n\n    getHashCode() {\n        return uniqueId(this);\n    }\n\n    //TODO(@all) : getBoundingClientRect is unreliable, reimplement it.\n    getBoundingClientRect() {\n        let element = this.node;\n        let x = 0;\n        let y = 0;\n        while(element && element !== document.body) {\n            x -= element.scrollLeft;\n            y -= element.scrollTop;\n            element = element.offsetParent || element.parentNode;\n        }\n        if (element) {\n            x -= element.scrollLeft;\n            y -= element.scrollTop;\n        }\n        let pos = this.node.getBoundingClientRect();\n        return {\n            top: pos.top - y,\n            left: pos.left - x,\n            width: pos.width,\n            bottom: pos.bottom - y,\n            height: pos.height,\n            right: pos.right - x\n        };\n    }\n\n    getBBox() {\n        return this.node.getBBox();\n    }\n\n    getHeight() {\n        return this.getBoundingClientRect().height;\n    }\n\n    getWidth() {\n        return this.getBoundingClientRect().width;\n    }\n\n    toFront() {\n        const parentNode = this.node && this.node.parentElement;\n        if (parentNode) {\n            parentNode.removeChild(this.node);\n            parentNode.appendChild(this.node);\n        }\n    }\n\n    toBack() {\n    }\n\n    setOpacity(newOpacity) {\n        this.options.opacity = newOpacity;\n        if (this.node) {\n            this.node.setAttribute(\"opacity\", newOpacity);\n        }\n    }\n\n    setColor(color) {\n        this.options.color = color;\n        if (this.node) {\n            this.node.setAttribute(\"stroke\", color);\n            this.node.setAttribute(\"fill\", color)\n        }\n    }\n\n    remove() {\n    }\n\n    getSvg() {\n        return this.parent.getSvg();\n    }\n};\n\nSVG.Element.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"fill\"],\n    [\"height\"],\n    [\"opacity\"],\n    [\"stroke\"],\n    [\"strokeWidth\", {domName: \"stroke-width\"}],\n    [\"clipPath\", {domName: \"clip-path\"}],\n    [\"transform\"],\n    [\"width\"],\n    [\"cx\"],\n    [\"cy\"],\n    [\"rx\"],\n    [\"ry\"],\n    [\"x\"],\n    [\"y\"],\n    [\"x1\"],\n    [\"y1\"],\n    [\"x2\"],\n    [\"y2\"],\n    [\"offset\"],\n    [\"stopColor\", {domName: \"stop-color\"}],\n    [\"strokeDasharray\", {domName: \"stroke-dasharray\"}],\n    [\"strokeLinecap\", {domName: \"stroke-linecap\"}],\n    [\"viewBox\", {domName: \"viewBox\"}],\n]);\n\nexport {SVG};\n","import {SVG} from \"./SVGBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {UI} from \"../UIBase\";\n\nSVG.Text = class SVGText extends SVG.Element {\n    getNodeType() {\n        return \"text\";\n    }\n\n    getDefaultOptions() {\n        return {\n            text: \"\",\n            fontSize: \"15px\",\n            color: \"black\",\n            dy: \"0.35em\",\n            textAnchor: \"middle\",\n            selectable: false\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        // TODO: For some reason, still selectable in mozilla...\n        if (!this.options.selectable) {\n            attr.setStyle(\"-webkit-user-select\", \"none\");\n            attr.setStyle(\"-khtml-user-select\", \"none\");\n            attr.setStyle(\"-moz-user-select\", \"none\");\n            attr.setStyle(\"-ms-user-select\", \"none\");\n            attr.setStyle(\"user-select\", \"none\");\n        }\n    }\n\n    render() {\n        return [<UI.TextElement ref=\"textElement\" value={this.options.text + \"\"} />];\n    }\n\n    getX() {\n        return this.options.x;\n    }\n\n    setX(x) {\n        this.options.x = x;\n        this.node.setAttribute(\"x\", this.options.x);\n    }\n\n    getY() {\n        return this.options.y;\n    }\n\n    setY(y) {\n        this.options.y = y;\n        this.node.setAttribute(\"y\", this.options.y);\n    }\n\n    setText(text) {\n        this.options.text = text;\n        this.textElement.setValue(text + \"\");\n    }\n\n    getText() {\n        return this.options.text;\n    }\n\n    setPosition(x, y) {\n        this.setX(x);\n        this.setY(y);\n    }\n\n    getColor() {\n        return this.options.color;\n    }\n\n    setColor(color, fillOnly=false) {\n        this.options.color = color;\n        if (this.node) {\n            this.node.setAttribute(\"fill\", color);\n            if (!fillOnly) {\n                this.node.setAttribute(\"stroke\", color);\n            }\n        }\n    }\n};\n\nSVG.Text.domAttributesMap = CreateNodeAttributesMap(SVG.Element.domAttributesMap, [\n    [\"dx\"],\n    [\"dy\"],\n    [\"fontFamily\", {domName: \"font-family\"}],\n    [\"fontSize\", {domName: \"font-size\"}],\n    [\"textAnchor\", {domName: \"text-anchor\"}]\n]);","// TODO: this whole file is mosly here to not break compatibility with pre-Stem code, need refactoring\nexport var EPS = 1e-6;\n\n// Check if a value is equal to zero. Use epsilon check.\nexport var isZero = function (val, epsilon=EPS) {\n    return (Math.abs(val) < epsilon);\n};\n\n// Simulate C/C++ rand() function\nexport var rand = function (mod) {\n    return Math.floor(Math.random() * mod);\n};\n\nexport var equal = function (val1, val2, epsilon=EPS) {\n    return isZero(val1-val2, epsilon);\n};\n\nexport var equalPoints = function (p1, p2, epsilon=EPS) {\n    return isZero(p1.x - p2.x, epsilon) && isZero(p1.y - p2.y, epsilon);\n};\n\n// Compute square of a number\nexport var sqr = function (x) {\n    return x * x;\n};\n\n// Compute the distance between 2 points\nexport var distance = function (p1, p2) {\n    return Math.sqrt(sqr(p1.x - p2.x) + sqr(p1.y - p2.y));\n};\n\nexport var signedDistancePointLine = function (point, line) {\n    return (line.a * point.x + line.b * point.y + line.c) / Math.sqrt(sqr(line.a) + sqr(line.b));\n};\n\nexport var distancePointLine = function (point, line) {\n    return Math.abs(signedDistancePointLine(point, line));\n};\n\nexport var pointOnSegment = function (point, segmentStart, segmentEnd, epsilon) {\n    epsilon = epsilon || EPS;\n    return Math.abs(distance(point, segmentStart) + distance(point, segmentEnd) -\n        distance(segmentStart, segmentEnd)) <= epsilon;\n};\n\nexport var perpendicularFoot = function (point, line) {\n    var distance = (line.a * point.x + line.b * point.y + line.c) / (sqr(line.a) + sqr(line.b));\n    return {\n        x: point.x - line.a * distance,\n        y: point.y - line.b * distance\n    }\n};\n\nexport var lineEquation = function (A, B) {\n    return {\n        a: B.y - A.y,\n        b: A.x - B.x,\n        c: A.y * B.x - A.x * B.y\n    }\n};\n\n// Compute angle between 2 points in grad\nexport var angleGrad = function (p1, p2) {\n    return gradian(angleRad(p1, p2));\n};\n\n// Transform gradian in radian\nexport var radian = function (angle) {\n    return angle * Math.PI / 180;\n};\n\n// Transform radian in gradian\nexport var gradian = function (angle) {\n    return angle * 180 / Math.PI;\n};\n\n// Compute angle between 2 points in rad\nexport var angleRad = function (p1, p2) {\n    p2 = p2 || {'x': 0, 'y': 0};\n    return Math.atan2(p1.y - p2.y, p1.x - p2.x);\n};\n\n// TODO: lots of these should be methods of the point class, not global functions\nexport var crossProduct = function (p1, p2, p0) {\n    p0 = p0 || {x:0, y:0};\n    return (p1.x - p0.x) * (p2.y - p0.y) - (p1.y - p0.y) * (p2.x - p0.x);\n};\n\nexport var rotatePoint = function (point, orig, angle) {\n    // TODO: WTF, default argument value in the middle of argument list?\n    orig = orig || {x: 0, y: 0};\n    return {\n        x: Math.cos(angle) * (point.x - orig.x) - Math.sin(angle) * (point.y - orig.y) + orig.x,\n        y: Math.sin(angle) * (point.x - orig.x) + Math.cos(angle) * (point.y - orig.y) + orig.y\n    };\n};\n\nexport var translatePoint = function (point, dx, dy) {\n    return {\n        x: point.x + dx,\n        y: point.y + dy\n    };\n};\n\nexport var scalePoint = function (point, orig, sx, sy) {\n    sy = sy || sx;\n    return {\n        x: (point.x - orig.x) * sx + orig.x,\n        y: (point.y - orig.y) * sy + orig.y\n    }\n};\n\nexport var polarToCartesian = function (angle, radius, orig) {\n    orig = orig || {x: 0, y: 0};\n    return {\n        x: radius * Math.cos(angle) + orig.x,\n        y: radius * Math.sin(angle) + orig.y\n    };\n};\n\nexport var circlesIntersection = function (circle1, circle2) {\n    var points;\n    var centerDistance;\n    // TODO(@all) These vars are magic. Find out what they do and add comments\n    var l;\n    var h;\n\n    centerDistance = distance(circle1, circle2);\n    if (centerDistance > circle1.r + circle2.r) {\n        return [];\n    }\n\n    l = (sqr(circle1.r)- sqr(circle2.r) + sqr(centerDistance)) / (2 * centerDistance);\n    if (sqr(circle1.r) - sqr(l) < 0) {\n        return [];\n    }\n\n    h = Math.sqrt(sqr(circle1.r) - sqr(l));\n\n    points = [];\n    points.push({\n        x: l / centerDistance * (circle2.x - circle1.x) + h / centerDistance * (circle2.y - circle1.y) + circle1.x,\n        y: l / centerDistance * (circle2.y - circle1.y) - h / centerDistance * (circle2.x - circle1.x) + circle1.y\n    });\n    points.push({\n        x: l / centerDistance * (circle2.x - circle1.x) - h / centerDistance * (circle2.y - circle1.y) + circle1.x,\n        y: l / centerDistance * (circle2.y - circle1.y) + h / centerDistance * (circle2.x - circle1.x) + circle1.y\n    });\n\n    return points;\n};\n\nexport var bound = function (value, minValue, maxValue) {\n    if (value < minValue) {\n        return minValue;\n    }\n    if (value > maxValue) {\n        return maxValue;\n    }\n    return value;\n};\n\nexport var getVector = function (startPoint, endPoint) {\n    return {\n        x: endPoint.x - startPoint.x,\n        y: endPoint.y - startPoint.y\n    };\n};\n\nexport var vectorLength = function (vector) {\n    return distance({x:0, y:0}, vector);\n};\n\nexport var normalizeVector = function (vector) {\n    let len = vectorLength(vector);\n    if (Math.abs(len) < EPS) {\n        return {\n            x: 0,\n            y: 0\n        };\n    }\n    return {\n        x: vector.x / len,\n        y: vector.y / len\n    };\n};\n\nexport var scaleVector = function (vector, scalar) {\n    return {\n        x: vector.x * scalar,\n        y: vector.y * scalar\n    };\n};\n\nexport var addVectors = function (vector1, vector2) {\n    return {\n        x: vector1.x + vector2.x,\n        y: vector1.y + vector2.y\n    };\n};\n\nexport var subtractVectors = function (vector1, vector2) {\n    return {\n        x: vector1.x - vector2.x,\n        y: vector1.y - vector2.y\n    };\n};\n\nexport var triangleArea = function (point1, point2, point3) {\n    return 0.5 * Math.abs(crossProduct(point1, point2, point3));\n};\n\nexport var inRange = function (value, minValue, maxValue) {\n    if (isNaN(value)) {\n        return false;\n    }\n    return minValue <= value && value <= maxValue;\n};\n\nexport var interpolationValue = function (interpolationArray, X) {\n    var Y = 0;\n    var aux;\n    var i;\n    var j;\n\n    for (i = 0; i < interpolationArray.length; i += 1) {\n        if (interpolationArray.x === X) {\n           return interpolationArray.y;\n        }\n    }\n    for (i = 0; i < interpolationArray.length; i += 1) {\n        aux = interpolationArray[i].y;\n        for (j = 0; j < interpolationArray.length; j += 1) {\n            if (i !== j) {\n                aux = aux * (X - interpolationArray[j].x) / (interpolationArray[i].x - interpolationArray[j].x);\n            }\n        }\n        Y += aux;\n    }\n\n    return Y;\n};\n","import {SVG} from \"./SVGBase\";\nimport * as math from \"../../math\";\n\nSVG.SVGRoot = class SVGRoot extends SVG.Element {\n    getNodeType() {\n        return \"svg\";\n    }\n\n    getSvg() {\n        return this;\n    }\n};\n\nSVG.RawSVG = class RawSVG extends SVG.SVGRoot {\n    redraw() {\n        super.redraw();\n        this.node.innerHTML = this.options.innerHTML;\n    }\n};\n\nSVG.Group = class SVGGroup extends SVG.Element {\n    getNodeType() {\n        return \"g\";\n    }\n\n    setColor(color) {\n        for (let i = 0; i < this.children.length; i += 1) {\n            this.children[i].setColor(color);\n        }\n    }\n};\n\nSVG.Defs = class SVGDefs extends SVG.Element {\n    getNodeType() {\n        return \"defs\";\n    }\n};\n\nSVG.ClipPath = class ClipPath extends SVG.Element {\n    getNodeType() {\n        return \"clipPath\";\n    }\n};\n\nSVG.Path = class SVGPath extends SVG.Element {\n    getNodeType() {\n        return \"path\";\n    }\n\n    getDefaultOptions() {\n        return {\n            d: \"\"\n        }\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"d\", this.getPath());\n        return attr;\n    }\n\n    getPath() {\n        return this.options.d;\n    }\n\n    setPath(newPath) {\n        this.options.d = newPath;\n        this.node.setAttribute(\"d\", this.options.d);\n    }\n\n    getLength() {\n        return this.node.getTotalLength();\n    }\n\n    getPointAtLength(len) {\n        return this.node.getPointAtLength(len);\n    }\n\n    getPointAtLengthWithAngle(len) {\n        let totalLength = this.getLength();\n        let epsilon;\n        if (totalLength <= 1) {\n            epsilon = totalLength / 1000;\n        } else {\n            epsilon = Math.min(totalLength / 1000, Math.log(totalLength), 1);\n        }\n        let p1 = this.getPointAtLength(len);\n        let p2 = this.getPointAtLength(Math.min(len + epsilon, totalLength));\n        let p3 = this.getPointAtLength(Math.max(len - epsilon, 0));\n        return {\n            x: p1.x,\n            y: p1.y,\n            alpha: 180 * Math.atan2(p3.y - p2.y, p3.x - p2.x) / Math.PI\n        };\n    }\n};\n\nSVG.Circle = class SVGCircle extends SVG.Element {\n    getNodeType() {\n        return \"circle\";\n    }\n\n    getDefaultOptions() {\n        return {\n            radius: 0,\n            center: {x: 0, y: 0}\n        };\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"r\", this.options.radius);\n        attr.setAttribute(\"cx\", this.options.center.x);\n        attr.setAttribute(\"cy\", this.options.center.y);\n        return attr;\n    }\n\n    getRadius() {\n        return this.options.radius;\n    }\n\n    setRadius(radius) {\n        this.options.radius = radius;\n\n        this.setAttribute(\"r\", radius);\n    }\n\n    setCenter(x, y) {\n        this.options.center.x = x;\n        this.options.center.y = y;\n\n        this.setAttribute(\"cx\", x);\n        this.setAttribute(\"cy\", y);\n    }\n\n    getCenter() {\n        return this.options.center;\n    }\n\n    toPath() {\n        let r = this.options.radius;\n        let cx = this.options.center.x;\n        let cy = this.options.center.y;\n        let pathString = \"M\" + (cx - r) + \" \" + cy +            // Starting point is W\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + r + \" \" + (-r) +    // Move to N\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + r + \" \" + r +       // Move to E\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + (-r) + \" \" + r +    // Move to S\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + (-r) + \" \" + (-r);  // Finally, move back to W\n        return new SVG.Path({d: pathString});\n    }\n};\n\nSVG.Stop = class SVGStop extends SVG.Element {\n    getNodeType() {\n        return \"stop\";\n    }\n};\n\nSVG.RadialGradient = class SVGRadialGradient extends SVG.Element {\n    getNodeType() {\n        return \"radialGradient\";\n    }\n};\n\n//TODO Complete this class\nSVG.Ellipse = class SVGEllipse extends SVG.Element {\n    getNodeType() {\n        return \"ellipse\";\n    }\n};\n\nSVG.CircleArc = class SVGCircleArc extends SVG.Path {\n    getPath() {\n        let startAngle = this.options.startAngle;\n        let endAngle = this.options.endAngle;\n        let radius = this.options.radius;\n        let center = this.options.center;\n\n        var angleDiff = endAngle - startAngle + (endAngle < startAngle ? (2 * Math.PI) : 0);\n        var startPoint = math.polarToCartesian(startAngle, radius, center);\n        var endPoint = math.polarToCartesian(endAngle, radius, center);\n        var sweepFlag;\n        var largeArcFlag;\n\n        // Set largeArcFlag and sweepFlag\n        if (angleDiff <= Math.PI) {\n            largeArcFlag = 0;\n            if (math.crossProduct(startPoint, endPoint, center) <= 0) {\n                sweepFlag = 0;\n            } else {\n                sweepFlag = 1;\n            }\n        } else {\n            largeArcFlag = 1;\n            if (math.crossProduct(startPoint, endPoint, center) <= 0) {\n                sweepFlag = 1;\n            } else {\n                sweepFlag = 0;\n            }\n        }\n\n        return \"M \" + startPoint.x + \" \" + startPoint.y +\n            \" A \" + radius + \" \" + radius + \" 0 \" + largeArcFlag + \" \" + sweepFlag + \" \" +\n            endPoint.x + \" \" + endPoint.y;\n    }\n};\n\nSVG.Rect = class SVGRect extends SVG.Element {\n    getNodeType() {\n        return \"rect\";\n    }\n\n    getX() {\n        return this.options.x;\n    }\n\n    setX(x) {\n        this.options.x = x;\n        this.node.setAttribute(\"x\", this.options.x);\n    }\n\n    getY() {\n        return this.options.y;\n    }\n\n    setY(y) {\n        this.options.y = y;\n        this.node.setAttribute(\"y\", this.options.y);\n    }\n\n    getWidth() {\n        return this.options.width;\n    }\n\n    setWidth(width) {\n        this.options.width = width;\n        this.node.setAttribute(\"width\", this.options.width);\n    }\n\n    getHeight() {\n        return this.options.height;\n    }\n\n    setHeight(height) {\n        this.options.height = height;\n        this.node.setAttribute(\"height\", this.options.height);\n    }\n};\n\nSVG.Line = class SVGLine extends SVG.Element {\n    getNodeType() {\n        return \"line\";\n    }\n\n    getDefaultOptions() {\n        return {\n            fill: \"black\",\n            stroke: \"black\"\n        };\n    }\n\n    //TODO(@all): Make the getters for x1, y1, x2, y2\n\n    setLine(x1, y1, x2, y2) {\n        this.options.x1 = x1;\n        this.options.y1 = y1;\n        this.options.x2 = x2;\n        this.options.y2 = y2;\n\n        this.setAttribute(\"x1\", x1);\n        this.setAttribute(\"y1\", y1);\n        this.setAttribute(\"x2\", x2);\n        this.setAttribute(\"y2\", y2);\n    }\n};\n\nSVG.Polygon = class Polygon extends SVG.Path {\n    getDefaultOptions() {\n        return {\n            points: []\n        };\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"d\", this.getPolygonPath());\n        return attr;\n    }\n\n    getPolygonPath() {\n        let pathString = \"\";\n        for (let i = 0; i < this.options.points.length; ++i) {\n            if (i == 0) {\n                pathString += \"M \";\n            }\n            else {\n                pathString += \"L \";\n            }\n            pathString += this.options.points[i].x + \" \" + this.options.points[i].y + \" \";\n        }\n        pathString += \"Z\";\n        return pathString;\n    }\n\n    setPoints(points) {\n        this.options.points = points;\n        this.setPath(this.getPolygonPath());\n    }\n};","import {equal} from \"../math\";\n\nclass Transition {\n    constructor(options) {\n        this.func = options.func;\n        this.context = options.context;\n        this.duration = options.duration || 0;\n        this.startTime = options.startTime || 0;\n        this.dependsOn = options.dependsOn || [];\n        this.speedFactor = 1;\n    }\n\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   func: \" + this.func.toString() + \"\\n\"+\n                \"}\\n\";\n    }\n\n    hasDependencyOn(t) {\n        for (let transition of this.dependsOn) {\n            if (transition === t) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    canAdvance() {\n        for (let i = 0; i < this.dependsOn.length; i += 1) {\n            if (!this.dependsOn[i].isStopped()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    getFraction(now=Date.now()) {\n        return Math.min((now - this.startTime) / this.getLength(), 1);\n    }\n\n    start(now=Date.now()) {\n        if (this.stopped) {\n            delete this.stopped;\n        }\n        this.setStartTime(now);\n\n        let functionWrapper = () => {\n            if (this.stopped) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            requestAnimationFrame(functionWrapper);\n        };\n        requestAnimationFrame(functionWrapper);\n        return this;\n    }\n\n    getLength() {\n        return this.getEndTime() - this.startTime;\n    }\n\n    setStartTime(time) {\n        this.startTime = time;\n        return this;\n    }\n\n    setSpeedFactor(speedFactor, now=Date.now()) {\n        let ratio = speedFactor / this.speedFactor;\n        this.startTime = (this.startTime - now) / ratio + now;\n        if (this.pauseTime) {\n            this.pauseTime = (this.pauseTime - now) / ratio + now;\n        }\n        this.speedFactor = speedFactor;\n        return this;\n    }\n\n    pause(now=Date.now()) {\n        if (!this.pauseTime) {\n            this.pauseTime = now;\n        }\n        return this;\n    }\n\n    resume(now=Date.now()) {\n        if (this.pauseTime) {\n            this.startTime += (now - this.pauseTime);\n            this.pauseTime = 0;\n        }\n        return this;\n    }\n\n    forceStart() {\n        this.restart();\n        this.func(0.0, this.context);\n        return this;\n    }\n\n    forceFinish() {\n        this.func(1.0, this.context);\n        this.stop();\n        return this;\n    }\n\n    stop() {\n        this.stopped = true;\n    }\n\n    restart() {\n        delete this.stopped;\n        return this;\n    }\n\n    isStopped() {\n        return this.stopped === true;\n    }\n\n    nextStep(now=Date.now()) {\n        // Return if transition is stopped\n        if (this.isStopped()) {\n            return this;\n        }\n        this.lastT = this.getFraction(now);\n        // Return if transitions not started yet\n        if (this.lastT < 0) {\n            return this;\n        }\n        // Call the animation function\n        this.func(this.lastT, this.context);\n        // Stop the animation if it's the last step\n        if (this.lastT === 1) {\n            this.stop();\n        }\n        return this;\n    }\n\n    getEndTime() {\n        return this.startTime + this.duration / this.speedFactor;\n    }\n}\n\nclass Modifier extends Transition {\n    constructor(options) {\n        super(options);\n        this.reverseFunc = options.reverseFunc;\n        this.context = options.context;\n    }\n\n    // WTF, so basically JSON.stringify??\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   func: \" + this.func.toString() + \"\\n\"+\n                \"   reverseFunc: \" + this.reverseFunc.toString() + \"\\n\"+\n                \"}\\n\";\n    }\n\n    forceStart() {\n        this.restart();\n        this.reverseFunc(this.context);\n        return this;\n    }\n\n    forceFinish() {\n        this.func(this.context);\n        this.stop();\n        return this;\n    }\n\n    nextStep(now=Date.now()) {\n        if (this.isStopped()) {\n            return this;\n        }\n        if (now >= this.startTime) {\n            this.func(this.context);\n            this.stop();\n        }\n        return this;\n    }\n\n    getEndTime() {\n        return this.startTime;\n    }\n}\n\nclass TransitionList {\n    constructor(startTime=0) {\n        this.startTime = startTime;\n        this.speedFactor = 1;\n        this.transitions = [];\n        this.dependsOn = [];\n    }\n\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   transitions: [\" + (this.transitions.length ? this.transitions[0].toString() : \"\") + \" ...]\\n\"+\n                \"}\\n\";\n    }\n\n    add(transition, forceFinish=true) {\n        for (let i = 0; i < transition.dependsOn.length; i += 1) {\n            if (transition.dependsOn[i].getEndTime() > transition.startTime) {\n                console.error(transition.toString() + \"\\ndepends on\\n\" + transition.dependsOn[i].toString() + \"\\n\" + \"which ends after its start!\");\n            }\n        }\n        if (forceFinish) {\n            transition.forceFinish();\n        }\n        this.transitions.push(transition);\n        return this;\n    }\n\n    push(transition, forceFinish=true) {\n        transition.setStartTime(this.getLength());\n        for (let i = 0; i < transition.dependsOn.length; i += 1) {\n            if (transition.dependsOn[i].getEndTime() > transition.startTime) {\n                console.error(transition.toString() + \"\\ndepends on\\n\" + transition.dependsOn[i].toString() + \"\\n\" + \"which ends after its start!\");\n            }\n        }\n        if (forceFinish) {\n            transition.forceFinish();\n        }\n        this.transitions.push(transition);\n        return this;\n    }\n\n    getFraction(now=Date.now()) {\n        return Math.min((now - this.startTime) / this.getLength(), 1);\n    }\n\n    setStartTime(startTime) {\n        let timeDelta = startTime - this.startTime;\n        this.startTime = startTime;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.setStartTime(transition.startTime + timeDelta);\n        }\n    }\n\n    start(now=Date.now()) {\n        if (this.stopped) {\n            delete this.stopped;\n        }\n        this.setStartTime(now);\n        let functionWrapper = () => {\n            if (this.stopped) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            requestAnimationFrame(functionWrapper);\n        };\n        requestAnimationFrame(functionWrapper);\n        return this;\n    }\n\n    stop() {\n        this.stopped = true;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.stop();\n        }\n    }\n\n    isStopped() {\n        return this.stopped === true;\n    }\n\n    pause(now=Date.now()) {\n        if (!this.pauseTime) {\n            this.pauseTime = now;\n            for (let i = 0; i < this.transitions.length; i += 1) {\n                this.transitions[i].pause(now);\n            }\n        }\n        return this;\n    }\n\n    resume(now=Date.now()) {\n        if (this.pauseTime) {\n            this.startTime += now - this.pauseTime;\n            for (let i = 0; i < this.transitions.length; i += 1) {\n                this.transitions[i].resume(now);\n            }\n            this.pauseTime = 0;\n        }\n        return this;\n    }\n\n    nextStep() {\n        // Return if transition list is stopped\n        if (this.isStopped()) {\n            return;\n        }\n\n        if (this.onNewFrame) {\n            this.onNewFrame(this.getFraction());\n        }\n\n        let finished = true;\n        let stk = [];\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (!transition.isStopped()) {\n                if (transition.canAdvance()) {\n                    transition.nextStep();\n                    while (stk.length !== 0 && this.transitions[stk[stk.length - 1]].canAdvance()) {\n                        this.transitions[stk[stk.length - 1]].nextStep();\n                        stk.pop();\n                    }\n                } else {\n                    stk.push(i);\n                }\n                finished = false;\n            }\n        }\n        if (finished) {\n            this.stop();\n        }\n        return this;\n    }\n\n    setSpeedFactor(speedFactor, now=Date.now()) {\n        let ratio = speedFactor / this.speedFactor;\n        this.startTime = (this.startTime - now) / ratio + now;\n        if (this.pauseTime) {\n            this.pauseTime = (this.pauseTime - now) / ratio + now;\n        }\n        this.speedFactor = speedFactor;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            this.transitions[i].setSpeedFactor(speedFactor, now);\n        }\n        return this;\n    }\n\n    restart() {\n        delete this.stopped;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.restart();\n        }\n        this.sortByEndTime();\n        return this;\n    }\n\n    getLength() {\n        return this.getEndTime() - this.startTime;\n    }\n\n    getEndTime() {\n        let endTime = 0;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transitionEndTime = this.transitions[i].getEndTime();\n            if (transitionEndTime > endTime) {\n                endTime = transitionEndTime;\n            }\n        }\n        return endTime;\n    }\n\n    hasDependencyOn(t) {\n        for (let transition in this.dependsOn) {\n            if (transition === t) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    canAdvance() {\n        for (let i = 0; i < this.dependsOn.length; i += 1) {\n            if (!this.dependsOn[i].isStopped()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    sortByStartTime() {\n        // TODO: this comparator should be global\n        this.transitions.sort((a, b) => {\n            if (!equal(a.startTime, b.startTime, 0.001)) {\n                return b.startTime - a.startTime;\n            }\n            //not a hack, works in all conflict cases\n            if (!equal(a.getEndTime(), b.getEndTime(), 0.001)) {\n                return b.getEndTime() - a.getEndTime();\n            }\n            if (a.hasDependencyOn(b)) {\n                return 1;\n            }\n            if (b.hasDependencyOn(a)) {\n                return -1;\n            }\n            return 0;\n        });\n    }\n    sortByEndTime() {\n        this.transitions.sort((a, b) => {\n            if (!equal(a.getEndTime(), b.getEndTime(), 0.001)) {\n                return a.getEndTime() - b.getEndTime();\n            }\n            //not a hack, works in all conflict cases\n            if (!equal(a.startTime, b.startTime, 0.001)) {\n                return a.startTime - b.startTime;\n            }\n            if (a.hasDependencyOn(b)) {\n                return -1;\n            }\n            if (b.hasDependencyOn(a)) {\n                return 1;\n            }\n            return 0;\n        });\n    }\n\n    forceStart(now=Date.now()) {\n        this.sortByStartTime();\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (transition.startTime <= now) {\n                transition.forceStart(now);\n            }\n        }\n        return this;\n    }\n\n    forceFinish(now=Date.now(), startTime=-1) {\n        this.sortByEndTime();\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (transition.getEndTime() >= startTime) {\n                if (transition instanceof TransitionList) {\n                transition.forceFinish(now, startTime);\n                } else {\n                    if (typeof now === \"undefined\" || transition.getEndTime() < now) {\n                        transition.forceFinish();\n                    }\n                }\n            }\n        }\n        return this;\n    }\n\n    startAtPercent(startPercent, now=Date.now()) {\n        cancelAnimationFrame(this.animationFrameId);\n        this.restart();\n        // TODO(@wefgef): Buggy\n        let paused = this.pauseTime;\n        if (paused) {\n            this.resume();\n        }\n        this.forceStart(now);\n        this.setStartTime(now - startPercent * this.getLength());\n        this.forceFinish(now);\n        // TODO(@wefgef): Huge hack to deal with force transition\n        this.nextStep();\n        this.nextStep();\n        if (paused) {\n            this.pause();\n        }\n\n        let functionWrapper = () => {\n            if (this.isStopped()) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            this.animationFrameId = requestAnimationFrame(functionWrapper);\n        };\n        this.animationFrameId = requestAnimationFrame(functionWrapper);\n    }\n}\n\nexport {Transition, Modifier, TransitionList};","import {SVG} from \"./SVGBase\";\nimport {Transition} from \"../Transition\";\nimport {Color} from \"../Color\";\n\nSVG.AnimatedSVG = class AnimatedSVG extends SVG.SVGRoot {\n    onMount() {\n        if (this.options.transition) {\n            this.options.transition.setStartTime(Date.now());\n            let animationWrapper = () => {\n                if (this.options.transition.isStopped()) {\n                    if (this.options.repeat) {\n                        this.options.transition.setStartTime(Date.now());\n                        this.options.transition.restart();\n                        requestAnimationFrame(animationWrapper);\n                    }\n                    return;\n                }\n                if (!this.options.transition.pauseTime) {\n                    this.options.transition.nextStep();\n                }\n                requestAnimationFrame(animationWrapper);\n            };\n            requestAnimationFrame(animationWrapper);\n        }\n    }\n};\n\nSVG.Element.prototype.blinkTransition = function (options) {\n    let config = {\n        duration: 2000,\n        times: 2,\n        firstColor: \"grey\",\n        secondColor: \"black\",\n        executeLastStep: true,\n        startTime: 0,\n        dependsOn: []\n    };\n    Object.assign(config, options);\n    return new Transition({\n        func: (t, context) => {\n            if (t > 1 - context.interval && !context.executeLastStep) {\n                this.setColor(context.firstColor);\n            } else {\n                this.setColor(Math.floor((1 - t) / context.interval) % 2 === 1 ? context.firstColor : context.secondColor);\n            }\n        },\n        context: {\n            firstColor: config.firstColor,\n            secondColor: config.secondColor,\n            interval: 1 / (2 * config.times),\n            executeLastStep: config.executeLastStep\n        },\n        duration: config.duration,\n        startTime: config.startTime,\n        dependsOn: config.dependsOn\n    });\n};\nSVG.Element.prototype.changeOpacityTransition = function(opacity, duration, dependsOn=[], startTime=0) {\n    if (!this.options.hasOwnProperty(\"opacity\")) {\n        this.options.opacity = 1;\n    }\n    return new Transition({\n        func: (t, context) => {\n            this.setOpacity((1 - t) * context.opacity + t * opacity);\n        },\n        context: {\n            opacity: this.options.opacity\n        },\n        duration: duration,\n        startTime: startTime,\n        dependsOn: dependsOn\n    });\n};\nSVG.Element.prototype.changeColorTransition = function(color, duration, dependsOn=[], startTime=0) {\n        return new Transition({\n            func: (t, context) => {\n                this.setColor(Color.interpolate(context.color, color, t));\n            },\n            context: {\n                color: this.getColor()\n            },\n            duration: duration,\n            startTime: startTime,\n            dependsOn: dependsOn\n        });\n    };\n\nSVG.Text.prototype.moveTransition = function(coords, duration, dependsOn=[], startTime=0) {\n        return new Transition({\n            func: (t, context) => {\n                this.setPosition(\n                    (1 - t) * context.x + t * coords.x,\n                    (1 - t) * context.y + t * coords.y\n                );\n            },\n            context: {\n                x: this.options.x,\n                y: this.options.y\n            },\n            duration: duration,\n            startTime: startTime,\n            dependsOn: dependsOn\n        });\n    };\nSVG.Text.prototype.changeFillTransition = function(color, duration, dependsOn=[], startTime=0) {\n    return new Transition({\n        func: (t, context) => {\n            this.setColor(Color.interpolate(context.color, color, t), true);\n        },\n        context: {\n            color: this.getColor()\n        },\n        duration: duration,\n        startTime: startTime,\n        dependsOn: dependsOn\n    });\n};","import {UI} from \"./UIBase\";\nimport {GlobalStyle} from \"./GlobalStyle\";\n\nclass Switcher extends UI.Element {\n    constructor(options) {\n        super(options);\n        this.childMap = new WeakMap();\n        this.numRedraws = 0;\n    }\n\n    getDefaultOptions() {\n        return {\n            fullHeight: false,\n            preserveScroll: true,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.options.fullHeight) {\n            attr.addClass(GlobalStyle.Utils.fullHeight);\n        }\n    }\n\n    copyState(element) {\n        let options = Object.assign({}, element.options, {\n            children: this.overwriteElements(this.options.children || [], element.options.children || []),\n        });\n\n        this.setOptions(options);\n\n        for (let child of this.options.children) {\n            if (child.options.active) {\n                this.activeChild = child;\n            }\n        }\n    }\n\n    render() {\n        return this.activeChild || this.options.children[0];\n    }\n\n    overwriteElements(existingElements, newElements) {\n        let keyMap = this.getElementKeyMap(existingElements);\n        for (let i = 0; i < newElements.length; i += 1) {\n            let newChild = newElements[i];\n            let newChildKey = (newChild.options && newChild.options.key) || (\"autokey\" + i);\n            let existingChild = keyMap.get(newChildKey);\n            if (existingChild === newChild) {\n                continue;\n            }\n            if (existingChild && newChild.canOverwrite(existingChild)) {\n                newElements[i] = newChild = this.overwriteChild(existingChild, newChild);\n            }\n        }\n        return newElements;\n    }\n\n    redraw() {\n        this.numRedraws += 1;\n\n        //basic things for our current node\n        this.applyNodeAttributes();\n        this.applyRef();\n\n        // This render may be required to update this.options.children\n        UI.renderingStack.push(this);\n        this.render();\n        UI.renderingStack.pop();\n\n        if (this.options.children.length == 0) {\n            return;\n        }\n\n        for (let child of this.options.children) {\n            if (this.options.lazyRender) {\n                this.getChildProperties(child).isUpToDate = false;\n                child.applyRef();\n            } else {\n                this.updateChild(child);\n            }\n        }\n\n        this.updateActiveChild(this.activeChild || this.options.children[0]);\n    }\n\n    getChildProperties(child) {\n        if (!this.childMap.has(child)) {\n            this.childMap.set(child, {\n                isMounted: !!child.node,\n                redrawIndex: -1,\n            });\n        }\n        return this.childMap.get(child);\n    }\n\n    updateChild(child) {\n        if (this.getChildProperties(child).redrawIndex < this.numRedraws) {\n            if (!child.node) {\n                child.mount(this);\n            } else {\n                child.redraw();\n            }\n            this.getChildProperties(child).redrawIndex = this.numRedraws;\n        }\n    }\n\n    appendChild(child, doMount=false) {\n        this.options.children.push(child);\n        if (doMount) {\n            child.mount(this);\n        }\n        if (this.options.children.length == 1) {\n            this.setActive(child);\n        }\n        return child;\n    }\n\n    getActive() {\n        return this.activeChild;\n    }\n\n    insertChildNodeBefore(child, nextSibling) {\n        let childProperties = this.getChildProperties(child);\n        childProperties.isMounted = true;\n        childProperties.redrawIndex = this.numRedraws;\n    }\n\n    updateActiveChild(element) {\n        while (this.node.firstChild) {\n            //TODO: would be useful here to be able to access the matching UI Element\n            this.node.removeChild(this.node.firstChild);\n        }\n\n        if (element == null) {\n            this.activeChild = null;\n            return;\n        }\n\n        this.updateChild(element);\n\n        this.node.appendChild(element.node);\n        this.children[0] = this.activeChild = element;\n    }\n\n    deactivateChild(child) {\n        child.dispatch(\"hide\");\n        child.dispatch(\"setActive\", false);\n        if (this.options.preserveScroll) {\n            this.getChildProperties(child).scrollTop = this.node.scrollTop;\n        }\n    }\n\n    activateChild(child) {\n        child.dispatch(\"setActive\", true);\n        child.dispatch(\"show\");\n        if (this.options.preserveScroll) {\n            this.node.scrollTop = this.getChildProperties(child).scrollTop || 0;\n        }\n    }\n\n    setActive(element) {\n        if (this.activeChild === element) {\n            return;\n        }\n        if (this.activeChild) {\n            this.deactivateChild(this.activeChild);\n        }\n        this.updateActiveChild(element);\n        if (this.activeChild) {\n            this.activateChild(this.activeChild);\n        }\n    }\n\n    hasChild(element) {\n        return this.childMap.has(element);\n    }\n\n    onMount() {\n        this.addListener(\"shouldRedrawChild\", (event) => {\n            if (event.child.isInDocument()) {\n                event.child.redraw();\n            } else {\n                this.getChildProperties(event.child).isUpToDate = false;\n            }\n        });\n    }\n}\n\nexport {Switcher};\n","import {UI} from \"./UIBase\";\nimport {Switcher} from \"./Switcher\";\nimport {Dispatcher} from \"../base/Dispatcher\";\nimport {PageTitleManager} from \"../base/PageTitleManager\";\nimport {unwrapArray} from \"../base/Utils\";\n\nexport class Router extends Switcher {\n    static parseURL(path=location.pathname) {\n        if (!Array.isArray(path)) {\n            path = path.split(\"/\");\n        }\n        return path.filter(str => str != \"\");\n    }\n\n    static joinURLParts(urlParts) {\n        if (urlParts.length) {\n            return \"/\" + urlParts.join(\"/\") + \"/\";\n        } else {\n            return \"/\";\n        }\n    }\n\n    static changeURL(url, replaceHistory=false) {\n        if (Array.isArray(url)) {\n            url = this.joinURLParts(url);\n        }\n\n        if (url === window.location.pathname) {\n            return;\n        }\n        const historyArgs = [{}, PageTitleManager.getTitle(), url];\n        if (replaceHistory) {\n            window.history.replaceState(...historyArgs);\n        } else {\n            window.history.pushState(...historyArgs);\n        }\n\n        this.updateURL();\n    }\n\n    static updateURL() {\n        this.Global.setURL(this.parseURL());\n    }\n\n    static setGlobalRouter(router) {\n        this.Global = router;\n        window.onpopstate = () => {\n            this.updateURL();\n            Dispatcher.Global.dispatch(\"externalURLChange\");\n        };\n\n        this.updateURL();\n    }\n\n    // TODO: should be named getRootRoute() :)\n    getRoutes() {\n        return this.options.routes;\n    }\n\n    getPageNotFound() {\n        const element = UI.createElement(\"h1\", {children: [\"Can't find url, make sure you typed it correctly\"]});\n        element.pageTitle = \"Page not found\";\n        return element;\n    }\n\n    setURL(urlParts) {\n        urlParts = unwrapArray(urlParts);\n\n        const page = this.getRoutes().getPage(urlParts) || this.getPageNotFound();\n\n        const activePage = this.getActive();\n\n        if (activePage !== page) {\n            activePage && activePage.dispatch(\"urlExit\");\n            this.setActive(page);\n            page.dispatch(\"urlEnter\");\n        }\n\n        if (this === this.constructor.Global) {\n            PageTitleManager.setTitle(page.pageTitle);\n        }\n\n        this.dispatch(\"change\", urlParts, page, activePage);\n    }\n\n    addChangeListener(callback) {\n        return this.addListener(\"change\", callback);\n    }\n\n    onMount() {\n        if (!Router.Global) {\n            this.constructor.setGlobalRouter(this);\n        }\n    }\n}\n\nexport class Route {\n    static ARG_KEY = \"%s\";\n    cachedPages = new Map();\n\n    constructor(expr, pageGenerator, subroutes=[], options={}) {\n        this.expr = (expr instanceof Array) ? expr : [expr];\n        this.pageGenerator = pageGenerator;\n        this.subroutes = unwrapArray(subroutes);\n        if (typeof options === \"string\") {\n            options = {title: options}\n        }\n        this.options = options;\n        this.cachedPages = new Map();\n    }\n\n    matches(urlParts) {\n        if (urlParts.length < this.expr.length) {\n            return null;\n        }\n        let args = [];\n        for (let i = 0; i < this.expr.length; i += 1) {\n            const isArg = this.expr[i] === this.constructor.ARG_KEY;\n            if (urlParts[i] != this.expr[i] && !isArg) {\n                return null;\n            }\n            if (isArg) {\n                args.push(urlParts[i]);\n            }\n        }\n        return {\n            args: args,\n            urlParts: urlParts.slice(this.expr.length)\n        }\n    }\n\n    getPageTitle() {\n        return this.options.title;\n    }\n\n    generatePage(...argsArray) {\n        if (!this.pageGenerator) {\n            return null;\n        }\n\n        const serializedArgs = argsArray.toString();\n        if (!this.cachedPages.has(serializedArgs)) {\n            const pageGenerator = this.pageGenerator;\n            const args = unwrapArray(argsArray);\n            const generatorArgs = {args, argsArray};\n            const page = (pageGenerator.prototype instanceof UI.Element) ? new pageGenerator(generatorArgs) : pageGenerator(generatorArgs);\n            if (!page.pageTitle) {\n                const myPageTitle = this.getPageTitle();\n                if (myPageTitle) {\n                    page.pageTitle = this.getPageTitle();\n                }\n            }\n            this.cachedPages.set(serializedArgs, page);\n        }\n        return this.cachedPages.get(serializedArgs);\n    }\n\n    matchesOwnNode(urlParts) {\n        return urlParts.length === 0;\n    }\n\n    getPage(urlParts, router, ...argsArray) {\n        if (this.matchesOwnNode(urlParts)) {\n            return this.generatePage(...argsArray);\n        }\n        for (const subroute of this.subroutes) {\n            const match = subroute.matches(urlParts);\n            if (match) {\n                if (match.args.length) {\n                    argsArray.push(match.args);\n                }\n                let page = subroute.getPage(match.urlParts, router, ...argsArray);\n                if (page && !page.pageTitle) {\n                    page.pageTitle = this.getPageTitle();\n                }\n                return page;\n            }\n        }\n    }\n}\n\nexport class TerminalRoute extends Route {\n    constructor(expr, pageGenerator, options={}) {\n        super(expr, pageGenerator, [], options);\n    }\n\n    matchesOwnNode(urlParts) {\n        return true;\n    }\n\n    getPage(urlParts, router) {\n        const page = super.getPage(...arguments);\n        setTimeout(() => {\n            page.setURL(urlParts);\n        });\n        return page;\n    }\n}\n","import {UI} from \"./UIBase\";\n\n// This is the object that will be used to translate text\nlet translationMap = null;\n\n// Keep a set of all UI Element that need to be updated when the language changes\n// Can't use a weak set here unfortunately because we need iteration\n// That's why we must make sure to remove all nodes from the set when destroying them\nUI.TranslationElements = new Set();\n\nUI.TranslationTextElement = class TranslationTextElement extends UI.TextElement {\n    constructor(value) {\n        if (arguments.length === 1) {\n            super(value);\n        } else {\n            super(\"\");\n            this.setValue(...arguments);\n        }\n    }\n\n    setValue(value) {\n        if (arguments.length > 1) {\n            this.value = Array.from(arguments);\n        } else {\n            this.value = value;\n        }\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    evaluateSprintf(str, ...values) {\n        throw Error(\"Not yet implemented\");\n    }\n\n    evaluate(strings, ...values) {\n        if (!Array.isArray(strings)) {\n            return this.evaluateSprintf(...arguments);\n            // This means strings is a string with the sprintf pattern\n        } else {\n            // Using template literals https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals\n            if (arguments.length != strings.length) {\n                console.error(\"Invalid arguments to evaluate \", Array.from(arguments));\n            }\n            let result = strings[0];\n            for (let i = 1; i < arguments.length; i++) {\n                result += arguments[i];\n                result += strings[i];\n            }\n            return result;\n        }\n    }\n\n    getValue() {\n        let value = this.value;\n        if (Array.isArray(this.value)) {\n            value = (translationMap && translationMap.get(...value)) || this.evaluate(...value);\n        } else {\n            // TODO: if translationMap.get() returns \"\", keep, skip only if returning null\n            value = (translationMap && translationMap.get(value)) || value;\n        }\n        return value;\n    }\n\n    onMount() {\n        UI.TranslationElements.add(this);\n    }\n\n    onUnmount() {\n        UI.TranslationElements.delete(this);\n    }\n};\n\n// This method is a shorthand notation to create a new translatable text element\n// TODO: should also support being used as a string template\nUI.T = (str) => {\n    return new UI.TranslationTextElement(str);\n};\n\n// TODO @mciucu this should be wrapped in a way that previous requests that arrive later don't get processed\n// TODO: should this be done with promises?\n// Function to be called with a translation map\n// The translationMap object needs to implement .get(value) to return the translation for value\nfunction setTranslationMap(_translationMap) {\n    if (translationMap === _translationMap) {\n        return;\n    }\n    translationMap = _translationMap;\n    for (let textElement of UI.TranslationElements.values()) {\n        textElement.redraw();\n    }\n}\n\nlet languageStore = null;\n\n// This function should be called to set the language store to watch for changes\n// The languageStore argumenent needs to implement .getLocale(), addListener(\"localChange\", (language) =>{})\n// The language objects need to implement .buildTranslation(callback), where callback should be called with a translationMap\nfunction setLanguageStore(_languageStore) {\n    languageStore = _languageStore;\n\n    let currentLocale = languageStore.getLocale();\n    // If there's a default language already set, build the translation table for it\n    if (currentLocale) {\n        currentLocale.buildTranslation(setTranslationMap);\n    }\n\n    // Add a listener for whenever the language changes\n    languageStore.addListener(\"localeChange\", (language) => {\n        language.buildTranslation(setTranslationMap);\n    });\n}\n\nfunction getTranslationMap() {\n    return translationMap;\n}\n\nexport {setLanguageStore, setTranslationMap, getTranslationMap};\n","import {StyleSheet} from \"../Style\";\nimport {styleRule, styleRuleInherit} from \"../../decorators/Style\";\n\nclass BaseTabAreaStyle extends StyleSheet {\n    @styleRule\n    tab = {\n        userSelect: \"none\",\n        display: \"inline-block\",\n        position: \"relative\",\n    };\n\n    @styleRule\n    activeTab = {};\n\n    @styleRule\n    nav = {\n        listStyle: \"none\",\n    };\n\n    @styleRule\n    switcher = {\n        flex: \"1\",\n        overflow: \"auto\",\n    };\n\n    @styleRule\n    tabArea = {\n        display: \"flex\",\n        flexDirection: \"column\",\n    }\n}\n\nclass DefaultTabAreaStyle extends BaseTabAreaStyle {\n    @styleRuleInherit\n    tab = {\n        marginBottom: \"-1px\",\n        textDecoration: \"none !important\",\n        marginRight: \"2px\",\n        lineHeight: \"1.42857143\",\n        border: \"1px solid transparent\",\n        borderRadius: \"4px 4px 0 0\",\n        padding: \"8px\",\n        paddingLeft: \"10px\",\n        paddingRight: \"10px\",\n        \":hover\": {\n            cursor: \"pointer\",\n            backgroundColor: \"#eee\",\n            color: \"#555\",\n            border: \"1px solid #ddd\",\n            borderBottomColor: \"transparent\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        color: \"#555 !important\",\n        cursor: \"default !important\",\n        backgroundColor: \"#fff !important\",\n        border: \"1px solid #ddd !important\",\n        borderBottomColor: \"transparent !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        borderBottom: \"1px solid #ddd\",\n        paddingLeft: \"0\",\n        marginBottom: \"0\",\n    };\n}\n\nclass MinimalistTabAreaStyle extends BaseTabAreaStyle {\n    @styleRuleInherit\n    tab = {\n        textDecoration: \"none !important\",\n        lineHeight: \"1.42857143\",\n        paddingTop: \"6px\",\n        paddingLeft: \"8px\",\n        paddingRight: \"8px\",\n        paddingBottom: \"4px\",\n        color: \"#666\",\n        borderBottom: \"2px solid transparent\",\n        \":hover\": {\n            cursor: \"pointer\",\n            color: \"rgba(51,122,183,1)\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        fontWeight: \"bold\",\n        color: \"rgba(51,122,183,1)\",\n        cursor: \"default !important\",\n        borderBottom: \"2px solid rgba(51,122,183,1) !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        position: \"relative\",\n        borderBottom: \"1px solid #aaa\",\n    };\n}\n\nexport {BaseTabAreaStyle, DefaultTabAreaStyle, MinimalistTabAreaStyle};\n","import {UI} from \"../UIBase\";\nimport {Switcher} from \"../Switcher\";\nimport {Link} from \"../UIPrimitives\";\nimport {SingleActiveElementDispatcher} from \"../../base/Dispatcher\";\nimport {registerStyle} from \"../style/Theme\";\nimport {DefaultTabAreaStyle} from \"./Style\";\n\nclass BasicTabTitle extends Link {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.tab);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.activeTab);\n        }\n    }\n\n    getDefaultOptions() {\n        return {\n            newTab: false,\n        }\n    }\n\n    canOverwrite(existingElement) {\n        // Disable reusing with different panels, since we want to attach listeners to the panel\n        return super.canOverwrite(existingElement) && this.options.panel === existingElement.options.panel;\n    }\n\n    setActive(active) {\n        this.options.active = active;\n        this.redraw();\n        if (active) {\n            this.options.activeTabDispatcher.setActive(this.getPanel(), () => {\n                this.setActive(false);\n            });\n        }\n    }\n\n    getPanel() {\n        return this.options.panel;\n    }\n\n    getTitle() {\n        if (this.options.title) {\n            return this.options.title;\n        }\n        let panel = this.getPanel();\n        if (typeof panel.getTitle === \"function\") {\n            return panel.getTitle();\n        }\n        return panel.options.title;\n    }\n\n    render() {\n        return [this.getTitle()];\n    }\n\n    onMount() {\n        super.onMount();\n\n        if (this.options.active) {\n            this.setActive(true);\n        }\n\n        this.addClickListener(() => {\n            this.setActive(true);\n        });\n\n        if (this.options.panel && this.options.panel.addListener) {\n            this.attachListener(this.options.panel, \"show\", () => {\n                this.setActive(true);\n            });\n        }\n    }\n};\n\nclass TabTitleArea extends UI.Element {\n};\n\n@registerStyle(DefaultTabAreaStyle)\nclass TabArea extends UI.Element {\n    activeTabDispatcher = new SingleActiveElementDispatcher();\n\n    getDefaultOptions() {\n        return {\n            autoActive: true, // means the first Tab will be automatically selected\n            // lazyRender: true, // TODO: should be true by default\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.tabArea);\n    }\n\n    createTabPanel(panel) {\n        let tab = <BasicTabTitle panel={panel} activeTabDispatcher={this.activeTabDispatcher}\n                                 active={panel.options.active} href={panel.options.tabHref}\n                                 styleSheet={this.styleSheet} />;\n\n        return [tab, panel];\n    }\n\n    appendChild(panel, doMount) {\n        let [tabTitle, tabPanel] = this.createTabPanel(panel);\n\n        this.options.children.push(panel);\n\n        this.titleArea.appendChild(tabTitle);\n        this.switcherArea.appendChild(tabPanel, doMount || !this.options.lazyRender);\n    };\n\n    getTitleArea(tabTitles) {\n        return <TabTitleArea ref=\"titleArea\" className={this.styleSheet.nav}>\n            {tabTitles}\n        </TabTitleArea>;\n    }\n\n    getSwitcher(tabPanels) {\n        return <Switcher className={this.styleSheet.switcher} ref=\"switcherArea\" lazyRender={this.options.lazyRender}>\n            {tabPanels}\n        </Switcher>;\n    }\n\n    render() {\n        let tabTitles = [];\n        let tabPanels = [];\n        let activeTab;\n\n        for (let panel of this.getGivenChildren()) {\n            let [tabTitle, tabPanel] = this.createTabPanel(panel);\n\n            if (tabTitle.options.active) {\n                activeTab = tabTitle;\n            }\n\n            tabTitles.push(tabTitle);\n            tabPanels.push(tabPanel);\n        }\n\n        if (this.options.autoActive && !activeTab && tabTitles.length > 0) {\n            tabTitles[0].options.active = true;\n        }\n\n        return [\n            this.getTitleArea(tabTitles),\n            this.getSwitcher(tabPanels),\n        ];\n    };\n\n    setActive(panel) {\n        this.activeTabDispatcher.setActive(panel);\n    }\n\n    getActive() {\n        return this.activeTabDispatcher.getActive();\n    }\n\n    onSetActive(panel) {\n        this.switcherArea.setActive(panel);\n    }\n\n    onMount() {\n        this.attachListener(this.activeTabDispatcher, (panel) => {\n            this.onSetActive(panel);\n        });\n\n        this.addListener(\"resize\", () => {\n            this.switcherArea.dispatch(\"resize\");\n        });\n    }\n};\n\nexport * from \"./Style\";\nexport {TabTitleArea, BasicTabTitle, TabArea};\n","import {mapIterator} from \"../base/Utils\";\n\n// A map that supports multiple values to the same key\nclass MultiMap {\n    constructor() {\n        this.map = new Map();\n    }\n\n    static iterator(items) {\n        return items[Symbol.iterator];\n    }\n\n    // Methods that are called before every access inside\n    // the internal map\n    normalizeKey(key) {\n        return key;\n    }\n    \n    normalizeValue(value) {\n        return value;\n    }\n\n    append(key, value) {\n        let nKey = this.normalizeKey(key);\n        let nValue = this.normalizeValue(value);\n        if (this.map.has(nKey)) {\n            this.map.get(nKey).push(nValue);\n        } else {\n            this.map.set(nKey, [nValue]);\n        }\n    }\n\n    has(key) {\n        return this.map.has(this.normalizeKey(key));\n    }\n\n    delete(key) {\n        this.map.delete(this.normalizeKey(key));\n    }\n\n    set(key, value) {\n        this.map.set(this.normalizeKey(key), [this.normalizeValue(value)]);\n    }\n\n    get(key) {\n        let nKey = this.normalizeKey(key);\n        if (this.map.has(nKey)) {\n            return this.map.get(nKey)[0];\n        }\n        return null;\n    }\n\n    getAll(key) {\n        let nKey = this.normalizeKey(key);\n        if (this.map.has(nKey)) {\n            return this.map.get(nKey).slice();\n        }\n        return null;\n    }\n\n    forEach(callback, context) {\n        for (let [key, value] of this.entries()) {\n            callback.call(context, value, key, this);\n        }\n    }\n\n    keys() {\n        return mapIterator(this.entries(), entry => entry[0]);\n    }\n\n    values() {\n        return mapIterator(this.entries(), entry => entry[1]);\n    }\n\n    *entries() {\n        for (let [key, values] of this.map.entries()) {\n            for (let value of values) {\n                yield [key, value];\n            }\n        }\n    }\n\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n}\n\nexport {MultiMap};\n","import {MultiMap} from \"../data-structures/MultiMap\";\n\n// This class currently mirrors the functionality of Headers on Chrome at the time of implementation\n// TODO: It is specified that the function get() should return the result of getAll() and getAll() deprecated\nclass Headers extends MultiMap {\n    static polyfill = true;\n\n    constructor(obj) {\n        super();\n        if (obj instanceof Headers) {\n            for (let [key, value] of obj) {\n                this.append(key, value);\n            }\n        } else if (obj) {\n            for (let key of Object.keys(obj)) {\n                this.append(key, obj[key]);\n            }\n        }\n    }\n\n    normalizeKey(key) {\n        if (typeof key !== 'string') {\n            key = String(key);\n        }\n        if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(key)) {\n            throw new TypeError('Invalid character in header field name');\n        }\n        return key.toLowerCase();\n    }\n\n    normalizeValue(value) {\n        if (typeof value !== \"string\") {\n            value = String(value);\n        }\n        return value;\n    }\n}\n\nfunction polyfillHeaders(global) {\n    global.Headers = global.Headers || Headers;\n}\n\nexport {Headers, polyfillHeaders};","import {MultiMap} from \"../data-structures/MultiMap\";\n\nclass URLSearchParams extends MultiMap {\n    static polyfill = true;\n\n    constructor(obj=\"\") {\n        super(obj);\n        let str = String(obj);\n        if (str.indexOf(\"?\") === 0) {\n            str = str.slice(1);\n        }\n        for (let parameter of str.split(\"&\")) {\n            let index = parameter.indexOf(\"=\");\n            if (index !== -1) {\n                let key = this.constructor.decode(parameter.slice(0, index));\n                let value = this.constructor.decode(parameter.slice(index + 1));\n                this.append(key, value);\n            }\n        }\n    }\n\n    normalizeKey(key) {\n        return key.toString();\n    }\n\n    normalizeValue(value) {\n        return value.toString();\n    }\n\n    static encode(str) {\n        let replace = {\n            '!': '%21',\n            \"'\": '%27',\n            '(': '%28',\n            ')': '%29',\n            '~': '%7E',\n            '%20': '+',\n            '%00': '\\x00'\n        };\n        return encodeURIComponent(str).replace(/[!'\\(\\)~]|%20|%00/g, (match) => {\n            return replace[match];\n        });\n    }\n\n    static decode(str) {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    }\n\n    toString() {\n        let query = [];\n        for (let [key, values] of this.map.entries()) {\n            let name = this.constructor.encode(key);\n            for (let value of values) {\n                query.push(name + \"=\" + this.constructor.encode(value));\n            }\n        }\n        return query.join(\"&\");\n    }\n}\n\nfunction polyfillURLSearchParams(global) {\n    global.URLSearchParams = global.URLSearchParams || URLSearchParams;\n}\n\nexport {URLSearchParams, polyfillURLSearchParams};","import {polyfillHeaders} from \"./Headers\";\nimport {polyfillURLSearchParams} from \"./URLSearchParams\";\n\nfunction fileReaderReady(reader) {\n    return new Promise((resolve, reject) => {\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.onerror = () => {\n            reject(reader.error);\n        };\n    });\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n    let reader = new FileReader();\n    let promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise;\n}\n\nfunction readBlobAsText(blob) {\n    let reader = new FileReader();\n    let promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise;\n}\n\nclass Body {\n    constructor() {\n        this.bodyUsed = false;\n    }\n\n    setBodyUsed() {\n        if (this.bodyUsed) {\n            return Promise.reject(new TypeError(\"Already read\"));\n        }\n        this.bodyUsed = true;\n    }\n\n    static decode(body) {\n        let form = new FormData();\n        for (let bytes of body.trim().split('&')) {\n            if (bytes) {\n                let split = bytes.split('=');\n                let name = split.shift().replace(/\\+/g, ' ');\n                let value = split.join('=').replace(/\\+/g, ' ');\n                form.append(decodeURIComponent(name), decodeURIComponent(value));\n            }\n        }\n        return form;\n    }\n\n    static cloneBuffer(buffer) {\n        if (buffer.slice) {\n            return buffer.slice();\n        } else {\n            let view = new Uint8Array(buffer.byteLength);\n            view.set(new Uint8Array(buffer));\n            return view.buffer;\n        }\n    }\n\n    initialize(bodyInit) {\n        this._bodyInit = bodyInit;\n        if (!bodyInit) {\n            this._bodyText = \"\";\n        } else if ((typeof bodyInit === \"string\") || (bodyInit instanceof String)) {\n            this._bodyText = bodyInit;\n        } else if (Blob.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyBlob = bodyInit;\n        } else if (FormData.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyFormData = bodyInit;\n        } else if (URLSearchParams.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyText = bodyInit.toString();\n        } else if (DataView.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyArrayBuffer = this.constructor.cloneBuffer(bodyInit.buffer);\n            this._bodyInit = new Blob([this._bodyArrayBuffer]);\n        } else if (ArrayBuffer.prototype.isPrototypeOf(bodyInit) || ArrayBuffer.isView(bodyInit)) {\n            this._bodyArrayBuffer = this.constructor.cloneBuffer(bodyInit);\n        } else {\n            throw new Error(\"unsupported BodyInit type\");\n        }\n\n        if (!this.headers.get(\"content-type\")) {\n            if ((typeof bodyInit === \"string\") || (bodyInit instanceof String)) {\n                this.headers.set(\"content-type\", \"text/plain;charset=UTF-8\");\n            } else if (this._bodyBlob && this._bodyBlob.type) {\n                this.headers.set(\"content-type\", this._bodyBlob.type);\n            } else if (URLSearchParams.prototype.isPrototypeOf(bodyInit)) {\n                this.headers.set(\"content-type\", \"application/x-www-form-urlencoded;charset=UTF-8\");\n            }\n        }\n    }\n\n    blob() {\n        let rejected = this.setBodyUsed();\n        if (rejected) {\n            return rejected;\n        }\n\n        if (this._bodyBlob) {\n            return Promise.resolve(this._bodyBlob);\n        }\n        if (this._bodyArrayBuffer) {\n            return Promise.resolve(new Blob([this._bodyArrayBuffer]));\n        }\n        if (this._bodyFormData) {\n            // I know this is technically wrong, but only we can create this scenario\n            return Promise.resolve(this._bodyFormData);\n        }\n        return Promise.resolve(new Blob([this._bodyText]));\n    }\n\n    arrayBuffer() {\n        if (this._bodyArrayBuffer) {\n            return this.setBodyUsed() || Promise.resolve(this._bodyArrayBuffer);\n        } else {\n            return this.blob().then(readBlobAsArrayBuffer);\n        }\n    }\n\n    readArrayBufferAsText() {\n        let view = new Uint8Array(this._bodyArrayBuffer);\n        let chars = new Array(view.length);\n\n        for (let i = 0; i < view.length; i++) {\n            chars[i] = String.fromCharCode(view[i]);\n        }\n        return chars.join(\"\");\n    }\n\n    text() {\n        let rejected = this.setBodyUsed();\n        if (rejected) {\n            return rejected;\n        }\n\n        if (this._bodyBlob) {\n            return readBlobAsText(this._bodyBlob);\n        }\n        if (this._bodyArrayBuffer) {\n            return Promise.resolve(this.readArrayBufferAsText());\n        }\n        if (this._bodyFormData) {\n            throw new Error(\"could not read FormData body as text\");\n        }\n        return Promise.resolve(this._bodyText);\n    }\n\n    formData() {\n        return this.text().then(this.constructor.decode);\n    }\n\n    json() {\n        return this.text().then(JSON.parse);\n    }\n}\n\nfunction polyfillBody(global) {\n    // TODO: Might want to polyfill other stuff\n    polyfillURLSearchParams(global);\n    polyfillHeaders(global);\n    global.Body = global.Body || Body;\n}\n\nexport {Body, polyfillBody};","import {Body} from \"./Body\";\n\nclass Request extends Body {\n    constructor(input, options={}) {\n        super();\n        let body = options.body;\n\n        if ((typeof input === \"string\") || (input instanceof String)) {\n            input = {\n                url: input\n            };\n        }\n\n        if (input.bodyUsed) {\n            throw new TypeError(\"Already read\");\n        }\n        if (!body && input.hasOwnProperty(\"_bodyInit\") && input._bodyInit != null) {\n            body = input._bodyInit;\n            input.bodyUsed = true;\n        }\n\n        this.method = this.constructor.normalizeMethod(options.method || input.method || \"GET\");\n        this.url = input.url;\n\n        let headerArgs = options.headers || input.headers || null;\n        this.headers = headerArgs ? new Headers(headerArgs) : new Headers();\n        this.context = options.context || input.context || \"\";\n        this.referrer = options.referrer || input.referrer || \"about:client\";\n        this.referrerPolicy = options.referrerPolicy || input.referrerPolicy || \"\";\n        this.mode = options.mode || input.mode || null;\n        this.credentials = options.credentials || input.credentials || \"omit\";\n        this.cache = options.cache || input.cache || \"default\";\n\n        if ((this.method === \"GET\" || this.method === \"HEAD\") && body) {\n            throw new TypeError(\"Body not allowed for GET or HEAD requests\");\n        }\n        this.initialize(body);\n    }\n\n    static methods = [\"DELETE\", \"GET\", \"HEAD\", \"OPTIONS\", \"POST\", \"PUT\"];\n    static normalizeMethod(method) {\n        let upcased = method.toUpperCase();\n        return (this.methods.indexOf(upcased) > -1) ? upcased : method;\n    }\n\n    clone() {\n        return new Request(this, {body: this._bodyInit});\n    }\n}\n\nfunction polyfillRequest(global) {\n    global.Request = global.Request || Request;\n}\n\nexport {Request, polyfillRequest};","import {Body} from \"Body\";\n\nclass Response extends Body {\n    constructor(bodyInit, options) {\n        super();\n        options = options || {};\n\n        this.type = \"default\";\n        if (options.hasOwnProperty(\"status\")) {\n            this.status = options.status;\n        } else {\n            this.status = 200;\n        }\n        this.ok = (this.status >= 200 && this.status < 300);\n        if (options.hasOwnProperty(\"statusText\")) {\n            this.statusText = options.statusText;\n        } else {\n            this.statusText = \"OK\";\n        }\n        this.headers = new Headers(options.headers);\n        this.url = options.url || \"\";\n        this.initialize(bodyInit);\n    }\n\n    clone() {\n        return new Response(this._bodyInit, {\n            status: this.status,\n            statusText: this.statusText,\n            headers: new Headers(this.headers),\n            url: this.url\n        });\n    }\n\n    static error() {\n        let response = new Response(null, {status: 0, statusText: \"\"});\n        response.type = \"error\";\n        return response;\n    }\n    static redirectStatuses = [301, 302, 303, 307, 308];\n    static redirect(url, status) {\n        if (this.redirectStatuses.indexOf(status) === -1) {\n            throw new RangeError(\"Invalid status code\");\n        }\n        return new Response(null, {status: status, headers: {location: url}});\n    }\n}\n\nfunction polyfillResponse(global) {\n    global.Response = global.Response || Response;\n}\n\nexport {Response, polyfillResponse};","// Tries to be a more flexible implementation of fetch()\n// Still work in progress\n\nimport {isPlainObject} from \"./Utils\";\n\n// May need to polyfill Headers, Request, Response, Body, URLSearchParams classes, so import them\nimport {polyfillRequest} from \"../polyfill/Request\";\nimport {polyfillResponse} from \"../polyfill/Response\";\nimport {polyfillHeaders} from \"../polyfill/Headers\";\nimport {polyfillURLSearchParams} from \"../polyfill/URLSearchParams\";\n\n// TODO: should only call this in the first call to fetch, to not create unneeded dependencies?\nif (window) {\n    polyfillRequest(window);\n    polyfillResponse(window);\n    polyfillHeaders(window);\n    polyfillURLSearchParams(window);\n}\n\n// Parse the headers from an xhr object, to return a native Headers object\nfunction parseHeaders(xhr) {\n    const rawHeader = xhr.getAllResponseHeaders() || \"\";\n    const rawHeaderLines = rawHeader.split(/\\r?\\n/);\n    let headers = new Headers();\n\n    for (let line of rawHeaderLines) {\n        let parts = line.split(\":\");\n        let key = parts.shift().trim();\n        if (key) {\n            let value = parts.join(\":\").trim();\n            headers.append(key, value);\n        }\n    }\n    return headers;\n}\n\n// Creates a new URLSearchParams object from a plain object\n// Fields that are arrays are spread\nfunction getURLSearchParams(data) {\n    if (!isPlainObject(data)) {\n        return data;\n    }\n\n    let urlSearchParams = new URLSearchParams();\n    for (const key of Object.keys(data)) {\n        let value = data[key];\n        if (Array.isArray(value)) {\n            for (let instance of value) {\n                urlSearchParams.append(key + \"[]\", instance);\n            }\n        } else {\n            urlSearchParams.set(key, value);\n        }\n    }\n    return urlSearchParams;\n}\n\n// Appends search parameters from an object to a given URL or Request, and returns the new URL\nfunction composeURL(url, params) {\n    if (url.url) {\n        url = url.url;\n    }\n    // TODO: also extract the preexisting arguments in the url\n    if (params) {\n        url += \"?\" + getURLSearchParams(params);\n    }\n    return url;\n}\n\nexport function toFormData(data) {\n    let formData = new FormData();\n    for (const key of Object.keys(data)) {\n        formData.append(key, data[key]);\n    }\n    return formData;\n}\n\nclass XHRPromise {\n    constructor(request, options = {}) {\n        request = new Request(request, options);\n        let xhr = new XMLHttpRequest();\n        this.options = options;\n        this.request = request;\n        this.xhr = xhr;\n\n        this.promise = new Promise((resolve, reject) => {\n            this.promiseResolve = resolve;\n            this.promiseReject = reject;\n\n            xhr.onload = () => {\n                let headers = this.getResponseHeaders();\n\n                let body = xhr.response || xhr.responseText;\n                let responseInit = {\n                    status: xhr.status,\n                    statusText: xhr.statusText,\n                    headers: headers,\n                    url: xhr.responseURL || headers.get(\"X-Request-URL\"),\n                };\n                let response = new Response(body, responseInit);\n                // In case dataType is \"arrayBuffer\", \"blob\", \"formData\", \"json\", \"text\"\n                // Response has methods to return these as promises\n                if (typeof response[options.dataType] === \"function\") {\n                    // TODO: should whitelist dataType to json, blob\n                    response[options.dataType]().then((data) => {\n                        this.resolve(data);\n                    });\n                } else {\n                    this.resolve(response);\n                }\n            };\n\n            // TODO: also dispatch all arguments here on errors\n            xhr.onerror = () => {\n                this.reject(new TypeError(\"Network error\"));\n            };\n\n            // TODO: need to have an options to pass setting to xhr (like timeout value)\n            xhr.ontimeout = () => {\n                this.reject(new TypeError(\"Network timeout\"));\n            };\n\n            xhr.open(request.method, request.url, true);\n\n            if (request.credentials === \"include\") {\n                xhr.withCredentials = true;\n            }\n\n            // TODO: come back to this\n            xhr.responseType = \"blob\";\n\n            request.headers.forEach((value, name) => {\n                if (options.body instanceof FormData && name.toLowerCase() === \"content-type\") {\n                    return;\n                }\n                xhr.setRequestHeader(name, value);\n            });\n\n            // TODO: there's no need to send anything on a GET or HEAD\n            if (options.body instanceof FormData) {\n                this.send(options.body);\n            } else {\n                request.blob().then((blob) => {\n                    // The blob can be a FormData when we're polyfilling the Request class\n                    let body = ((blob instanceof FormData) || blob.size) ? blob : null;\n                    this.send(body);\n                });\n            }\n        });\n    }\n\n    getResponseHeaders() {\n        return parseHeaders(this.xhr);\n    }\n\n    send(body) {\n        this.getXHR().send(body);\n    }\n\n    getPostprocessors() {\n        return this.options.postprocessors || fetch.defaultPostprocessors;\n    }\n\n    getErrorPostprocessors() {\n        return this.options.errorPostprocessors || fetch.defaultErrorPostprocessors;\n    }\n\n    resolve(payload) {\n        for (const postprocessor of this.getPostprocessors()) {\n            try {\n                payload = postprocessor(payload, this) || payload;\n            } catch (exception) {\n                this.reject(exception);\n                return;\n            }\n        }\n\n        if (this.options.onSuccess) {\n            this.options.onSuccess(...arguments);\n        } else {\n            this.promiseResolve(...arguments);\n        }\n        if (this.options.onComplete) {\n            this.options.onComplete();\n        }\n    }\n\n    reject(error) {\n        for (const postprocessor of this.getErrorPostprocessors()) {\n            error = postprocessor(error) || error;\n        }\n\n        if (this.options.onError) {\n            this.options.onError(...arguments);\n        } else {\n            if (this._chained) {\n                this.promiseReject(...arguments);\n            } else {\n                if (this.options.errorHandler) {\n                    this.options.errorHandler(...arguments);\n                } else {\n                    console.error(\"Unhandled fetch error\", ...arguments);\n                }\n            }\n        }\n        if (this.options.onComplete) {\n            this.options.onComplete();\n        }\n    }\n\n    // TODO: next 2 functions should throw an exception if you have onSuccess/onError\n    then(onResolve, onReject) {\n        this._chained = true;\n        onReject = onReject || this.options.errorHandler;\n        return this.getPromise().then(onResolve, onReject);\n    }\n\n    catch() {\n        this._chained = true;\n        return this.getPromise().catch(...arguments);\n    }\n\n    getXHR() {\n        return this.xhr;\n    }\n\n    getPromise() {\n        return this.promise;\n    }\n\n    getRequest() {\n        return this.request;\n    }\n\n    abort() {\n        this.getXHR().abort();\n    }\n\n    addXHRListener(name, callback) {\n        this.getXHR().addEventListener(...arguments);\n    }\n\n    addProgressListener(callback) {\n        this.addXHRListener(\"progress\", ...arguments);\n    }\n}\n\n// TODO: this offers only partial compatibility with $.ajax\nfunction jQueryCompatibilityPreprocessor(options) {\n    if (options.type) {\n        options.method = options.type.toUpperCase();\n    }\n\n    if (options.contentType) {\n        options.headers.set(\"Content-Type\", options.contentType);\n    }\n\n    options.headers.set(\"X-Requested-With\", \"XMLHttpRequest\");\n\n    if (isPlainObject(options.data)) {\n        let method = options.method.toUpperCase();\n        if (method === \"GET\" || method === \"HEAD\") {\n            options.urlParams = options.urlParams || options.data;\n            if (options.cache === false) {\n                options.urlParams = getURLSearchParams(options.urlParams);\n                options.urlParams.set(\"_\", Date.now());\n            }\n        } else {\n            let formData = new FormData();\n            for (const key of Object.keys(options.data)) {\n                const value = options.data[key];\n                if (Array.isArray(value)) {\n                    for (const arrayValue of value) {\n                        formData.append(key + \"[]\", arrayValue);\n                    }\n                } else {\n                    formData.append(key, value);\n                }\n\n            }\n            options.body = formData;\n        }\n    } else {\n        options.body = options.body || options.data;\n    }\n\n    return options;\n}\n\n// Can either be called with\n// - 1 argument: (Request)\n// - 2 arguments: (url/Request, options)\nfunction fetch(input, ...args) {\n    // In case we're being passed in a single plain object (not Request), assume it has a url field\n    if (isPlainObject(input)) {\n        return fetch(input.url, ...arguments);\n    }\n\n    let options = Object.assign({}, ...args);\n\n    // Ensure that there's a .headers field for preprocessors\n    options.headers = new Headers(options.headers || {});\n\n    const preprocessors = options.preprocessors || fetch.defaultPreprocessors || [];\n\n    for (const preprocessor of preprocessors) {\n        options = preprocessor(options) || options;\n    }\n\n    options.onSuccess = options.onSuccess || options.success;\n    options.onError = options.onError || options.error;\n    options.onComplete = options.onComplete || options.complete;\n\n    if (typeof options.cache === \"boolean\") {\n        options.cache = options.cache ? \"force-cache\" : \"reload\";\n        // TODO: cache still isn't fully done\n    }\n\n    options.method = options.method || \"GET\";\n\n    // If there are any url search parameters, update the url from the urlParams or urlSearchParams fields\n    // These fields can be plain objects (jQuery style) or can be URLSearchParams objects\n    const urlParams = options.urlParams || options.urlSearchParams;\n    if (urlParams) {\n        // Change the URL of the request to add a query\n        if (input instanceof Request) {\n            input = new Request(composeURL(input.url, urlParams), input);\n        } else {\n            input = new Request(composeURL(input, urlParams), {});\n        }\n    }\n\n    return new XHRPromise(input, options);\n}\n\nfetch.defaultPreprocessors = [jQueryCompatibilityPreprocessor];\nfetch.defaultPostprocessors = [];\nfetch.defaultErrorPostprocessors = [];\n\nfetch.polyfill = true;\n\nexport {XHRPromise, fetch, composeURL, parseHeaders, getURLSearchParams, jQueryCompatibilityPreprocessor};\n","import {fetch} from \"./Fetch\";\n\nexport class AjaxHandler {\n    constructor(ajaxHandler=Ajax, errorHandler=null) {\n        this.parentHandler = ajaxHandler;\n        this.preprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultPreprocessors);\n        this.postprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultPostprocessors);\n        this.errorPostprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultErrorPostprocessors);\n        this.errorHandler = errorHandler;\n    }\n\n    fetch(request, ...args) {\n        let baseOptions = {\n            preprocessors: this.getPreprocessors(),\n            postprocessors: this.getPostprocessors(),\n            errorPostprocessors: this.getErrorPostprocessors(),\n            errorHandler: this.getErrorHandler(),\n        };\n\n        // Request may be a plain object or a url, not going to duplicate code from fetch\n        for (const key of Object.keys(baseOptions)) {\n            if (request[key]) {\n                delete baseOptions[key];\n            }\n        }\n\n        return fetch(request, baseOptions, ...args);\n    }\n\n    request() {\n        return this.fetch(...arguments)\n    }\n\n    // Feel free to modify the post and get methods for your needs\n    get(url, options) {\n        return this.fetch(...arguments, {method: \"GET\"});\n    }\n\n    getJSON(url, data, ...args) {\n        return this.get(url, {dataType: \"json\", data: data}, ...args);\n    }\n\n    post(url, options) {\n        return this.fetch(...arguments, {method: \"POST\"});\n    }\n\n    postJSON(url, data, ...args) {\n        return this.post(url, {dataType: \"json\", data: data}, ...args);\n    }\n\n    addPreprocessor(preprocessor) {\n        this.preprocessors.push(preprocessor);\n    }\n\n    getPreprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getPreprocessors()) || [];\n        return [...this.preprocessors, ...inherited];\n    }\n\n    addPostprocessor(postprocessor) {\n        this.postprocessors.push(postprocessor);\n    }\n\n    getPostprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getPostprocessors()) || [];\n        return [...inherited, ...this.postprocessors];\n    }\n\n    addErrorPostprocessor(postprocessor) {\n        this.errorPostprocessors.push(postprocessor);\n    }\n\n    getErrorPostprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getErrorPostprocessors()) || [];\n        return [...inherited, ...this.errorPostprocessors];\n    }\n\n    getErrorHandler() {\n        return this.errorHandler || (this.parentHandler && this.parentHandler.getErrorHandler());\n    }\n}\n\nexport class FixedURLAjaxHandler extends AjaxHandler {\n    constructor(url, ajaxHandler=Ajax, errorHandler=null) {\n        super(ajaxHandler, errorHandler);\n        this.url = url;\n    }\n\n    get(options) {\n        return super.get(this.url, ...arguments);\n    }\n\n    getJSON(data) {\n        return super.getJSON(this.url, data);\n    }\n\n    post(options) {\n        return super.post(this.url, ...arguments);\n    }\n\n    postJSON(data) {\n        return super.postJSON(this.url, data);\n    }\n}\n\nexport let Ajax = new AjaxHandler();","import {buildColors} from \"../Color\";\nimport {BasicLevelStyleSheet} from \"../GlobalStyle\";\nimport {styleRule} from \"../../decorators/Style\";\nimport {StyleSheet} from \"../Style\";\nimport {Orientation} from \"../Constants\";\n\nlet buttonColorToStyle = (color) => {\n    const colors = buildColors(color);\n    let darker1 = {\n        backgroundColor: colors[2],\n    };\n    let darker2 = {\n        backgroundColor: colors[3],\n    };\n    let darker3 = {\n        backgroundColor: colors[4],\n    };\n    const regular = {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n    const hoverDisabled = Object.assign({}, regular);\n    return Object.assign({}, regular, {\n        \":hover\": darker1,\n        \":hover:disabled\": hoverDisabled,\n        \":focus\": darker1,\n        \":active\": darker2,\n        \":hover:active\": darker3,\n        \":focus:active\": darker3,\n        \".active\": darker3,\n    });\n};\n\nexport class ButtonStyle extends BasicLevelStyleSheet(buttonColorToStyle) {\n    // DEFAULT uses MEDIUM as size and PLAIN as level\n    @styleRule\n    DEFAULT = [{\n        outline: \"0\",\n        border: \"0.1em solid transparent\",\n        padding: \"0.4em 0.8em\",\n        borderRadius: this.themeProperties.BUTTON_BORDER_RADIUS || this.themeProperties.BASE_BORDER_RADIUS,\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        lineHeight: 4/3 + \"\",\n        marginBottom: \"0\",\n        display: \"inline-block\",\n        touchAction: \"manipulation\",\n        userSelect: \"none\",\n        \":disabled\": {\n            opacity: \"0.7\",\n            cursor: \"not-allowed\",\n        },\n    }, {\n        fontSize: \"14px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_PLAIN)];\n\n    getLevel(level) {\n        return super.getLevel(level) || this.INFO;\n    }\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"12px\",\n        padding: \"0.2em 0.4em\",\n        borderWidth: \"0.05em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"12px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"17px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"21px\",\n        padding: \"0.2em 0.4em\",\n    };\n}\n\nexport class ButtonGroupStyle extends StyleSheet {\n    @styleRule\n    HORIZONTAL = {\n        \">*\": {\n            \"margin-left\": \"5px\",\n            \"display\": \"inline-block\",\n        },\n        \">:first-child\": {\n            \"margin-left\": \"0px\",\n        },\n    };\n\n    @styleRule\n    VERTICAL = {\n        \">*\": {\n            \"margin-top\": \"5px\",\n            \"display\": \"block\",\n        },\n        \">:first-child\": {\n            \"margin-top\": \"0px\",\n        },\n    };\n\n    Orientation(orientation) {\n        for (let type of Object.keys(Orientation)) {\n            if (orientation == Orientation[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nexport class RadioButtonGroupStyle extends StyleSheet {\n    @styleRule\n    DEFAULT = {\n        \">*\": {\n            borderRadius: \"0\",\n        },\n        \">:last-child\": {\n            borderTopRightRadius: \"0.3em\",\n            borderBottomRightRadius: \"0.3em\",\n        },\n        \">:first-child\": {\n            borderTopLeftRadius: \"0.3em\",\n            borderBottomLeftRadius: \"0.3em\",\n        }\n    };\n}\n","import {Ajax} from \"../../base/Ajax\";\nimport {IconableInterface} from \"../Bootstrap3\";\nimport {UI} from \"../UIBase\";\nimport {ActionStatus} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\nimport {ButtonStyle} from \"./ButtonStyle\";\n\n@registerStyle(ButtonStyle)\nclass Button extends UI.Primitive(IconableInterface, \"button\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n\n    disable() {\n        this.options.disabled = true;\n        this.node.disabled = true;\n    }\n\n    enable() {\n        this.options.disabled = false;\n        this.node.disabled = false;\n    }\n\n    setEnabled(enabled) {\n        this.options.disabled = !enabled;\n        this.node.disabled = !enabled;\n    };\n}\n\n\nclass StateButton extends Button {\n    setOptions(options) {\n        options.state = (this.options && this.options.state) || options.state || ActionStatus.DEFAULT;\n\n        super.setOptions(options);\n\n        this.options.statusOptions = this.options.statusOptions || [];\n        for (let i = 0; i < 4; i += 1) {\n            if (typeof this.options.statusOptions[i] === \"string\") {\n                let statusLabel = this.options.statusOptions[i];\n                this.options.statusOptions[i] = {\n                    label: statusLabel,\n                    faIcon: \"\"\n                }\n            }\n        }\n    }\n\n    setState(status) {\n        this.options.state = status;\n        if (status === ActionStatus.DEFAULT) {\n            this.enable();\n        } else if (status === ActionStatus.RUNNING) {\n            this.disable();\n        } else if (status === ActionStatus.SUCCESS) {\n        } else if (status === ActionStatus.FAILED) {\n        }\n\n        this.redraw();\n    }\n\n    render() {\n        let stateOptions = this.options.statusOptions[this.options.state - 1];\n\n        this.options.label = stateOptions.label;\n        this.options.faIcon = stateOptions.faIcon;\n\n        return super.render();\n    }\n}\n\n\nclass AjaxButton extends StateButton {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions() || {}, {\n            resetToDefaultTimeout: 1000\n        });\n    }\n\n    getAjaxHandler() {\n        return this.options.ajaxHandler || Ajax;\n    }\n\n    setAjaxHandler(ajaxHandler) {\n        this.options.ajaxHandler = ajaxHandler;\n    }\n\n    clearResetTimeout() {\n        if (this.stateResetTimeout) {\n            clearTimeout(this.stateResetTimeout);\n            delete this.stateResetTimeout;\n        }\n    }\n\n    scheduleStateReset() {\n        this.clearResetTimeout();\n        this.stateResetTimeout = setTimeout(() => {\n            this.setState(ActionStatus.DEFAULT);\n            this.clearResetTimeout();\n        }, this.resetToDefaultTimeout);\n    }\n\n    ajax(methodName, ...args) {\n        this.setState(ActionStatus.RUNNING);\n        let ajaxPromise = this.getAjaxHandler()[methodName](...args);\n        ajaxPromise.getPromise().then(\n            (data) => {\n                this.setState(ActionStatus.SUCCESS);\n                this.scheduleStateReset();\n            },\n            (error) => {\n                this.setState(ActionStatus.FAILED);\n                this.scheduleStateReset();\n            }\n        );\n        return ajaxPromise;\n    }\n\n    ajaxCall(data) {\n        return this.ajax(\"fetch\", data);\n    }\n}\nfor (const methodName of [\"fetch\", \"request\", \"get\", \"post\", \"getJSON\", \"postJSON\"]) {\n    AjaxButton.prototype[methodName] = function(...args) {\n        return this.ajax(methodName, ...args);\n    }\n}\n\nexport {Button, StateButton, AjaxButton};\n","import {UI} from \"../UIBase\";\nimport {Button} from \"./Button\";\nimport {SimpleStyledElement} from \"../Bootstrap3\";\nimport {Orientation} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\nimport {ButtonGroupStyle, RadioButtonGroupStyle} from \"./ButtonStyle\";\n\n@registerStyle(ButtonGroupStyle)\nclass ButtonGroup extends SimpleStyledElement {\n    getDefaultOptions() {\n        return {\n            orientation: Orientation.HORIZONTAL,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.Orientation(this.options.orientation));\n    }\n}\n\n\n@registerStyle(RadioButtonGroupStyle)\nclass RadioButtonGroup extends SimpleStyledElement {\n    setOptions(options) {\n        super.setOptions(options);\n        this.index = this.options.index || 0;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n    }\n\n    render() {\n        this.buttons = [];\n        for (let i = 0; i < this.options.givenOptions.length; i += 1) {\n            this.buttons.push(\n                <Button key={i} onClick={() => {this.setIndex(i);}} size={this.getSize()}\n                  label={this.options.givenOptions[i].toString()} level={this.getLevel()}\n                  className={this.index === i ? \"active\" : \"\"}/>);\n        }\n        return this.buttons;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n\n    getValue() {\n        return this.options.givenOptions[this.index];\n    }\n\n    setIndex(index) {\n        this.dispatch(\"setIndex\", {\n            index: index,\n            oldIndex: this.index,\n            value: this.options.givenOptions[index],\n            oldValue: this.options.givenOptions[this.index]\n        });\n        this.buttons[this.index].removeClass(\"active\");\n        this.index = index;\n        this.buttons[this.index].addClass(\"active\");\n    }\n}\n\nexport {ButtonGroup, RadioButtonGroup};\n","import {UI} from \"./UIBase\";\nimport {SimpleStyledElement} from \"./Bootstrap3\";\nimport {BasicLevelStyleSheet, GlobalStyle} from \"./GlobalStyle\";\nimport {registerStyle, Theme} from \"./style/Theme\";\nimport {buildColors} from \"./Color\";\nimport {styleRule} from \"../decorators/Style\";\nimport {Level} from \"./Constants\";\n\nexport function cardPanelColorToStyle(color) {\n    let colors = buildColors(color);\n    return {\n        borderColor: colors[4],\n    };\n}\n\nexport class CardPanelStyle extends BasicLevelStyleSheet(cardPanelColorToStyle) {\n    @styleRule\n    DEFAULT = [{\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        width: \"100%\",\n        flexDirection: \"row\",\n        padding: \"5px\",\n        minHeight: this.themeProperties.CARD_PANEL_HEADER_HEIGHT,\n        textTransform: this.themeProperties.CARD_PANEL_TEXT_TRANSFORM,\n        paddingLeft: this.themeProperties.CARD_PANEL_HEADING_PADDING,\n        paddingRight: this.themeProperties.CARD_PANEL_HEADING_PADDING,\n    },\n        cardPanelHeaderColorToStyle(this.themeProperties.COLOR_PLAIN)\n    ];\n\n    @styleRule\n    LARGE = {\n        minHeight: this.themeProperties.CARD_PANEL_HEADER_HEIGHT_LARGE,\n        paddingLeft: this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE,\n        paddingRight: this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE,\n    };\n\n    @styleRule\n    body = {\n    };\n\n    @styleRule\n    panel = [{\n        borderWidth: this.themeProperties.BASE_BORDER_WIDTH,\n        borderRadius: this.themeProperties.BASE_BORDER_RADIUS,\n        boxShadow: this.themeProperties.BASE_BOX_SHADOW,\n        borderStyle: this.themeProperties.BASE_BORDER_STYLE,\n        backgroundColor: this.themeProperties.COLOR_PLAIN,\n    },\n        cardPanelColorToStyle(this.themeProperties.COLOR_PLAIN)\n    ];\n\n    @styleRule\n    centered = {\n        display: \"flex\",\n        justifyContent: \"center\",\n    };\n}\n\nfunction cardPanelHeaderColorToStyle(color){\n    let colors = buildColors(color);\n    return {\n        color: colors[6],\n        backgroundColor: colors[1],\n        borderBottomColor: colors[4],\n    };\n}\n\nexport const CardPanelHeaderStyle = BasicLevelStyleSheet(cardPanelHeaderColorToStyle);\n\n@registerStyle(CardPanelStyle)\nclass CardPanel extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.panel);\n    }\n\n    getLevel() {\n        return super.getLevel() || Level.PRIMARY;\n    }\n\n    getTitle() {\n        return this.options.title;\n    }\n\n    getHeaderStyleSheet() {\n        return CardPanelHeaderStyle.getInstance();\n    }\n\n    getDefaultOptions() {\n        return {\n            headingCentered: true,\n            bodyCentered: false,\n        };\n    }\n\n    getHeadingClasses() {\n        let headingClasses = \"\";\n        const headingLevel = this.getHeaderStyleSheet().Level(this.getLevel()),\n            {headingCentered} = this.options;\n\n        if (headingLevel) {\n            headingClasses = headingClasses + headingLevel;\n        }\n\n        headingClasses = headingClasses + this.styleSheet.DEFAULT;\n        if (this.getSize()) {\n            headingClasses = headingClasses + this.styleSheet.Size(this.getSize());\n        }\n\n        if (headingCentered) {\n            headingClasses = headingClasses + this.styleSheet.centered;\n        }\n\n        return headingClasses;\n    }\n\n    getBodyClasses() {\n        const {bodyCentered} = this.options;\n\n        let bodyClasses = this.styleSheet.body;\n        if (bodyCentered) {\n            bodyClasses = bodyClasses + this.styleSheet.centered;\n        }\n\n        return bodyClasses;\n    }\n\n    render() {\n        const headingClasses = this.getHeadingClasses();\n        const bodyClasses = this.getBodyClasses();\n\n        return [\n            <div ref=\"panelTitle\" className={headingClasses}>\n                {this.getTitle()}\n            </div>,\n            <div ref=\"panelBody\" className={bodyClasses} style={this.options.bodyStyle}>\n                {this.getGivenChildren()}\n            </div>,\n        ];\n    }\n}\n\nexport {CardPanel};\n","import {UI, registerStyle} from \"UI\";\nimport {StyleSheet, styleRule} from \"Style\";\nimport {Size} from \"./Constants\";\nimport {SimpleStyledElement} from \"./Bootstrap3\";\nimport {BasicLevelSizeStyleSheet} from \"./GlobalStyle\";\n\n\nclass RowListStyle extends BasicLevelSizeStyleSheet {\n    @styleRule\n    rowList = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    DEFAULT = {\n        display: \"flex\",\n        alignItems: \"center\",\n        width: \"100%\",\n\n        height: this.themeProperties.ROW_LIST_ROW_HEIGHT,\n        paddingLeft: this.themeProperties.ROW_LIST_ROW_PADDING,\n        paddingRight: this.themeProperties.ROW_LIST_ROW_PADDING,\n\n        backgroundColor: this.themeProperties.COLOR_PLAIN,\n    };\n\n    @styleRule\n    LARGE = {\n        height: this.themeProperties.ROW_LIST_ROW_HEIGHT_LARGE,\n        paddingLeft: this.themeProperties.ROW_LIST_ROW_PADDING_LARGE,\n        paddingRight: this.themeProperties.ROW_LIST_ROW_PADDING_LARGE,\n    };\n\n    @styleRule\n    alternativeColorsOddRow = {\n        backgroundColor: this.themeProperties.COLOR_PLAIN_ALTERNATIVE,\n    };\n\n    @styleRule\n    noAlternativeColors = {\n        borderTopWidth: this.themeProperties.ROW_LIST_ROW_BORDER_WIDTH,\n        borderTopStyle: this.themeProperties.BASE_BORDER_STYLE,\n        borderTopColor: this.themeProperties.BASE_BORDER_COLOR,\n    };\n}\n\n\n@registerStyle(RowListStyle)\nexport class RowList extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.rowList);\n    }\n\n    getDefaultOptions(options) {\n        return {\n            alternateColors: true,\n        }\n    }\n\n    getRowClasses(index) {\n        let rowClasses = this.styleSheet.DEFAULT;\n        if (this.getSize()) {\n            rowClasses = rowClasses + this.styleSheet.Size(this.getSize());\n        }\n\n        const {alternateColors} = this.options;\n\n        if (alternateColors && index % 2 === 1) {\n            rowClasses = rowClasses + this.styleSheet.alternativeColorsOddRow;\n        } else if (!alternateColors && index > 0) {\n            rowClasses = rowClasses + this.styleSheet.noAlternativeColors;\n        }\n\n        return rowClasses;\n    }\n\n    render() {\n        const {rows, rowParser} = this.options;\n\n        return rows.map((row, index) => {\n            return <div className={this.getRowClasses(index)}>\n                {rowParser(row)}\n            </div>\n        });\n    }\n}","import {StyleSheet, styleRule, styleRuleInherit} from \"../Style\";\nimport {CardPanelStyle} from \"../CardPanel\";\n\nclass CollapsibleStyle extends StyleSheet {\n    transitionDuration = 0.4;\n\n    @styleRule\n    collapsing = {\n        marginTop: \"0\",\n        transitionTimingFunction: \"ease\",\n        transitionDuration: `${this.transitionDuration}s`,\n        transitionProperty: \"margin-top\",\n        transitionDelay: \"-0.15s\",\n    };\n\n    @styleRule\n    collapsed = {\n        marginTop: \"-100% !important\",\n        transitionDelay: \"0s !important\",\n    };\n}\n\n\nclass CollapsiblePanelStyle extends CardPanelStyle {\n    @styleRuleInherit\n    panel = {\n        boxShadow: null,\n        borderWidth: \"1px\",\n        borderColor: \"#ddd !important\",\n        borderRadius: \"3px\",\n    };\n\n    @styleRule\n    heading = {\n        padding: \"10px 15px\",\n        borderBottom: \"1px solid transparent\",\n        borderTopLeftRadius: \"3px\",\n        borderTopRightRadius: \"3px\",\n        backgroundColor: \"#f5f5f5\",\n    };\n\n    @styleRule\n    button = {\n        marginTop: \"0\",\n        marginBottom: \"0\",\n        fontSize: \"16px\",\n        color: \"inherit\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"inherit\",\n        },\n        \":before\": {\n            fontFamily: \"'FontAwesome'\",\n            content: \"\\\"\\\\f107\\\"\",\n            color: \"grey\",\n            float: \"left\",\n            fontWeight: \"bold\",\n            width: \"0.7em\",\n            fontSize: \"130%\",\n            verticalAlign: \"top\",\n            height: \"0.7em\",\n            textAlign: \"center\",\n        }\n    };\n\n    @styleRule\n    collapsedButton = {\n        \":before\": {\n            content: \"\\\"\\\\f105\\\" !important\",\n        },\n    };\n}\n\nexport {CollapsibleStyle, CollapsiblePanelStyle};\n","import {CollapsibleStyle} from \"./Style\";\n\nfunction CollapsibleMixin(BaseClass, CollapsibleClass = CollapsibleStyle) {\n    class CollapsibleElement extends BaseClass {\n        getDefaultOptions() {\n            return {\n                collapsed: true,\n            };\n        }\n\n        static collapsibleStyleSheet = new CollapsibleClass();\n\n        getCollapsibleStyleSheet() {\n            return this.options.collapsibleStyleSheet || this.constructor.collapsibleStyleSheet;\n        }\n\n        expand(panel) {\n            this.options.collapsed = false;\n            this.dispatch(\"expand\");\n            const collapsibleStyle = this.getCollapsibleStyleSheet();\n            panel.addClass(collapsibleStyle.collapsing);\n            panel.removeClass(\"hidden\");\n            setTimeout(() => {\n                panel.removeClass(collapsibleStyle.collapsed);\n            }, 100);\n        }\n\n        collapse(panel) {\n            this.options.collapsed = true;\n            this.dispatch(\"collapse\");\n            const collapsibleStyle = this.getCollapsibleStyleSheet();\n            panel.addClass(collapsibleStyle.collapsing);\n            panel.addClass(collapsibleStyle.collapsed);\n            let transitionEndFunction = () => {\n                if (this.options.collapsed) {\n                    panel.addClass(\"hidden\");\n                }\n            };\n            panel.addNodeListener(\"transitionend\", transitionEndFunction);\n        }\n    }\n\n    return CollapsibleElement;\n}\n\n\nexport {CollapsibleMixin};\n","import {UI} from \"../UIBase\";\nimport {CollapsibleMixin} from \"./CollapsibleMixin\";\nimport {CardPanel} from \"../CardPanel\";\nimport {CollapsiblePanelStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(CollapsiblePanelStyle)\nclass CollapsiblePanel extends CollapsibleMixin(CardPanel) {\n    toggle() {\n        if (this.options.collapsed) {\n            this.expand();\n        } else {\n            this.collapse();\n        }\n    }\n\n    expand() {\n        super.expand(this.contentArea);\n        this.toggleButton.removeClass(this.styleSheet.collapsedButton);\n    }\n\n    collapse() {\n        super.collapse(this.contentArea);\n        setTimeout(() => {\n            this.toggleButton.addClass(this.styleSheet.collapsedButton);\n        }, this.getCollapsibleStyleSheet().transitionDuration * 700);\n    }\n\n    setTitle(title) {\n        this.options.title = title;\n        this.toggleButton.setChildren(title);\n    }\n\n    render() {\n        let collapsedPanelClass = \"\";\n        let collapsedHeadingClass = \"\";\n        let hiddenClass = \"\";\n        let contentStyle = {};\n\n        if (this.options.collapsed) {\n            collapsedHeadingClass = this.styleSheet.collapsedButton;\n            collapsedPanelClass = this.styleSheet.collapsed;\n            hiddenClass = \"hidden\";\n        }\n        if (!this.options.noPadding) {\n            contentStyle = {\n                padding: \"8px 8px\",\n            };\n        }\n\n        return [<div className={this.styleSheet.heading}>\n                    <a ref=\"toggleButton\"  className={`${this.styleSheet.button} ${collapsedHeadingClass}`}\n                        onClick={() => this.toggle()}>\n                        {this.getTitle()}\n                    </a>\n                </div>,\n                <div style={{overflow: \"hidden\"}}>\n                  <div ref=\"contentArea\" className={`${collapsedPanelClass} ${hiddenClass}`}\n                       style={contentStyle}>\n                        {this.getGivenChildren()}\n                    </div>\n                </div>\n        ];\n    }\n}\n\n\nclass DelayedCollapsiblePanel extends CollapsiblePanel {\n    toggle() {\n        if (!this._haveExpanded) {\n            this._haveExpanded = true;\n            UI.renderingStack.push(this);\n            this.contentArea.options.children = this.getGivenChildren();\n            UI.renderingStack.pop();\n            this.contentArea.redraw();\n            this.delayedMount();\n        }\n        super.toggle();\n    }\n\n    getGivenChildren() {\n        if (!this._haveExpanded) {\n            return [];\n        }\n        return this.getDelayedChildren();\n    }\n}\n\nexport {CollapsiblePanel, DelayedCollapsiblePanel};\n","import {StyleSheet, styleRule} from \"../Style\";\n\nclass FloatingWindowStyle extends StyleSheet {\n    @styleRule\n    hiddenAnimated = {\n        visibility: \"hidden\",\n        opacity: \"0\",\n        transition: \"opacity 0.1s linear\",\n    };\n\n    @styleRule\n    visibleAnimated = {\n        visibility: \"visible\",\n        opacity: \"1\",\n        transition: \"opacity 0.1s linear\",\n    };\n}\n\n\nclass ModalStyle extends FloatingWindowStyle {\n    @styleRule\n    container = {\n        position: \"fixed\",\n        top: \"0px\",\n        left: \"0px\",\n        right: \"0px\",\n        bottom: \"0px\",\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: \"9999\",\n    };\n\n    @styleRule\n    background = {\n        position: \"fixed\",\n        width: \"100%\",\n        height: \"100%\",\n        background: \"rgba(0,0,0,0.5)\",\n    };\n\n    @styleRule\n    header = {\n        padding: \"15px\",\n        borderBottom: \"1px solid #e5e5e5\",\n    };\n\n    @styleRule\n    body = {\n        position: \"relative\",\n        padding: \"15px\",\n    };\n\n    @styleRule\n    footer = {\n        padding: \"15px\",\n        textAlign: \"right\",\n        borderTop: \"1px solid #e5e5e5\",\n    };\n}\n\nexport {FloatingWindowStyle, ModalStyle};\n","import {UI} from \"../UIBase\";\nimport {FloatingWindowStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(FloatingWindowStyle)\nclass FloatingWindow extends UI.Element {\n    getDefaultOptions() {\n        return {\n            transitionTime: 0\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(\"z-index\", \"2016\");\n    }\n\n    fadeOut() {\n        this.removeClass(this.styleSheet.visibleAnimated);\n        this.addClass(this.styleSheet.hiddenAnimated);\n    }\n\n    fadeIn() {\n        this.removeClass(this.styleSheet.hiddenAnimated);\n        this.addClass(this.styleSheet.visibleAnimated);\n    }\n\n    show() {\n        // TODO: refactor this to use this.parent and UI.Element appendChild\n        if (!this.isInDocument()) {\n            this.parentNode.appendChild(this.node);\n            this.redraw();\n            setTimeout(() => {\n                this.fadeIn();\n            }, 0);\n        }\n    }\n\n    setParentNode(parentNode) {\n        this.options.parentNode = parentNode;\n    }\n\n    get parentNode() {\n        if (!this.options.parentNode) {\n            if (this.parent) {\n                if (this.parent instanceof HTMLElement) {\n                    this.options.parentNode = this.parent;\n                } else {\n                    this.options.parentNode = this.parent.node;\n                }\n            } else {\n                this.options.parentNode = document.body;\n            }\n        }\n        return this.options.parentNode;\n    }\n\n    hide() {\n        // TODO: refactor this to use this.parent and UI.Element removeChild\n        if (this.isInDocument()) {\n            this.fadeOut();\n            setTimeout(() => {\n                if (this.isInDocument()) {\n                    this.parentNode.removeChild(this.node);\n                }\n            }, this.options.transitionTime);\n        }\n    }\n}\n\n\nclass VolatileFloatingWindow extends FloatingWindow {\n    bindWindowListeners() {\n        this.hideListener = this.hideListener || (() => {this.hide();});\n        window.addEventListener(\"click\", this.hideListener);\n    }\n\n    unbindWindowListeners() {\n        window.removeEventListener(\"click\", this.hideListener);\n    }\n\n    toggle() {\n        if (!this.isInDocument()) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    show() {\n        if (!this.isInDocument()) {\n            this.bindWindowListeners();\n            super.show();\n        }\n    }\n\n    hide() {\n        if (this.isInDocument()) {\n            this.unbindWindowListeners();\n            super.hide();\n        }\n    }\n\n    onMount() {\n        if (!this.options.notVisible) {\n            this.bindWindowListeners();\n        } else {\n            setTimeout(() => {\n                this.hide();\n            });\n        }\n\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\nexport {FloatingWindow, VolatileFloatingWindow};\n","import {ButtonGroup} from \"../button/ButtonGroup\";\nimport {Button} from \"../button/Button\";\nimport {FloatingWindow} from \"./FloatingWindow\";\nimport {ModalStyle} from \"./Style\";\nimport {Panel, TemporaryMessageArea} from \"../UIPrimitives\";\nimport {UI} from \"../UIBase\";\nimport {Dispatcher} from \"../../base/Dispatcher\";\nimport {registerStyle} from \"../style/Theme\";\nimport {Level, Size} from \"../Constants\";\n\n@registerStyle(ModalStyle)\nclass Modal extends UI.Element {\n    getDefaultOptions() {\n        return {\n            closeButton: true,\n            destroyOnHide: true,\n            visible: false,\n        };\n    }\n\n    render() {\n        return [\n            <Panel ref=\"modalContainer\" className={(this.options.visible ? \"\" : \"hidden\") + this.styleSheet.container}>\n                <Panel ref=\"behindPanel\" className={this.styleSheet.hiddenAnimated + this.styleSheet.background} onClick={() => this.hide()}/>\n                {this.getModalWindow()}\n            </Panel>\n        ];\n    }\n\n    getModalWindow() {\n        let closeButton = null;\n        if (this.options.closeButton) {\n            // TODO: this should be in a method\n            closeButton = <div style={{right: \"10px\", zIndex: \"10\", position: \"absolute\"}}>\n                <Button className=\"close\" size={Size.EXTRA_LARGE} style={{border: \"none\"}} label=\"&times;\" onClick={() => this.hide()}/>\n            </div>;\n        }\n\n        return <FloatingWindow ref=\"modalWindow\" style={this.getModalWindowStyle()}>\n            {closeButton}\n            {this.getGivenChildren()}\n        </FloatingWindow>;\n    }\n\n    getModalWindowStyle() {\n        if (this.options.fillScreen) {\n            this.options.width = \"85%\";\n        }\n        // TODO(@Rocky): I don't like this very much, honestly...\n        return {\n            position: \"relative\",\n            padding: \"1%\",\n            boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n            borderRadius: \"10px\",\n            margin: \"60px auto\",\n            display: this.options.display || \"block\",\n            maxHeight: this.options.maxHeight || \"85%\",\n            left: \"0\",\n            right: \"0\",\n            width: this.options.width || \"50%\",\n            height: this.options.height || \"auto\",\n            background: \"white\",\n            overflow: this.options.overflow || \"auto\",\n        };\n    }\n\n    isVisible() {\n        return this.options.visible;\n    }\n\n    hide() {\n        if (!this.isVisible()) {\n            return;\n        }\n\n        this.options.visible = false;\n        this.modalWindow.fadeOut();\n\n        setTimeout(() => {\n            this.behindPanel.removeClass(this.styleSheet.visibleAnimated);\n            this.behindPanel.addClass(this.styleSheet.hiddenAnimated);\n\n            setTimeout(() => {\n                this.modalContainer.addClass(\"hidden\");\n                if (this.options.destroyOnHide) {\n                    this.destroyNode();\n                }\n            }, this.modalWindow.options.transitionTime || 0);\n\n            this.detachListener(this.closeListenerHandler);\n        }, this.modalWindow.options.transitionTime || 0);\n        document.body.classList.remove(\"unscrollable\");\n    }\n\n    show() {\n        this.options.visible = true;\n        if (!this.node) {\n            this.mount(document.body);\n        }\n        this.modalContainer.removeClass(\"hidden\");\n        setTimeout(() => {\n            this.behindPanel.addClass(this.styleSheet.visibleAnimated);\n            this.behindPanel.removeClass(this.styleSheet.hiddenAnimated);\n\n            setTimeout(() => {\n                this.modalWindow.fadeIn();\n            }, this.modalWindow.options.transitionTime);\n        }, 0);\n        this.closeListenerHandler = this.attachListener(Dispatcher.Global, \"closeAllModals\", () => {\n            this.hide();\n        });\n        document.body.classList.add(\"unscrollable\");\n    }\n\n    static show(options={}) {\n        let modal = new this(options);\n        modal.show();\n        return modal;\n    }\n}\n\n\nclass ActionModal extends Modal {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions(), {\n            closeButton: false\n        });\n    }\n\n    getActionName() {\n        return this.options.actionName;\n    }\n\n    getActionLevel() {\n        return this.options.level || Level.DEFAULT;\n    }\n\n    getCloseName() {\n        return this.options.closeName || \"Close\";\n    }\n\n    getGivenChildren() {\n        return [\n            <div className={this.styleSheet.header}>{this.getHeader()}</div>,\n            (this.getBody() ? <div className={this.styleSheet.body}>{this.getBody()}</div> : null),\n            (this.getFooter() ? <div className={this.styleSheet.footer}>{this.getFooter()}</div> : null)\n        ];\n    }\n\n    getHeader() {\n        return <h4>{this.getTitle()}</h4>;\n    }\n\n    getTitle() {\n        return this.options.title || this.getActionName();\n    }\n\n    getBody() {\n        return null;\n    }\n\n    getActionButton() {\n        return <Button level={this.getActionLevel()} label={this.getActionName()} onClick={() => this.action()}/>;\n    }\n\n    getFooter() {\n        return [\n            <TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label={this.getCloseName()} onClick={() => this.hide()}/>\n                  {this.getActionButton()}\n            </ButtonGroup>\n        ];\n    }\n\n    action() {}\n}\n\n\nconst ActionModalButton = (ActionModal) => class ActionModalButton extends Button {\n    getModalOptions() {\n        let modalOptions = {\n            actionName: this.options.label,\n            level: this.options.level\n        };\n\n        Object.assign(modalOptions, this.options.modalOptions);\n        return modalOptions;\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            ActionModal.show(this.getModalOptions());\n        });\n    }\n};\n\n\nclass ErrorModal extends ActionModal {\n    getTitle() {\n        return \"An Error occurred\";\n    }\n\n    getBody() {\n        return this.options.error.message || this.options.error;\n    }\n\n    getFooter() {\n        return <Button level={Level.DANGER} label=\"Dismiss\" onClick={() => this.hide()}/>;\n    }\n}\n\nexport {Modal, ErrorModal, ActionModal, ActionModalButton};\n","import {styleRule, StyleSheet} from \"../Style\";\nimport {Device} from \"../../base/Device\";\nimport {Theme} from \"../style/Theme\";\n\nclass GlobalContainerStyle extends StyleSheet {\n    constructor() {\n        super({updateOnResize: Device.isMobileDevice()});\n    }\n\n    @styleRule\n    default = {\n        height: () => {return Device.isMobileDevice() ? `${window.innerHeight}px` : \"100vh\"},\n        paddingTop: this.themeProperties.NAV_MANAGER_NAVBAR_HEIGHT,\n        width: \"100%\",\n        \">*\": {\n            height: \"100%\",\n            width: \"100%\",\n            paddingTop:\n                (Device.isMobileDevice() ? this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE :\n                                           this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP\n                ),\n            paddingBottom:\n                (Device.isMobileDevice() ? this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE :\n                                           this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP\n                ),\n            overflow: Device.isMobileDevice() ? \"\" : \"auto\",\n        }\n    };\n}\n\nexport {GlobalContainerStyle};","import {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {GlobalContainerStyle} from \"./Style\";\nimport {Device} from \"../../base/Device\";\n\n@registerStyle(GlobalContainerStyle)\nclass GlobalContainer extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.default);\n    }\n\n    onMount() {\n        if (!Device.isTouchDevice()) {\n            Object.assign(document.body.style, {\n                overflow: \"hidden\",\n            });\n        }\n        GlobalContainer.Global = GlobalContainer.Global || this;\n    }\n}\n\nexport {GlobalContainer};","import {UI} from \"../UIBase\";\n\nclass Divider extends UI.Element {\n    dragMousedown(event) {};\n\n    dragMousemove(event) {};\n\n    dragMouseup(event) {};\n\n    dividerMousedownFunction(event) {\n        this.dragMousedown(event);\n        this.parent.dispatch(\"dividerMousedown\", {divider: this, domEvent: event});\n\n        let dragMousemoveFunction = (event) => {\n            this.dragMousemove(event);\n            event.preventDefault(); // for touch devices\n            this.parent.dispatch(\"dividerMousemove\", event);\n        };\n\n        this.parent.addNodeListener(\"touchmove\", dragMousemoveFunction);\n        this.parent.addNodeListener(\"mousemove\", dragMousemoveFunction);\n\n        let dragMouseupFunction = (event) => {\n            this.dragMouseup(event);\n            this.parent.dispatch(\"dividerMouseup\", event);\n            this.parent.removeNodeListener(\"touchmove\", dragMousemoveFunction);\n            window.removeEventListener(\"touchend\", dragMouseupFunction);\n            this.parent.removeNodeListener(\"mousemove\", dragMousemoveFunction);\n            window.removeEventListener(\"mouseup\", dragMouseupFunction);\n        };\n\n        window.addEventListener(\"touchend\", dragMouseupFunction);\n        window.addEventListener(\"mouseup\", dragMouseupFunction);\n    }\n\n    onMount() {\n        // TODO: fix this hack when Device.isTouchDevice works\n        this.addNodeListener(\"touchstart\", (event) => {this.touchDeviceTriggered = true; this.dividerMousedownFunction(event);});\n        this.addNodeListener(\"mousedown\", (event) => {if (!this.touchDeviceTriggered) {this.dividerMousedownFunction(event);}});\n    }\n}\n\nexport {Divider};\n","import {StyleSheet, styleRule} from \"../Style\";\n\nclass DividerStyle extends StyleSheet {\n    @styleRule\n    noTextSelection = {\n        \"-webkit-user-select\": \"none\",\n        \"-moz-user-select\": \"none\",\n        \"-ms-user-select\": \"none\",\n        \"-o-user-select\": \"none\",\n        userSelect: \"none\",\n    };\n}\n\nclass AccordionStyle extends DividerStyle {\n    @styleRule\n    accordion = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        \">:nth-of-type(even)\": {\n            flexGrow: \"1\",\n            flexShrink: \"1\",\n            flexBasis: \"auto\",\n            overflow: \"auto\",\n            position: \"relative\",\n        },\n        \">:nth-of-type(odd)\": {\n            fontSize: \"1em\",\n            textTransform: \"uppercase\",\n            padding: \"8px 8px\",\n        }\n    };\n\n    @styleRule\n    grab = {\n        cursor: \"grab\",\n        cursor: \"-moz-grab\",\n        cursor: \"-webkit-grab\",\n    };\n\n    @styleRule\n    grabbing = {\n        cursor: \"grabbing\",\n        cursor: \"-moz-grabbing\",\n        cursor: \"-webkit-grabbing\",\n    };\n\n    @styleRule\n    collapseIcon = {\n        width: \"0.7em\",\n        fontSize: \"120% !important\",\n        fontWeight: \"900 !important\",\n        textAlign: \"center\",\n        marginRight: \"0.2em\",\n    };\n}\n\n\nclass SectionDividerStyle extends DividerStyle {\n    barThickness = 2;\n    barPadding = 3;\n\n    @styleRule\n    horizontalDivider = {\n        position: \"absolute\",\n        height: \"100%\",\n        cursor: \"col-resize\",\n        paddingLeft: this.barThickness + \"px !important\",\n        background: \"#DDD\",\n        backgroundClip: \"padding-box\",\n        borderLeft: `${this.barPadding}px solid transparent`,\n        borderRight: `${this.barPadding}px solid transparent`,\n        marginLeft: `${-this.barPadding}px`,\n    };\n\n    @styleRule\n    verticalDivider = {\n        position: \"absolute\",\n        cursor: \"row-resize\",\n        width: \"100%\",\n        paddingTop: this.barThickness + \"px !important\",\n        background: \"#DDD\",\n        backgroundClip: \"padding-box\",\n        borderBottom: `${this.barPadding}px solid transparent`,\n        borderTop: `${this.barPadding}px solid transparent`,\n        marginTop: `${-this.barPadding}px`,\n    };\n\n    @styleRule\n    horizontalSection = {\n        position: \"relative\",\n        whiteSpace: \"nowrap\",\n        \">*\": {\n            whiteSpace: \"initial\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n            paddingLeft: \"2px\",\n            paddingRight: \"2px\",\n            boxSizing: \"border-box\",\n        },\n        \">:first-child\": {\n            paddingLeft: \"0\",\n        },\n        \">:last-child\": {\n            paddingRight: \"0\",\n        },\n        \">:nth-of-type(even)\": {\n            padding: \"0\",\n        },\n    };\n\n    @styleRule\n    verticalSection = {\n        position: \"relative\",\n        \">*\": {\n            paddingTop: \"2px\",\n            paddingBottom: \"2px\",\n            boxSizing: \"border-box\",\n        },\n        \">:first-child\": {\n            paddingTop: \"0\",\n        },\n        \">:last-child\": {\n            paddingBottom: \"0\",\n        },\n        \">:nth-of-type(even)\": {\n            padding: \"0\",\n        },\n    };\n}\n\nexport {AccordionStyle, SectionDividerStyle};\n","// TODO: Too much \"hidden\"\nimport {Device} from \"../../base/Device\";\nimport {Divider} from \"./Divider\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../UI\";\nimport {SectionDividerStyle} from \"./Style\";\nimport {Orientation} from \"../Constants\";\n\n// options.orientation is the orientation of the divided elements\n@registerStyle(SectionDividerStyle)\nclass DividerBar extends Divider {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            orientation: Orientation.HORIZONTAL,\n        });\n    }\n\n    dragMousedown(event) {\n        document.body.classList.add(this.styleSheet.noTextSelection);\n    }\n\n    dragMouseup(event) {\n        document.body.classList.remove(this.styleSheet.noTextSelection);\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        if (this.options.orientation === Orientation.VERTICAL) {\n            attr.addClass(this.styleSheet.verticalDivider);\n        } else {\n            attr.addClass(this.styleSheet.horizontalDivider);\n        }\n    }\n};\n\n/* SectionDivider class should take in:\n    - Vertical or horizontal separation\n    - All the children it's dividing\n    - An option on how to redivide the sizes of the children\n */\n@registerStyle(SectionDividerStyle)\nclass SectionDivider extends UI.Element {\n    constructor(options) {\n        super(options);\n        this.uncollapsedSizes = new WeakMap();\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.getOrientation() === Orientation.VERTICAL) {\n            attr.addClass(this.styleSheet.verticalSection);\n        } else {\n            attr.addClass(this.styleSheet.horizontalSection);\n        }\n    }\n\n    getOrientation() {\n        return this.options.orientation || Orientation.VERTICAL;\n    }\n\n    getDimension(element) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            return element.getWidth();\n        } else {\n            return element.getHeight();\n        }\n    }\n\n    setDimension(element, size) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            element.setWidth(size);\n        } else {\n            element.setHeight(size);\n        }\n    }\n\n    getMinDimension(element) {\n        if (this.getOrientation() === Orientation.HORIZONTAL && element.options.hasOwnProperty(\"minWidth\")) {\n            return element.options.minWidth;\n        } else if (this.getOrientation() === Orientation.VERTICAL && element.options.hasOwnProperty(\"minHeight\")) {\n            return element.options.minHeight;\n        } else {\n            return this.getDimension(this) / this.panels.length / 4;\n        }\n    }\n\n    getHiddenDivider(index) {\n        let divider;\n        for (let i = index; i < this.panels.length - 1; i += 1) {\n            if (this.dividers[i].hasClass(\"hidden\")) {\n                divider = this.dividers[i];\n            } else if (!this.dividers[i].hasClass(\"hidden\")) {\n                break;\n            }\n            if (divider && !this.panels[i + 1].hasClass(\"hidden\")) {\n                return divider;\n            }\n        }\n        divider = null;\n        for(let i = index - 1; i >= 0; i -= 1) {\n            if (this.dividers[i].hasClass(\"hidden\")) {\n                divider = this.dividers[i];\n            } else if (!this.dividers[i].hasClass(\"hidden\")) {\n                break;\n            }\n            if (divider && !this.panels[i].hasClass(\"hidden\")) {\n                return divider;\n            }\n        }\n        return null;\n    }\n\n    getVisibleDivider(index) {\n        for (let i = index; i < this.panels.length - 1; i += 1) {\n            if (!this.dividers[i].hasClass(\"hidden\")) {\n                return this.dividers[i];\n            }\n        }\n        for (let i = index - 1; i >= 0; i -= 1) {\n            if (!this.dividers[i].hasClass(\"hidden\")) {\n                return this.dividers[i];\n            }\n        }\n        return null;\n    }\n\n    collapseChild(index) {\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n        let childSize = this.getDimension(child);\n        this.uncollapsedSizes.set(child, childSize);\n\n        let unCollapsedCount = -1;\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let divider = this.getVisibleDivider(index);\n        if (divider) {\n            divider.hide();\n        }\n\n        this.setDimension(child, \"0\");\n        child.hide();\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) !== 0 && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) + childSize / unCollapsedCount) * 100\n                                  / parentSize - 0.5 / this.children.length + \"%\");\n            }\n        }\n\n        this.recalculateDimensions();\n    }\n\n    expandChild(index) {\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let unCollapsedCount = 1;\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let divider = this.getHiddenDivider(index);\n        if (divider) {\n            divider.show();\n        }\n\n        child.show();\n        let childSize = this.uncollapsedSizes.get(child);\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) - childSize / (unCollapsedCount - 1)) * 100\n                                  / parentSize - this.panels.length / 2 + \"%\");\n            }\n        }\n\n        this.setDimension(child, childSize * 100 / parentSize + \"%\");\n        this.recalculateDimensions();\n    }\n\n    toggleChild(index) {\n        let size = this.getDimension(this.children[index * 2]);\n        if (!size) {\n            this.expandChild(index);\n        } else {\n            this.collapseChild(index);\n        }\n    }\n\n    recalculateDimensions() {\n        if (!this.isInDocument()) {\n            return;\n        }\n        let parentSize = this.getDimension(this);\n        let fixedTotalSize = 0;\n        let unfixedTotalSize = 0;\n        for (let panel of this.panels) {\n            if (panel.options.fixed) {\n                fixedTotalSize += this.getDimension(panel);\n            } else {\n                unfixedTotalSize += this.getDimension(panel);\n            }\n        }\n        let ratio = (parentSize - fixedTotalSize) / parentSize;\n        for (let panel of this.panels) {\n            if (!panel.options.fixed && !panel.hasClass(\"hidden\")) {\n                this.setDimension(panel, this.getDimension(panel) * 100 * ratio / unfixedTotalSize + \"%\");\n            }\n        }\n    }\n\n    getPreviousUnfixedChild(index) {\n        for (let i = index; i >= 0 ; i -= 1) {\n            let panel = this.panels[i];\n            if (!panel.hasClass(\"hidden\") && !panel.options.fixed) {\n                return panel;\n            }\n        }\n        return null;\n    }\n\n    getNextUnfixedChild(index) {\n        for (let i = index + 1; i < this.panels.length; i += 1) {\n            let panel = this.panels[i];\n            if (!panel.hasClass(\"hidden\") && !panel.options.fixed) {\n                return panel;\n            }\n        }\n        return null;\n    }\n\n    dividerMouseDownFunction(dividerEvent) {\n        let previousEvent = dividerEvent.domEvent;\n        const index = this.dividers.indexOf(dividerEvent.divider);\n\n        const previousPanel = this.getPreviousUnfixedChild(index);\n        const nextPanel = this.getNextUnfixedChild(index);\n\n        if (previousPanel && nextPanel) {\n            const parentSize = this.getDimension(this);\n            let panelsSize = parentSize;\n\n            for (let panel of this.panels) {\n                if (panel.options.fixed) {\n                    panelsSize -= this.getDimension(panel);\n                }\n            }\n\n            const deltaFunction = (this.getOrientation() === Orientation.HORIZONTAL ?\n                                 (event) => Device.getEventX(event) :  (event) => Device.getEventY(event));\n\n            const mouseMoveListener = this.addListener(\"dividerMousemove\", (event) => {\n                const delta = deltaFunction(event) - deltaFunction(previousEvent);\n\n                const nextSize = this.getDimension(nextPanel) - delta;\n                const previousSize = this.getDimension(previousPanel) + delta;\n\n                if (nextSize < this.getMinDimension(nextPanel) || previousSize < this.getMinDimension(previousPanel)) {\n                    return;\n                }\n\n                this.setDimension(nextPanel, nextSize * 100 / parentSize + \"%\");\n                this.setDimension(previousPanel, previousSize * 100 / parentSize + \"%\");\n\n                previousEvent = event;\n\n                nextPanel.dispatch(\"resize\");\n                previousPanel.dispatch(\"resize\");\n            });\n\n            const mouseUpListener = this.addListener(\"dividerMouseup\", () => {\n                mouseMoveListener.remove();\n                mouseUpListener.remove();\n            });\n        }\n    }\n\n    onMount() {\n        this.addListener(\"dividerMousedown\", (dividerEvent) => this.dividerMouseDownFunction(dividerEvent));\n        setTimeout(() => {\n            this.recalculateDimensions();\n        });\n    }\n\n    render() {\n        let children = [];\n        this.dividers = [];\n        this.panels = [];\n        let leftChildVisible = false;\n\n        for (let child of this.getGivenChildren()) {\n            if (this.panels.length) {\n                let hiddenClass = \"hidden\";\n                if (leftChildVisible && !child.hasClass(\"hidden\")) {\n                    hiddenClass = \"\";\n                }\n                let divider = <DividerBar className={hiddenClass} orientation={this.getOrientation()} />;\n                children.push(divider);\n                this.dividers.push(divider);\n            }\n            leftChildVisible |= !child.hasClass(\"hidden\");\n            children.push(child);\n            this.panels.push(child);\n        }\n        return children;\n    }\n}\n\nexport {SectionDivider}\n","// Contains classes to abstract some generic Font Awesome usecases.\nimport {UI} from \"./UIBase\";\nimport {Direction} from \"./Constants\";\n\nclass FAIcon extends UI.Primitive(\"i\") {\n    getIcon() {\n        return this.options.icon;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(\"fa\");\n        attr.addClass(\"fa-\" + this.getIcon());\n        if (this.options.size) {\n            attr.addClass(\"fa-\" + this.options.size);\n        }\n    }\n\n    setIcon(icon) {\n        this.options.icon = icon;\n        this.redraw();\n    }\n}\n\nclass FACollapseIcon extends FAIcon {\n    getIcon() {\n        if (this.options.collapsed) {\n            return \"angle-right\";\n        } else {\n            return \"angle-down\";\n        }\n    }\n\n    setCollapsed(collapsed) {\n        this.options.collapsed = collapsed;\n        this.redraw();\n    }\n\n    toggleCollapsed() {\n        this.setCollapsed(!this.options.collapsed);\n    }\n}\n\nclass FASortIcon extends FAIcon {\n    getIcon() {\n        if (this.options.direction === Direction.UP) {\n            return \"sort-asc\";\n        } else if (this.options.direction === Direction.DOWN){\n            return \"sort-desc\";\n        } else {\n            return \"sort\";\n        }\n    }\n\n    setDirection(direction) {\n        this.options.direction = direction;\n        this.redraw();\n    }\n}\n\nexport {FAIcon, FACollapseIcon, FASortIcon};\n","import {UI} from \"../UIBase\";\nimport {registerStyle} from \"../UI\";\nimport {getComputedStyle} from \"../Utils\";\nimport {Device} from \"../../base/Device\";\nimport {AccordionStyle} from \"./Style\";\nimport {FACollapseIcon} from \"../../ui/FontAwesome\";\nimport {Divider} from \"./Divider\";\n\n@registerStyle(AccordionStyle)\nclass AccordionDivider extends Divider {\n    dragMousedown(event) {\n        document.body.classList.add(this.styleSheet.noTextSelection);\n        this.addClass(this.styleSheet.grabbing);\n    }\n\n    dragMouseup(event) {\n        document.body.classList.remove(this.styleSheet.noTextSelection);\n        this.removeClass(this.styleSheet.grabbing);\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.grab);\n    }\n\n    render() {\n        return [<FACollapseIcon ref=\"collapseIcon\" collapsed={false} className={this.styleSheet.collapseIcon}/>, this.options.children];\n    }\n\n    setCollapsed(value) {\n        this.collapseIcon.setCollapsed(value);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addListener(\"togglePanel\", () => {this.collapseIcon.toggleCollapsed();});\n    }\n}\n\n\n@registerStyle(AccordionStyle)\nclass Accordion extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.accordion);\n    }\n\n    render() {\n        let children = [];\n        this.dividers = [];\n        this.panels = [];\n        for (let child of this.getGivenChildren()) {\n            let title = (child.getTitle ? child.getTitle() : (child.options.title ? child.options.title : \"\"));\n            let divider = <AccordionDivider>{title}</AccordionDivider>;\n            this.dividers.push(divider);\n            this.panels.push(child);\n            children.push(divider);\n            children.push(child);\n        }\n        return children;\n    }\n\n    getNextVisibleChild(index) {\n        for (let i = index; i < this.panels.length; i += 1) {\n            if (!this.panels[i].hasClass(\"hidden\")) {\n                return this.panels[i];\n            }\n        }\n        return null;\n    }\n\n    getPreviousVisibleChild(index) {\n        for (let i = index - 1; i >= 0; i -= 1) {\n            if (!this.panels[i].hasClass(\"hidden\")) {\n                return this.panels[i];\n            }\n        }\n        return null;\n    }\n\n    dividerMousedownFunction(dividerEvent) {\n        let dragTriggered, panelsHeight, totalFlex;\n\n        let previousEvent = dividerEvent.domEvent;\n        let index = this.dividers.indexOf(dividerEvent.divider);\n\n        let previousPanel = this.getPreviousVisibleChild(index);\n        let nextPanel = this.getNextVisibleChild(index);\n\n        panelsHeight = this.getHeight();\n        for (let divider of this.dividers) {\n            panelsHeight -= divider.getHeight();\n        }\n        totalFlex = 0;\n        for (let panel of this.panels) {\n            if (!panel.hasClass(\"hidden\")) {\n                totalFlex += parseFloat(getComputedStyle(panel.node, \"flex\"));\n            }\n        }\n\n        let mouseMoveListener = this.addListener(\"dividerMousemove\", (event) => {\n            dragTriggered = true;\n            if (index != -1 && nextPanel && previousPanel) {\n                // Calculate the height to transfer from one panel to another\n                let delta = (Device.getEventY(event) - Device.getEventY(previousEvent)) * totalFlex / panelsHeight;\n\n                let nextSize = parseFloat(getComputedStyle(nextPanel.node, \"flex\"));\n                let previousSize = parseFloat(getComputedStyle(previousPanel.node, \"flex\"));\n\n                // Cap the delta value, to at most zero our panels\n                delta = Math.sign(delta) * Math.min(Math.abs(delta), (delta > 0 ? nextSize : previousSize));\n\n                nextPanel.setStyle(\"flex\", nextSize - delta);\n                previousPanel.setStyle(\"flex\", previousSize + delta);\n\n                previousEvent = event;\n\n                this.dispatch(\"dragging\");\n            }\n        });\n\n        let mouseUpListener = this.addListener(\"dividerMouseup\", () => {\n            if (!dragTriggered) {\n                dividerEvent.divider.dispatch(\"togglePanel\");\n                this.toggleChild(this.panels[index]);\n            }\n            mouseMoveListener.remove();\n            mouseUpListener.remove();\n            this.dispatch(\"childrenStatusChange\");\n        });\n    }\n\n    toggleChild(child) {\n        let totalFlex = 0;\n        for (let panel of this.panels) {\n            if (!panel.hasClass(\"hidden\")) {\n                totalFlex += parseFloat(getComputedStyle(panel.node, \"flex\"));\n            }\n        }\n        let sign = child.hasClass(\"hidden\") ? 1 : -1;\n        totalFlex += sign * parseFloat(getComputedStyle(child, \"flex\"));\n        child.toggleClass(\"hidden\");\n        if (totalFlex < 1) {\n            for (let panel of this.panels) {\n                if (!panel.hasClass(\"hidden\") && parseFloat(getComputedStyle(panel.node, \"flex\")) < 1) {\n                    panel.setStyle(\"flex\", 1);\n                }\n            }\n        }\n    }\n\n    getChildrenStatus() {\n        let childrenStatus = [];\n        for (let panel of this.panels) {\n            childrenStatus.push({\n                flex: getComputedStyle(panel.node, \"flex\"),\n                collapsed: panel.hasClass(\"hidden\")\n            });\n        }\n        return childrenStatus;\n    }\n\n    getDefaultChildrenStatus() {\n        let childrenStatus = [];\n        for (let panel of this.panels) {\n            childrenStatus.push({\n                flex: 1,\n                collapsed: false\n            })\n        }\n        return childrenStatus;\n    }\n\n    setChildrenStatus(childrenStatus) {\n        for (let i = 0; i < childrenStatus.length; i += 1) {\n            this.panels[i].setStyle(\"flex\", childrenStatus[i].flex);\n            let collapsed = childrenStatus[i].collapsed;\n            if (collapsed) {\n                this.panels[i].addClass(\"hidden\");\n            } else {\n                this.panels[i].removeClass(\"hidden\");\n            }\n            this.dividers[i].setCollapsed(collapsed);\n        }\n    }\n\n    onMount() {\n        this.addListener(\"dividerMousedown\", (dividerEvent) => this.dividerMousedownFunction(dividerEvent));\n    }\n}\n\nexport {Accordion};\n","import {UI, getComputedStyle, registerStyle} from \"./UI\";\nimport {StyleSheet} from \"./Style\";\nimport {styleRule} from \"../decorators/Style\";\nimport {FAIcon} from \"../ui/FontAwesome\";\nimport {Orientation} from \"./Constants\";\n\nclass CarouselStyle extends StyleSheet {\n    navigatorHeight = \"35px\";\n    hoverColor = \"#364251\";\n    transitionTime = \"0.3\";\n    textColor = \"inherit\";\n    navigatorTransitionTime = \"0s\";\n\n    @styleRule\n    carousel = {\n        overflow: \"hidden\",\n    };\n\n    @styleRule\n    container = {\n        whiteSpace: \"nowrap\",\n        height: \"100%\",\n        \">*\": {\n            width: \"100%\",\n            height: \"100%\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n        },\n        \">:first-child\": {\n            width: \"0\",\n            transition: `margin-left ease ${this.transitionTime}s`,\n        }\n    };\n\n    @styleRule\n    navigator = {\n        width: \"100%\",\n        height: this.navigatorHeight,\n        display: \"flex\",\n    };\n\n    @styleRule\n    navigatorIcon = {\n        color: this.textColor,\n        fontSize: \"180% !important\",\n        textAlign: \"center\",\n        cursor: \"pointer\",\n        flex: \"1\",\n        fontWeight: \"900 !important\",\n        lineHeight: this.navigatorHeight + \" !important\",\n        transition: `background-color ${this.navigatorTransitionTime}`,\n        \":hover\": {\n            backgroundColor: this.hoverColor,\n        },\n    };\n}\n\nclass CarouselNavigator extends UI.Element {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.navigator);\n    }\n\n    render() {\n        return [\n            <FAIcon icon=\"angle-left\" className={this.styleSheet.navigatorIcon} onClick={() => {this.parent.dispatch(\"previousPage\");}} />,\n            <FAIcon icon=\"angle-right\" className={this.styleSheet.navigatorIcon} onClick={() => {this.parent.dispatch(\"nextPage\");}} />,\n        ];\n    }\n}\n\n\n@registerStyle(CarouselStyle)\nclass Carousel extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.carousel);\n    }\n\n    appendChild(child, doMount) {\n        this.options.children.push(child);\n        if (doMount) {\n            this.setActive(child);\n        }\n        child.mount(this, null);\n        this.redraw();\n    }\n\n    eraseChild(child) {\n        if (this.options.children.indexOf(child) === this.options.children.length - 1) {\n            this.setActiveIndex(Math.max(this.options.children.length - 2, 0));\n        }\n        this.options.children.splice(this.options.children.indexOf(child), 1);\n        this.redraw();\n    }\n\n    render() {\n        if (this.activeIndex == null) {\n            this.activeIndex = 0;\n            for (let i = 0; i < this.options.children.length; i += 1) {\n                if (this.options.children[i].options.active) {\n                    this.activeIndex = i;\n                    break;\n                }\n            }\n        }\n\n        return [<CarouselNavigator className={this.options.children.length > 1 ? \"\" : \"hidden\"}/>,\n            <div className={this.styleSheet.container}>\n                <div ref=\"pusher\" style={{marginLeft: `${-this.activeIndex * 100}%`}}/>\n                {this.options.children}\n            </div>];\n    }\n\n    setActive(panel) {\n        this.setActiveIndex(this.options.children.indexOf(panel));\n    }\n\n    setActiveIndex(index) {\n        this.activeIndex = index;\n        this.pusher.setStyle(\"margin-left\", `${-index * this.getWidth()}px`);\n    }\n\n    getActive() {\n        return this.options.children[this.activeIndex];\n    }\n\n    onMount() {\n        this.addListener(\"nextPage\", () => this.setActiveIndex((this.activeIndex + 1) % this.options.children.length));\n        this.addListener(\"previousPage\", () => this.setActiveIndex((this.activeIndex + this.options.children.length - 1) % this.options.children.length));\n    }\n\n    getOrientation() {\n        return this.options.orientation || Orientation.VERTICAL;\n    }\n}\n\nexport {Carousel, CarouselStyle};\n","import {StyleSheet, styleRule} from \"./Style\";\n\nclass RangePanelStyle extends StyleSheet {\n    rowHeight = 52;\n\n    @styleRule\n    default = {\n        height: \"100%\",\n        width: \"100%\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        position: \"relative\",\n        overflow: \"auto\",\n        overflowY: \"hidden\",\n    };\n\n    @styleRule\n    tableContainer = {\n        flex: \"1\",\n        height: \"100%\",\n        width: \"100%\",\n        position: \"relative\",\n    };\n\n    @styleRule\n    scrollablePanel = {\n        overflow: \"auto\",\n        height: \"calc(100% - 30px)\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    fakePanel = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    footer = {\n        fontWeight: \"bold\",\n        textAlign: \"center\",\n        position: \"absolute\",\n        bottom: \"0px\",\n        width: \"100%\",\n        whiteSpace: \"nowrap\",\n    };\n\n    @styleRule\n    jumpToButton = {\n        marginLeft: \"5px\",\n        padding: \"2.3px 10px\",\n        verticalAlign: \"bottom\",\n    };\n\n    @styleRule\n    table = {\n        width: \"calc(100% - 15px)\",\n        marginBottom: \"0px\",\n        top: \"0px\",\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        \">tbody>tr>td\": {\n            height: `${this.rowHeight}px !important`,\n            whiteSpace: \"nowrap !important\",\n        }\n    };\n}\n\nexport {RangePanelStyle};\n","import {UI, UIElement, NumberInput, Button} from \"./UI\";\nimport {RangePanelStyle} from \"./RangePanelStyle\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {Size} from \"./Constants\";\n\nfunction RangePanelInterface(PanelClass) {\n    class RangePanel extends PanelClass {\n    }\n    return RangePanel;\n}\n\n\nclass EntriesManager extends Dispatchable {\n    constructor(entries, options={}) {\n        super();\n        this.rawEntries = entries;\n        this.options = options;\n        this.cacheEntries();\n    }\n\n    getRawEntries() {\n        return this.rawEntries;\n    }\n\n    cacheEntries() {\n        this.cachedEntries = this.sortEntries(this.filterEntries(this.getRawEntries()));\n        this.dispatch(\"update\");\n    }\n\n    getEntries() {\n        return this.cachedEntries;\n    }\n\n    getEntriesCount() {\n        return this.cachedEntries.length;\n    }\n\n    getEntriesRange(low, high) {\n        return this.cachedEntries.slice(low, high);\n    }\n\n    updateEntries(entries) {\n        this.rawEntries = entries;\n        this.cacheEntries();\n    }\n\n    sortEntries(entries) {\n        return this.getComparator() ? entries.sort(this.getComparator()) : entries;\n    }\n\n    filterEntries(entries) {\n        const filter = this.getFilter();\n        return filter ? entries.filter(filter) : entries;\n    }\n\n    getComparator() {\n        return this.options.comparator;\n    }\n\n    setComparator(comparator) {\n        this.options.comparator = comparator;\n        this.cacheEntries();\n    }\n\n    getFilter() {\n        return this.options.filter;\n    }\n\n    setFilter(filter) {\n        this.options.filter = filter;\n        this.cacheEntries();\n    }\n}\n\n\n// A wrapper for tables which optimizes rendering when many entries / updates are involved. It currently has hardcoded\n// row height for functionality reasons.\nfunction RangeTableInterface(TableClass) {\n    class RangeTable extends UI.Primitive(TableClass, \"div\") {\n        constructor(options) {\n            super(options);\n            this.lowIndex = 0;\n            this.highIndex = 0;\n        }\n\n        getRangePanelStyleSheet() {\n            return RangePanelStyle.getInstance();\n        }\n\n        getRowHeight() {\n            return this.options.rowHeight || this.getRangePanelStyleSheet().rowHeight;\n        }\n\n        getEntriesManager() {\n            if (!this.entriesManager) {\n                this.entriesManager = new EntriesManager(super.getEntries());\n            }\n            return this.entriesManager;\n        }\n\n        extraNodeAttributes(attr) {\n            attr.addClass(this.getRangePanelStyleSheet().default);\n        }\n\n        render() {\n            const rangePanelStyleSheet = this.getRangePanelStyleSheet();\n            const fakePanelHeight = (this.getRowHeight() * this.getEntriesManager().getEntriesCount() + 1) + \"px\";\n            const headHeight = this.containerHead ? this.containerHead.getHeight() : 0;\n            this.computeIndices();\n            return [\n                <div ref=\"tableContainer\" className={rangePanelStyleSheet.tableContainer} style={{paddingTop: headHeight + \"px\"}}>\n                    <div ref=\"scrollablePanel\" className={rangePanelStyleSheet.scrollablePanel}>\n                        <div ref=\"fakePanel\" className={rangePanelStyleSheet.fakePanel} style={{height: fakePanelHeight}}/>\n                        <table ref=\"container\" className={`${this.styleSheet.table} ${rangePanelStyleSheet.table}`}>\n                            <thead ref=\"containerHead\">\n                            {this.renderContainerHead()}\n                            </thead>\n                            <tbody ref=\"containerBody\">\n                            {this.renderContainerBody()}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>,\n                <div ref=\"footer\" className={rangePanelStyleSheet.footer}>\n                    <span ref=\"tableFooterText\">\n                        {this.getFooterContent()}\n                    </span>\n                    <NumberInput ref=\"jumpToInput\" placeholder=\"jump to...\" style={{textAlign: \"center\",}}/>\n                    <Button ref=\"jumpToButton\" size={Size.SMALL} className={rangePanelStyleSheet.jumpToButton}>Go</Button>\n                </div>\n            ];\n        }\n\n        applyScrollState() {\n            this.scrollablePanel.node.scrollTop = this.scrollState;\n        }\n\n        saveScrollState() {\n            if (this.scrollablePanel && this.scrollablePanel.node) {\n                this.scrollState = this.scrollablePanel.node.scrollTop;\n            }\n        }\n\n        renderContainerHead() {\n            return this.renderTableHead();\n        }\n\n        renderContainerBody() {\n            // TODO: this method should not be here, and tables should have a method \"getEntriesToRender\" which will be overwritten in this class.\n            this.rows = [];\n\n            const entries = this.getEntriesManager().getEntriesRange(this.lowIndex, this.highIndex);\n\n            for (let i = 0; i < entries.length; i += 1) {\n                const entry = entries[i];\n                const RowClass = this.getRowClass(entry);\n                this.rows.push(<RowClass key={this.getEntryKey(entry, i + this.lowIndex)} index={i + this.lowIndex}\n                                         {...this.getRowOptions(entry)} parent={this}/>);\n            }\n            return this.rows;\n        }\n\n        getFooterContent() {\n            if (this.lowIndex + 1 > this.highIndex) {\n                return `No results. Jump to `;\n            }\n            return `${this.lowIndex + 1}  ${this.highIndex} of ${this.getEntriesManager().getEntriesCount()}. `;\n        }\n\n        jumpToIndex(index) {\n            // Set the scroll so that the requested position is in the center.\n            const lowIndex = parseInt(index - (this.highIndex - this.lowIndex) / 2 + 1);\n            const scrollRatio = lowIndex / (this.getEntriesManager().getEntriesCount() + 0.5);\n            this.scrollablePanel.node.scrollTop = scrollRatio * this.scrollablePanel.node.scrollHeight;\n        }\n\n        computeIndices() {\n            if (!this.tableContainer || !this.containerHead || !this.footer) {\n                return;\n            }\n            const scrollRatio = this.scrollablePanel.node.scrollTop / this.scrollablePanel.node.scrollHeight;\n            const entriesCount = this.getEntriesManager().getEntriesCount();\n            // Computing of entries range is made using the physical scroll on the fake panel.\n            this.lowIndex = parseInt(scrollRatio * (entriesCount + 0.5));\n            if (isNaN(this.lowIndex)) {\n                this.lowIndex = 0;\n            }\n            this.highIndex = Math.min(this.lowIndex + parseInt((this.getHeight() - this.containerHead.getHeight()\n                    - this.footer.getHeight()) / this.getRowHeight()), entriesCount);\n        }\n\n        setScroll() {\n            // This is the main logic for rendering the right entries. Right now, it best works with a fixed row height,\n            // for other cases no good results are guaranteed. For now, that row height is hardcoded in the class'\n            // stylesheet.\n\n            if (this.inSetScroll) {\n                return;\n            }\n            if (!document.body.contains(this.node)) {\n                this.tableFooterText.setChildren(this.getFooterContent());\n                this.containerBody.setChildren(this.renderContainerBody());\n                return;\n            }\n            this.inSetScroll = true;\n            this.computeIndices();\n            // Ugly hack for chrome stabilization.\n            // This padding top makes the scrollbar appear only on the tbody side\n            this.tableContainer.setStyle(\"paddingTop\", this.containerHead.getHeight() + \"px\");\n            this.fakePanel.setHeight(this.getRowHeight() * this.getEntriesManager().getEntriesCount() + \"px\");\n            // The scrollable panel must have the exact height of the tbody so that there is consistency between entries\n            // rendering and scroll position.\n            this.scrollablePanel.setHeight(this.getRowHeight() * (this.highIndex - this.lowIndex) + \"px\");\n            // Update the entries and the footer info.\n            this.tableFooterText.setChildren(this.getFooterContent());\n            this.containerBody.setChildren(this.renderContainerBody());\n            // This is for setting the scrollbar outside of the table area, otherwise the scrollbar wouldn't be clickable\n            // because of the logic in \"addCompatibilityListeners\".\n            this.container.setWidth(this.fakePanel.getWidth() + \"px\");\n            this.inSetScroll = false;\n        }\n\n        addCompatibilityListeners() {\n            // The physical table has z-index -1 so it does not respond to mouse events, as it is \"behind\" fake panel.\n            // The following listeners repair that.\n            this.addNodeListener(\"mousedown\", () => {\n                this.container.setStyle(\"pointerEvents\", \"all\");\n            });\n            this.container.addNodeListener(\"mouseup\", (event) => {\n                const mouseDownEvent = new MouseEvent(\"click\", event);\n                const domElement = document.elementFromPoint(parseFloat(event.clientX), parseFloat(event.clientY));\n                setTimeout(() => {\n                    this.container.setStyle(\"pointerEvents\", \"none\");\n                    domElement.dispatchEvent(mouseDownEvent);\n                }, 100);\n            });\n\n            // Adding listeners that force resizing\n            this.addListener(\"setActive\", () => {\n                this.setScroll();\n            });\n            this.addListener(\"resize\", () => {\n                this.setScroll();\n            });\n            window.addEventListener(\"resize\", () => {\n                this.setScroll();\n            });\n        }\n\n        addTableAPIListeners() {\n            // This event isn't used anywhere but this is how range updates should be made.\n            this.addListener(\"entriesChange\", (event) => {\n                if (!(event.leftIndex >= this.highIndex || event.rightIndex < this.lowIndex)) {\n                    this.setScroll();\n                }\n            });\n            this.addListener(\"showCurrentUser\", () => {\n                const index = this.getEntriesManager().getEntries().map(entry => entry.userId).indexOf(USER.id) + 1;\n                this.jumpToIndex(index);\n            });\n            this.attachListener(this.getEntriesManager(), \"update\", () => {\n                this.setScroll();\n            });\n        }\n\n        addSelfListeners() {\n            this.scrollablePanel.addNodeListener(\"scroll\", () => {\n                this.setScroll();\n            });\n            this.jumpToInput.addNodeListener(\"keyup\", (event) => {\n                if (event.code === \"Enter\") {\n                    this.jumpToIndex(parseInt(this.jumpToInput.getValue()));\n                }\n            });\n            this.jumpToButton.addClickListener(() => {\n                this.jumpToIndex(parseInt(this.jumpToInput.getValue()));\n            });\n        }\n\n        onMount() {\n            super.onMount();\n\n            this.addCompatibilityListeners();\n\n            this.addTableAPIListeners();\n\n            this.addSelfListeners();\n\n            setTimeout(() => {\n                this.redraw();\n            })\n        }\n    }\n    return RangeTable;\n}\n\nexport {RangePanelInterface, RangeTableInterface, EntriesManager};\n","import {StyleSheet} from \"../Style\";\nimport {styleRule, styleRuleInherit} from \"../../decorators/Style\";\n\nclass TableStyle extends StyleSheet {\n    cellStyle =  {\n        padding: \"8px\",\n        lineHeight: \"1.42857143\",\n        verticalAlign: \"top\",\n        borderTop: \"1px solid #ddd\",\n    };\n\n    theadCellStyle = {\n        borderBottom: \"2px solid #ddd\",\n        borderTop: \"0\",\n    };\n\n    @styleRule\n    table = {\n        width: \"100%\",\n        maxWidth: \"100%\",\n        marginBottom: \"20px\",\n        borderSpacing: \"0\",\n        borderCollapse: \"collapse\",\n        \">*>*>td\": this.cellStyle,\n        \">*>*>th\": this.cellStyle,\n        \">*>thead>*>*\": this.theadCellStyle,\n    };\n\n    @styleRule\n    tableStripped = {\n        \">tbody>tr:nth-of-type(odd)\": {\n            backgroundColor: \"#f5f5f5\",\n        }\n    };\n\n}\n\nclass SortableTableStyle extends TableStyle {\n    @styleRule\n    sortIcon = {\n        position: \"absolute\",\n        right: \"0px\",\n        bottom: \"0px\",\n        visibility: \"hidden\",\n        float: \"right\",\n    };\n\n    @styleRuleInherit\n    table = {\n        [\" th:hover .\" + this.sortIcon.getClassName()]: {\n            visibility: \"inherit\",\n        },\n        \" th:hover\": {\n            cursor: \"pointer\",\n        }\n    };\n}\n\nexport {TableStyle, SortableTableStyle};\n","import {TableStyle} from \"./Style\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\n\n// TODO: the whole table architecture probably needs a rethinking\nclass TableRow extends UI.Primitive(\"tr\") {\n    render() {\n        let rowCells = [];\n\n        for (let column of this.options.columns) {\n            rowCells.push(this.renderEntryCell(column));\n        }\n\n        return rowCells;\n    }\n\n    renderEntryCell(column) {\n        return <td style={column.cellStyle} key={column.id}>{column.value(this.options.entry, this.options.index)}</td>;\n    }\n};\n\n@registerStyle(TableStyle)\nclass Table extends UI.Primitive(\"table\") {\n    setOptions(options) {\n        super.setOptions(options);\n\n        this.setColumns(options.columns || []);\n        this.entries = options.entries || [];\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.table);\n    }\n\n    getRowClass() {\n        return TableRow;\n    }\n\n    getRowOptions(entry) {\n        return {\n            entry: entry,\n            columns: this.columns,\n        };\n    }\n\n    render() {\n        return [\n            <thead>\n                {this.renderTableHead()}\n            </thead>,\n            <tbody>\n                {this.renderTableBody()}\n            </tbody>\n        ];\n    }\n\n    renderTableHead() {\n        return <tr>{this.columns.map(this.renderHeaderCell, this)}</tr>;\n    }\n\n    getEntryKey(entry, index) {\n        return entry.id || index;\n    }\n\n    renderTableBody() {\n        this.rows = [];\n\n        let entries = this.getEntries();\n        for (let i = 0; i < entries.length; i += 1) {\n            let entry = entries[i];\n            let RowClass = this.getRowClass(entry);\n            this.rows.push(<RowClass key={this.getEntryKey(entry, i)} index={i} {...this.getRowOptions(entry)} parent={this}/>);\n        }\n        return this.rows;\n    }\n\n    // Renders the whole header cell based on a column\n    renderHeaderCell(column) {\n        return <th style={column.headerStyle} ref={\"columnHeader\" + column.id}>\n                {this.renderColumnHeader(column)}\n            </th>;\n    }\n\n    // Only renders the content of the header cell\n    renderColumnHeader(column) {\n        if (typeof column.headerName === \"function\") {\n            return column.headerName();\n        }\n        return column.headerName;\n    }\n\n    // Original entries should not be modified. Overwrite this function to appy any modification in a new array.\n    getEntries() {\n        return this.entries || [];\n    }\n\n    columnDefaults(column, index) {\n        column.id = index;\n    }\n\n    setColumns(columns) {\n        this.columns = columns;\n        for (let i = 0; i < this.columns.length; i += 1) {\n            this.columnDefaults(this.columns[i], i);\n        }\n    }\n}\n\nexport * from \"./Style\";\nexport {Table, TableRow};\n","import {UI} from \"../UIBase\";\nimport {Table, TableRow} from \"./Table\";\nimport {CollapsibleMixin} from \"../collapsible/CollapsibleMixin\";\nimport {StyleSheet} from \"../Style\";\nimport {styleRule} from \"../../decorators/Style\";\n\nclass TableRowInCollapsibleTable extends TableRow {\n    getNodeType() {\n        return \"tbody\";\n    }\n\n    render() {\n        return <tr>{super.render()}</tr>;\n    }\n}\n\nclass CollapsibleTableStyle extends StyleSheet {\n    @styleRule\n    button = {\n        marginTop: \"0\",\n        marginBottom: \"0\",\n        fontSize: \"16px\",\n        color: \"inherit\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"inherit\",\n        },\n        \":after\": {\n            fontFamily: \"'FontAwesome'\",\n            content: \"\\\"\\\\f107\\\"\",\n            color: \"grey\",\n            float: \"left\",\n            fontWeight: \"bold\",\n            width: \"0.7em\",\n            fontSize: \"130%\",\n            verticalAlign: \"top\",\n            height: \"0.7em\",\n            marginTop: \"-0.2em\",\n            textAlign: \"center\",\n        }\n    };\n\n    @styleRule\n    collapsedButton = {\n        \":after\": {\n            content: \"\\\"\\\\f105\\\" !important\",\n        },\n    };\n\n    @styleRule\n    heading = {\n        padding: \"10px 15px\",\n        backgroundColor: \"initial !important\",\n    };\n}\n\nlet collapsibleTableStyle = new CollapsibleTableStyle();\n\n// TODO: refactor this to support redraw and render override\nclass CollapsibleTableRow extends CollapsibleMixin(TableRow) {\n    getNodeType() {\n        return \"tbody\";\n    }\n\n    getDefaultOptions() {\n        return {\n            collapsed: true,\n        }\n    }\n\n    onMount() {\n        this.toggleButton.addClickListener(() => this.toggle());\n    }\n\n    toggle() {\n        if (!this.options.collapsed) {\n            this.collapse();\n        } else {\n            this.expand();\n        }\n    }\n\n    expand() {\n        super.expand(this.contentArea);\n        this.toggleButton.removeClass(collapsibleTableStyle.collapsedButton);\n    }\n\n    collapse() {\n        super.collapse(this.contentArea);\n        setTimeout(() => {\n            this.toggleButton.addClass(collapsibleTableStyle.collapsedButton);\n        }, this.getCollapsibleStyleSheet().transitionDuration * 500);\n    }\n\n    // TODO: Very bad redraw practice here\n    redraw() {\n        if (!super.redraw()) {\n            return false;\n        }\n\n        if (this.options.collapsed) {\n            this.toggleButton.addClass(collapsibleTableStyle.collapsedButton);\n            this.contentArea.addClass(this.getCollapsibleStyleSheet().collapsed);\n            this.contentArea.addClass(\"hidden\");\n        } else {\n            this.toggleButton.removeClass(collapsibleTableStyle.collapsedButton);\n            this.contentArea.removeClass(this.getCollapsibleStyleSheet().collapsed);\n            this.contentArea.removeClass(\"hidden\");\n        }\n        return true;\n    }\n\n    getInitialCollapsedContent() {\n        return this.renderCollapsible(this.options.entry);\n    }\n\n    render() {\n        return [\n            <tr className={collapsibleTableStyle.heading}>{super.render()}</tr>,\n            <tr>\n                <td style={{overflow: \"hidden\", padding: \"0px\"}}\n                    colspan={this.options.columns.length}>\n                    <div ref=\"contentArea\"\n                         className={`${this.getCollapsibleStyleSheet().collapsed} hidden`}>\n                            {this.getInitialCollapsedContent()}\n                    </div>\n                </td>\n            </tr>\n        ];\n    }\n}\n\nclass DelayedCollapsibleTableRow extends CollapsibleTableRow {\n    toggle() {\n        if (!this._haveExpanded) {\n            this._haveExpanded = true;\n            UI.renderingStack.push(this);\n            this.contentArea.options.children = this.renderCollapsible(this.options.entry);\n            UI.renderingStack.pop();\n            this.contentArea.redraw();\n        }\n        super.toggle();\n    }\n\n    getInitialCollapsedContent() {\n        return [];\n    }\n}\n\nfunction CollapsibleTableInterface(BaseTableClass) {\n    return class CollapsibleTable extends BaseTableClass {\n        setOptions(options) {\n            super.setOptions(options);\n\n            if (options.renderCollapsible) {\n                this.renderCollapsible = options.renderCollapsible;\n            }\n        }\n\n        render() {\n            return [\n                <thead>\n                    {this.renderTableHead()}\n                </thead>,\n                this.renderTableBody()\n            ];\n        }\n\n        getRowClass() {\n            return CollapsibleTableRow;\n        }\n\n        setColumns(columns) {\n            let toggleColumn = {\n                value: (entry) => {\n                    let rowClass = this.getRowClass(entry);\n                    // TODO: Fix it lad!\n                    if (rowClass === CollapsibleTableRow || rowClass.prototype instanceof CollapsibleTableRow) {\n                        return <a ref=\"toggleButton\"\n                        className={`${collapsibleTableStyle.button} ${collapsibleTableStyle.collapsedButton}`}/>;\n                    }\n                    return <a ref=\"toggleButton\"/>;\n                },\n                cellStyle: {\n                    width: \"1%\",\n                    \"whiteSpace\": \"nowrap\",\n                }\n            };\n\n            super.setColumns([toggleColumn].concat(columns));\n        }\n    };\n}\n\nlet CollapsibleTable = CollapsibleTableInterface(Table);\n\nexport {CollapsibleTable, CollapsibleTableInterface, CollapsibleTableRow, DelayedCollapsibleTableRow,\n        TableRowInCollapsibleTable, collapsibleTableStyle};\n","import {SortableTableStyle} from \"./Style\";\nimport {FASortIcon} from \"../FontAwesome\";\nimport {UI} from \"../UIBase\";\nimport {Table} from \"./Table\";\nimport {defaultComparator} from \"../../base/Utils\";\nimport {Direction} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\n\nfunction SortableTableInterface(BaseTableClass, SortIconClass = FASortIcon) {\n    @registerStyle(SortableTableStyle)\n    class SortableTable extends BaseTableClass {\n        extraNodeAttributes(attr) {\n            super.extraNodeAttributes(attr);\n            attr.addClass(this.styleSheet.table);\n        }\n\n        setOptions(options) {\n            super.setOptions(options);\n\n            this.columnSortingOrder = options.columnSortingOrder || [];\n        }\n\n        onMount() {\n            super.onMount();\n\n            // TODO: fix multiple clicks registered here\n            // Sort table by clicked column\n            for (let column of this.columns) {\n                this[\"columnHeader\" + column.id].addClickListener(() => {\n                    this.sortByColumn(column);\n                    this.dispatch(\"reorder\");\n                });\n            }\n        }\n\n        renderColumnHeader(column) {\n            let sortIcon = <SortIconClass className={this.styleSheet.sortIcon}/>;\n            if (this.sortBy === column) {\n                if (this.sortDescending) {\n                    sortIcon = <SortIconClass className={this.styleSheet.sortIcon} style={{visibility: \"inherit\"}} direction={Direction.DOWN}/>;\n                } else {\n                    sortIcon = <SortIconClass className={this.styleSheet.sortIcon} style={{visibility: \"inherit\"}} direction={Direction.UP}/>;\n                }\n            }\n\n            return <div style={{position: \"relative\"}}>{super.renderColumnHeader(column)} {sortIcon}</div>;\n        }\n\n        sortByColumn(column) {\n            if (column === this.sortBy) {\n                this.sortDescending = (this.sortDescending != true);\n            } else {\n                this.sortDescending = true;\n            }\n\n            this.sortBy = column;\n\n            this.redraw();\n        }\n\n        getComparator() {\n            if (!this.sortBy && this.columnSortingOrder.length === 0) {\n                return null;\n            }\n\n            const colCmp = (a, b, col) => {\n                if (!col) return 0;\n\n                let keyA = col.rawValue ? col.rawValue(a) : col.value(a);\n                let keyB = col.rawValue ? col.rawValue(b) : col.value(b);\n                return col.cmp(keyA, keyB);\n            };\n\n            return (a, b) => {\n                let cmpRes;\n\n                if (this.sortBy) {\n                    cmpRes = colCmp(a, b, this.sortBy);\n                    if (cmpRes !== 0) {\n                        return (this.sortDescending ? -cmpRes : cmpRes);\n                    }\n                }\n\n                for (let i = 0; i < this.columnSortingOrder.length; i += 1) {\n                    cmpRes = colCmp(a, b, this.columnSortingOrder[i]);\n                    if (this.columnSortingOrder[i].sortDescending) {\n                        cmpRes = -cmpRes;\n                    }\n\n                    if (cmpRes !== 0) {\n                        return cmpRes;\n                    }\n                }\n                return 0;\n            }\n        }\n\n        sortEntries(entries) {\n            let sortedEntries = entries.slice();\n\n            if (this.getComparator()) {\n                sortedEntries.sort(this.getComparator());\n            }\n\n            return sortedEntries;\n        }\n\n        getEntries() {\n            return this.sortEntries(super.getEntries());\n        }\n\n        columnDefaults(column, index) {\n            super.columnDefaults(column, index);\n\n            if (!column.hasOwnProperty(\"cmp\")) {\n                column.cmp = defaultComparator;\n            }\n        }\n    }\n    return SortableTable;\n}\n\nlet SortableTable = SortableTableInterface(Table);\n\nexport {SortableTable, SortableTableInterface};\n","import {isPlainObject, isNumber} from \"../base/Utils\";\n\nexport class TimeUnit {\n    static CANONICAL = {};\n    static ALL = [];\n    static FIXED_DURATION = [];\n    static VARIABLE_DURATION = [];\n\n    constructor(name, baseUnit, multiplier, options = {}) {\n        this.name = name;\n        this.pluralName = name + \"s\";\n        this.baseUnit = baseUnit;\n        this.multiplier = multiplier;\n        this.milliseconds = ((baseUnit && baseUnit.getMilliseconds()) || 1) * multiplier;\n        this.variableMultiplier = options.variableMultiplier || false;\n        this.variableDuration = this.variableMultiplier || (baseUnit && baseUnit.isVariable());\n    }\n\n    static toTimeUnit(timeUnit) {\n        if (timeUnit instanceof TimeUnit) {\n            return timeUnit;\n        }\n        return this.CANONICAL[timeUnit];\n    }\n\n    valueOf() {\n        return this.milliseconds;\n    }\n\n    getName() {\n        return this.name;\n    }\n\n    getPluralName() {\n        return this.pluralName;\n    }\n\n    getMilliseconds() {\n        return this.milliseconds;\n    }\n\n    isVariable() {\n        return this.variableDuration;\n    }\n\n    hasVariableMultiplier() {\n        return this.variableMultiplier;\n    }\n\n    getDateValue(date) {\n\n    }\n\n    setDateValue(date, value) {\n    }\n}\n\nTimeUnit.MILLISECOND = new TimeUnit(\"millisecond\", null, 1);\nTimeUnit.SECOND = new TimeUnit(\"second\", TimeUnit.MILLISECOND, 1000);\nTimeUnit.MINUTE = new TimeUnit(\"minute\", TimeUnit.SECOND, 60);\nTimeUnit.HOUR = new TimeUnit(\"hour\", TimeUnit.MINUTE, 60);\nTimeUnit.DAY = new TimeUnit(\"day\", TimeUnit.HOUR, 24, {variableMultiplier: true});\nTimeUnit.WEEK = new TimeUnit(\"week\", TimeUnit.DAY, 7);\nTimeUnit.MONTH =  new TimeUnit(\"month\", TimeUnit.DAY, 30, {variableMultiplier: true});\nTimeUnit.QUARTER = new TimeUnit(\"quarter\", TimeUnit.MONTH, 3);\nTimeUnit.TRIMESTER = new TimeUnit(\"trimester\", TimeUnit.MONTH, 4);\nTimeUnit.SEMESTER = new TimeUnit(\"semester\", TimeUnit.MONTH, 6);\nTimeUnit.YEAR = new TimeUnit(\"year\", TimeUnit.DAY, 365, {variableMultiplier: true});\n\nTimeUnit.DAY.dateMethodSuffix = \"Date\";\nTimeUnit.MONTH.dateMethodSuffix = \"Month\";\nTimeUnit.YEAR.dateMethodSuffix = \"FullYear\";\n\nexport class Duration {\n    constructor(duration) {\n        if (duration instanceof self.Date) {\n            throw new Error(\"Can't automatically transform Date to Duration, use date.getTime() if you really want to\");\n        }\n        if (isNumber(duration)) {\n            this.milliseconds = duration;\n            return;\n        }\n        if (duration instanceof Duration) {\n            Object.assign(this, duration);\n            return;\n        }\n        if (isPlainObject(duration)) {\n            this.milliseconds = 0;\n            for (const key of Object.keys(duration)) {\n                let timeUnit = TimeUnit.CANONICAL[key];\n                if (!timeUnit) {\n                    throw Error(\"Unknown time unit:\", key);\n                }\n                // TODO: throw an error if can't parse these values\n                if (timeUnit.isVariable()) {\n                    this[key] = parseInt(duration[key]);\n                    this.relativeDuration = true;\n                } else {\n                    this.milliseconds += parseFloat(duration[key]) * timeUnit.milliseconds;\n                }\n            }\n            return;\n        }\n        if (arguments.length > 0) {\n            throw Error(\"Invalid Duration arguments: \", ...arguments);\n        }\n        this.milliseconds = 0;\n    }\n\n    static toDuration(duration) {\n        if (duration instanceof Duration) {\n            return duration;\n        }\n        return new this(duration);\n    }\n\n    increment(duration) {\n        duration = this.constructor.toDuration(duration);\n        for (const key in duration) {\n            if (!(key in TimeUnit.CANONICAL)) {\n                continue;\n            }\n            if (this.hasOwnProperty(key)) {\n                this[key] += duration[key];\n            } else {\n                this[key] = duration[key];\n            }\n        }\n        return this;\n    }\n\n    add(duration) {\n        return this.clone().increm(duration);\n    }\n\n    subtract(duration) {\n        duration = this.constructor.toDuration(duration).negate();\n        return this.add(duration);\n    }\n\n    // Returns true if was defined terms of absolute primitives (anything less than a day)\n    isAbsolute() {\n        return !this.isVariable();\n    }\n\n    isVariable() {\n        return this.relativeDuration;\n    }\n\n    negate() {\n        let duration = new Duration(this);\n        for (const key in duration) {\n            if (key in TimeUnit.CANONICAL) {\n                duration[key] = -duration[key];\n            }\n        }\n        return duration;\n    }\n\n    // Returns a new Duration with a positive length\n    abs() {\n        return new Duration(Math.abs(+this));\n    }\n\n    clone() {\n        return new Duration(this);\n    }\n\n    // The primitive value\n    valueOf() {\n        return this.milliseconds;\n    }\n\n    toNanoseconds() {\n        return Math.floor(+this * 1e6);\n    }\n\n    // TODO: for all these units, should have a way to get the float and int value\n    toMilliseconds() {\n        return Math.floor(+this);\n    }\n\n    getMilliseconds() {\n        return this.toMilliseconds() % 1000;\n    }\n\n    toSeconds() {\n        return Math.floor(+this / 1000);\n    }\n\n    getSeconds() {\n        return this.toSeconds() % 60;\n    }\n\n    toMinutes() {\n        return Math.floor(+this / (1000 * 60));\n    }\n\n    getMinutes() {\n        return this.toMinutes() % 60;\n    }\n\n    toHours() {\n        return Math.floor(+this / (1000 * 60 * 60));\n    }\n\n    getHours() {\n        return this.toHours() % 24;\n    }\n\n    toDays() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24));\n    }\n\n    toMonths() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24 * 30));\n    }\n\n    toYears() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24 * 365));\n    }\n\n    toString(locale) {\n        // Humanize the duration (should work with localization)\n    }\n}\n\nexport function addCanonicalTimeUnit(key, timeUnit) {\n    TimeUnit.ALL.push(timeUnit);\n    if (timeUnit.isVariable()) {\n        TimeUnit.VARIABLE_DURATION.push(timeUnit);\n    } else {\n        TimeUnit.FIXED_DURATION.push(timeUnit);\n    }\n\n    TimeUnit.CANONICAL[timeUnit.name] = timeUnit;\n    if (timeUnit.pluralName) {\n        TimeUnit.CANONICAL[timeUnit.pluralName] = timeUnit;\n    }\n\n    const timeUnitsName = timeUnit.pluralName;\n\n    // TODO: not sure about this anymore\n    Duration[key] = new Duration({\n        [timeUnitsName]: 1,\n    });\n}\n\nexport function addCanonicalTimeUnits() {\n    for (const key in TimeUnit) {\n        const timeUnit = TimeUnit[key];\n        if (timeUnit instanceof TimeUnit) {\n            addCanonicalTimeUnit(key, timeUnit);\n        }\n    }\n}\n\naddCanonicalTimeUnits();\n","import {padNumber, suffixWithOrdinal, extendsNative, instantiateNative, isNumber} from \"../base/Utils\";\nimport {TimeUnit, Duration} from \"./Duration\";\n\n// MAX_UNIX_TIME is either ~Feb 2106 in unix seconds or ~Feb 1970 in unix milliseconds\n// Any value less than this is interpreted as a unix time in seconds\n// If you want to go around this behavious, you can use the static method .fromUnixMilliseconds()\n// To disable, set this value to 0\nexport let MAX_AUTO_UNIX_TIME = Math.pow(2, 32);\n\nconst BaseDate = self.Date;\n\n@extendsNative\nclass StemDate extends BaseDate {\n    // Still need to do this mess because of Babel, should be removed when moving to native ES6\n    static create(value) {\n        // Try to do an educated guess if this date is in unix seconds or milliseconds\n        if (arguments.length === 1 && isNumber(value) && value < MAX_AUTO_UNIX_TIME) {\n            return instantiateNative(BaseDate, StemDate, value * 1000.0);\n        } else {\n            return instantiateNative(BaseDate, StemDate, ...arguments);\n        }\n    }\n\n    static toDate(date) {\n        if (date instanceof StemDate) {\n            return date;\n        } else {\n            return new this(date);\n        }\n    }\n\n    static now() {\n        return new this(BaseDate.now());\n    }\n\n    toDate() {\n        return this;\n    }\n\n    static fromUnixMilliseconds(unixMilliseconds) {\n        return this.create(new BaseDate(unixMilliseconds));\n    }\n\n    static fromUnixSeconds(unixSecons) {\n        return this.fromUnixMilliseconds(unixSecons * 1000);\n    }\n\n    // Creates a Date object from an instance of DOMHighResTimeStamp, returned by performance.now() for instance\n    static fromHighResTimestamp(highResTimestamp) {\n        return this.fromUnixMilliseconds(highResTimestamp + self.performance.timing.navigationStart)\n    }\n\n    // You don't usually need to call this in most cases, constructor uses MAX_AUX_UNIX_TIME\n    static unix(unixTime) {\n        return this.fromUnixSeconds(unixTime);\n    }\n\n    set(date) {\n        date = this.constructor.toDate(date);\n        this.setTime(date.setTime());\n    }\n\n    clone() {\n        return new this.constructor(this.getTime());\n    }\n\n    toUnix() {\n        return this.getTime() / 1000;\n    }\n\n    unix() {\n        return Math.floor(this.toUnix());\n    }\n\n    isBefore(date) {\n        return this.getTime() < StemDate.toDate(date).getTime();\n    }\n\n    equals(date) {\n        return this.getTime() === StemDate.toDate(date).getTime();\n    }\n\n    get(timeUnit) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        return timeUnit.getDateValue(this);\n    }\n\n    isSame(date, timeUnit) {\n        if (!timeUnit) {\n            return this.equals(date);\n        }\n\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        date = this.constructor.toDate(date);\n        let diff = this.diff(date);\n        if (diff >= 2 * timeUnit) {\n            // If the distance between the two dates is more than 2 standard lengths of the time unit\n            // This would be wrong if you would have time unit that can sometimes last more than twice their canonical duration\n            // Works correctly for all implemented time units\n            return false;\n        }\n        return this.get(timeUnit) == date.get(timeUnit);\n    }\n\n    isAfter(date) {\n        return this.getTime() > StemDate.toDate(date).getTime();\n    }\n\n    isSameOrBefore(date) {\n        return this.isBefore(date) || this.equals(date);\n    }\n\n    isSameOrAfter(date) {\n        return this.isAfter(date) || this.equals(date);\n    }\n\n    isBetween(a, b) {\n        return this.isSameOrAfter(a) && this.isSameOrBefore(b);\n    }\n\n    getWeekDay() {\n        return this.getDay();\n    }\n\n    addUnit(timeUnit, count = 1) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        count = parseInt(count);\n\n        if (!timeUnit.isVariable()) {\n            this.setTime(this.getTime() + timeUnit.getMilliseconds() * count);\n            return this;\n        }\n\n        while (!timeUnit.dateMethodSuffix) {\n            count *= timeUnit.multiplier;\n            timeUnit = timeUnit.baseUnit;\n        }\n\n        const dateMethodSuffix = timeUnit.dateMethodSuffix;\n        const currentValue = this[\"get\" + dateMethodSuffix]();\n        this[\"set\" + dateMethodSuffix](currentValue + count);\n\n        return this;\n    }\n\n    static min() {\n        // TODO: simplify and remove code duplication\n        let result = this.constructor.toDate(arguments[0]);\n        for (let index = 1; index < arguments.length; index++) {\n            let candidate = this.constructor.toDate(arguments[index]);\n            if (candidate.isBefore(result)) {\n                result = candidate;\n            }\n        }\n        return result;\n    }\n\n    static max() {\n        let result = this.constructor.toDate(arguments[0]);\n        for (let index = 1; index < arguments.length; index++) {\n            let candidate = this.constructor.toDate(arguments[index]);\n            if (candidate.isAfter(result)) {\n                result = candidate;\n            }\n        }\n        return result;\n    }\n\n    // Assign the given date if current value if greater than it\n    capUp(date) {\n        date = this.constructor.toDate(date);\n        if (this.isAfter(date)) {\n            this.set(date);\n        }\n    }\n\n    // Assign the given date if current value if less than it\n    capDown(date) {\n        date = this.constructor.toDate(date);\n        if (this.isBefore(date)) {\n            this.set(date);\n        }\n    }\n\n    roundDown(timeUnit) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        // TODO: this is wrong for semester, etc, should be different then\n        while (timeUnit = timeUnit.baseUnit) {\n            this[\"set\" + timeUnit.dateMethodSuffix](0);\n        }\n        return this;\n    }\n\n    roundUp(timeUnit) {\n        const roundDown = this.clone().roundDown(timeUnit);\n        if (this.equals(roundDown)) {\n            this.set(roundDown);\n            return this;\n        }\n        this.addUnit(timeUnit);\n        return this.roundDown(timeUnit);\n    }\n\n\n    round(timeUnit) {\n        let roundUp = this.clone().roundUp(timeUnit);\n        let roundDown = this.clone().roundDown(timeUnit);\n        // At a tie, preffer to round up, that's where time's going\n        if (this.diff(roundUp) <= this.diff(roundDown)) {\n            this.setTime(roundUp.getTime());\n        } else {\n            this.setTime(roundDown.getTime());\n        }\n        return this;\n    }\n\n    add(duration) {\n        duration = Duration.toDuration(duration);\n        if (duration.isAbsolute()) {\n            this.setTime(this.getTime() + duration.toMilliseconds());\n            return this;\n        }\n        for (const key in duration) {\n            const timeUnit = TimeUnit.CANONICAL[key];\n            if (timeUnit) {\n                this.addUnit(timeUnit, duration[key]);\n            }\n        }\n        return this;\n    }\n\n    subtract(duration) {\n        duration = Duration.toDuration(duration).negate();\n        return this.add(duration);\n    }\n\n    diffDuration(date) {\n        return new Duration(this.diff(date));\n    }\n\n    // TODO: this should be a duration\n    diff(date) {\n        date = this.constructor.toDate(date);\n        return Math.abs(+this - date);\n    }\n\n    // Just to keep moment compatibility, until we actually implement locales\n    locale(loc) {\n        return this;\n    }\n\n    static splitToTokens(str) {\n        // TODO: \"[HH]HH\" will be split to [\"HH\", \"HH\"], so the escape does not solve the problem\n        let tokens = [];\n        let lastIsLetter = null;\n        let escapeByCurlyBracket = false;\n        let escapeBySquareBracket = false;\n        for (let i = 0; i < str.length; i++) {\n            let charCode = str.charCodeAt(i);\n            if (charCode === 125 && escapeByCurlyBracket) { // '}' ending the escape\n                escapeByCurlyBracket = false;\n                lastIsLetter = null;\n            } else if (charCode === 93 && escapeBySquareBracket) { // ']' ending the escape\n                escapeBySquareBracket = false;\n                lastIsLetter = null;\n            } else if (escapeByCurlyBracket || escapeBySquareBracket) { // The character is escaped no matter what it is\n                tokens[tokens.length - 1] += str[i];\n            } else if (charCode === 123) { // '{' starts a new escape\n                escapeByCurlyBracket = true;\n                tokens.push(\"\");\n            } else if (charCode === 91) { // '[' starts a new escape\n                escapeBySquareBracket = true;\n                tokens.push(\"\");\n            } else {\n                let isLetter = (65 <= charCode && charCode <= 90) || (97 <= charCode && charCode <= 122);\n                if (isLetter === lastIsLetter) {\n                    tokens[tokens.length - 1] += str[i];\n                } else {\n                    tokens.push(str[i]);\n                }\n                lastIsLetter = isLetter;\n            }\n        }\n        if (escapeByCurlyBracket || escapeBySquareBracket) {\n            console.warn(\"Unfinished escaped sequence!\");\n        }\n        return tokens;\n    }\n\n    evalToken(token) {\n        let func = this.constructor.tokenFormattersMap.get(token);\n        if (!func) {\n            return token;\n        }\n        return func(this);\n    }\n\n    format(str=\"ISO\") {\n        let tokens = this.constructor.splitToTokens(str);\n        tokens = tokens.map(token => this.evalToken(token));\n        return tokens.join(\"\");\n    }\n\n    isValid() {\n        return (this.toString() !== \"Invalid Date\");\n    }\n\n    utc() {\n        // Temp hack\n        return this.constructor.fromUnixMilliseconds(+this + this.getTimezoneOffset() * 60 * 1000);\n    }\n\n    isLeapYear() {\n        let year = this.getFullYear();\n        return (year % 4 == 0) && ((year % 100 != 0) || (year % 400 == 0));\n    }\n\n    daysInMonth() {\n        // The 0th day of the next months is actually the last day in the current month\n        let lastDayInMonth = new BaseDate(this.getFullYear(), this.getMonth() + 1, 0);\n        return lastDayInMonth.getDate();\n    }\n\n    getDaysCountPerMonth(index) {\n        const months = [31, 28 + this.isLeapYear(), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n        return months[index];\n    }\n\n    getDayInYear() {\n        const month = this.getMonth();\n        let totalDays = 0;\n        for (let i = 0; i < month; i += 1) {\n            totalDays += this.getDaysCountPerMonth(i);\n        }\n        return totalDays + this.getDate() - 1;\n    }\n\n    getWeekInYear() {\n        return (this.getDayInYear() - this.getWeekDay()) / 7;\n    }\n}\n\nDuration.prototype.format = function (pattern) {\n    return StemDate.fromUnixMilliseconds(this.toMilliseconds()).utc().format(pattern);\n};\n\nconst miniWeekDays = [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"];\nconst shortWeekDays = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\nconst longWeekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\nconst shortMonths = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\nconst longMonths = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\nclass DateLocale {\n    constructor(obj={}) {\n        Object.assign(this, obj);\n        this.formats = this.formats || {};\n    }\n\n    getFormat(longDate) {\n        return this.formats[longDate];\n    }\n\n    setFormat(pattern, func) {\n        this.formats[pattern] = func;\n    }\n\n    format(date, pattern) {\n        return date.format(pattern);\n    }\n\n    getRelativeTime() {\n        throw Error(\"Not implemented\");\n    }\n}\n\nStemDate.tokenFormattersMap = new Map([\n    [\"ISO\", date => date.toISOString()],\n\n    [\"Y\", date => date.getFullYear()],\n    [\"YY\", date => padNumber(date.getFullYear() % 100, 2)],\n    [\"YYYY\", date => date.getFullYear()],\n\n    [\"M\", date => (date.getMonth() + 1)],\n    [\"MM\", date => padNumber(date.getMonth() + 1, 2)],\n    [\"MMM\", date => shortMonths[date.getMonth()]],\n    [\"MMMM\", date => longMonths[date.getMonth()]],\n\n    [\"D\", date => date.getDate()],\n    [\"Do\", date => suffixWithOrdinal(date.getDate())],\n    [\"DD\", date => padNumber(date.getDate(), 2)],\n\n    [\"d\", date => date.getWeekDay()],\n    [\"do\", date => suffixWithOrdinal(date.getWeekDay())],\n    [\"dd\", date => miniWeekDays[date.getWeekDay()]],\n    [\"ddd\", date => shortWeekDays[date.getWeekDay()]],\n    [\"dddd\", date => longWeekdays[date.getWeekDay()]],\n\n    [\"H\", date => date.getHours()],\n    [\"HH\", date => padNumber(date.getHours(), 2)],\n    [\"h\", date => date.getHours() % 12],\n    [\"hh\", date => padNumber(date.getHours() % 12, 2)],\n\n    [\"m\", date => date.getMinutes()],\n    [\"mm\", date => padNumber(date.getMinutes(), 2)],\n\n    [\"s\", date => date.getSeconds()],\n    [\"ss\", date => padNumber(date.getSeconds(), 2)],\n\n    [\"S\", date => Math.floor(date.getMilliseconds() / 100)],\n    [\"SS\", date => padNumber(Math.floor(date.getMilliseconds() / 10), 2)],\n    [\"SSS\", date => padNumber(date.getMilliseconds(), 3)],\n    [\"ms\", date => padNumber(date.getMilliseconds(), 3)],\n\n    [\"LL\", date => date.format(\"MMMM Do, YYYY\")],\n]);\n\nlet Date = StemDate;\n\nexport {Date, StemDate};\n","import {StemDate} from \"./Date\";\nimport {TimeUnit} from \"./Duration\"\n\n// File meant to handle server time/client time differences\nlet ServerTime = {\n    now() {\n        return StemDate().subtract(this.getOffset());\n    },\n\n    getOffset() {\n        return this.offset;\n    },\n\n    set(date, onlyIfMissing=false) {\n        if (!onlyIfMissing || this.offset == null) {\n            this.offset = Date.now() - (new StemDate(date));\n        }\n    },\n\n    setPageLoadTime(unixTime, estimatedLatency=0) {\n        this.serverPageLoad = unixTime;\n        this.offset = performance.timing.responseStart - unixTime * 1000;\n    }\n};\n\n// TODO: should use +TimeUnit.DAY\nexport const DAY_IN_MILLISECONDS = 24 * 60 * 60 * 1000;\n\n// TODO: should have a generic method time1.isSame(\"x\", time);\nexport function isDifferentDay(timeA, timeB) {\n    // return !StemDate(timeA).same(TimeUnit.DAY, timeB);\n    timeA = StemDate(timeA);\n    timeB = StemDate(timeB);\n\n    // First check if difference is gre\n    if (timeA.diff(timeB) > +TimeUnit.DAY) {\n        return true;\n    }\n    // Check if different day of the month, when difference is less than a day\n    return (timeA.getDate() !== timeB.getDate());\n}\n\nexport {ServerTime};\n\nexport * from \"./Date\";\nexport * from \"./Duration\";\n","import {UI, TextInput, VolatileFloatingWindow, getOffset, VerticalSlideBar} from \"./UI\";\nimport {StemDate, DAY_IN_MILLISECONDS} from \"../time/Time\";\n// import {Button} from \"./button/Button\";\n\nclass DatePickerTable extends UI.Element {\n\n}\n\nclass TimePickerWidget extends UI.Element {\n    render() {\n        let hours = parseInt(this.options.time / (60 * 60 * 1000));\n        let minutes = parseInt((this.options.time - 60 * 60 * 1000 * hours) / (60 * 1000));\n        let seconds = parseInt((this.options.time - 60 * 60 * 1000 * hours - 60 * 1000 * minutes) / (1000));\n        let textSpanStyle = {\n            display: \"inline-block\",\n            flex: 1,\n            textAlign: \"center\",\n            fontSize: \"1.5em\",\n            fontWeight: \"bold\",\n            padding: \"0 5px\"\n        };\n        return [\n            <div style={{width: \"130px\", display: \"flex\"}}>\n                <div style={textSpanStyle} ref=\"hours\" />\n                <div style={textSpanStyle}>:</div>\n                <div style={textSpanStyle} ref=\"minutes\" />\n                <div style={textSpanStyle}>:</div>\n                <div style={textSpanStyle} ref=\"seconds\" />\n            </div>,\n            <div style={{width: \"130px\", display: \"flex\"}}>\n                <VerticalSlideBar value={hours / 23} ref=\"hourSlider\" height={200} barHeight={5} style={{flex: 1}}/>\n                <div style={{flex: 1}}></div>\n                <VerticalSlideBar value={minutes / 59} ref=\"minuteSlider\" height={200} barHeight={5} style={{flex: 1}}/>\n                <div style={{flex: 1}}></div>\n                <VerticalSlideBar value={seconds / 59} ref=\"secondSlider\" height={200} barHeight={5} style={{flex: 1, marginRight: \"5px\"}}/>\n            </div>\n        ];\n    }\n\n    onMount() {\n        let changeCallback = () => {\n            let hours = parseInt(this.hourSlider.getValue() * 23);\n            let minutes = parseInt(this.minuteSlider.getValue() * 59);\n            let seconds = parseInt(this.secondSlider.getValue() * 59);\n            this.hours.node.innerHTML = (hours < 10 ? \"0\" : \"\") + hours;\n            this.minutes.node.innerHTML = (minutes < 10 ? \"0\" : \"\") + minutes;\n            this.seconds.node.innerHTML = (seconds < 10 ? \"0\" : \"\") + seconds;\n            let time = (hours * 60 * 60  + minutes * 60 + seconds) * 1000;\n            this.dispatch(\"changeTime\", time);\n        };\n        this.hourSlider.addListener(\"change\", changeCallback);\n        this.minuteSlider.addListener(\"change\", changeCallback);\n        this.secondSlider.addListener(\"change\", changeCallback);\n        changeCallback();\n    }\n}\n\nclass DateTimeWindow extends VolatileFloatingWindow {\n    setOptions(options) {\n        options.style = Object.assign({\n            marginBottom: \"5px\",\n            border: \"1px solid #bbb\",\n            borderRadius: \"2px\",\n            position: \"absolute\",\n            overflow: \"auto\",\n            boxShadow: \"0 6px 12px rgba(0,0,0,.175)\",\n            backgroundColor: \"white\",\n            padding: \"10px\",\n            zIndex: 10000\n        }, options.style || {});\n        super.setOptions(options);\n        this.computeInitial();\n    }\n\n    render() {\n        return [\n            <DatePickerTable ref=\"datePicker\" date={this.date} />,\n            <TimePickerWidget ref=\"timePicker\" time={this.time} />\n        ];\n    }\n\n    computeInitial() {\n        let initialDateTime = StemDate.parse(this.formatISO(this.options.initialDateTime)) || StemDate.now();\n        this.time = initialDateTime % DAY_IN_MILLISECONDS;\n        this.date = parseInt(initialDateTime / DAY_IN_MILLISECONDS);\n    }\n\n    formatISO(str) {\n        if (!str) {\n            return \"\";\n        }\n        while (str.indexOf(\"/\") !== -1) {\n            str = str.replace(\"/\", \" \");\n        }\n        while (str.indexOf(\":\") !== -1) {\n            str = str.replace(\":\", \" \");\n        }\n        let tokens = str.split(\" \");\n        return tokens[2] + \"-\" + tokens[1] + \"-\" + tokens[0] + \"T\" + tokens[3] + \":\" + tokens[4] + \":\" + tokens[5] + \".000Z\";\n    }\n\n    getValue() {\n        let currentDate = this.time + DAY_IN_MILLISECONDS * this.date;\n        currentDate = StemDate.create(currentDate);\n        let date = currentDate.toISOString();\n        date = date.slice(8, 10) + \"/\" + date.slice(5, 7) + \"/\" + date.slice(0, 4);\n        return date + \" \" + currentDate.toTimeString().slice(0, 8);\n    }\n\n    onMount() {\n        this.options.output.setValue(this.getValue());\n        this.datePicker.addListener(\"changeDate\", (date) => {\n            this.date = date;\n            this.options.output.setValue(this.getValue());\n        });\n        this.timePicker.addListener(\"changeTime\", (time) => {\n            this.time = time;\n            this.options.output.setValue(this.getValue());\n        });\n    }\n}\n\nclass DateTimePicker extends UI.Element {\n    setOptions(options) {\n        options.format = options.format || \"DD/MM/YYYY HH:mm:ss\";\n        super.setOptions(options);\n        if (this.options.date) {\n            this.setDate(this.options.date);\n        }\n    }\n\n    parseDateFromString(str, format) {\n        if (format !== \"DD/MM/YYYY HH:mm:ss\") {\n            throw Error(\"Format not supported!\");\n        }\n        // Just parsing DD/MM/YYYY HH:mm:ss for now\n        while (str.indexOf('/') !== -1) {\n            str = str.replace('/', ' ');\n        }\n        while (str.indexOf(':') !== -1) {\n            str = str.replace(':', ' ');\n        }\n        let tokens = str.split(' ');\n        let integerTokens = [];\n        for (let token of tokens) {\n            let number = parseFloat(token);\n            if (!isNaN(number)) {\n                integerTokens.push(number);\n            }\n        }\n        let years = (integerTokens.length >= 3 ? integerTokens[2] : 0);\n        let months = (integerTokens.length >= 2 ? integerTokens[1] - 1 : 0);\n        let days = (integerTokens.length >= 1 ? integerTokens[0] : 0);\n        let hours = (integerTokens.length >= 4 ? integerTokens[3] : 0);\n        let minutes = (integerTokens.length >= 5 ? integerTokens[4] : 0);\n        let seconds = (integerTokens.length >= 6 ? integerTokens[5] : 0);\n        let date = new StemDate(years, months, days, hours, minutes, seconds);\n        if (!date.getTime()) {\n            return null;\n        }\n        return date;\n    }\n\n    getDate() {\n        let str = this.textInput.getValue();\n        if (!str) {\n            return null;\n        }\n        let format = this.options.format;\n        return this.parseDateFromString(str, format);\n    }\n\n    setDate(date) {\n        this.options.date = date;\n        this.options.dateString = date.format(this.options.format);\n        if (this.textInput) {\n            this.textInput.setValue(this.options.dateString);\n        }\n    }\n\n    render() {\n        return [\n            <TextInput ref=\"textInput\" placeholder={this.options.format} value={this.options.dateString || \"\"} />,\n            /*<Button ref=\"calendarSpan\" faIcon=\"calendar\"/>*/\n        ]\n    }\n\n    // onMount() {\n    //     this.calendarSpan.addClickListener((event) => {\n    //         if (!this.dateTimeWindow) {\n    //             let textInputOffset = getOffset(this.textInput);\n    //             this.dateTimeWindow = DateTimeWindow.create(document.body, {\n    //                 style: {\n    //                     top: textInputOffset.top + 5 + this.textInput.getHeight() + \"px\",\n    //                     left: textInputOffset.left + 5 + \"px\"\n    //                 },\n    //                 initialDateTime: this.textInput.getValue(),\n    //                 output: this.textInput\n    //             });\n    //         } else {\n    //             this.dateTimeWindow.hide();\n    //             delete this.dateTimeWindow;\n    //         }\n    //         event.stopPropagation();\n    //     });\n    // }\n}\n\nexport {DateTimePicker};\n","// Wrapper over the Ace code editor, needs ace to be loaded\n// TODO: should be renamed to AceCodeEditor?\nimport {UI} from \"./UIBase\";\n\nexport function enqueueIfNotLoaded(target, key, descriptor) {\n    const method = descriptor.value;\n    return Object.assign({}, descriptor, {\n        value: function() {\n            if (this.isLoaded()) {\n                return method.call(this, ...arguments);\n            } else {\n                this.enqueueMethodCall(method, arguments);\n                return null;\n            }\n        }\n    });\n}\n\nconst EnqueuedMethodsClass = (BaseClass) => class AsyncClass extends BaseClass {\n    isLoaded() {\n        throw Error(\"Not implemented!\");\n    }\n\n    enqueueMethodCall(method, args) {\n        this.methodCallQueue = this.methodCallQueue || [];\n        this.methodCallQueue.push([method, args]);\n    }\n\n    resolveQueuedMethods() {\n        if (!this.isLoaded()) {\n            throw Error(\"Cannot process scheduled jobs, element not loaded\");\n        }\n        for (let methodCall of this.methodCallQueue || []) {\n            methodCall[0].call(this, ...methodCall[1]);\n        }\n        delete this.methodCallQueue;\n    }\n};\n\nclass CodeEditor extends EnqueuedMethodsClass(UI.Element) {\n    static requireAce(callback) {\n        throw Error(\"You need to implement requireAce\");\n    }\n\n    isLoaded() {\n        return !!this.getAce();\n    }\n\n    setOptions(options) {\n        let defaultOptions = {\n            aceMode: \"text\",\n            readOnly: false,\n            aceTheme: \"dawn\",\n            aceKeyboardHandler: \"ace\",\n            fontSize: 14,\n            tabSize: 4,\n            showLineNumber: true,\n            showPrintMargin: false,\n            printMarginSize: 80,\n        };\n        options = Object.assign(defaultOptions, options);\n\n        super.setOptions(options);\n\n        if (this.options.aceMode) {\n            this.options.aceMode = this.options.aceMode.toLowerCase();\n        }\n\n        if (this.options.aceMode === \"cpp\" || this.options.aceMode === \"c\") {\n            this.options.aceMode = \"c_cpp\";\n        }\n\n        if (this.getAce()) {\n            this.applyAceOptions();\n        }\n    }\n\n    redraw() {\n        if (this.getAce()) {\n            this.aceResize();\n            this.applyRef();\n            return;\n        }\n        super.redraw();\n    }\n\n    whenLoaded(callback) {\n        if (this.isLoaded()) {\n            callback();\n        } else {\n            this.addListenerOnce(\"aceReady\", callback);\n        }\n    }\n\n    onMount() {\n        // Sometimes when the parent div resizes the ace editor doesn't fully update.\n        this.addListener(\"resize\", () => {\n            this.aceResize();\n        });\n\n        this.addListener(\"change\", () => {\n            this.aceResize();\n        });\n\n        if (!window.ace) {\n            this.constructor.requireAce(() => {\n                this.onDelayedMount();\n            });\n            return;\n        }\n        this.onDelayedMount();\n    }\n\n    onDelayedMount() {\n        this.ace = window.ace.edit(this.node);\n\n        // Removes some warnings\n        this.getAce().$blockScrolling = Infinity;\n\n        this.resolveQueuedMethods();\n\n        this.applyAceOptions();\n\n        //#voodoo was here to automatically redraw when unhiding\n        //This Ace event listener might be useful in the future\n        this.getAce().renderer.$textLayer.addEventListener(\"changeCharacterSize\", (event) => {\n            this.aceResize();\n        });\n        this.dispatch(\"aceReady\");\n    }\n\n    getAce() {\n        return this.ace;\n    }\n\n    getValue() {\n        return this.getAce().getValue();\n    }\n\n    @enqueueIfNotLoaded\n    applyAceOptions() {\n        //set the language mode\n        this.setAceMode(this.options.aceMode);\n        this.setAceKeyboardHandler(this.options.aceKeyboardHandler);\n        this.setAceTheme(this.options.aceTheme);\n        this.setAceFontSize(this.options.fontSize);\n        this.setAceTabSize(this.options.tabSize);\n        this.setAceLineNumberVisible(this.options.showLineNumber);\n        this.setAcePrintMarginVisible(this.options.showPrintMargin);\n        this.setAcePrintMarginSize(this.options.printMarginSize);\n        this.setReadOnly(this.options.readOnly);\n        this.setUseWrapMode(this.options.lineWrapping || false);\n\n        if (this.options.numLines) {\n            this.options.maxLines = this.options.minLines = this.options.numLines;\n        }\n\n        if (this.options.maxLines) {\n            this.setAceOptions({\n                maxLines: this.options.maxLines\n            });\n        }\n\n        if (this.options.minLines) {\n            this.setAceOptions({\n                minLines: this.options.minLines\n            });\n        }\n\n        if (this.options.value) {\n            this.setValue(this.options.value, -1);\n        }\n        if (this.options.hasOwnProperty(\"enableBasicAutocompletion\") ||\n            this.options.hasOwnProperty(\"enableLiveAutocompletion\")) {\n            let langTools =\"/static/js/ext/ace/ext-language_tools.js\";\n            require([langTools], () => {\n                this.setBasicAutocompletion(this.options.enableBasicAutocompletion);\n                this.setLiveAutocompletion(this.options.enableLiveAutocompletion);\n                this.setSnippets(this.options.enableSnippets);\n            });\n        }\n    }\n\n    @enqueueIfNotLoaded\n    aceResize() {\n        this.getAce().resize();\n    }\n\n    @enqueueIfNotLoaded\n    setValue(sourceCode, fakeUserChange) {\n        // We need to wrap the ace call in these flags so any event listeners can know if this change\n        // was done by us or by the user\n        this.apiChange = !fakeUserChange;\n        this.getAce().setValue(sourceCode, -1);\n        this.apiChange = false;\n    }\n\n    @enqueueIfNotLoaded\n    setAceOptions(options) {\n        this.getAce().setOptions(options);\n    }\n\n    // TODO: should this be setEditable?\n    @enqueueIfNotLoaded\n    setReadOnly(value) {\n        this.getAce().setReadOnly(value);\n    };\n\n    @enqueueIfNotLoaded\n    setAceMode(aceMode) {\n        if (aceMode.hasOwnProperty(\"aceMode\")) {\n            aceMode = aceMode.aceMode;\n        }\n        this.getAce().getSession().setMode(\"ace/mode/\" + aceMode);\n    }\n\n    getAceKeyboardHandler() {\n        return this.getAce().$keybindingId;\n    }\n\n    @enqueueIfNotLoaded\n    setAceKeyboardHandler(keyboardHandler) {\n        if (keyboardHandler.hasOwnProperty(\"aceName\")) {\n            keyboardHandler = keyboardHandler.aceName;\n        }\n        this.getAce().setKeyboardHandler(\"ace/keyboard/\" + keyboardHandler);\n    }\n\n    getAceMode() {\n        return this.getAce().getSession().getMode();\n    }\n\n    @enqueueIfNotLoaded\n    setAceTheme(theme) {\n        if (theme.hasOwnProperty(\"aceName\")) {\n            theme = theme.aceName;\n        }\n        this.getAce().setTheme(\"ace/theme/\" + theme);\n    }\n\n    getAceTheme() {\n        return this.getAce().getTheme();\n    }\n\n    @enqueueIfNotLoaded\n    setAceFontSize(fontSize) {\n        this.getAce().setOptions({\n            fontSize: fontSize + \"px\"\n        });\n    }\n\n    getAceFontSize() {\n        return this.getAce().getFontSize();\n    }\n\n    @enqueueIfNotLoaded\n    setAceTabSize(tabSize) {\n        this.getAce().setOptions({\n            tabSize: tabSize\n        });\n    }\n\n    getAceTabSize() {\n        return this.getAce().getOption(\"tabSize\");\n    }\n\n    @enqueueIfNotLoaded\n    setAceLineNumberVisible(value) {\n        this.getAce().renderer.setShowGutter(value);\n    }\n\n    getAceLineNumberVisible() {\n        return this.getAce().renderer.getShowGutter();\n    }\n\n    @enqueueIfNotLoaded\n    setAcePrintMarginVisible(value) {\n        this.getAce().setShowPrintMargin(value);\n    }\n\n    getAcePrintMarginVisible() {\n        return this.getAce().getShowPrintMargin();\n    }\n\n    @enqueueIfNotLoaded\n    setAcePrintMarginSize(printMarginSize) {\n        this.getAce().setPrintMarginColumn(printMarginSize);\n    }\n\n    getAcePrintMarginSize() {\n        return this.getAce().getPrintMarginColumn();\n    }\n\n    @enqueueIfNotLoaded\n    setBasicAutocompletion(value) {\n        this.getAce().setOptions({\n            enableBasicAutocompletion: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setLiveAutocompletion(value) {\n        this.getAce().setOptions({\n            enableLiveAutocompletion: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setSnippets(value) {\n        this.getAce().setOptions({\n            enableSnippets: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setAnnotations(annotations) {\n        this.getAce().getSession().setAnnotations(annotations);\n    }\n\n    @enqueueIfNotLoaded\n    setUseWrapMode(value) {\n        this.getAce().getSession().setUseWrapMode(value);\n    }\n\n    @enqueueIfNotLoaded\n    setIndentedSoftWrap(value) {\n        this.getAce().setOption(\"indentedSoftWrap\", value);\n    }\n\n    @enqueueIfNotLoaded\n    blockScroll() {\n        this.getAce().$blockScrolling = Infinity;\n    }\n\n    @enqueueIfNotLoaded\n    setFoldStyle(foldStyle) {\n        this.getAce().getSession().setFoldStyle(foldStyle);\n    }\n\n    @enqueueIfNotLoaded\n    setHighlightActiveLine(value) {\n        this.getAce().setHighlightActiveLine(value);\n    }\n\n    @enqueueIfNotLoaded\n    setHighlightGutterLine(value) {\n        this.getAce().setHighlightGutterLine(value);\n    }\n\n    @enqueueIfNotLoaded\n    setShowGutter(value) {\n        this.getAce().renderer.setShowGutter(value);\n    }\n\n    getScrollTop() {\n        return this.getAce().getSession().getScrollTop();\n    }\n\n    @enqueueIfNotLoaded\n    setScrollTop(value) {\n        this.getAce().getSession().setScrollTop(value);\n    }\n\n    @enqueueIfNotLoaded\n    addMarker(startLine, startCol, endLine, endCol, ...args) {\n        const Range = this.constructor.AceRange;\n        return this.getAce().getSession().addMarker(new Range(startLine, startCol, endLine, endCol), ...args);\n    }\n\n    @enqueueIfNotLoaded\n    removeMarker(marker) {\n        this.getAce().getSession().removeMarker(marker);\n    }\n\n    getRendererLineHeight() {\n        return this.getAce().renderer.lineHeight;\n    }\n\n    getTextRange(startLine, startCol, endLine, endCol) {\n        const Range = this.constructor.AceRange;\n        return this.getAce().getSession().doc.getTextRange(new Range(startLine, startCol, endLine, endCol));\n    }\n\n    @enqueueIfNotLoaded\n    setTextRange(startLine, startCol, endLine, endCol, text) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().replace(new Range(startLine, startCol, endLine, endCol), text);\n    }\n\n    @enqueueIfNotLoaded\n    removeLine(line) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().getDocument().remove(new Range(line, 0, line + 1, 0));\n    }\n\n    @enqueueIfNotLoaded\n    insertAtLine(line, str) {\n        let column = this.getAce().session.getLine(line - 1).length;\n        this.getAce().gotoLine(line, column);\n        this.insert(str);\n    }\n\n    @enqueueIfNotLoaded\n    replaceLine(line, str) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().getDocument().replace(new Range(line, 0, line + 1, 0), str);\n    }\n\n    @enqueueIfNotLoaded\n    addAceSessionEventListener(event, callback) {\n        this.getAce().getSession().addEventListener(event, callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceSessionChangeListener(callback) {\n        this.addAceSessionEventListener(\"change\", callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceChangeListener(callback) {\n        this.getAce().on(\"change\", callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceEventListener() {\n        this.getAce().addEventListener(...arguments);\n    }\n\n    @enqueueIfNotLoaded\n    focus() {\n        this.getAce().focus();\n    }\n\n    @enqueueIfNotLoaded\n    gotoEnd() {\n        let editor = this.getAce();\n        let editorRow = editor.session.getLength() - 1;\n        let editorColumn = editor.session.getLine(editorRow).length;\n        editor.gotoLine(editorRow + 1, editorColumn);\n    }\n\n    @enqueueIfNotLoaded\n    setUndoManager(undoManager) {\n        this.getAce().getSession().setUndoManager(undoManager);\n    }\n\n    @enqueueIfNotLoaded\n    setAceRendererOption(key, value) {\n        this.getAce().renderer.setOption(key, value);\n    }\n\n    // Inserts the text at the current cursor position\n    @enqueueIfNotLoaded\n    insert(text) {\n        this.getAce().insert(text);\n    }\n\n    // Appends the text at the end of the document\n    @enqueueIfNotLoaded\n    append(text) {\n        var lastRow = this.getAce().getSession().getLength() - 1;\n        if (lastRow < 0) {\n            lastRow = 0;\n        }\n        var lastRowLength = this.getAce().getSession().getLine(lastRow).length;\n        var scrolledToBottom = this.getAce().isRowFullyVisible(lastRow);\n        // console.log(\"Scroll to bottom \", scrolledToBottom);\n        this.getAce().getSession().insert({\n            row: lastRow,\n            column: lastRowLength\n        }, text);\n\n        this.aceResize();\n\n        if (scrolledToBottom) {\n            // TODO: Include scroll lock option!\n            // TODO: See if scrolling to bottom can be done better\n            // TODO: for some reason the scroll bar height is not being updated, this needs to be fixed\n            this.getAce().scrollToLine(this.getAce().getSession().getLength() - 1, true, true, function () {});\n        }\n    }\n}\n\nclass StaticCodeHighlighter extends CodeEditor {\n    setOptions(options) {\n        options = Object.assign({\n            fontSize: 13,\n            readOnly: true,\n            lineWrapping: true,\n        }, options);\n        super.setOptions(options);\n    }\n}\n\nexport {CodeEditor, StaticCodeHighlighter};\n","import {UI, StyleSheet, styleRule, registerStyle} from \"UI\";\nimport {FAIcon} from \"FontAwesome\";\n\nclass TodoStyle extends StyleSheet {\n    @styleRule\n    todo = {\n        listStyle: \"decimal\",\n        \":hover\": {\n            backgroundColor: \"#eee\",\n        },\n    };\n\n    @styleRule\n    uncheckedTodo = {\n\n    };\n\n    @styleRule\n    checkedTodo = {\n        textDecoration: \"line-through\",\n    };\n}\n\n@registerStyle(TodoStyle)\nclass Todo extends UI.Primitive(\"li\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.todo);\n    }\n\n    render() {\n        const {message, checked} = this.options;\n        let divClassName = this.styleSheet.uncheckedTodo;\n        if (checked) {\n            divClassName = this.styleSheet.checkedTodo;\n        }\n        \n        return <div className={divClassName}>\n            {\n                checked ? <FAIcon icon=\"check-circle-o\" /> : null\n            }\n            {message}\n        </div>;\n    }\n\n    toggleTodo() {\n        this.updateOptions({\n            checked: !this.options.checked,\n        });\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            this.toggleTodo();\n        });\n    }\n}\n\nclass TodoList extends UI.Primitive(\"ul\") {\n    render() {\n        const todoItems = [\n            {\n                message: \"test 1\",\n                checked: false,\n            },\n            {\n                message: \"test 2\",\n                checked: false,\n            },\n            {\n                message: \"test 3\",\n                checked: true,\n            },\n            {\n                message: \"test 4\",\n                checked: false,\n            },\n        ];\n        let todos = [];\n\n        for (let index = 0; index < todoItems.length; index += 1) {\n            todos.push(\n                <Todo message={todoItems[index].message} checked={todoItems[index].checked} />,\n            );\n        }\n\n        return todos;\n    }\n}\n\nexport class IndexPage extends UI.Element {\n    render() {\n        return <TodoList />;\n    }\n}\n","import {Dispatchable} from \"../base/Dispatcher\";\n\nclass State extends Dispatchable {\n    constructor() {\n        super();\n        this.stores = new Map();\n        // A version of applyEvent that's binded to this\n        // TODO: applyEvent should use the @bind decorator\n        this.applyEventWrapper = (event) => {\n            this.applyEvent(event);\n        }\n    }\n\n    getStore(objectType) {\n        objectType = objectType && objectType.toLowerCase();\n        return this.stores.get(objectType);\n    }\n\n    getStoreForEvent(event) {\n        const objectType = event.objectType || event.store;\n        return this.getStore(objectType);\n    }\n\n    addStore(store) {\n        let objectType = store.objectType.toLowerCase();\n        if (!this.stores.has(objectType)) {\n            this.stores.set(objectType, store);\n        } else {\n            throw Error(\"GlobalState: Adding a store for an existing object type: \" + store.objectType);\n        }\n    }\n\n    applyEvent(event) {\n        if (Array.isArray(event)) {\n            for (let individualEvent of event) {\n                this.applyEvent(individualEvent);\n            }\n            return;\n        }\n        if (event.state) {\n            this.importState(event.state);\n            // We can have events that only have a state\n            if (!this.getStoreForEvent(event)) {\n                return;\n            }\n        }\n        let store = this.getStoreForEvent(event);\n        if (store) {\n            return store.applyEvent(event);\n        } else {\n            console.log(\"GlobalState: Missing store for event: \", event);\n        }\n    }\n\n    get(objectType, objectId) {\n        let store = this.getStore(objectType);\n        if (store) {\n            let args = Array.prototype.slice.call(arguments, 1);\n            return store.get(...args);\n        } else {\n            console.error(\"GlobalState: Can't find store \", objectType);\n            return null;\n        }\n    }\n\n    // Import the store for objectType and remove it from stateMap\n    importStateFromTempMap(objectType, stateMap) {\n        let storeState = stateMap.get(objectType);\n        stateMap.delete(objectType);\n\n        let store = this.getStore(objectType);\n\n        if (!store) {\n            console.error(\"Failed to import state, can't find store \", objectType);\n            return;\n        }\n        for (let dependency of store.getDependencies()) {\n            this.importStateFromTempMap(dependency.toLowerCase(), stateMap);\n        }\n        store.importState(storeState);\n    }\n\n    // Imports the state information from a plain object\n    importState(state) {\n        if (Array.isArray(state)) {\n            for (let obj of state) {\n                this.importState(obj);\n            }\n            return;\n        }\n        // Import everything in a map and then do an implicit topological sort by dependencies\n        let stateMap = new Map();\n        for (let objectType in state) {\n            stateMap.set(objectType.toLowerCase(), state[objectType]);\n        }\n        while (stateMap.size > 0) {\n            let allKeys = stateMap.keys();\n            let objectType = allKeys.next().value;\n            this.importStateFromTempMap(objectType, stateMap);\n        }\n    }\n}\n\nlet GlobalState = new State();\n\n// When creating a store without an explicit state, this value should be assumes\n// Change it to null for instance of you don't want stores to be added to any state by default\nlet DefaultState = GlobalState;\n\nself.GlobalState = GlobalState;\n\nexport {State, GlobalState, DefaultState};\n","import {Dispatchable, CleanupJobs} from \"../base/Dispatcher\";\nimport {DefaultState} from \"./State\";\n\n// The store information is kept in a symbol, to not interfere with serialization/deserialization\nexport const StoreSymbol = Symbol(\"Store\");\n\nclass StoreObject extends Dispatchable {\n    constructor(obj, event, store) {\n        super();\n        Object.assign(this, obj);\n        this.setStore(store);\n    };\n\n    static getStoreName() {\n        return this.name;\n    }\n\n    setStore(store) {\n        this[StoreSymbol] = store;\n    }\n\n    getStore() {\n        return this[StoreSymbol];\n    }\n\n    // By default, applying an event just shallow copies the fields from event.data\n    applyEvent(event) {\n        Object.assign(this, event.data);\n    };\n\n    // Add a listener for all updates, callback will receive the events after they were applied\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n\n    addDeleteListener(callback) {\n        return this.addListener(\"delete\", callback);\n    }\n\n    // Add a listener on updates from events with this specific type.\n    // Can accept an array as eventType\n    // Returns an object that implements the Cleanup interface.\n    addEventListener(eventType, callback) {\n        if (Array.isArray(eventType)) {\n            const handlers = eventType.map(e => this.addEventListener(e, callback));\n            return new CleanupJobs(handlers);\n        }\n        // Ensure the private event dispatcher exists\n        if (!this._eventDispatcher) {\n            this._eventDispatcher = new Dispatchable();\n            this.addUpdateListener((event) => {\n                this._eventDispatcher.dispatch(event.type, event, this);\n            });\n        }\n        return this._eventDispatcher.addListener(eventType, callback);\n    }\n\n    getStreamName() {\n        throw \"getStreamName not implemented\";\n    }\n\n    registerToStream() {\n        this.getStore().getState().registerStream(this.getStreamName());\n    }\n}\n\nclass BaseStore extends Dispatchable {\n    constructor(objectType, ObjectWrapper=StoreObject, options={}) {\n        super();\n        this.options = options;\n        this.objectType = objectType.toLowerCase();\n        this.ObjectWrapper = ObjectWrapper;\n        this.attachToState();\n    }\n\n    attachToState() {\n        if (this.getState()) {\n            this.getState().addStore(this);\n        }\n    }\n\n    getState() {\n        // Allow explicit no state\n        if (this.options.hasOwnProperty(\"state\")) {\n            return this.options.state;\n        } else {\n            return DefaultState;\n        }\n    }\n\n    // Is used by the state object to see which stores need to be loaded first\n    getDependencies() {\n        return this.options.dependencies || [];\n    }\n}\n\n// Store type primarily intended to store objects that come from a server DB, and have a unique numeric .id field\nclass GenericObjectStore extends BaseStore {\n    constructor(objectType, ObjectWrapper=StoreObject, options={}) {\n        super(...arguments);\n        this.objects = new Map();\n    }\n\n    has(id) {\n        return !!this.get(id);\n    }\n\n    get(id) {\n        if (id == null) {\n            return null;\n        }\n        return this.objects.get(parseInt(id));\n    }\n\n    getObjectIdForEvent(event) {\n        return event.objectId || event.data.id;\n    }\n\n    getObjectForEvent(event) {\n        let objectId = this.getObjectIdForEvent(event);\n        return this.get(objectId);\n    }\n\n    // TODO: should this default to iterable?\n    all(asIterable) {\n        let values = this.objects.values();\n        if (!asIterable) {\n            values = Array.from(values);\n        }\n        return values;\n    }\n\n    createObject(event) {\n        const obj = new this.ObjectWrapper(event.data, event, this);\n        obj.setStore(this);\n        return obj;\n    }\n\n    applyCreateEvent(event, sendDispatch=true) {\n        let existingObject = this.getObjectForEvent(event);\n\n        if (existingObject) {\n            let refreshEvent = Object.assign({}, event);\n            refreshEvent.type = \"refresh\";\n            existingObject.applyEvent(refreshEvent);\n            existingObject.dispatch(\"update\", event);\n            return existingObject;\n        } else {\n            let newObject = this.createObject(event);\n            this.objects.set(this.getObjectIdForEvent(event), newObject);\n\n            if (sendDispatch) {\n                this.dispatch(\"create\", newObject, event);\n            }\n            return newObject;\n        }\n    }\n\n    applyUpdateOrCreateEvent(event) {\n        var obj = this.getObjectForEvent(event);\n        if (!obj) {\n            obj = this.applyCreateEvent(event, false);\n            this.dispatch(\"create\", obj, event);\n        } else {\n            this.applyEventToObject(obj, event);\n        }\n        this.dispatch(\"updateOrCreate\", obj, event);\n        return obj;\n    }\n\n    applyDeleteEvent(event) {\n        let objDeleted = this.getObjectForEvent(event);\n        if (objDeleted) {\n            this.objects.delete(this.getObjectIdForEvent(event));\n            objDeleted.dispatch(\"delete\", event, objDeleted);\n            this.dispatch(\"delete\", objDeleted, event);\n        }\n        return objDeleted;\n    }\n\n    applyEventToObject(obj, event) {\n        obj.applyEvent(event);\n        obj.dispatch(\"update\", event);\n        this.dispatch(\"update\", obj, event);\n        return obj;\n    }\n\n    applyEvent(event) {\n        event.data = event.data || {};\n\n        if (event.type === \"create\") {\n            return this.applyCreateEvent(event);\n        } else if (event.type === \"delete\") {\n            return this.applyDeleteEvent(event);\n        } else if (event.type === \"updateOrCreate\") {\n            return this.applyUpdateOrCreateEvent(event);\n        } else {\n            var obj = this.getObjectForEvent(event);\n            if (!obj) {\n                console.error(\"I don't have object of type \", this.objectType, \" \", event.objectId);\n                return;\n            }\n            return this.applyEventToObject(obj, event);\n        }\n    }\n\n    importState(objects) {\n        objects = objects || [];\n        for (let obj of objects) {\n            this.fakeCreate(obj);\n        }\n    }\n\n    // Create a fake creation event, to insert the raw object\n    fakeCreate(obj, eventType=\"fakeCreate\") {\n        if (!obj) {\n            return;\n        }\n        var event = {\n            objectType: this.objectType,\n            objectId: obj.id,\n            type: eventType,\n            data: obj,\n        };\n        return this.applyCreateEvent(event);\n    }\n\n    // Add a listener on all object creation events\n    // If fakeExisting, will also pass existing objects to your callback\n    addCreateListener(callback, fakeExisting) {\n        if (fakeExisting) {\n            for (let object of this.objects.values()) {\n                let event = {\n                    objectType: this.objectType,\n                    objectId: object.id,\n                    type: \"fakeCreate\",\n                    data: object,\n                };\n                callback(object, event);\n            }\n        }\n\n        return this.addListener(\"create\", callback);\n    }\n\n    // Add a listener for any updates to objects in store\n    // The callback will receive the object and the event\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n\n    // Add a listener for any object deletions\n    addDeleteListener(callback) {\n        return this.addListener(\"delete\", callback);\n    }\n}\n\nclass SingletonStore extends BaseStore {\n    constructor(objectType, options={}) {\n        super(objectType, SingletonStore, options);\n    }\n\n    get() {\n        return this;\n    }\n\n    all() {\n        return [this];\n    }\n\n    applyEvent(event) {\n        Object.assign(this, event.data);\n        this.dispatch(\"update\", event, this);\n    }\n\n    importState(obj) {\n        Object.assign(this, obj);\n        this.dispatch(\"update\", event, this);\n    }\n\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n}\n\n// Use the same logic as StoreObject when listening to events\nSingletonStore.prototype.addEventListener = StoreObject.prototype.addEventListener;\n\nexport {StoreObject, BaseStore, GenericObjectStore, SingletonStore};\n","// TODO: this file should be called StoreExtenders\nimport {unwrapArray, splitInChunks} from \"../base/Utils\";\nimport {Ajax} from \"../base/Ajax\";\nimport {GlobalState} from \"./State\";\n\nconst AjaxFetchMixin = (BaseStoreClass) => class AjaxFetchMixin extends BaseStoreClass {\n    fetch(id, successCallback, errorCallback, forceFetch=false) {\n        if (!forceFetch) {\n            let obj = this.get(id);\n            if (obj) {\n                successCallback(obj);\n                return;\n            }\n        }\n        if (!this.fetchJobs) {\n            this.fetchJobs = [];\n        }\n        this.fetchJobs.push({id: id, success: successCallback, error: errorCallback});\n        if (!this.fetchTimeout) {\n            this.fetchTimeout = setTimeout(() => {\n                this.executeAjaxFetch();\n            }, this.options.fetchTimeoutDuration || 0);\n        }\n    };\n\n    getFetchRequestData(ids, fetchJobs) {\n        return {\n            ids: ids,\n        };\n    }\n\n    getFetchRequestObject(ids, fetchJobs) {\n        let requestData = this.getFetchRequestData(ids, fetchJobs);\n\n        // TODO: options.fetchURL should also support a function(ids, fetchJobs), do it when needed\n        return {\n            url: this.options.fetchURL,\n            type: this.options.fetchType || \"GET\",\n            dataType: \"json\",\n            data: requestData,\n            cache: false,\n            success: (data) => {\n                GlobalState.importState(data.state || {});\n                for (let fetchJob of fetchJobs) {\n                    let obj = this.get(fetchJob.id);\n                    if (obj) {\n                        fetchJob.success(obj);\n                    } else {\n                        console.error(\"Failed to fetch object \", fetchJob.id, \" of type \", this.objectType);\n                        if (fetchJob.error) {\n                            fetchJob.error();\n                        }\n                    }\n                }\n            },\n            error: (error) => {\n                console.error(\"Failed to fetch objects of type \", this.objectType, \":\\n\", error);\n                for (let fetchJob of fetchJobs) {\n                    if (fetchJob.error) {\n                        fetchJob.error(error);\n                    }\n                }\n            }\n        }\n    }\n\n    //returns an array of ajax requests that have to be executed\n    getFetchRequests(fetchJobs) {\n        let idFetchJobs = new Map();\n\n        for (let fetchJob of fetchJobs) {\n            let objectId = fetchJob.id;\n            if (!idFetchJobs.has(objectId)) {\n                idFetchJobs.set(objectId, new Array());\n            }\n            idFetchJobs.get(objectId).push(fetchJob);\n        }\n\n        let maxChunkSize = this.options.maxFetchObjectCount || 256;\n\n        let idChunks = splitInChunks(Array.from(idFetchJobs.keys()), maxChunkSize);\n        let fetchJobsChunks = splitInChunks(Array.from(idFetchJobs.values()), maxChunkSize);\n\n        let requests = [];\n        for (let i = 0; i < idChunks.length; i += 1) {\n            requests.push(this.getFetchRequestObject(idChunks[i], unwrapArray(fetchJobsChunks[i])))\n        }\n\n        return requests;\n    }\n\n    executeAjaxFetch() {\n        let fetchJobs = this.fetchJobs;\n        this.fetchJobs = null;\n\n        let requests = this.getFetchRequests(fetchJobs);\n\n        for (let requestObject of requests) {\n            Ajax.fetch(requestObject);\n        }\n\n        clearTimeout(this.fetchTimeout);\n        this.fetchTimeout = null;\n    };\n\n};\n\nconst VirtualStoreObjectMixin = (BaseStoreObjectClass) => class VirtualStoreObjectMixin extends BaseStoreObjectClass {\n    hasTemporaryId() {\n        return (typeof this.id === \"string\" || this.id instanceof String) && this.id.startsWith(\"temp-\");\n    }\n\n    // Meant for updating temporary objects that need to exist before being properly created\n    updateId(newId) {\n            if (this.id == newId) {\n                return;\n            }\n            let oldId = this.id;\n            if (!this.hasTemporaryId()) {\n                console.error(\"This is only meant to replace temporary ids!\");\n            }\n            this.id = newId;\n            this.dispatch(\"updateId\", {oldId: oldId});\n        }\n};\n\n// TODO: there's still a bug in this class when not properly matching virtual obj sometimes I think\nconst VirtualStoreMixin = (BaseStoreClass) => class VirtualStoreMixin extends BaseStoreClass {\n    static generateVirtualId() {\n        if (!this.virtualIdCounter) {\n            this.virtualIdCounter = 0;\n        }\n        this.virtualIdCounter += 1;\n        return this.virtualIdCounter;\n    }\n\n    generateVirtualId() {\n        return this.constructor.generateVirtualId();\n    }\n\n    // TODO: we probably shouldn't have getVirtualObject take in an event\n    getVirtualObject(event) {\n        return this.objects.get(\"temp-\" + event.virtualId);\n    }\n\n    get(id) {\n        return this.objects.get(id);\n    }\n\n    applyUpdateObjectId(object, id) {\n        if (object.id === id) {\n            return;\n        }\n        let oldId = object.id;\n        object.updateId(id);\n        this.objects.delete(oldId);\n        this.objects.set(object.id, object);\n        this.dispatch(\"updateObjectId\", object, oldId);\n    }\n\n    applyCreateEvent(event, sendDispatch=true) {\n        if (event.virtualId) {\n            let existingVirtualObject = this.getVirtualObject(event);\n            if (existingVirtualObject) {\n                this.applyUpdateObjectId(existingVirtualObject, event.objectId);\n            }\n        }\n\n        return super.applyCreateEvent(...arguments);\n    }\n};\n\nexport {AjaxFetchMixin, VirtualStoreMixin, VirtualStoreObjectMixin};\n","// A basic store that can be used to keep objects that map to ISO-code backed languages\nimport {StoreObject, GenericObjectStore} from \"Store\";\n\nclass LanguageObject extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.translationMap = new Map();\n    }\n\n    toString() {\n        let name = this.name;\n        if (this.localName && this.localName != this.name) {\n            name += \" (\" + this.localName + \")\";\n        }\n        return name;\n    }\n\n    buildTranslation(callback) {\n        Language.dispatch(\"buildTranslationMap\", this);\n        callback(this.translationMap);\n    }\n}\n\nclass LanguageStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"Language\", LanguageObject);\n    }\n\n    getLanguageForCode(isoCode) {\n        for (let language of this.all()) {\n            if (language.isoCode === isoCode) {\n                return language;\n            }\n        }\n    }\n\n    setLocale(language) {\n        if (this.Locale == language) {\n            return;\n        }\n        this.Locale = language;\n        this.dispatch(\"localeChange\", language);\n    }\n\n    getLocale() {\n        return this.Locale;\n    }\n}\n\nvar Language = new LanguageStoreClass();\n\nexport {Language};\n","import {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {AjaxFetchMixin} from \"StoreMixins\";\nimport {Language} from \"LanguageStore\";\n\nclass Article extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.edits = new Map();\n    }\n\n    canBeEditedByUser(user=USER) {\n        return user.isSuperUser || this.userCreatedId == user.id;\n    }\n\n    addEdit(articleEdit) {\n        this.edits.set(articleEdit.id, articleEdit);\n    }\n\n    getEdits() {\n        return Array.from(this.edits.values());\n    }\n\n    getTranslation(language=Language.Locale) {\n        for (let article of ArticleStore.all()) {\n            if (article.baseArticleId === this.id && article.languageId === language.id) {\n                return article;\n            }\n        }\n        return this;\n    }\n}\n\nclass ArticleEdit extends StoreObject {\n    getArticle() {\n        return ArticleStore.get(this.articleId);\n    }\n}\n\nclass ArticleStoreClass extends AjaxFetchMixin(GenericObjectStore) {\n    getTranslation(id, language=Language.Locale) {\n        let baseArticle = this.get(id);\n        if (baseArticle) {\n            baseArticle = baseArticle.getTranslation(language);\n        }\n        return baseArticle;\n    }\n}\n\nvar ArticleStore = new ArticleStoreClass(\"article\", Article, {\n    fetchURL: \"/fetch_article/\",\n    maxFetchObjectCount: 32,\n});\n\nvar ArticleEditStore = new GenericObjectStore(\"articleedit\", ArticleEdit, {\n    dependencies: [\"article\"],\n});\n\nArticleEditStore.addCreateListener((articleEdit) => {\n    let article = articleEdit.getArticle();\n    article.addEdit(articleEdit);\n});\n\nexport {Article, ArticleStore, ArticleEditStore};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {ArticleStore} from \"ArticleStore\";\n\nclass BlogEntry extends StoreObject {\n    getArticle() {\n        return ArticleStore.get(this.articleId);\n    }\n}\n\nclass BlogEntryStoreClass extends GenericObjectStore {\n    constructor(objectType=\"BlogEntry\", ObjectWrapper=BlogEntry) {\n        super(objectType, ObjectWrapper, {\n            dependencies: [\"Article\"],\n        });\n    }\n\n    getEntryForURL(urlName) {\n        return this.all().find(blogEntry => blogEntry.urlName === urlName);\n    }\n}\n\nvar BlogEntryStore = new BlogEntryStoreClass();\n\nexport {BlogEntryStore};\n","// TODO: this file is in dire need of a rewrite\nexport class StringStream {\n    constructor(string, options) {\n        this.string = string;\n        this.pointer = 0;\n    }\n\n    done() {\n        return this.pointer >= this.string.length;\n    }\n\n    advance(steps=1) {\n        this.pointer += steps;\n    }\n\n    char() {\n        let ch = this.string.charAt(this.pointer);\n        this.pointer += 1;\n        return ch;\n    }\n\n    whitespace(whitespaceChar=/\\s/) {\n        let whitespaceStart = this.pointer;\n\n        while (!this.done() && whitespaceChar.test(this.at(0))) {\n            this.pointer += 1;\n        }\n\n        // Return the actual whitespace in case it is needed\n        return this.string.substring(whitespaceStart, this.pointer);\n    }\n\n    // Gets first encountered non-whitespace substring\n    word(validChars=/\\S/, skipWhitespace=true) {\n        if (skipWhitespace) {\n            this.whitespace();\n        }\n\n        let wordStart = this.pointer;\n        while (!this.done() && validChars.test(this.at(0))) {\n            this.pointer += 1;\n        }\n        return this.string.substring(wordStart, this.pointer);\n    }\n\n    number(skipWhitespace=true) {\n        if (skipWhitespace) {\n            this.whitespace();\n        }\n\n        let nanString = \"NaN\";\n        if (this.startsWith(nanString)) {\n            this.advance(nanString.length);\n            return NaN;\n        }\n\n        let sign = \"+\";\n        if (this.at(0) === \"-\" || this.at(0) === \"+\") {\n            sign = this.char();\n        }\n\n        let infinityString = \"Infinity\";\n        if (this.startsWith(infinityString)) {\n            this.advance(infinityString.length);\n            return sign === \"+\" ? Infinity : -Infinity;\n        }\n\n        let isDigit = (char) => {\n            return (char >= \"0\" || char <= \"9\");\n        };\n\n        if (this.at(0) === \"0\" && (this.at(1) === \"X\" || this.at(1) === \"x\")) {\n            // hexadecimal number\n            this.advance(2);\n\n            let isHexDigit = (char) => {\n                return isDigit(char) || (char >= \"A\" && char <= \"F\") ||(char >= \"a\" && char <= \"f\");\n            };\n\n            let numberStart = this.pointer;\n            while (!this.done() && isHexDigit(this.at(0))) {\n                this.pointer += 1;\n            }\n\n            return parseInt(sign + this.string.substring(numberStart), 16);\n        }\n\n        let numberStart = this.pointer;\n        while (!this.done() && isDigit(this.at(1))) {\n            this.pointer += 1;\n            if (this.peek === \".\") {\n                this.advance(1);\n                while (!this.done() && isDigit(this.at(1))) {\n                    this.pointer += 1;\n                }\n                break;\n            }\n        }\n        return parseFloat(sign + this.string.substring(numberStart, this.pointer));\n    }\n\n    // Gets everything up to delimiter, usually end of line, limited to maxLength\n    line(delimiter=/\\r*\\n/, maxLength=Infinity) {\n        if (delimiter instanceof RegExp) {\n            // Treat regex differently. It will probably be slower.\n            let str = this.string.substring(this.pointer);\n            let delimiterMatch = str.match(delimiter);\n\n            let delimiterIndex, delimiterLength;\n            if (delimiterMatch === null) {\n                // End of string encountered\n                delimiterIndex = str.length;\n                delimiterLength = 0;\n            } else {\n                delimiterIndex = delimiterMatch.index;\n                delimiterLength = delimiterMatch[0].length;\n            }\n\n            if (delimiterIndex >= maxLength) {\n                this.pointer += maxLength;\n                return str.substring(0, maxLength);\n            }\n\n            this.advance(delimiterIndex + delimiterLength);\n            return str.substring(0, delimiterIndex);\n        }\n\n        let delimiterIndex = this.string.indexOf(delimiter, this.pointer);\n\n        if (delimiterIndex === -1) {\n            delimiterIndex = this.string.length;\n        }\n\n        if (delimiterIndex - this.pointer > maxLength) {\n            let result = this.string.substring(this.pointer, this.pointer + maxLength);\n            this.advance(maxLength);\n            return result;\n        }\n\n        let result = this.string.substring(this.pointer, delimiterIndex);\n        this.pointer = delimiterIndex + delimiter.length;\n        return result;\n    }\n\n    // The following methods have no side effects\n\n    // Access char at offset position, relative to current pointer\n    at(index) {\n        return this.string.charAt(this.pointer + index);\n    }\n\n    peek(length=1) {\n        return this.string.substring(this.pointer, this.pointer + length);\n    }\n\n    startsWith(prefix) {\n        if (prefix instanceof RegExp) {\n            // we modify the regex to only check for the beginning of the string\n            prefix = new RegExp(\"^\" + prefix.toString().slice(1, -1));\n            return prefix.test(this.string.substring(this.pointer));\n        }\n        return this.peek(prefix.length) === prefix;\n    }\n\n    // Returns first position of match\n    search(pattern) {\n        let position;\n        if (pattern instanceof RegExp) {\n            position = this.string.substring(this.pointer).search(pattern);\n        } else {\n            position = this.string.indexOf(pattern, this.pointer) - this.pointer;\n        }\n        return position < 0 ? -1 : position;\n    }\n\n    clone() {\n        let newStream = new this.constructor(this.string);\n        newStream.pointer = this.pointer;\n        return newStream;\n    }\n}\n\nfunction kmp(input) {\n    if (input.length === 0) {\n        return [];\n    }\n\n    let prefix = [0];\n    let prefixLength = 0;\n\n    for (let i = 1; i < input.length; i += 1) {\n        while (prefixLength > 0 && input[i] !== input[prefixLength]) {\n            prefixLength = prefix[prefixLength];\n        }\n\n        if (input[i] === input[prefixLength]) {\n            prefixLength += 1;\n        }\n\n        prefix.push(prefixLength);\n    }\n    return prefix;\n}\n\nclass ModifierAutomation {\n    // build automaton from string\n    constructor(options) {\n        this.options = options;\n        this.steps = 0;\n        this.startNode = {\n            value: null,\n            startNode: true,\n        };\n        this.node = this.startNode;\n\n        let lastNode = this.startNode;\n\n        let char = options.pattern.charAt(0);\n        let startPatternNode = {\n            value: char,\n            startNode: true,\n        };\n\n        let patternPrefix = kmp(options.pattern);\n        let patternNode = [startPatternNode];\n\n        if (options.leftWhitespace) {\n            // We don't want to match if the first char is not preceeded by whitespace\n            let whitespaceNode = {\n                value: \" \",\n                whitespaceNode: true,\n            };\n            whitespaceNode.next = (input) => {\n                if (input === char) return startPatternNode;\n                return (/\\s/).test(input) ? whitespaceNode : this.startNode;\n            };\n            lastNode.next = (input) => {\n                return (/\\s/).test(input) ? whitespaceNode : this.startNode;\n            };\n            this.node = whitespaceNode;\n        } else {\n            lastNode.next = (input) => {\n                return input === char ? startPatternNode : this.startNode;\n            }\n        }\n        lastNode = startPatternNode;\n\n        for (let i = 1; i < options.pattern.length; i += 1) {\n            let char = options.pattern[i];\n            let newNode = {\n                value: char,\n            };\n            patternNode.push(newNode);\n\n            let backNode = (patternPrefix[i - 1] === 0) ? this.startNode : patternNode[patternPrefix[i - 1] - 1];\n\n            lastNode.next = (input) => {\n                if (input === char) {\n                    return newNode;\n                }\n\n                return backNode.next(input);\n            };\n            lastNode = newNode;\n        }\n        lastNode.patternLastNode = true;\n\n        if (options.captureContent) {\n            this.capture = [];\n            let captureNode = {\n                value: \"\",\n                captureNode: true,\n            };\n\n            // We treat the first character separately in order to support empty capture\n            let char = options.endPattern.charAt(0);\n            let endCaptureNode = {\n                value: char\n            };\n\n            let endPatternPrefix = kmp(options.endPattern);\n            let endPatternNodes = [endCaptureNode];\n\n            lastNode.next = captureNode.next = (input) => {\n                return input === char ? endCaptureNode : captureNode;\n            };\n\n            lastNode = endCaptureNode;\n            for (let i = 1; i < options.endPattern.length; i += 1) {\n                let char = options.endPattern[i];\n                let newNode = {\n                    value: char,\n                };\n                endPatternNodes.push(newNode);\n\n                let backNode = (endPatternPrefix[i - 1] === 0) ? captureNode : endPatternNodes[endPatternPrefix[i - 1] - 1];\n\n                lastNode.next = (input) => {\n                    if (input === char) {\n                        return newNode;\n                    }\n                    return backNode.next(input);\n                };\n                lastNode = newNode;\n            }\n\n            lastNode.endPatternLastNode = true;\n        }\n\n        lastNode.endNode = true;\n        lastNode.next = (input) => {\n            return this.startNode.next(input);\n        };\n    }\n\n    nextState(input) {\n        this.steps += 1;\n\n        this.node = this.node.next(input);\n\n        if (this.node.startNode) {\n            this.steps = 0;\n            delete this.patternStep;\n            delete this.endPatternStep;\n        }\n\n        if (this.node.patternLastNode) {\n            this.patternStep = this.steps - this.options.pattern.length + 1;\n        }\n        if (this.node.endPatternLastNode) {\n            // TODO(@all): Shouldn't it be this.options.endPattern.length instead of this.options.pattern.length?\n            this.endPatternStep = this.steps - this.options.pattern.length + 1;\n        }\n\n        return this.node;\n    }\n\n    done() {\n        return this.node.endNode;\n    }\n}\n\nclass Modifier {\n    constructor(options) {\n    }\n\n    modify(currentArray, originalString) {\n        let matcher = new ModifierAutomation({\n            pattern: this.pattern,\n            captureContent: this.captureContent, // TODO: some elements should not wrap\n            endPattern: this.endPattern,\n            leftWhitespace: this.leftWhitespace,\n        });\n\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let newArray = [];\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            let char = originalString[i];\n\n            if (i >= currentElement.end) {\n                newArray.push(currentElement);\n\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                matcher.nextState(\"\\\\\" + char); // prevent char from advancing automata\n                continue;\n            }\n\n            matcher.nextState(char);\n\n            if (matcher.done()) {\n                let modifierStart = i - (matcher.steps - matcher.patternStep);\n                let modifierEnd = i - (matcher.steps - matcher.endPatternStep) + this.endPattern.length;\n\n                let modifierCapture = [];\n\n                while (newArray.length > 0 && modifierStart <= newArray[newArray.length - 1].start) {\n                    let element = newArray.pop();\n\n                    modifierCapture.push(element);\n                }\n\n                if (newArray.length > 0 && modifierStart < newArray[newArray.length - 1].end) {\n                    let element = newArray.pop();\n                    newArray.push({\n                        isString: true,\n                        start: element.start,\n                        end: modifierStart,\n                    });\n                    modifierCapture.push({\n                        isString: true,\n                        start: modifierStart,\n                        end: element.end,\n                    });\n                }\n\n                if (currentElement.start < modifierStart) {\n                    newArray.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: modifierStart,\n                    });\n                }\n                modifierCapture.reverse();\n\n                // this is the end of the capture\n                modifierCapture.push({\n                    isString: true,\n                    start: Math.max(currentElement.start, modifierStart),\n                    end: modifierEnd,\n                });\n\n                newArray.push({\n                    content: this.wrap(this.processChildren(modifierCapture, originalString)),\n                    start: modifierStart,\n                    end: modifierEnd,\n                });\n\n                // We split the current element to in two(one will be captured, one replaces the current element\n                currentElement = {\n                    isString: true,\n                    start: modifierEnd,\n                    end: currentElement.end,\n                };\n            }\n        }\n\n        if (currentElement.start < originalString.length) {\n            newArray.push(currentElement);\n        }\n\n        return newArray;\n    }\n\n    processChildren(capture, originalString) {\n        return capture.map((element) => {\n            return this.processChild(element, originalString);\n        });\n    }\n\n    processChild(element, originalString) {\n        if (element.isDummy) {\n            return \"\";\n        } if (element.isString) {\n            return originalString.substring(element.start, element.end);\n        } else {\n            return element.content;\n        }\n    }\n}\n\nfunction InlineModifierMixin(BaseModifierClass) {\n    return class InlineModifier extends BaseModifierClass {\n        constructor(options) {\n            super(options);\n\n            this.captureContent = true;\n        }\n\n        wrap(content) {\n            if (content.length > 0) {\n                content[0] = content[0].substring(content[0].indexOf(this.pattern) + this.pattern.length);\n\n                let lastElement = content.pop();\n                lastElement = lastElement.substring(0, lastElement.lastIndexOf(this.endPattern));\n                content.push(lastElement);\n\n                return {\n                    tag: this.tag,\n                    children: content\n                };\n            }\n        }\n    }\n}\n\nfunction LineStartModifierMixin(BaseModifierClass) {\n    return class LineStartModifier extends BaseModifierClass {\n        constructor(options) {\n            super(options);\n\n            this.groupConsecutive = false;\n        }\n\n        isValidElement(element) {\n            return element.content &&\n                element.content.tag === \"p\" &&\n                element.content.children.length > 0 &&\n                !element.content.children[0].tag && // child is text string\n                element.content.children[0].startsWith(this.pattern);\n        }\n\n        modify(currentArray, originalString) {\n            let newArray = [];\n\n            for (let i = 0; i < currentArray.length; i += 1) {\n                let element = currentArray[i];\n                if (this.isValidElement(element)) {\n                    if (this.groupConsecutive) {\n                        let elements = [];\n\n                        let start, end;\n                        start = currentArray[i].start;\n                        while (i < currentArray.length && this.isValidElement(currentArray[i])) {\n                            elements.push(this.wrapItem(currentArray[i].content.children));\n\n                            i += 1;\n                        }\n                        // we make sure no elements are skipped\n                        i -= 1;\n\n                        end = currentArray[i].end;\n\n                        newArray.push({\n                            start: start,\n                            end: end,\n                            content: this.wrap(elements)\n                        });\n                    } else {\n                        // We use object assign here to keep the start and end properties. (Maybe along with others)\n                        let newElement = Object.assign({}, element, {\n                            content: this.wrap(element.content.children)\n                        });\n                        newArray.push(newElement);\n                    }\n\n                } else {\n                    newArray.push(element);\n                }\n            }\n            return newArray;\n        }\n\n        wrapItem(content) {\n            let firstChild = content[0];\n\n            let patternIndex = firstChild.indexOf(this.pattern);\n            let patternEnd = patternIndex + this.pattern.length;\n\n            content[0] = firstChild.substring(patternEnd);\n\n            return {\n                tag: this.itemTag,\n                children: content,\n            }\n        }\n\n        wrap(content) {\n            return {\n                tag: this.tag,\n                children: content,\n            }\n        }\n    }\n}\n\nfunction RawContentModifierMixin(BaseModifierClass) {\n    return class RawContentModifier extends BaseModifierClass {\n        processChildren(children, originalString) {\n            if (children.length === 0) {\n                return [];\n            }\n\n            return [originalString.substring(children[0].start, children[children.length - 1].end)];\n        }\n    }\n}\n\nexport class BlockCodeModifier extends Modifier {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"```\";\n        this.endPattern = \"\\n```\";\n        this.leftWhitespace = true;\n        this.captureContent = true;\n    }\n\n    processChildren(capture, originalString) {\n        this.codeOptions = null;\n        if (capture.length > 0) {\n            let codeBlock = originalString.substring(capture[0].start, capture[capture.length - 1].end);\n\n            codeBlock = codeBlock.substring(codeBlock.indexOf(this.pattern) + this.pattern.length);\n            codeBlock = codeBlock.substring(0, codeBlock.lastIndexOf(this.endPattern));\n\n            let firstLineEnd = codeBlock.indexOf(\"\\n\") + 1;\n            let firstLine = codeBlock.substring(0, firstLineEnd).trim();\n            codeBlock = codeBlock.substring(firstLineEnd);\n\n            if (firstLine.length > 0) {\n                this.codeOptions = {};\n                let lineStream = new StringStream(firstLine);\n                this.codeOptions.aceMode = lineStream.word();\n\n                Object.assign(this.codeOptions, MarkupParser.parseOptions(lineStream));\n            }\n\n            return codeBlock;\n        }\n        return \"\";\n    }\n\n    getElement(content) {\n        return {\n            tag: this.constructor.tag || \"pre\",\n            children: [content],\n        }\n    }\n\n    wrap(content, options) {\n        let codeHighlighter = this.getElement(content);\n\n        // TODO: this code should not be here\n        let codeOptions = {\n            aceMode: \"c_cpp\",\n            maxLines: 32,\n        };\n\n        if (this.codeOptions) {\n            Object.assign(codeOptions, this.codeOptions);\n            delete this.codeOptions;\n        }\n\n        Object.assign(codeOptions, codeHighlighter);\n        return codeOptions;\n    }\n}\n\nclass HeaderModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"#\";\n    }\n\n    wrap(content) {\n        let firstChild = content[0];\n\n        let hashtagIndex = firstChild.indexOf(\"#\");\n        let hashtagEnd = hashtagIndex + 1;\n        let headerLevel = 1;\n\n        let nextChar = firstChild.charAt(hashtagEnd);\n        if (nextChar >= \"1\" && nextChar <= \"6\") {\n            headerLevel = parseInt(nextChar);\n            hashtagEnd += 1;\n        } else if (nextChar === \"#\") {\n            while (headerLevel < 6 && firstChild.charAt(hashtagEnd) === \"#\") {\n                headerLevel += 1;\n                hashtagEnd += 1;\n            }\n        }\n\n        content[0] = firstChild.substring(hashtagEnd);\n        return {\n            tag: \"h\" + headerLevel,\n            children: content,\n        };\n    }\n}\n\nclass HorizontalRuleModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"---\";\n    }\n\n    wrap(content) {\n        return {\n            tag: \"hr\"\n        };\n    }\n}\n\nclass UnorderedListModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.tag = \"ul\";\n        this.itemTag = \"li\";\n        this.pattern = \"- \";\n        this.groupConsecutive = true;\n    }\n}\n\nclass OrderedListModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.tag = \"ol\";\n        this.itemTag = \"li\";\n        this.pattern = \"1. \";\n        this.groupConsecutive = true;\n    }\n}\n\nclass ParagraphModifier extends Modifier {\n    modify(currentArray, originalString) {\n        let newArray = [];\n        let capturedContent = [];\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let lineStart = 0;\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            if (i >= currentElement.end) {\n                capturedContent.push(currentElement);\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                continue;\n            }\n\n            if (originalString[i] === \"\\n\") {\n                if (currentElement.start < i) {\n                    capturedContent.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: i,\n                    });\n                }\n\n                newArray.push({\n                    content: this.wrap(this.processChildren(capturedContent, originalString)),\n                    start: lineStart,\n                    end: i + 1,\n                });\n                capturedContent = [];\n                lineStart = i + 1;\n\n                if (originalString[i + 1] === \"\\n\") {\n                    let start, end;\n                    start = i;\n\n                    while (i + 1 < originalString.length && originalString[i + 1] === \"\\n\") {\n                        i += 1;\n                    }\n                    end = i + 1;\n\n                    newArray.push({\n                        content: {\n                            tag: \"br\",\n                        },\n                        start: start,\n                        end: end,\n                    });\n\n                    lineStart = i + 1;\n                } else {\n                    // TODO: these dummies break code. Refactor!\n                    // newArray.push({\n                    //     isDummy: true,\n                    //     start: i,\n                    //     end: i + 1,\n                    // });\n                }\n\n                currentElement = {\n                    isString: true,\n                    start: lineStart,\n                    end: currentElement.end,\n                };\n            }\n        }\n\n        if (currentElement.start < originalString.length) {\n            capturedContent.push(currentElement);\n        }\n        if (capturedContent.length > 0) {\n            newArray.push({\n                content: this.wrap(this.processChildren(capturedContent, originalString)),\n                start: lineStart,\n                end: originalString.length,\n            })\n        }\n        return newArray;\n    }\n\n    wrap(capture) {\n        return {\n            tag: \"p\",\n            children: capture,\n        }\n    }\n}\n\nclass StrongModifier extends InlineModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.leftWhitespace = true;\n        this.pattern = \"*\";\n        this.endPattern = \"*\";\n        this.tag = \"strong\";\n    }\n}\n\nclass ItalicModifier extends InlineModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.leftWhitespace = true;\n        this.pattern = \"/\";\n        this.endPattern = \"/\";\n        this.tag = \"em\";\n    }\n}\n\nclass InlineCodeModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"`\";\n        this.endPattern = \"`\";\n        this.tag = \"code\";\n    }\n\n    processChildren(children, originalString) {\n        if (children.length === 0) {\n            return [];\n        }\n\n        return [originalString.substring(children[0].start, children[children.length - 1].end)];\n    }\n}\n\nclass InlineVarModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"$\";\n        this.endPattern = \"$\";\n        this.tag = \"var\";\n    }\n}\n\nclass InlineLatexModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"$$\";\n        this.endPattern = \"$$\";\n        this.tag = \"Latex\";\n    }\n}\n\nclass LinkModifier extends Modifier {\n\n    static isCorrectUrl(str) {\n        if (str.startsWith(\"http://\") || str.startsWith(\"https://\")) {\n            return true;\n        }\n    }\n    static trimProtocol(str) {\n        if (str[4] === 's') {\n            return str.substring(8, str.length);\n        }\n        return str.substring(7, str.length);\n    }\n\n    modify(currentArray, originalString) {\n        let newArray = [];\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let lineStart = 0;\n\n        let checkAndAddUrl = (start, end) => {\n            let substr = originalString.substring(start, end);\n            if (this.constructor.isCorrectUrl(substr)) {\n                if (currentElement.start < start) {\n                    newArray.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: start,\n                    });\n                }\n\n                newArray.push({\n                    isJSX: true,\n                    content: {\n                        tag: \"a\",\n                        href: substr,\n                        children: [this.constructor.trimProtocol(substr)],\n                        target: \"_blank\"\n                    },\n                    start: start,\n                    end: end,\n                });\n\n                currentElement = {\n                    isString: true,\n                    start: end,\n                    end: currentElement.end,\n                };\n            }\n        };\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            if (i >= currentElement.end) {\n                newArray.push(currentElement);\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                continue;\n            }\n\n            if ((/\\s/).test(originalString[i])) {\n                checkAndAddUrl(lineStart, i);\n                lineStart = i + 1;\n            }\n        }\n        if (lineStart < originalString.length) {\n            checkAndAddUrl(lineStart, originalString.length);\n        }\n        if (currentElement.start < originalString.length) {\n            newArray.push(currentElement);\n        }\n        return newArray;\n    }\n}\n\nlet MarkupModifier = Modifier;\n\nexport {MarkupModifier, HeaderModifier, ParagraphModifier, InlineCodeModifier, InlineLatexModifier, StrongModifier, LinkModifier};\n\nclass MarkupParser {\n    constructor(options) {\n        options = options || {};\n\n        this.modifiers = options.modifiers || this.constructor.modifiers;\n        this.uiElements = options.uiElements || new Map();\n    }\n\n    parse(content) {\n        if (!content) return [];\n\n        let result = [];\n\n        let arr = this.parseUIElements(content);\n\n        for (let i = this.modifiers.length - 1; i >= 0; i -= 1) {\n            let modifier = this.modifiers[i];\n\n            arr = modifier.modify(arr, content);\n        }\n\n        for (let el of arr) {\n            if (el.isDummy) {\n                // just skip it\n            } else if (el.isString) {\n                result.push(content.substring(el.start, el.end));\n            } else {\n                result.push(el.content);\n            }\n        }\n        return result;\n    }\n\n    parseUIElements(content) {\n        let stream = new StringStream(content);\n\n        let result = [];\n        let textStart = 0;\n\n        while (!stream.done()) {\n            let char = stream.char();\n\n            if (char === \"<\" && (/[a-zA-Z]/).test(stream.at(0))) {\n                stream.pointer -= 1; //step back to beginning of ui element\n                let elementStart = stream.pointer;\n                let uiElement;\n                try {\n                    uiElement = this.parseUIElement(stream);\n                } catch (e) {\n                    // failed to parse jsx element\n                    continue;\n                }\n\n                if (this.uiElements.has(uiElement.tag)) {\n                    result.push({\n                        isString: true,\n                        start: textStart,\n                        end: elementStart,\n                    });\n\n                    result.push({\n                        content: uiElement,\n                        isJSX: true,\n                        start: elementStart,\n                        end: stream.pointer,\n                    });\n                    textStart = stream.pointer;\n                }\n            }\n        }\n\n        if (textStart < content.length) {\n            result.push({\n                isString: true,\n                start: textStart,\n                end: content.length,\n            });\n        }\n\n        return result;\n    }\n\n    parseUIElement(stream, delimiter=(/\\/?>/)) {\n        // content should be of type <ClassName option1=\"string\" option2={{jsonObject: true}} />\n        // TODO: support nested elements like <ClassName><NestedClass /></ClassName>\n\n        stream.whitespace();\n        if (stream.done()) {\n            return null;\n        }\n\n        if (stream.at(0) !== \"<\") {\n            throw Error(\"Invalid UIElement declaration.\");\n        }\n\n        let result = {};\n\n        stream.char(); // skip the '<'\n\n        result.tag = stream.word();\n        stream.whitespace();\n\n        Object.assign(result, this.parseOptions(stream, delimiter));\n        stream.line(delimiter);\n\n        return result;\n    }\n    \n    parseOptions(stream, optionsEnd) {\n        return this.constructor.parseOptions(stream, optionsEnd);\n    }\n\n    // optionsEnd cannot include whitespace or start with '='\n    static parseOptions(stream, optionsEnd) {\n        let options = {};\n\n        stream.whitespace();\n\n        while (!stream.done()) {\n            // argument name is anything that comes before whitespace or '='\n            stream.whitespace();\n\n            let validOptionName = /[\\w$]/;\n            let optionName;\n            if (validOptionName.test(stream.at(0))) {\n                optionName = stream.word(validOptionName);\n            }\n\n            stream.whitespace();\n\n            if (optionsEnd && stream.search(optionsEnd) === 0) {\n                options[optionName] = true;\n                break;\n            }\n            if (!optionName) {\n                throw Error(\"Invalid option name\");\n            }\n\n            if (stream.peek() === \"=\") {\n                stream.char();\n                stream.whitespace();\n\n                if (stream.done()) {\n                    throw Error(\"No argument given for option: \" + optionName);\n                }\n\n                if (stream.peek() === '\"') {\n                    // We have a string here\n                    let optionString = \"\";\n                    let foundStringEnd = false;\n\n                    stream.char();\n                    while (!stream.done()) {\n                        let char = stream.char();\n                        if (char === '\"') {\n                            foundStringEnd = true;\n                            break;\n                        }\n                        optionString += char;\n                    }\n\n                    if (!foundStringEnd) {\n                        // You did not close that string\n                        throw Error(\"Argument string not closed: \" + optionString);\n                    }\n                    options[optionName] = optionString;\n                } else if (stream.peek() === '{') {\n                    // Once you pop, the fun don't stop\n                    let bracketCount = 0;\n\n                    let validJSON = false;\n                    let jsonString = \"\";\n                    stream.char();\n\n                    while (!stream.done()) {\n                        let char = stream.char();\n                        if (char === '{') {\n                            bracketCount += 1;\n                        } else if (char === '}') {\n                            if (bracketCount > 0) {\n                                bracketCount -= 1;\n                            } else {\n                                // JSON ends here\n                                options[optionName] = jsonString.length > 0 ? this.parseJSON5(jsonString) : undefined;\n                                validJSON = true;\n                                break;\n                            }\n                        }\n                        jsonString += char;\n                    }\n                    if (!validJSON) {\n                        throw Error(\"Invalid JSON argument for option: \" + optionName + \". Input: \" + jsonString);\n                    }\n                } else {\n                    throw Error(\"Invalid argument for option: \" + optionName + \". Need string or JSON.\");\n                }\n            } else {\n                options[optionName] = true;\n            }\n            stream.whitespace();\n        }\n\n        return options;\n    }\n\n    parseTextLine(stream) {\n        let lastModifier = new Map();\n\n        let capturedContent = [];\n\n        // This will always be set to the last closed modifier\n        let capturedEnd = -1;\n\n        let textStart = stream.pointer;\n        let contentStart = stream.pointer;\n\n        while (!stream.done()) {\n            if (stream.startsWith(/\\s+\\r*\\n/)) {\n                // end of line, stop here\n                break;\n            }\n\n            if (stream.at(0) === \"<\") {\n                capturedContent.push({\n                    content: stream.string.substring(contentStart, stream.pointer),\n                    start: contentStart,\n                    end: stream.pointer\n                });\n                let uiElementStart = stream.pointer;\n                let uiElement = this.parseUIElement(stream, (/\\/*>/));\n                capturedContent.push({\n                    content: uiElement,\n                    start: uiElementStart,\n                    end: stream.pointer,\n                });\n                contentStart = stream.pointer;\n                continue;\n            }\n\n            let char = stream.char();\n\n            if (char === \"\\\\\") {\n                // escape next character\n                char += stream.char();\n            }\n        }\n\n        let remainingContent = stream.string.substring(textStart, stream.pointer);\n        if (remainingContent.length > 0) {\n            capturedContent.push(remainingContent);\n        }\n        stream.line(); // delete line endings\n\n        return capturedContent;\n    }\n}\n\nMarkupParser.modifiers = [\n    new BlockCodeModifier(),\n    new HeaderModifier(),\n    new HorizontalRuleModifier(),\n    new UnorderedListModifier(),\n    new OrderedListModifier(),\n    new ParagraphModifier(),\n    new InlineCodeModifier(),\n    new InlineLatexModifier(),\n    new InlineVarModifier(),\n    new StrongModifier(),\n    new ItalicModifier(),\n    new LinkModifier()\n];\n\n// json5.js\n// This file is based directly off of Douglas Crockford's json_parse.js:\n// https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\nMarkupParser.parseJSON5 = (function() {\n    // This is a function that can parse a JSON5 text, producing a JavaScript\n    // data structure. It is a simple, recursive descent parser. It does not use\n    // eval or regular expressions, so it can be used as a model for implementing\n    // a JSON5 parser in other languages.\n\n    // We are defining the function inside of another function to avoid creating\n    // global variables.\n\n    let at,           // The index of the current character\n        lineNumber,   // The current line number\n        columnNumber, // The current column number\n        ch;           // The current character\n    let escapee = {\n        \"'\": \"'\",\n        '\"': '\"',\n        '\\\\': '\\\\',\n        '/': '/',\n        '\\n': '',       // Replace escaped newlines in strings w/ empty string\n        b: '\\b',\n        f: '\\f',\n        n: '\\n',\n        r: '\\r',\n        t: '\\t'\n    };\n    let text;\n\n    let renderChar = (chr) => {\n        return chr === '' ? 'EOF' : \"'\" + chr + \"'\";\n    };\n\n    let error = (m) => {\n        // Call error when something is wrong.\n\n        let error = new SyntaxError();\n        // beginning of message suffix to agree with that provided by Gecko - see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse\n        error.message = m + \" at line \" + lineNumber + \" column \" + columnNumber + \" of the JSON5 data. Still to read: \" + JSON.stringify(text.substring(at - 1, at + 19));\n        error.at = at;\n        // These two property names have been chosen to agree with the ones in Gecko, the only popular\n        // environment which seems to supply this info on JSON.parse\n        error.lineNumber = lineNumber;\n        error.columnNumber = columnNumber;\n        throw error;\n    };\n\n    let next = (c) => {\n        // If a c parameter is provided, verify that it matches the current character.\n\n        if (c && c !== ch) {\n            error(\"Expected \" + renderChar(c) + \" instead of \" + renderChar(ch));\n        }\n\n        // Get the next character. When there are no more characters,\n        // return the empty string.\n\n        ch = text.charAt(at);\n        at++;\n        columnNumber++;\n        if (ch === '\\n' || ch === '\\r' && peek() !== '\\n') {\n            lineNumber++;\n            columnNumber = 0;\n        }\n        return ch;\n    };\n\n    let peek = () => {\n        // Get the next character without consuming it or\n        // assigning it to the ch varaible.\n\n        return text.charAt(at);\n    };\n\n    let identifier = () => {\n        // Parse an identifier. Normally, reserved words are disallowed here, but we\n        // only use this for unquoted object keys, where reserved words are allowed,\n        // so we don't check for those here. References:\n        // - http://es5.github.com/#x7.6\n        // - https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Variables\n        // - http://docstore.mik.ua/orelly/webprog/jscript/ch02_07.htm\n        // TODO Identifiers can have Unicode \"letters\" in them; add support for those.\n        let key = ch;\n\n        // Identifiers must start with a letter, _ or $.\n        if ((ch !== '_' && ch !== '$') &&\n            (ch < 'a' || ch > 'z') &&\n            (ch < 'A' || ch > 'Z')) {\n                error(\"Bad identifier as unquoted key\");\n        }\n\n        // Subsequent characters can contain digits.\n        while (next() && (\n            ch === '_' || ch === '$' ||\n            (ch >= 'a' && ch <= 'z') ||\n            (ch >= 'A' && ch <= 'Z') ||\n            (ch >= '0' && ch <= '9'))) {\n                key += ch;\n        }\n\n        return key;\n    };\n\n    let number = () => {\n        // Parse a number value.\n        var number, sign = '', string = '', base = 10;\n\n        if (ch === '-' || ch === '+') {\n            sign = ch;\n            next(ch);\n        }\n\n        // support for Infinity (could tweak to allow other words):\n        if (ch === 'I') {\n            number = word();\n            if (typeof number !== 'number' || isNaN(number)) {\n                error('Unexpected word for number');\n            }\n            return (sign === '-') ? -number : number;\n        }\n\n        // support for NaN\n        if (ch === 'N') {\n            number = word();\n            if (!isNaN(number)) {\n                error('expected word to be NaN');\n            }\n            // ignore sign as -NaN also is NaN\n            return number;\n        }\n\n        if (ch === '0') {\n            string += ch;\n            next();\n            if (ch === 'x' || ch === 'X') {\n                string += ch;\n                next();\n                base = 16;\n            } else if (ch >= '0' && ch <= '9') {\n                error('Octal literal');\n            }\n        }\n\n        switch (base) {\n            case 10:\n                while (ch >= '0' && ch <= '9') {\n                    string += ch;\n                    next();\n                }\n                if (ch === '.') {\n                    string += '.';\n                    while (next() && ch >= '0' && ch <= '9') {\n                        string += ch;\n                    }\n                }\n                if (ch === 'e' || ch === 'E') {\n                    string += ch;\n                    next();\n                    if (ch === '-' || ch === '+') {\n                        string += ch;\n                        next();\n                    }\n                    while (ch >= '0' && ch <= '9') {\n                        string += ch;\n                        next();\n                    }\n                }\n                break;\n            case 16:\n                while (ch >= '0' && ch <= '9' || ch >= 'A' && ch <= 'F' || ch >= 'a' && ch <= 'f') {\n                    string += ch;\n                    next();\n                }\n                break;\n        }\n\n        if (sign === '-') {\n            number = -string;\n        } else {\n            number = +string;\n        }\n\n        if (!isFinite(number)) {\n            error(\"Bad number\");\n        } else {\n            return number;\n        }\n    };\n\n    let string = () => {\n        // Parse a string value.\n        let hex, i, string = '', uffff;\n        let delim; // double quote or single quote\n\n        // When parsing for string values, we must look for ' or \" and \\ characters.\n\n        if (ch === '\"' || ch === \"'\") {\n            delim = ch;\n            while (next()) {\n                if (ch === delim) {\n                    next();\n                    return string;\n                } else if (ch === '\\\\') {\n                    next();\n                    if (ch === 'u') {\n                        uffff = 0;\n                        for (i = 0; i < 4; i += 1) {\n                            hex = parseInt(next(), 16);\n                            if (!isFinite(hex)) {\n                                break;\n                            }\n                            uffff = uffff * 16 + hex;\n                        }\n                        string += String.fromCharCode(uffff);\n                    } else if (ch === '\\r') {\n                        if (peek() === '\\n') {\n                            next();\n                        }\n                    } else if (typeof escapee[ch] === 'string') {\n                        string += escapee[ch];\n                    } else {\n                        break;\n                    }\n                } else if (ch === '\\n') {\n                    // unescaped newlines are invalid; see:\n                    // https://github.com/aseemk/json5/issues/24\n                    // TODO this feels special-cased; are there other\n                    // invalid unescaped chars?\n                    break;\n                } else {\n                    string += ch;\n                }\n            }\n        }\n        error(\"Bad string\");\n    };\n\n    let inlineComment = () => {\n        // Skip an inline comment, assuming this is one. The current character should\n        // be the second / character in the // pair that begins this inline comment.\n        // To finish the inline comment, we look for a newline or the end of the text.\n\n        if (ch !== '/') {\n            error(\"Not an inline comment\");\n        }\n\n        do {\n            next();\n            if (ch === '\\n' || ch === '\\r') {\n                next();\n                return;\n            }\n        } while (ch);\n    };\n\n    let blockComment = () => {\n        // Skip a block comment, assuming this is one. The current character should be\n        // the * character in the /* pair that begins this block comment.\n        // To finish the block comment, we look for an ending */ pair of characters,\n        // but we also watch for the end of text before the comment is terminated.\n\n        if (ch !== '*') {\n            error(\"Not a block comment\");\n        }\n\n        do {\n            next();\n            while (ch === '*') {\n                next('*');\n                if (ch === '/') {\n                    next('/');\n                    return;\n                }\n            }\n        } while (ch);\n\n        error(\"Unterminated block comment\");\n    };\n\n    let comment = () => {\n        // Skip a comment, whether inline or block-level, assuming this is one.\n        // Comments always begin with a / character.\n\n        if (ch !== '/') {\n            error(\"Not a comment\");\n        }\n\n        next('/');\n\n        if (ch === '/') {\n            inlineComment();\n        } else if (ch === '*') {\n            blockComment();\n        } else {\n            error(\"Unrecognized comment\");\n        }\n    };\n\n    let white = () => {\n        // Skip whitespace and comments.\n        // Note that we're detecting comments by only a single / character.\n        // This works since regular expressions are not valid JSON(5), but this will\n        // break if there are other valid values that begin with a / character!\n\n        while (ch) {\n            if (ch === '/') {\n                comment();\n            } else if (/\\s/.test(ch)) {\n                next();\n            } else {\n                return;\n            }\n        }\n    };\n\n    let word = () => {\n        // true, false, or null.\n\n        switch (ch) {\n            case 't':\n                next('t');\n                next('r');\n                next('u');\n                next('e');\n                return true;\n            case 'f':\n                next('f');\n                next('a');\n                next('l');\n                next('s');\n                next('e');\n                return false;\n            case 'n':\n                next('n');\n                next('u');\n                next('l');\n                next('l');\n                return null;\n            case 'I':\n                next('I');\n                next('n');\n                next('f');\n                next('i');\n                next('n');\n                next('i');\n                next('t');\n                next('y');\n                return Infinity;\n            case 'N':\n                next('N');\n                next('a');\n                next('N');\n                return NaN;\n        }\n        error(\"Unexpected \" + renderChar(ch));\n    };\n\n    let value;\n\n    let array = () => {\n        // Parse an array value.\n        let array = [];\n\n        if (ch === '[') {\n            next('[');\n            white();\n            while (ch) {\n                if (ch === ']') {\n                    next(']');\n                    return array;   // Potentially empty array\n                }\n                // ES5 allows omitting elements in arrays, e.g. [,] and\n                // [,null]. We don't allow this in JSON5.\n                if (ch === ',') {\n                    error(\"Missing array element\");\n                } else {\n                    array.push(value());\n                }\n                white();\n                // If there's no comma after this value, this needs to\n                // be the end of the array.\n                if (ch !== ',') {\n                    next(']');\n                    return array;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad array\");\n    };\n\n    let object = () => {\n        // Parse an object value.\n\n        var key,\n            object = {};\n\n        if (ch === '{') {\n            next('{');\n            white();\n            while (ch) {\n                if (ch === '}') {\n                    next('}');\n                    return object;   // Potentially empty object\n                }\n\n                // Keys can be unquoted. If they are, they need to be\n                // valid JS identifiers.\n                if (ch === '\"' || ch === \"'\") {\n                    key = string();\n                } else {\n                    key = identifier();\n                }\n\n                white();\n                next(':');\n                object[key] = value();\n                white();\n                // If there's no comma after this pair, this needs to be\n                // the end of the object.\n                if (ch !== ',') {\n                    next('}');\n                    return object;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad object\");\n    };\n\n    value = () => {\n        // Parse a JSON value. It could be an object, an array, a string, a number,\n        // or a word.\n\n        white();\n        switch (ch) {\n        case '{':\n            return object();\n        case '[':\n            return array();\n        case '\"':\n        case \"'\":\n            return string();\n        case '-':\n        case '+':\n        case '.':\n            return number();\n        default:\n            return ch >= '0' && ch <= '9' ? number() : word();\n        }\n    };\n\n    // Return the json_parse function. It will have access to all of the above\n    // functions and variables.\n\n    return function (source, reviver) {\n        var result;\n\n        text = String(source);\n        at = 0;\n        lineNumber = 1;\n        columnNumber = 1;\n        ch = ' ';\n        result = value();\n        white();\n        if (ch) {\n            error(\"Syntax error\");\n        }\n\n        // If there is a reviver function, we recursively walk the new structure,\n        // passing each name/value pair to the reviver function for possible\n        // transformation, starting with a temporary root object that holds the result\n        // in an empty key. If there is not a reviver function, we simply return the\n        // result.\n\n        return typeof reviver === 'function' ? (function walk(holder, key) {\n            var k, v, value = holder[key];\n            if (value && typeof value === 'object') {\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = walk(value, k);\n                        if (v !== undefined) {\n                            value[k] = v;\n                        } else {\n                            delete value[k];\n                        }\n                    }\n                }\n            }\n            return reviver.call(holder, key, value);\n        }({'': result}, '')) : result;\n    };\n})();\n\nexport {MarkupParser};\n\n\n// TODO: these should be in a unit test file, not here\nexport function TestStringStream() {\n    let tests = [];\n\n    tests.push(() => {\n        let ss = new StringStream(\"Ala bala    portocala\");\n\n        let temp;\n\n        temp = ss.char();\n        if (temp !== \"A\") {\n            throw Error(\"char seems to fail. Expected: 'A' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"la\") {\n            throw Error(\"word seems to fail. Expected: 'la' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"bala\") {\n            throw Error(\"word seems to fail. Expected: 'bala' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"portocala\") {\n            throw Error(\"word seems to fail. Expected: 'portocala' , got '\" + temp + \"'\");\n        }\n    });\n\n    tests.push(() => {\n        let ss = new StringStream(\"Ala bala    portocala\");\n\n        let temp;\n\n        temp = ss.word();\n        if (temp !== \"Ala\") {\n            throw Error(\"word seems to fail. Expected: 'Ala' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.char();\n        if (temp !== \" \") {\n            throw Error(\"word seems to fail. Expected: ' ' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line();\n        if (temp !== \"bala    portocala\") {\n            throw Error(\"line seems to fail. Expected: 'bala    portocala' , got '\" + temp + \"'\");\n        }\n    });\n\n    tests.push(() => {\n        let ss = new StringStream(\"Buna bate toba\\n Bunica bate tare\\nBunica bate tobaaa \\nCu maciuca-n casa mare!\");\n\n        let temp;\n\n        temp = ss.line();\n        if (temp !== \"Buna bate toba\") {\n            throw Error(\"line seems to fail. Expected: 'Buna bate toba' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"Bunica\") {\n            throw Error(\"word seems to fail. Expected: 'Bunica' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line(\"\\n\");\n        if (temp !== \" bate tare\") {\n            throw Error(\"line seems to fail. Expected: ' bate tare' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line(\"\\n\", 11);\n        if (temp !== \"Bunica bate\") {\n            throw Error(\"line seems to fail. Expected: 'Bunica bate' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"tobaaa\") {\n            throw Error(\"line seems to fail. Expected: 'tobaaa' , got '\" + temp + \"'\");\n        }\n\n        ss.char();\n        temp = ss.line();\n        if (temp !== \"\") {\n            throw Error(\"line seems to fail. Expected: '' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line('\\n', 100);\n        if (temp !== \"Cu maciuca-n casa mare!\") {\n            throw Error(\"line seems to fail. Expected: 'Cu maciuca-n casa mare!' , got '\" + temp + \"'\");\n        }\n    });\n\n\n\n    let numFailed = 0;\n    for (let i = 0; i < tests.length; i += 1) {\n        try {\n            tests[i]();\n            console.log(\"Test \", i, \" ran successfully.\");\n        } catch (e) {\n            numFailed += 1;\n            console.log(\"Failed StringStream test \", i, \"! Reason: \", e);\n        }\n    }\n\n    console.log(\"Finished running all tests. Failed: \", numFailed);\n}\n","import {UI} from \"../ui/UI\";\nimport {MarkupParser} from \"./MarkupParser\";\nimport {StaticCodeHighlighter, Panel, Link, Image} from \"../ui/UI\";\n\n// Class that for every markup tag returns the UI class to instantiate for that element\nclass MarkupClassMap {\n    constructor(fallback, extraClasses=[]) {\n        this.classMap = new Map();\n        this.fallback = fallback;\n        for (const extraClass of extraClasses) {\n            this.addClass(extraClass[0], extraClass[1]);\n        }\n    }\n\n    addClass(className, classObject) {\n        this.classMap.set(className, classObject);\n    }\n\n    registerDependencies(dependencies) {\n        for (let dependency of dependencies) {\n            if (dependency && dependency.registerMarkup) {\n                dependency.registerMarkup(this);\n            }\n        }\n    }\n\n    static addClass(className, classObject) {\n        this.GLOBAL.addClass(className, classObject);\n    }\n\n    getClass(className) {\n        let classObject = this.classMap.get(className);\n        if (!classObject && this.fallback) {\n            classObject = this.fallback.getClass(className);\n        }\n        return classObject;\n    }\n\n    get(className) {\n        return this.getClass(className);\n    }\n\n    has(className) {\n        return this.getClass(className);\n    }\n};\n\nMarkupClassMap.GLOBAL = new MarkupClassMap();\n\nclass MarkupRenderer extends Panel {\n    setOptions(options) {\n        if (!options.classMap) {\n            options.classMap = new MarkupClassMap(MarkupClassMap.GLOBAL);\n        }\n        if (!options.parser) {\n            options.parser = new MarkupParser({\n                uiElements: options.classMap,\n            });\n        }\n        super.setOptions(options);\n\n        this.setValue(this.options.value || \"\");\n        if (this.options.classMap) {\n            this.classMap = this.options.classMap;\n        }\n    }\n\n    setValue(value) {\n        if (typeof value === \"string\") {\n            this.options.rawValue = value;\n            try {\n                value = this.options.parser.parse(value);\n            } catch (e) {\n                console.error(\"Can't parse \", value, e);\n                value = {\n                    tag: \"span\",\n                    children: [value]\n                };\n            }\n        }\n        this.options.value = value;\n    }\n\n    reparse() {\n        if (this.options.rawValue) {\n            this.setValue(this.options.rawValue);\n        }\n    }\n\n    registerDependencies(dependencies) {\n        if (dependencies.length > 0) {\n            this.classMap.registerDependencies(dependencies);\n            this.reparse();\n        }\n    }\n\n    addClass(className, classObject) {\n        this.classMap.addClass(className, classObject);\n    }\n\n    getClass(className) {\n        return this.classMap.getClass(className);\n    }\n\n    getValue() {\n        return this.options.value;\n    }\n\n    convertToUI(value) {\n        if (value instanceof UI.TextElement || value instanceof UI.Element) {\n            // TODO: investigate this!\n            return value;\n        }\n\n        if (typeof value === \"string\") {\n            return new UI.TextElement(value);\n        }\n        if (Array.isArray(value)) {\n            return value.map(x => this.convertToUI(x));\n        }\n        if (value.children) {\n            value.children = this.convertToUI(value.children);\n        }\n\n        let classObject = this.getClass(value.tag) || value.tag;\n\n        // TODO: maybe just copy to another object, not delete?\n        //delete value.tag;\n        return UI.createElement(classObject, value, ...(value.children || []));\n    }\n\n    render() {\n        return this.convertToUI(this.getValue());\n    }\n}\n\nMarkupClassMap.addClass(\"CodeSnippet\", StaticCodeHighlighter);\nMarkupClassMap.addClass(\"Link\", Link);\nMarkupClassMap.addClass(\"Image\", Image);\n\nexport {MarkupClassMap, MarkupRenderer};\n","import {UI, Panel, Button, CodeEditor, SectionDivider, ButtonGroup, TextArea, Orientation, Level} from \"UI\";\nimport {MarkupRenderer} from \"markup/MarkupRenderer\";\n\n\nclass MarkupEditor extends Panel {\n    getDefaultOptions() {\n        return {\n            showButtons: true\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(\"textAlign\", \"center\");\n    }\n\n    getMarkupRenderer() {\n        let rendererOptions = {};\n        if (this.options.classMap) {\n            rendererOptions.classMap = this.options.classMap;\n        }\n        return <MarkupRenderer ref={this.refLink(\"markupRenderer\")} value={this.options.value} style={{height:\"100%\", overflow: \"auto\"}} {...rendererOptions} />;\n    }\n\n    getEditor() {\n        return <TextArea ref=\"codeEditor\" style={{\n            width: \"100%\",\n            height: \"calc(100% - 3px)\",\n            resize: \"none\",\n            backgroundColor: \"#F9F9F9\"\n        }} value={this.options.value}/>;\n    }\n\n    render() {\n        let buttons;\n        if (this.options.showButtons) {\n            buttons = <ButtonGroup>\n                <Button ref=\"toggleLeftButton\" label={UI.T(\"Editor\")} level={Level.SUCCESS}/>\n                <Button ref=\"toggleRightButton\" label={UI.T(\"Article\")} level={Level.SUCCESS}/>\n            </ButtonGroup>;\n        }\n\n        return [\n            buttons,\n            <SectionDivider ref=\"sectionDivider\" orientation={Orientation.HORIZONTAL}\n                            style={{textAlign: \"initial\", height: \"100%\", width: \"100%\", display:\"inline-block\",\n                                    overflow: \"hidden\"}}>\n                <Panel ref=\"editorPanel\" style={{width: \"50%\", height: \"100%\", overflow: \"hidden\"}}>\n                    {this.getEditor()}\n                </Panel>\n                <Panel ref=\"rendererPanel\" style={{width: \"50%\", height: \"100%\", overflow: \"auto\", padding: \"10px\"}}>\n                    {this.getMarkupRenderer()}\n                </Panel>\n            </SectionDivider>\n        ]\n    }\n\n    updateValue(markup) {\n        this.markupRenderer.setValue(markup);\n        this.markupRenderer.redraw();\n    }\n\n    appendValue(markup, separator=\"\\n\") {\n        let value = this.getValue();\n        if (value && separator != null) {\n            value += separator;\n        }\n        value += markup;\n        this.setValue(value);\n        this.updateValue(value);\n    }\n\n    setEditorOptions() {\n        this.editorPanel.addListener(\"resize\", () => {\n            this.codeEditor.setWidth(this.editorPanel.getWidth() - 15);\n        });\n\n        this.codeEditor.addNodeListener(\"input\", () => {\n            let markup = this.codeEditor.getValue();\n            try {\n                this.updateValue(markup);\n            } catch (e) {\n                console.error(\"Exception in parsing markup: \", e);\n            }\n        });\n    }\n\n    onMount() {\n        if (this.options.showButtons) {\n            this.toggleLeftButton.addClickListener(() => {\n                if (this.editorPanel.getWidth() === 0) {\n                    this.sectionDivider.expandChild(0);\n                    this.toggleLeftButton.setLevel(Level.SUCCESS);\n                } else {\n                    this.sectionDivider.collapseChild(0);\n                    this.toggleLeftButton.setLevel(Level.DANGER);\n                }\n            });\n            this.toggleRightButton.addClickListener(() => {\n                if (this.rendererPanel.getWidth() === 0) {\n                    this.sectionDivider.expandChild(1);\n                    this.toggleRightButton.setLevel(Level.SUCCESS);\n                } else {\n                    this.sectionDivider.collapseChild(1);\n                    this.toggleRightButton.setLevel(Level.DANGER);\n                }\n            });\n        }\n\n        this.setEditorOptions();\n    }\n\n    getValue() {\n        return this.codeEditor.getValue();\n    }\n\n    setValue(value) {\n        return this.codeEditor.setValue(value);\n    }\n}\n\nexport {MarkupEditor};\n","import {Ajax} from \"Ajax\";\nimport {AjaxFetchMixin} from \"StoreMixins\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nclass User extends StoreObject {\n    constructor(obj) {\n        super(obj);\n    }\n\n    getName() {\n    }\n\n    getCustomSetting(key, defaultValue) {\n        let keyChain = key.split(\":\");\n        let currentDict = this.customSettings;\n        for (let key of keyChain) {\n            if (key in currentDict) {\n                currentDict = currentDict[key];\n            } else {\n                return defaultValue;\n            }\n        }\n        return currentDict;\n    }\n\n    getParsedCustomSetting(key, defaultValue) {\n        return JSON.parse(this.getCustomSetting(key, defaultValue));\n    }\n\n    setCustomSetting(key, value) {\n        let keyChain = key.split(\":\");\n        let lastKey = keyChain.pop();\n        if (!this.customSettings) {\n            this.customSettings = {};\n        }\n        let currentDict = this.customSettings;\n        for (let key of keyChain) {\n            if (!(key in currentDict)) {\n                currentDict[key] = {};\n            }\n            currentDict = currentDict[key];\n        }\n        currentDict[lastKey] = value;\n\n        this.dispatch(\"updateCustomSetting\", {\n            key: key,\n            value: JSON.parse(value),\n            rawValue: value,\n            origin: \"set\",\n        });\n    }\n\n    saveCustomSetting(key, value) {\n        if (this.id != USER.id) {\n            console.error(\"Invalid user\");\n            return;\n        }\n\n        this.dispatch(\"updateCustomSetting\", {\n            key: key,\n            value: value,\n            origin: \"save\",\n        });\n\n        let request = {\n            customSettingsKey: key,\n            customSettingsValue: value,\n        };\n\n        if (!this.timeouts) {\n            this.timeouts = new Map();\n        }\n        if (this.timeouts.has(key)) {\n            clearTimeout(this.timeouts.get(key));\n        }\n        this.timeouts.set(key, setTimeout(() => {\n            Ajax.postJSON(\"/accounts/profile_changed/\", request).then(() => {}, () => {});\n        }));\n    }\n\n    applyEvent(event) {\n        if (event.type === \"setCustomSetting\") {\n            console.log(\"Updated custom settings: \", event);\n            this.setCustomSetting(event[\"data\"].key, event[\"data\"].value);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n}\n\nvar UserStore = new GenericObjectStore(\"user\", User);\n\nUserStore.getCurrentUser = function () {\n    return window.USER;\n};\n\nclass PublicUser extends StoreObject {\n    getDisplayHandle() {\n        let name;\n        if (this.displayName) {\n            name = this.name || this.username;\n        } else {\n            name = this.username || this.name;\n        }\n        return name || (\"user-\" + this.id);\n    }\n\n    getProfileUrl() {\n        if (this.username) {\n            return \"/user/\" + this.username;\n        } else {\n            return \"/userid/\" + this.id;\n        }\n    }\n}\n\n// TODO: extend AjaxFetchMixin, to put the options in the constructor\nvar PublicUserStoreClass = AjaxFetchMixin(GenericObjectStore);\n\nvar PublicUserStore = new PublicUserStoreClass(\"publicuser\", PublicUser, {\n    fetchTimeoutDuration: 20,\n    maxFetchObjectCount: 512,\n    fetchURL: \"/accounts/public_user_profiles/\",\n});\n\nwindow.USER = Object.assign({\n    id: 0,\n    customSettings: {}\n}, window.USER || {});\n\nwindow.USER = UserStore.fakeCreate(window.USER);\n\nclass UserNotification extends StoreObject {\n    getUser() {\n        return UserStore.get(this.userId);\n    }\n\n    isRead() {\n        return (this.id <= this.getUser().lastReadNotificationId);\n    }\n}\n\nvar UserNotificationStore = new GenericObjectStore(\"UserNotification\", UserNotification, {dependencies: [\"user\"]});\n\nexport {UserStore, PublicUserStore, UserNotificationStore};\n","import {UI} from \"UI\";\nimport {PublicUserStore} from \"UserStore\";\n\nclass UserHandle extends UI.Element {\n    setOptions(options) {\n        options.userId = options.userId || options.id;\n\n        super.setOptions(options);\n\n        this.options.color = this.options.color || \"#2089b5\";\n        this.setUser(PublicUserStore.get(this.options.userId));\n    }\n\n    setUser(user) {\n        this.user = user;\n    }\n\n    getNodeType() {\n        return \"span\";\n    }\n\n    setColor(color) {\n        this.options.color = color;\n        this.handle.setStyle(\"color\", color);\n    }\n\n    render() {\n        let handle;\n        if (!this.user) {\n            PublicUserStore.fetch(this.options.userId, (user) => {\n                this.setUser(user);\n                this.redraw();\n            });\n            handle = <b ref=\"handle\" style={{color: \"#BBB\"}}>{\"user-\" + this.options.userId}</b>;\n        } else {\n            handle = <span ref=\"handle\" style={{cursor: \"pointer\", color: this.options.color}}\n                      onClick={() => {window.open(this.user.getProfileUrl(), \"_blank\")}}><b>{this.user.getDisplayHandle()}</b></span>\n        }\n\n        //The purpose of the container is to simplify the usage of the popup.\n        return [\n            <span ref=\"container\" style={{position: \"relative\", overflow: \"hidden\"}}>\n                {handle}\n                {this.options.children}\n            </span>\n        ]\n    }\n}\n\nexport {UserHandle};\n","import {UI, SVG, Switcher, Button} from \"UI\";\nimport {MarkupRenderer, MarkupClassMap} from \"MarkupRenderer\";\n\nimport {Article, ArticleStore} from \"./state/ArticleStore\";\n\n\nclass ArticleRenderer extends MarkupRenderer {\n    setOptions(options) {\n        options.classMap = options.classMap || this.constructor.markupClassMap;\n        super.setOptions(options);\n    }\n\n    getEditButton() {\n        if (this.options.showEditButton && this.options.article.canBeEditedByUser()) {\n            let url = this.options.editButtonUrl || (\"/article/\" + this.options.article.id + \"/edit/\");\n            return <div className=\"text-left\">\n                <a href={url} target=\"_blank\">\n                    <Button label={UI.T(\"Edit\")}\n                               style={{\"margin\": \"10px\"}}/></a>\n            </div>;\n        }\n    }\n\n    render() {\n        return [\n            this.getEditButton(),\n            super.render()\n        ];\n    }\n\n    setArticle(article) {\n        this.options.article = article;\n        this.setOptions(this.options);\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    getValue() {\n        super.setValue(this.options.article.markup);\n        return super.getValue();\n    }\n\n    redraw() {\n        if (!this.options.article.dependency) {\n            super.redraw();\n            return;\n        }\n\n        let dependencyArray = this.options.article.dependency.split(\",\");\n        let requireAndRedraw = (dependencies) => {\n            this.registerDependencies(dependencies);\n            super.redraw();\n        };\n        // Not using require directly to fool webpack\n        window[\"require\"](dependencyArray, function () {\n            // this needs to be inside of an anonymous function to preserve arguments\n            requireAndRedraw(Array.from(arguments));\n        });\n    }\n}\n\nclass RecursiveArticleRenderer extends ArticleRenderer {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.articleId = this.options.articleId || this.options.id;\n    }\n\n    redraw() {\n        if (this.options.article) {\n            return super.redraw();\n        } else {\n            ArticleStore.fetch(this.options.articleId, (article) => this.updateOptions({ article }));\n        }\n    }\n}\n\nclass ArticleSwitcher extends Switcher {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            fullHeight: true,\n        });\n    }\n\n    constructor() {\n        super(...arguments);\n        this.articleChildMap = new WeakMap();\n    }\n\n    setOptions(options) {\n        options = Object.assign({\n            lazyRender: true,\n        }, options);\n        super.setOptions(options);\n    }\n\n    getPageForArticle(article) {\n        if (!this.articleChildMap.has(article)) {\n            this.articleChildMap.set(article, <ArticleRenderer article={article} showEditButton={this.options.showEditButton} />);\n        }\n        return this.articleChildMap.get(article);\n    }\n\n    setActive(article) {\n        if (!(article instanceof Article)) {\n            super.setActive(article);\n            return;\n        }\n        super.setActive(this.getPageForArticle(article));\n    }\n\n    setActiveArticleId(articleId) {\n        ArticleStore.fetch(articleId, (article) => {\n            this.setActive(article);\n        });\n    }\n\n    onMount() {\n        super.onMount();\n        if (this.options.initialArticle) {\n            this.setActive(this.options.initialArticle);\n        }\n        if (this.options.initialArticleId) {\n            this.setActiveArticleId(this.options.initialArticleId);\n        }\n    }\n}\n\nArticleRenderer.markupClassMap = new MarkupClassMap(MarkupClassMap.GLOBAL, [\n    [\"Article\", RecursiveArticleRenderer],\n    [\"RawSVG\", SVG.RawSVG]\n]);\n\nexport {ArticleRenderer, RecursiveArticleRenderer, ArticleSwitcher};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n\nconst color = {\n    BLUE: \"#20232d\",\n    HOVER_BLUE: \"#364251\",\n    BLACK: \"#181a22\",\n    HOVER_BLACK: \"#323539\",\n    WHITE: \"#eee\",\n};\n\nlet CSAStyle = {\n    color: color,\n};\n\nclass BlogStyle extends StyleSheet {\n    fontFamily = \"lato, open sans\";\n    titleFontSize = \"2em\";\n\n    @styleRule\n    commentsTitle = {\n        fontFamily: this.fontFamily,\n        height: \"20px\",\n        color: \"#333\",\n        marginTop: \"10px\",\n        fontSize: \"1em\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    bottomSection = {\n        marginTop: \"5px\",\n        height: \"50px\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    blogEntryView = {\n        \"font-size\": this.fontFamily,\n        \"margin\": \"0 auto\",\n        \"width\": \"900px\",\n        \"max-width\": \"100%\",\n        // \"padding-top\": \"50px\",\n        // \"padding-bottom\": \"50px\",\n    };\n\n    title = {\n        \"font-size\": this.titleFontSize,\n        \"padding-top\": \"20px\",\n        \"padding-bottom\": \"10px\",\n        \"text-decoration\": \"italic\",\n        \"width\": \"100%\",\n        \"text-align\": \"center\",\n        \"word-wrap\": \"normal\",\n        \"line-height\": \"60px\",\n    };\n\n    writtenBy = {\n        \"width\": \"100%\",\n        \"text-align\": \"left\",\n        \"padding-top\": \"20px\",\n        \"font-family\": this.fontFamily,\n        \"font-size\": \"1em\",\n        \"color\": \"#666\",\n    };\n\n    article = {\n        \"text-align\": \"justify\",\n        \"font-family\": this.fontFamily,\n        \"font-size\": \"17px\",\n    };\n\n    link = {\n        textDecoration: \"none\",\n        textAlign: \"center\",\n        fontFamily: this.fontFamily,\n        marginTop: \"-15pt\",\n        fontSize: \"1.1em\",\n    };\n\n    blogArticleRenderer = {\n        overflow: \"hidden\",\n        position: \"relative\",\n        maxHeight: \"180px\",\n        \"text-align\": \"justify\",\n        \"font-family\": this.fontFamily,\n        \"font-size\": \"17px\",\n        marginBottom: \"25px\",\n    };\n\n    @styleRule\n    whiteOverlay = {\n        height: \"100px\",\n        background: \"linear-gradient(rgba(255,255,255,0), #fff)\",\n        position: \"absolute\",\n        marginTop: \"-120px\",\n        pointerEvents: \"none\",\n        width: \"92%\",\n    };\n\n    @styleRule\n    loadMoreButton = {\n        marginLeft: \"16px\",\n        color: \"#fff\",\n        height: \"40px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: CSAStyle.color.BLUE,\n        border: \"0\",\n        padding: \"5px 10px\",\n        borderColor: CSAStyle.color.BLUE,\n        fontFamily: this.fontFamily,\n        fontSize: \"1em\",\n        transition: \".2s\",\n        textTransform: \"uppercase\",\n        opacity: \"1\",\n        \":hover\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active:focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    sendMessageButtonStyle = {\n        height: \"30px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: CSAStyle.color.BLUE,\n        borderColor: \"#333\",\n        fontSize: \"13px\",\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus:active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n}\n\n\nclass BlogArticleRendererStyle extends StyleSheet {\n    hStyle = {\n        \"text-align\": \"center\",\n        \"margin-top\": \"30px\",\n        \"margin-bottom\": \"30px\",\n        \"width\": \"100%\",\n    };\n\n    @styleRule\n    blogArticleRenderer = {\n        \" h1\": this.hStyle,\n        \" h2\": this.hStyle,\n        \" h3\": this.hStyle,\n        \" h4\": this.hStyle,\n        \" h5\": this.hStyle,\n        \" h6\": this.hStyle,\n    };\n\n    @styleRule\n    quote = {\n        \"font-style\": \"italic\",\n        \"margin-top\": \"20px\",\n        \"margin-bottom\": \"20px\",\n        \"color\": \"#707070\",\n        \"float\": \"right\",\n        \"display\": \"flex\",\n        \"width\": \"100%\",\n    };\n}\n\n\nexport {BlogStyle, BlogArticleRendererStyle};\n","import {UI, registerStyle} from \"UI\";\nimport {ArticleRenderer} from \"ArticleRenderer\";\nimport {MarkupClassMap} from \"MarkupRenderer\";\nimport {BlogArticleRendererStyle} from \"./BlogStyle\";\n\n\n@registerStyle(BlogArticleRendererStyle)\nclass BlogArticleRenderer extends ArticleRenderer {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.blogArticleRenderer);\n    }\n}\n\n\n@registerStyle(BlogArticleRendererStyle)\nclass BlogQuote extends UI.Primitive(\"div\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.quote);\n    }\n\n    render() {\n        return [\n            <div style={{\n                \"flex-grow\": \"1000000\",\n                \"min-width\": \"10%\",\n                \"display\": \"inline-block\",\n            }}></div>,\n            <div style={{\n                \"flex-grow\": \"1\",\n                \"display\": \"inline-block\",\n            }}>\n                {this.options.value}\n            </div>\n        ];\n    }\n}\n\n\nBlogArticleRenderer.markupClassMap = new MarkupClassMap(ArticleRenderer.markupClassMap);\nBlogArticleRenderer.markupClassMap.addClass(\"Quote\", BlogQuote);\n\n\nexport {BlogArticleRenderer, BlogQuote};\n","import {\n    ActionModal,\n    AjaxButton,\n    Button,\n    ButtonGroup,\n    CheckboxInput,\n    Form,\n    FormField,\n    Link,\n    Modal,\n    Panel,\n    Select,\n    SortableTable,\n    TemporaryMessageArea,\n    TextInput,\n    Level,\n    UI,\n} from \"UI\";\nimport {Ajax} from \"Ajax\";\nimport {StemDate} from \"Time\";\nimport {PublicUserStore} from \"UserStore\";\nimport {Language} from \"LanguageStore\";\nimport {UserHandle} from \"UserHandle\";\nimport {GlobalStyle} from \"GlobalStyle\";\n\nimport {ArticleStore} from \"./state/ArticleStore\";\n\n\nclass TransferOwnershipModal extends ActionModal {\n    getActionName() {\n        return \"Transfer ownership\";\n    }\n\n    getActionLevel() {\n        return Level.PRIMARY;\n    }\n\n    getBody() {\n        return [\n            <UI.TextElement ref=\"text\" value={\"Set owner\"}/>,\n            <Form style={{marginTop: \"10px\"}}>\n                <FormField ref=\"ownerFormField\" label=\"Author ID\">\n                    <TextInput ref=\"ownerFormInput\"  value=\"\"/>\n                </FormField>\n            </Form>\n        ];\n    }\n\n    getFooter() {\n        return [\n            <TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"transferOwnershipButton\" level={this.getActionLevel()} onClick={() => {this.action()}}\n                               statusOptions={[this.getActionName(), {faIcon: \"spinner fa-spin\", label:\" transfering ownership ...\"},\n                                               this.getActionName(), \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    setArticle(article) {\n        this.article = article;\n        this.text.setValue(\"Set owner for \" + this.article.name + \":\");\n        this.ownerFormInput.setValue(this.article.userCreatedId);\n    }\n\n    action() {\n        let table = this.options.parent.table;\n        let newOwner = this.ownerFormInput.getValue();\n        let request = {\n            newOwner: newOwner\n        };\n\n        this.messageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.transferOwnershipButton.postJSON(\"/article/\" + this.article.id + \"/set_owner/\", request).then(\n            () => {\n                this.messageArea.showMessage(\"Author successfully changed\");\n                table.redraw();\n                this.hide();\n            },\n            (error) => this.messageArea.showMessage(\"Error in changing owner \" + error.message, \"red\")\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\n\nclass DeleteArticleModal extends ActionModal {\n    getActionName() {\n        return \"Delete article\";\n    }\n\n    getBody() {\n        return <UI.TextElement ref=\"text\" value={\"Delete article?\"}/>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"deleteArticleButton\" level={Level.DANGER} onClick={() => {this.deleteArticle()}}\n                               statusOptions={[\"Delete article\", {faIcon: \"spinner fa-spin\", label:\" deleting article ...\"},\n                                               \"Delete article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    setArticle(article) {\n        this.article = article;\n        this.text.setValue(\"Delete \" + this.article.name + \"?\");\n    }\n\n    deleteArticle() {\n        let table = this.options.parent.table;\n        this.deleteArticleButton.postJSON(\"/article/\" + this.options.article.id + \"/delete/\", {}).then(\n            () => {\n                table.options.articles.splice(table.getArticleIndex(this.article.id), 1);\n                table.redraw();\n                this.hide();\n            },\n            (error) => this.messageArea.showMessage(error.message, \"red\")\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\nclass CreateArticleModal extends ActionModal {\n    getActionName() {\n        return \"Create article\";\n    }\n\n    getBody() {\n        return <Form style={{marginTop: \"10px\"}}>\n            <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                <TextInput ref=\"articleNameInput\"  value=\"\"/>\n            </FormField>\n            <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                <TextInput ref=\"dependencyInput\" value=\"\"/>\n            </FormField>\n            <FormField ref=\"languageFormField\" label=\"Language\">\n                <Select ref=\"languageSelect\" options={Language.all()}/>\n            </FormField>\n            <FormField ref=\"publicFormField\" label=\"Public\">\n                <CheckboxInput ref=\"publicCheckbox\" checked={false}/>\n            </FormField>\n        </Form>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"createArticleButton\" level={Level.PRIMARY} onClick={() => {this.createArticle()}}\n                               statusOptions={[\"Create article\", {faIcon: \"spinner fa-spin\", label:\" creating article ...\"},\n                                               \"Create article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    createArticle(options) {\n        let name = this.articleNameInput.getValue();\n        let dependency = this.dependencyInput.getValue();\n        let languageId = this.languageSelect.get().id;\n        let isPublic = this.publicCheckbox.getValue();\n        let request = {\n            name: name,\n            dependency: dependency,\n            languageId: languageId,\n            isPublic: isPublic\n        };\n        if (options) {\n            Object.assign(request, options);\n        }\n        this.createArticleButton.postJSON(\"/create_article/\", request).then(\n            (data) => {\n                this.options.parent.table.addArticle(ArticleStore.get(data.article.id));\n                this.hide();\n            },\n            (error) => {\n                this.messageArea.showMessage(error.message, \"red\");\n            }\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\n\nclass AddTranslationModal extends CreateArticleModal {\n    getActioName() {\n        return \"Add translation\";\n    }\n\n    getBody() {\n        const baseArticle = this.options.baseArticle;\n        return <Form style={{marginTop: \"10px\"}}>\n                    <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                        <TextInput ref=\"articleNameInput\"  value={\"Translation for \" + baseArticle.name}/>\n                    </FormField>\n                    <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                        <TextInput ref=\"dependencyInput\" value={baseArticle.dependency}/>\n                    </FormField>\n                    <FormField ref=\"languageFormField\" label=\"Language\">\n                        <Select ref=\"languageSelect\" options={Language.all()}/>\n                    </FormField>\n                    <FormField ref=\"publicFormField\" label=\"Public\">\n                        <CheckboxInput ref=\"publicCheckbox\" checked={baseArticle.isPublic}/>\n                    </FormField>\n                </Form>\n    }\n\n    getFooter() {\n        const baseArticle = this.options.baseArticle;\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"createArticleButton\" level={Level.PRIMARY}\n                               onClick={() => this.createArticle({\n                                   baseArticleId: baseArticle.id,\n                                   markup: baseArticle.markup\n                               })}\n                               statusOptions={[\"Add translation\", {faIcon: \"spinner fa-spin\", label:\" creating translation article ...\"},\n                                               \"Success\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n}\n\nclass ArticleTable extends SortableTable {\n    setOptions(options) {\n        super.setOptions(options);\n        this.resetColumnSortingOrder();\n    }\n\n    resetColumnSortingOrder() {\n        this.columnSortingOrder = [this.columns[4], this.columns[5], this.columns[0],\n            this.columns[3], this.columns[2], this.columns[1]];\n    }\n\n    getArticleIndex(articleId) {\n        for (let i = 0; i < this.options.articles.length; i += 1) {\n            if (this.options.articles[i].id === articleId)\n                return i;\n        }\n        return -1;\n    }\n\n    addArticle(article) {\n        this.options.articles.push(article);\n        this.redraw();\n    }\n\n    setColumns() {\n        let cellStyle = {\n            textAlign: \"left\",\n            verticalAlign: \"middle\"\n        };\n        let headerStyle = {\n            textAlign: \"left\",\n            verticalAlign: \"middle\"\n        };\n        let columns = [{\n            value: article => <Link href={\"/article/\" + article.id + \"/edit/\"} value={article.name} />,\n            rawValue: article => article.name,\n            headerName: \"Article\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => <UserHandle id={article.userCreatedId}/>,\n            rawValue: article => PublicUserStore.get(article.userCreatedId).username,\n            headerName: \"Author\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => (article.isPublic ? <span className=\"fa fa-check fa-lg\" style={{color: \"green\"}}/>\n                : <span className=\"fa fa-times fa-lg\" style={{color: \"red\"}}/>),\n            rawValue: article => (article.isPublic ? \"Yes\" : \"No\"),\n            headerName: \"Public\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => Language.get(article.languageId).name,\n            rawValue: article => Language.get(article.languageId).name,\n            headerName: \"Language\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => StemDate.unix(article.dateCreated).locale(\"en\").format(\"DD/MM/YYYY HH:mm:ss\"),\n            rawValue: article => article.dateCreated,\n            sortDescending: true,\n            headerName: \"Date created\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => StemDate.unix(article.dateModified).locale(\"en\").format(\"DD/MM/YYYY HH:mm:ss\"),\n            rawValue: article => article.dateModified,\n            sortDescending: true,\n            headerName: \"Date modified\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }];\n        if (!this.options.parent.options.readOnly) {\n            if (USER.isSuperUser) {\n                columns.push({\n                    value: article => <Button level={Level.PRIMARY} label=\"Set owner\"\n                                                 onClick={() => {\n                                                     this.options.parent.transferOwnershipModal.show();\n                                                     this.options.parent.transferOwnershipModal.setArticle(article);\n                                                 }}/>,\n                    headerName: \"Set owner\",\n                    headerStyle: headerStyle,\n                    cellStyle: cellStyle\n                });\n            }\n            columns.push({\n                value: article => <Button level={Level.DANGER} label=\"Delete\"\n                                             onClick={() => {\n                                                 this.options.parent.deleteArticleModal.show();\n                                                 this.options.parent.deleteArticleModal.setArticle(article);\n                                             }}/>,\n                headerName: \"Delete\",\n                headerStyle: headerStyle,\n                cellStyle: cellStyle\n            });\n        }\n        super.setColumns(columns);\n    }\n\n    getEntries() {\n        return this.sortEntries(this.options.articles);\n    }\n}\n\nclass ArticleManager extends Panel {\n    getDefaultOptions() {\n        return {\n            title: \"Article manager\",\n            articles: [],\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(GlobalStyle.Container.SMALL);\n    }\n\n    setOptions(options) {\n        options = Object.assign(this.getDefaultOptions(), options);\n        super.setOptions(options);\n    }\n\n    render() {\n        let addButton = null;\n        if (!this.options.readOnly) {\n            addButton = <div className=\"pull-right\">\n                <Button level={Level.PRIMARY} label=\"Create article\"\n                           onClick={() => this.createArticleModal.show()}\n                           style={{marginTop: \"5px\", marginBottom: \"5px\"}}/>\n            </div>;\n        }\n\n        return [\n            <div className=\"pull-left\">\n                <h4><strong>{this.options.title}</strong></h4>\n            </div>,\n            addButton,\n            <ArticleTable ref=\"table\" articles={this.options.articles} parent={this}/>,\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n        this.getArticles();\n\n        if (this.options.readOnly === true)\n            return;\n\n        this.createArticleModal = <CreateArticleModal parent={this}/>;\n\n        if (USER.isSuperUser) {\n            this.transferOwnershipModal = <TransferOwnershipModal parent={this}/>;\n        }\n\n        this.deleteArticleModal = <DeleteArticleModal parent={this}/>;\n    }\n\n    getArticles() {\n        if (this.options.articles && this.options.articles.length > 0) {\n            return;\n        }\n        Ajax.getJSON(\"/get_available_articles/\", {}).then(\n            () => this.table.updateOptions({articles: ArticleStore.all()})\n        );\n    }\n}\n\nclass TranslationManager extends Panel {\n    getDefaultOptions() {\n        return {\n            title: \"Translation manager\"\n        };\n    }\n\n    setOptions(options) {\n        options = Object.assign(this.getDefaultOptions(), options);\n        super.setOptions(options);\n    }\n\n    render() {\n        this.table = <ArticleTable articles={[]} parent={this}/>;\n        let addButton = null;\n        if (!this.options.readOnly)\n            addButton = <div className=\"pull-right\"><Button level={Level.PRIMARY} label=\"Add translation\"\n                                                               onClick={() => this.addTranslationModal.show()}\n                                                               style={{marginTop: \"5px\", marginBottom: \"5px\"}}/></div>;\n        return [<div className=\"pull-left\"><h4><strong>{this.options.title}</strong></h4></div>, addButton, this.table];\n    }\n\n    onMount() {\n        super.onMount();\n        this.getTranslations();\n\n        if (this.options.readOnly === true)\n            return;\n\n        this.addTranslationModal = <AddTranslationModal parent={this} baseArticle={this.options.baseArticle}/>;\n\n        if (USER.isSuperUser) {\n            this.transferOwnershipModal = <TransferOwnershipModal parent={this}/>;\n        }\n\n        this.deleteArticleModal = <DeleteArticleModal parent={this}/>;\n    }\n\n    getTranslations() {\n        if (!this.options.baseArticle)\n            return;\n\n        Ajax.getJSON(\"/article/\" + this.options.baseArticle.id + \"/get_translations/\", {}).then(\n            () => {\n                for (let article of ArticleStore.all()) {\n                    if (article.baseArticleId === this.options.baseArticle.id) {\n                        this.table.options.articles.push(article);\n                    }\n                }\n                this.table.redraw();\n            }\n        );\n    }\n}\n\nexport {ArticleManager, TranslationManager};\n","import {\n    ActionModal,\n    AjaxButton,\n    Button,\n    ButtonGroup,\n    CheckboxInput,\n    Form,\n    FormField,\n    Link,\n    Panel,\n    SectionDivider,\n    Select,\n    TabArea,\n    TemporaryMessageArea,\n    TextArea,\n    TextInput,\n    Level,\n    UI,\n} from \"UI\";\nimport {Language} from \"LanguageStore\";\n\nimport {ArticleStore} from \"./state/ArticleStore\";\nimport {TranslationManager} from \"./ArticleManager\";\nimport {ArticleRenderer} from \"./ArticleRenderer\";\nimport {MarkupEditor} from \"./markup/MarkupEditor\";\n\n\nconst deleteRedirectLink = \"/\";\n\nclass ArticleMarkupEditor extends MarkupEditor {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.value = this.options.article.markup;\n    }\n\n    getMarkupRenderer() {\n        return <ArticleRenderer ref={this.refLink(\"markupRenderer\")} article={this.options.article} style={{flex:\"1\", height: \"100%\", overflow: \"auto\"}} />\n    }\n\n    updateValue(markup) {\n        this.options.article.markup = markup;\n        super.updateValue(markup);\n    }\n}\n\n\nclass DeleteArticleModal extends ActionModal {\n    getActionName() {\n        return \"Delete Article\";\n    }\n\n    getBody() {\n        return <p>Delete {this.options.article.name}?</p>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"deleteArticleButton\" level={Level.DANGER} onClick={() => {this.deleteArticle()}}\n                               statusOptions={[\"Delete article\", {faIcon: \"spinner fa-spin\", label:\" deleting article ...\"},\n                                               \"Delete article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    deleteArticle() {\n        this.deleteArticleButton.postJSON(\"/article/\" + this.options.article.id + \"/delete/\", {}).then(\n            () => {\n                if (this.options.article.baseArticleId)\n                    window.location.replace(\"/article/\" + this.options.article.baseArticleId + \"/edit/\");\n                else\n                    window.location.replace(deleteRedirectLink);\n            },\n            (error) => this.messageArea.showMessage(error.message, \"red\")\n        );\n    }\n}\n\nclass ArticleEditor extends Panel {\n    setOptions(options) {\n        super.setOptions(options);\n\n    }\n\n    getArticle() {\n        return ArticleStore.get(this.options.articleId);\n    }\n\n    initializeVersioning() {\n        if (ArticleEditor.DiffWidgetClass) {\n            this.versions = [];\n            this.versionsLabels = [];\n            for (let article of this.getArticle().getEdits()) {\n                this.versions.push(article.content);\n                this.versionsLabels.push(\"Version \" + article.id);\n            }\n            this.versions.push(this.getArticle().markup);\n            this.versionsLabels.push(\"Edit version\");\n            this.versions.reverse();\n            this.versionsLabels.reverse();\n\n            this.leftEditable = true;\n            this.rightEditable = false;\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            display: \"flex\",\n            flexDirection: \"column\",\n            height: \"100%\",\n        });\n    }\n\n    render() {\n        this.initializeVersioning();\n        let translationsPanel = null;\n        let baseArticleForm = null;\n        if (this.getArticle().baseArticleId) {\n            baseArticleForm = <FormField ref=\"baseArticleFormField\" label=\"Base article\">\n                <Link href={\"/article/\" + this.getArticle().baseArticleId + \"/edit/\"} value=\"Go to base article\" />\n            </FormField>;\n        } else {\n            translationsPanel = <Panel title=\"Translations\">\n                <TranslationManager title={\"Translations for \" + this.getArticle().name}\n                                    baseArticle={this.getArticle()}/>\n            </Panel>\n        }\n        let ownershipPanel = null;\n        if (USER.isSuperUser) {\n            ownershipPanel = <Panel title=\"Ownership\">\n                <Form style={{marginTop: \"10px\"}}>\n                    <FormField ref=\"ownerFormField\" label=\"Author ID\">\n                        <TextInput ref=\"ownerFormInput\"  value={this.getArticle().userCreatedId}/>\n                    </FormField>\n                </Form>\n                <AjaxButton ref=\"setOwnerButton\" level={Level.INFO} onClick={() => {\n                                let newOwner = this.ownerFormInput.getValue();\n                                this.setOwner(newOwner);\n                               }}\n                               statusOptions={[\"Transfer ownership\", {faIcon: \"spinner fa-spin\", label:\" transfering ownership ...\"}, \"Transfer ownership\", \"Failed\"]}\n                        />\n                <TemporaryMessageArea ref=\"setOwnerMessageArea\"/>\n            </Panel>\n        }\n\n        let revisionsPanel;\n        if (ArticleEditor.DiffWidgetClass) {\n            let DiffWidgetClass = ArticleEditor.DiffWidgetClass;\n                revisionsPanel = <Panel title=\"Revisions\" style={{height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n                <Panel>\n                    <Select ref=\"leftTextSelector\" options={this.versionsLabels}/>\n                    <Select style={{float:\"right\", marginRight:\"25px\"}} ref=\"rightTextSelector\" options={this.versionsLabels}/>\n                </Panel>\n                <DiffWidgetClass ref=\"diffWidget\" leftEditable={this.leftEditable} rightEditable={this.rightEditable}\n                                 leftTextValue={this.versions[2]} arrows={this.arrows} rightTextValue={this.versions[1]}\n                                     style={{flex:\"1\", height: \"calc(100% - 100px)\", width: \"calc(100% - 100px)\"}} />\n            </Panel>;\n        }\n\n        return [\n            <h3>{this.getArticle().name + \" Id=\" + this.options.articleId}</h3>,\n                <TabArea ref=\"tabArea\" variableHeightPanels style={{flex: \"1\", height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n                <Panel title=\"Edit\" active style={{height: \"100%\", overflow: \"hidden\"}}>\n                    <AjaxButton ref=\"saveMarkupButton\" level={Level.INFO} onClick={() => {\n                                    let content = this.markupEditor.getValue();\n                                    this.saveMarkup(content);\n                                   }}\n                               statusOptions={[\"Save\", {faIcon: \"spinner fa-spin\", label:\" saveing ...\"}, \"Save\", \"Failed\"]}\n                        />\n                    <TemporaryMessageArea ref=\"saveMarkupMessageArea\"/>\n                    <ArticleMarkupEditor style={{height: \"100%\", marginTop: \"-31px\", display: \"flex\", flexDirection: \"column\"}}\n                                         ref=\"markupEditor\" article={this.getArticle()} />\n                </Panel>\n                {revisionsPanel}\n                <Panel title=\"Summary\">\n                    <Form style={{marginTop: \"10px\"}}>\n                        <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                            <TextInput ref=\"articleNameFormInput\"  value={this.getArticle().name}/>\n                        </FormField>\n                        <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                            <TextInput ref=\"dependencyFormInput\" value={this.getArticle().dependency}/>\n                        </FormField>\n                        {baseArticleForm}\n                        <FormField ref=\"languageFormField\" label=\"Language\">\n                            <Select ref=\"languageSelect\" options={Language.all()}\n                                       selected={Language.get(this.getArticle().languageId)}/>\n                        </FormField>\n                        <FormField ref=\"publicFormField\" label=\"Public\">\n                            <CheckboxInput ref=\"publicCheckbox\" checked={this.getArticle().isPublic}/>\n                        </FormField>\n                    </Form>\n                    <AjaxButton ref=\"saveOptionsButton\" level={Level.INFO} onClick={() => {\n                                    let name = this.articleNameFormInput.getValue();\n                                   let dependency = this.dependencyFormInput.getValue();\n                                   let languageId = this.languageSelect.get().id;\n                                   let isPublic = this.publicCheckbox.getValue();\n                                   let options = {\n                                       name: name,\n                                       dependency: dependency,\n                                       languageId: languageId,\n                                       isPublic: isPublic\n                                   };\n                                   this.saveOptions(options);\n                                   }}\n                               statusOptions={[\"Save\", {faIcon: \"spinner fa-spin\", label:\" saveing ...\"}, \"Save\", \"Failed\"]}\n                        />\n                    <Button ref=\"deleteArticleButton\" level={Level.DANGER} label=\"Delete article\"\n                               style={{marginLeft: \"3px\"}}\n                               onClick={() => this.deleteArticleModal.show()}/>\n                    <TemporaryMessageArea ref=\"saveOptionsMessageArea\"/>\n                </Panel>\n                {translationsPanel}\n                {ownershipPanel}\n            </TabArea>\n        ];\n    }\n\n    saveMarkup(content) {\n        let request = {\n            markup: content\n        };\n\n        this.saveMarkupMessageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.saveMarkupButton.postJSON(\"/article/\" + this.options.articleId + \"/edit/\", request).then(\n            () => {\n                // Add a new version in the dropdown if the save is a success\n                if (ArticleEditor.DiffWidgetClass) {\n                    this.addNewVersion(content);\n                }\n                this.saveMarkupMessageArea.showMessage(\"Saved article\");\n            },\n            (error) => this.saveMarkupMessageArea.showMessage(\"Error in saving the article: \" + error.message, \"red\")\n        );\n    }\n\n    saveOptions(options) {\n        let request = {};\n        Object.assign(request, options);\n\n        this.saveOptionsMessageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.saveOptionsButton.postJSON(\"/article/\" + this.options.articleId + \"/edit/\", request).then(\n            () => window.location.replace(\"/article/\" + this.options.articleId + \"/edit/\"),\n            (error) => this.saveOptionsMessageArea.showMessage(\"Error in saving the article: \" + error.message, \"red\")\n        );\n    }\n\n    setOwner(newOwner) {\n        this.setOwnerMessageArea.showMessage(\"Saving...\", \"black\", null);\n        this.setOwnerButton.postJSON(\"/article/\" + this.options.articleId + \"/set_owner/\", {\n            newOwner: newOwner\n        }).then(\n            () => this.setOwnerMessageArea.showMessage(\"Author successfully changed\"),\n            (error) => this.setOwnerMessageArea.showMessage(\"Error in changing owner \" + error.message, \"red\")\n        );\n    }\n\n    addNewVersion(content) {\n        this.versionsLabels[0] = (\"Version \" + this.versionsLabels.length);\n        this.versions[0] = content;\n\n        this.versions.unshift(this.markupEditor.getValue());\n        this.versionsLabels.unshift(\"Edit version\");\n\n        let leftIndex = this.leftTextSelector.getIndex();\n        let rightIndex = this.rightTextSelector.getIndex();\n\n        this.leftTextSelector.redraw();\n        this.rightTextSelector.redraw();\n\n        this.setLeftIndex(leftIndex);\n        this.setRightIndex(rightIndex);\n    }\n\n    setLeftIndex(index) {\n        this.leftTextSelector.setIndex(index);\n        this.diffWidget.setLeftText(this.versions[index]);\n    }\n\n    setRightIndex(index) {\n        this.rightTextSelector.setIndex(index);\n        this.diffWidget.setRightText(this.versions[index]);\n    }\n\n    onMount() {\n        this.deleteArticleModal = <DeleteArticleModal article={this.getArticle()}/>;\n\n        if (ArticleEditor.DiffWidgetClass) {\n            this.tabArea.titleArea.children[1].addClickListener(() => {\n                this.versions[0] = this.markupEditor.getValue();\n                this.setLeftIndex(this.leftTextSelector.getIndex());\n                this.setRightIndex(this.rightTextSelector.getIndex());\n                //this.diffWidget.diffGutterPanel.scroll();\n            });\n\n            let updateEditable = () => {\n                this.leftEditable = (this.leftTextSelector.getIndex() === 0);\n                this.rightEditable = (this.rightTextSelector.getIndex() === 0);\n                this.diffWidget.setLeftEditable(this.leftEditable);\n                this.diffWidget.setRightEditable(this.rightEditable);\n            };\n\n            this.leftTextSelector.addChangeListener(() => {\n                this.diffWidget.setLeftText(this.versions[this.leftTextSelector.getIndex()]);\n                updateEditable();\n            });\n\n            this.rightTextSelector.addChangeListener(() => {\n                this.diffWidget.setRightText(this.versions[this.rightTextSelector.getIndex()]);\n                updateEditable();\n            });\n\n            this.setLeftIndex(0);\n            this.setRightIndex(1);\n\n            //this.diffWidget.diffGutter.redraw();\n        }\n\n        window.onbeforeunload = () => {\n            // Are you sure you want to close the page?\n            return \"\";\n        }\n    }\n}\n\nexport {ArticleEditor};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nexport class UserReactionCollection extends StoreObject {\n    getUserReactionStore() {\n        return this.getStore().getState().getStore(\"UserReaction\");\n    }\n\n    // TODO should be done as generator? Clearly needs to have indexed data!\n    getReactions() {\n        let reactions = [];\n        for (let reaction of this.getUserReactionStore().all()) {\n            if (reaction.collectionId == this.id) {\n                reactions.push(reaction);\n            }\n        }\n        return reactions;\n    }\n\n    getCurrentUserReaction() {\n        let currentUser = window.USER;\n        for (const userReaction of this.getReactions()) {\n            if (userReaction.userId == currentUser.id) {\n                return userReaction;\n            }\n        }\n        return null;\n    }\n\n    getCurrentUserReactionType() {\n        const currentUserReaction = this.getCurrentUserReaction();\n        return currentUserReaction && currentUserReaction.type;\n    }\n}\n\nexport class UserReaction extends StoreObject {\n}\n\nexport let UserReactionCollectionStore = new GenericObjectStore(\"UserReactionCollection\", UserReactionCollection);\nexport let UserReactionStore = new GenericObjectStore(\"UserReaction\", UserReaction);","import {Ajax} from \"Ajax\";\nimport {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {AjaxFetchMixin, VirtualStoreObjectMixin, VirtualStoreMixin} from \"StoreMixins\";\nimport {PublicUserStore} from \"UserStore\";\nimport {UserReactionCollectionStore} from \"UserReactionStore\";\nimport {MarkupParser} from \"MarkupParser\";\nimport {ServerTime, StemDate} from \"Time\";\nimport {NOOP_FUNCTION} from \"Utils\";\n\nclass MessageInstance extends VirtualStoreObjectMixin(StoreObject) {\n    constructor(obj, event) {\n        super(obj, event);\n\n        PublicUserStore.fakeCreate(event.user);\n    }\n\n    getNormalizedId() {\n        // TODO: Pretty bad implementation, works though\n        let messageId = this.id + \"\";\n        if (messageId.startsWith(\"temp-\")) {\n            messageId = messageId.substr(5);\n        }\n        return parseInt(messageId);\n    }\n\n    getDate() {\n        return this.timeAdded;\n    }\n\n    getUser() {\n        let user = PublicUserStore.get(this.userId);\n        if (user) {\n            return user.username;\n        }\n        return \"user-\" + this.userId;\n    }\n\n    getContent() {\n        return this.content;\n    }\n\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getReactionCollection(fakeIfMissing=false) {\n        let reactionCollection = UserReactionCollectionStore.get(this.reactionCollectionId);\n        if (fakeIfMissing && !reactionCollection) {\n            return {\n                upvotesCount: 0,\n                downvotesCount: 0,\n                getCurrentUserReactionType() {},\n            };\n        }\n        return reactionCollection;\n    }\n\n    getNumLikes() {\n        return this.getReactionCollection(true).upvotesCount;\n    }\n\n    getNumDislikes() {\n        return this.getReactionCollection(true).downvotesCount;\n    }\n\n    getVotesBalance() {\n        return this.getNumLikes() - this.getNumDislikes();\n    }\n\n    getUserVote() {\n        return this.getReactionCollection(true).getCurrentUserReactionType();\n    }\n\n    getPreviousMessage() {\n        // TODO: this should be cached and kept by the message thread\n        let ans = null;\n        let currentId = this.getNormalizedId();\n        // If message has temporary id, then it is identical with the previous message id, so instead the\n        // previous previous message would be found instead.\n        if (this.hasTemporaryId()) {\n            currentId += 1;\n        }\n        for (let message of this.getMessageThread().getMessages()) {\n            if (message.id < currentId && (!ans || ans.id < message.id)) {\n                ans = message;\n            }\n        }\n        return ans;\n    }\n\n    getNextMessage() {\n        throw \"Implement me!\";\n    }\n\n    hasMarkupEnabled() {\n        return this.getMessageThread().hasMarkupEnabled();\n    }\n\n    getTimeOfDay() {\n        return StemDate.unix(this.timeAdded).format(\"HH:mm\");\n    }\n\n    edit(content, onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            message: content,\n        }).then(onSuccess, onError);\n    }\n\n    react(reaction, onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            reaction: reaction,\n        }).then(onSuccess, onError);\n    }\n\n    like(onSuccess, onError) {\n        this.react(\"like\", onSuccess, onError);\n    }\n\n    dislike(onSuccess, onError) {\n        this.react(\"dislike\", onSuccess, onError);\n    }\n\n    resetReaction(onSuccess, onError) {\n        this.react(\"resetReaction\", onSuccess, onError);\n    }\n\n    deleteMessage(onSuccess, onError) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            hidden: true,\n        }).then(onSuccess, onError);\n    }\n\n    applyEvent(event) {\n        if (event.type === \"messageEdit\") {\n            Object.assign(this, event.data);\n            this.dispatch(\"edit\", event);\n        } else if (event.type === \"reaction\") {\n            Object.assign(this, event.data);\n            this.dispatch(\"reaction\", event);\n        } else if (event.type === \"messageDelete\") {\n            this.dispatch(\"delete\", event);\n            this.getMessageThread().deleteMessageInstance(this);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n\n    updateId(newId) {\n        if (this.id == newId) {\n            return;\n        }\n        let oldId = this.id;\n        super.updateId(newId);\n        let messageThread = this.getMessageThread();\n        messageThread.messages.delete(oldId);\n        messageThread.messages.set(this.id, this);\n    }\n\n    setPostError(postError) {\n        this.postError = postError;\n        this.dispatch(\"postError\", postError);\n        console.log(\"Post error: \", postError);\n    }\n}\n\nclass MessageThread extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.messages = new Map();\n        // TODO: for now don't register for private chats, you get them as user events\n        // TODO: don't change the global here, you fool!\n        if (!this.streamName.startsWith(\"messagethread-privatechat-\")) {\n            GlobalState.registerStream(this.streamName);\n        }\n        this.online = new Set(this.online || []);\n        this.online.delete(0);\n    }\n\n    hasMarkupEnabled() {\n        return this.markupEnabled || false;\n    }\n\n    addMessageInstance(messageInstance, event) {\n        this.messages.set(messageInstance.id, messageInstance);\n        this.dispatch(\"newMessage\", event);\n    }\n\n    deleteMessageInstance(messageInstance) {\n        this.messages.delete(messageInstance.id);\n    }\n\n    applyEvent(event) {\n        if (event.data.online) {\n            this.online = event.data.online = new Set(event.data.online);\n            this.online.delete(0);\n        }\n        if (event.type === \"online\") {\n            this.dispatch(\"usersChanged\", event);\n        } else if (event.type === \"onlineDeltaJoined\") {\n            if (event.data.userId != 0) {\n                this.online.add(event.data.userId);\n            }\n\n            this.dispatch(\"usersChanged\", event);\n        } else if (event.type === \"onlineDeltaLeft\") {\n            if (event.data.userId != 0) {\n                this.online.delete(event.data.userId);\n            }\n\n            this.dispatch(\"usersChanged\", event);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n\n    getMessages(orderDescending=false) {\n        // TODO: should be also as iterable\n        let messages = Array.from(this.messages.values());\n        if (orderDescending) {\n            return messages.sort((a, b) => {return b.id - a.id});\n        }\n        return messages.sort((a, b) => {return a.id - b.id});\n    }\n\n    getNumMessages() {\n        return this.messages.size;\n    }\n\n    getMaxMessageId() {\n        let value = 0;\n        for (let messageInstance of this.messages.values()) {\n            if (!messageInstance.hasTemporaryId() && messageInstance.id > value) {\n                value = messageInstance.id;\n            }\n        }\n        return value;\n    }\n\n    // This method will return the last message of the message thread,\n    // regardless of whether it is virtual or real.\n    getLastMessage() {\n        let lastMessage = null;\n        for (let messageInstance of this.messages.values()) {\n            if (!lastMessage || lastMessage.getNormalizedId() < messageInstance.getNormalizedId() ||\n                    (lastMessage.getNormalizedId() === messageInstance.getNormalizedId() && messageInstance.hasTemporaryId())) {\n                lastMessage = messageInstance;\n            }\n        }\n        return lastMessage;\n    }\n}\n\nclass MessageInstanceStoreClass extends VirtualStoreMixin(GenericObjectStore) {\n    constructor() {\n        super(\"MessageInstance\", MessageInstance, {dependencies: [\"messagethread\", \"publicuser\"]});\n    }\n\n    createVirtualMessageInstance(messageContent, messageThread, temporaryId) {\n        let virtualMessageInstance = {\n            content: messageContent,\n            temporaryId: temporaryId,\n            id: \"temp-\" + temporaryId,\n            timeAdded: ServerTime.now().toUnix(),\n            userId: parseInt(USER.id),\n            messageThreadId: messageThread.id,\n            meta: {},\n        };\n\n        return this.fakeCreate(virtualMessageInstance, \"virtualMessage\");\n    };\n}\n\nvar MessageInstanceStore = new MessageInstanceStoreClass();\n\nMessageInstanceStore.addCreateListener((messageInstance, createEvent) => {\n    messageInstance.getMessageThread().addMessageInstance(messageInstance, createEvent);\n});\n\n\nvar MessageThreadStore = new GenericObjectStore(\"messagethread\", MessageThread);\n\nclass BaseChatObject extends StoreObject {\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getOnlineUserIds() {\n        return this.getMessageThread().online;\n    }\n}\n\nclass GroupChat extends BaseChatObject {\n}\n\nvar GroupChatStoreClass = AjaxFetchMixin(GenericObjectStore);\n\nvar GroupChatStore = new GroupChatStoreClass(\"groupChat\", GroupChat, {\n    fetchURL: \"/chat/group_chat_state/\",\n    maxFetchObjectCount: 1,\n});\n\nGroupChatStore.getFetchRequestData = function (ids, fetchJobs) {\n    return {\n        chatId: ids[0],\n    };\n};\n\nclass PrivateChat extends BaseChatObject {\n    getOtherUserId() {\n        return (USER.id === this.user1Id ? this.user2Id : this.user1Id);\n    }\n}\n\nvar PrivateChatStore = new GenericObjectStore(\"PrivateChat\", PrivateChat, {\n});\n\nPrivateChatStore.getChatWithUser = function(userId) {\n    let myUserId = USER.id;\n    if (myUserId === userId) {\n        for (let privateChat of this.all()) {\n            if (privateChat.user1Id === userId && privateChat.user2Id === userId) {\n                return privateChat;\n            }\n        }\n        return null;\n    }\n    for (let privateChat of this.all()) {\n        if (privateChat.user1Id === userId || privateChat.user2Id === userId) {\n            return privateChat;\n        }\n    }\n};\n\nPrivateChatStore.fetchForUser = function (userId, onSuccess, onError) {\n    Ajax.postJSON(\"/chat/private_chat_state/\", {\n        userId: userId,\n    }).then(\n        (data) => onSuccess(PrivateChatStore.get(data.privateChatId)),\n        onError\n    );\n};\n\nPrivateChatStore.addListener(\"update\", (obj, event) => {\n    if (event.type === \"privateMessage\") {\n        GlobalState.importState(event.state);\n    }\n});\n\nexport {MessageInstance, MessageInstanceStore, MessageThread, MessageThreadStore, PrivateChatStore, GroupChatStore};\n","import {UI, FloatingWindow, Direction, Panel, Button} from \"UI\";\nimport {Device} from \"Device\";\n\nexport class BasePopup extends FloatingWindow {\n    getDefaultOptions() {\n        let options = super.getDefaultOptions();\n        options.x = 0;\n        options.y = 0;\n        options.contentPadding = \"7px\";\n        options.contentStyle = {};\n        options.arrowDirection = Direction.UP;\n        options.arrowColor = \"white\";\n        options.backgroundColor = \"white\";\n        return options;\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.style = Object.assign({\n            boxShadow: \"0px 0px 4px rgba(0,0,0,0.5)\",\n            borderRadius: \"5px\",\n            display: \"table\",\n            maxWidth: \"350px\",\n            backgroundColor: this.options.backgroundColor,\n            position: \"absolute\",\n            left: (this.options.x) + \"px\",\n            top: (this.options.y) + \"px\",\n            zIndex: \"3\",\n            right: \"0px\"\n        }, this.options.style);\n        this.createArrowStyle();\n    }\n\n    setContent(content) {\n        this.options.children = content;\n        this.redraw();\n    }\n\n    getContent() {\n        return <div style={Object.assign({padding: this.options.contentPadding}, this.options.contentStyle)} ref=\"contentArea\">\n                {this.options.children}\n            </div>;\n    }\n\n    createArrowStyle() {\n        let baseArrowOutline = {\n            \"left\": \"50%\",\n            \"z-index\": \"-3\",\n            \"position\": \"absolute\",\n            \"width\": \"0\",\n            \"height\": \"0\",\n            \"border-left\": \"10px solid transparent\",\n            \"border-right\": \"10px solid transparent\",\n            marginLeft: \"-11px\"\n        };\n\n        this[\"arrow\" + Direction.UP + \"Outline\"] = Object.assign({\n            \"border-bottom\": \"10px solid #C8C8C8\",\n            \"margin-top\": \"-10.8px\",\n            marginLeft: \"-11px\"\n        }, baseArrowOutline);\n\n        this[\"arrow\" + Direction.DOWN + \"Outline\"] = Object.assign({\n            \"border-top\": \"10px solid #C8C8C8\",\n            \"margin-top\": \"2px\"\n        }, baseArrowOutline);\n\n        let baseArrow = {\n            \"left\": \"50%\",\n            \"position\": \"absolute\",\n            \"width\": \"0\",\n            \"height\": \"0\",\n            \"border-left\": \"10px solid transparent\",\n            \"border-right\": \"10px solid transparent\",\n        };\n\n        this[\"arrow\" + Direction.UP] = Object.assign({\n            \"margin-top\": \"-10px\",\n            \"border-bottom\": \"10px solid \" + this.options.arrowColor\n        }, baseArrow);\n\n        this[\"arrow\" + Direction.DOWN] = Object.assign({\n            \"border-top\": \"10px solid \" + this.options.arrowColor\n        }, baseArrow);\n    }\n\n    getArrow() {\n        let direction = this.options.arrowDirection;\n        return [\n            <Panel ref=\"popupArrow\" style={this[\"arrow\" + direction]}/>,\n            <Panel ref=\"popupArrowOutline\" style={this[\"arrow\" + direction + \"Outline\"]} />\n        ];\n    }\n\n    render() {\n        return (this.options.arrowDirection === Direction.UP) ?\n            [this.getArrow(), this.getContent()] :\n            [this.getContent(), this.getArrow()];\n    }\n\n    bindInsideParent() {\n        if (this.target) {\n            this.options.x = this.target.offsetWidth / 2;\n            this.options.y = (this.options.arrowDirection === Direction.UP ? this.target.offsetHeight : 0);\n        }\n        let left = parseFloat(this.options.x);\n        let top = parseFloat(this.options.y) + (this.options.arrowDirection === Direction.UP ? 11 : - this.getHeight() - 11);\n        let arrowMargin = -11;\n        left -= this.getWidth() / 2;\n        if (this.target) {\n            if (this.node.offsetParent) {\n                let left2 = left + this.node.offsetParent.offsetLeft;\n                if (left2 < 0) {\n                    left -= left2 - 2;\n                    arrowMargin += left2 + 2;\n                } else if (left2 + this.getWidth() > this.node.offsetParent.offsetParent.offsetWidth) {\n                    let delta = this.node.offsetParent.offsetParent.offsetWidth - (left2 + this.getWidth());\n                    arrowMargin -= delta - 2;\n                    left += delta - 2;\n                }\n            }\n        } else {\n            if (left < 0) {\n                arrowMargin += left + 2;\n                left = 2;\n            } else if (left + this.getWidth() > this.parentNode.offsetWidth) {\n                let delta = left + this.getWidth() - this.parentNode.offsetWidth;\n                arrowMargin += delta;\n                left -= delta;\n            }\n        }\n        this.popupArrow.setStyle(\"margin-left\", arrowMargin + \"px\");\n        this.popupArrowOutline.setStyle(\"margin-left\", arrowMargin + \"px\");\n        this.setStyle(\"left\", left + \"px\");\n        this.setStyle(\"top\", top + \"px\");\n    }\n\n    setParent(parent) {\n        let newParent;\n        if (parent instanceof HTMLElement) {\n            newParent = parent;\n        } else {\n            newParent = parent.node;\n        }\n        if (newParent === this.parentNode) {\n            return;\n        }\n        if (this.isInDocument()) {\n            this.parentNode.removeChild(this.node);\n            newParent.appendChild(this.node);\n            this.setParentNode(newParent);\n        } else {\n            this.setParentNode(newParent);\n        }\n    }\n\n    setCenter(center, manual=false) {\n        this.options.x = center.x;\n        this.options.y = center.y;\n        if (manual) {\n            setTimeout(() => {\n                this.bindInsideParent();\n            }, 0);\n        } else {\n            this.bindInsideParent();\n        }\n    }\n\n    onMount() {\n        if(this.options.target) {\n            if (this.options.target instanceof HTMLElement) {\n                this.target = this.options.target;\n            } else {\n                this.target = this.options.target.node;\n            }\n            this.options.x = this.target.offsetWidth / 2;\n            this.options.y = this.target.offsetHeight;\n        }\n        super.onMount();\n        // Set the Popup inside the parent\n        this.bindInsideParent();\n    }\n}\n\nexport class Popup extends BasePopup {\n    getDefaultOptions() {\n        let options = super.getDefaultOptions();\n        options.titleFontSize = \"12pt\";\n        options.contentFontSize = \"10pt\";\n        options.arrowColor = \"#F3F3F3\";\n        return options;\n    }\n\n    getContent() {\n        let contentArea = super.getContent();\n        contentArea.options.style = Object.assign({\n            fontSize: this.options.contentFontSize\n        }, contentArea.options.style || {});\n\n        return [<Panel ref=\"titleArea\" style={{backgroundColor: \"#F3F3F3\", paddingLeft: \"20px\", fontSize: this.options.titleFontSize,\n                fontWeight:\"bold\", paddingTop: \"6px\", paddingBottom: \"6px\", textAlign: \"center\",\n                borderBottom: \"1px solid #BEBEBE\"}}>\n                {this.getTitleAreaContent()}\n            </Panel>,\n            contentArea,\n        ];\n    }\n\n    setTitle(newTitle) {\n        this.options.title = newTitle;\n        this.redraw();\n    }\n\n    getTitleAreaContent() {\n        return [<Button className=\"pull-right\" ref=\"closeButton\" style={{backgroundColor:\"transparent\",border: \"none\", color: \"#888888\", fontSize:\"18pt\", padding:\"2px\", marginRight:\"3px\", marginTop:\"-12px\"}} label=\"\"/>,\n            <div style={{marginRight: \"25px\"}}>{this.options.title}</div>\n        ];\n    }\n\n    bindWindowListeners() {\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n\n        let documentListener = () => {\n            this.hide();\n            if (!Device.supportsEvent(\"click\")) {\n                document.removeEventListener(\"touchstart\", documentListener);\n            } else {\n                document.removeEventListener(\"click\", documentListener);\n            }\n        };\n        if (!Device.supportsEvent(\"click\")) {\n            document.addEventListener(\"touchstart\", documentListener);\n        } else {\n            document.addEventListener(\"click\", documentListener);\n        }\n\n    }\n\n    show() {\n        super.show();\n        this.bindWindowListeners();\n    }\n\n    redraw() {\n        if (this.isInDocument()) {\n            this.bindInsideParent();\n        }\n        super.redraw();\n    }\n\n    onMount() {\n        super.onMount();\n\n        // fake a click event that will propagate to window and trigger\n        // the events of any other popup, closing them\n        let fakeClickEvent = document.createEvent(\"MouseEvents\");\n        fakeClickEvent.initEvent(\"click\", true, false);\n        document.body.dispatchEvent(fakeClickEvent);\n\n        // Make the popup close when something else is clicked\n        this.bindWindowListeners();\n\n        // Close button behavior\n        this.closeButton.addClickListener(() => {\n            this.hide();\n            this.closeButton.node.blur();\n        });\n        let closeButtonColor = this.closeButton.options.style.color;\n        this.closeButton.addNodeListener(\"mouseover\", () => {\n            this.closeButton.setStyle(\"color\", \"#0082AD\");\n        });\n        this.closeButton.addNodeListener(\"mouseout\", () => {\n            this.closeButton.setStyle(\"color\", closeButtonColor);\n        });\n    }\n}\n","import {UI, Button, Link, Modal, Level, Size, Direction} from \"UI\";\nimport {MarkupEditor} from \"./MarkupEditor\";\nimport {BasePopup} from \"../Popup\";\n// import {Emoji as EmojiMini} from \"EmojiMini\";\n// import \"EmojiUI\";\n\nUI.Emoji = UI.Emoji || UI.Element;\n\nclass ClickableEmote extends UI.Emoji {\n    redraw() {\n        this.redrawTimeout = setTimeout(()=> super.redraw());\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            const textBox = this.options.textBox;\n            if (textBox) {\n                textBox.appendValue(this.getValueText(), \" \");\n            }\n            if (this.options.afterClick) {\n                this.options.afterClick();\n            }\n        });\n    }\n\n    onUnmount() {\n        clearTimeout(this.redrawTimeout);\n    }\n}\n\nclass ClickableEmoji extends ClickableEmote {\n    getValueText() {\n        return \":\" + this.options.value + \":\";\n    }\n}\n\nclass ClickableTwitchEmote extends ClickableEmote {\n    getValueText() {\n        return this.options.value;\n    }\n}\n\nclass EmojiButton extends Button {\n    getPopup() {\n        const textBox = this.options.getTextBox();\n        const afterClick = () => this.closePopup();\n        let emotesList = [];\n        for (let emoji in EmojiMini.EMOJI) {\n            emotesList.push(<ClickableEmoji textBox={textBox} afterClick={afterClick} value={emoji}/>);\n        }\n        for (let twitchEmoji in EmojiMini.TWITCH_EMOTICONS) {\n            emotesList.push(<ClickableTwitchEmote textBox={textBox} afterClick={afterClick} value={twitchEmoji}/>);\n        }\n        return BasePopup.create(this.parent, {\n                target: this,\n                children: emotesList,\n                arrowDirection: Direction.DOWN,\n                style: {\n                    display: \"flex\",\n                    overflow: \"auto\",\n                    height: \"300px\",\n                    width: \"300px\",\n                }\n            });\n    }\n\n    closePopup() {\n        if (this.emojiPopup) {\n            this.emojiPopup.destroyNode();\n            delete this.emojiPopup;\n        }\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            if (this.emojiPopup) {\n                this.closePopup();\n            } else {\n                this.emojiPopup = this.getPopup();\n            }\n        })\n    }\n\n    onUnmount() {\n        this.closePopup();\n    }\n}\n\nclass MarkupEditorModal extends Modal {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions(), {\n            height: \"85%\",\n            width: \"80%\",\n            destroyOnHide: false\n        });\n    }\n\n    getMarkupEditorStyle() {\n        return {\n            height: \"85%\",\n            border: \"solid 5px #DDD\",\n            borderRadius: \"10px\"\n        };\n    }\n\n    getButtonStyle() {\n        return {\n            margin: \"5px\"\n        }\n    }\n\n    getGivenChildren() {\n        return [\n            <MarkupEditor ref={this.refLink(\"markupEditor\")} classMap={this.options.classMap} showButtons={false} style={this.getMarkupEditorStyle()}/>,\n            <div ref={this.refLink(\"buttonPanel\")} style={{\"text-align\": \"center\"}} >\n                <Button ref=\"graphExample\" label=\"Graph\"\n                           onClick={() => {this.appendGraphExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"submissionExample\" label=\"Submission\"\n                           onClick={() => {this.appendSubmissionExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"codeSnippetExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Code\"\n                           onClick={() => {this.appendCodeExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"linkExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Link\"\n                           onClick={() => {this.appendLinkExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"latexExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"LaTeX\"\n                           onClick={() => {this.appendLatexExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref={this.refLink(\"doneButton\")} level={Level.PRIMARY} label=\"Done\"\n                           className=\"pull-right\" style={this.getButtonStyle()}/>\n            </div>,\n            //<span ref={this.refLink(\"emotesContainer\")} style={{float: \"left\", position: \"relative\", margin: \"5px\"}}>\n            //    <EmojiButton ref=\"emotes\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Emoticons\" getTextBox={() => this.markupEditor}/>\n            //</span>\n            //<Button ref=\"userExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"User\"\n            //           onClick={() => {this.appendUserExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n            <div className=\"\" style={{\"position\":\"absolute\", \"width\":\"90%\", \"margin-top\":\"45px\"}}>\n                <Link href=\"/about/#markup\" value=\"More details here\" />\n            </div>\n        ];\n    }\n\n    appendLatexExample() {\n        this.markupEditor.appendValue(\"$$lim_{x\\\\to\\\\infty} f(x)$$\");\n    }\n\n    appendGraphExample() {\n        this.markupEditor.appendValue(\"<Graph nodes={[{}, {}, {}]} edges={[{source:1, target:2}]} directed />\");\n    }\n\n    appendSubmissionExample() {\n        this.markupEditor.appendValue(\"<Submission id={25717} />\");\n    }\n\n    appendCodeExample() {\n        this.markupEditor.appendValue(\n            \"```java\\n\" +\n            \"class Main {\\n\" +\n            \"    public static void main (String[] args) throws java.lang.Exception {\\n\" +\n            \"        System.out.println(\\\"42\\\");\\n\" +\n            \"    }\\n\" +\n            \"}\\n\" +\n            \"```\");\n    }\n\n    appendUserExample() {\n        this.markupEditor.appendValue(\"<User id={1} />\");\n    }\n\n    appendLinkExample() {\n        this.markupEditor.appendValue(\"<Link href=\\\"https://csacademy.com\\\" value=\\\"Cool website\\\" newTab/>\");\n    }\n\n    hide() {\n        super.hide();\n        if (this.options.hideCallback) {\n            this.options.hideCallback(this);\n        }\n    }\n\n    show() {\n        super.show();\n        if (this.options.showCallback) {\n            this.options.showCallback(this);\n        }\n    }\n\n    onMount() {\n        super.onMount();\n        this.doneButton.addClickListener(() => {\n            this.hide();\n        });\n    }\n}\n\nexport {MarkupEditorModal};\n","import {UI} from \"UI\";\nimport {MarkupClassMap, MarkupRenderer} from \"markup/MarkupRenderer\";\n\nclass ChatMarkupRenderer extends MarkupRenderer {\n    setOptions(options) {\n        options.classMap = this.constructor.classMap;\n        super.setOptions(options);\n    }\n}\n\nChatMarkupRenderer.classMap = new MarkupClassMap(MarkupClassMap.GLOBAL);\n\nexport {ChatMarkupRenderer};\n","import {Dispatchable} from \"./Dispatcher\";\n\nclass ScriptResolver extends Dispatchable {\n    constructor(scriptPath) {\n        super();\n        this.loaded = false;\n        this.jobs = [];\n        // TODO: should be more thought out\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.async = true;\n        scriptElement.src = scriptPath;\n        scriptElement.onload = () => this.onLoad();\n        // TODO: what about error?\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    onLoad() {\n        this.loaded = true;\n        for (let i = 0; i < this.jobs.length; i += 1) {\n            this.jobs[i](this);\n        }\n        this.jobs = [];\n    }\n\n    resolve(callback) {\n        if (this.loaded) {\n            callback(this);\n            return;\n        }\n        this.jobs.push(callback);\n    }\n}\n\nlet scriptResolveMap = new Map();\n\nfunction ensureSingle(script) {\n    let scriptResolver = scriptResolveMap.get(script);\n    if (!scriptResolver) {\n        scriptResolver = new ScriptResolver(script);\n        scriptResolveMap.set(script, scriptResolver);\n    }\n    return new Promise(function(resolve, reject) {\n        scriptResolver.resolve(resolve, reject);\n    });\n}\n\nfunction ensure(scripts, callback) {\n    if (!Array.isArray(scripts)) {\n        scripts = [scripts];\n    }\n    let promises = scripts.map(script => ensureSingle(script));\n    Promise.all(promises).then(function () {\n        callback(...arguments);\n    })\n}\n\nexport {ensure};\n","import {StoreObject, GenericObjectStore} from \"Store\";\n\nimport {Language} from \"./LanguageStore\";\n\n\nclass TranslationKey extends StoreObject {\n}\n\nexport const TranslationKeyStore = new GenericObjectStore(\"TranslationKey\", TranslationKey);\n\nclass TranslationEntry extends StoreObject {\n    getLanguage() {\n        return Language.get(this.languageId);\n    }\n\n    getTranslationKey() {\n        return TranslationKeyStore.get(this.translationKeyId);\n    }\n}\n\nexport const TranslationEntryStore = new GenericObjectStore(\"TranslationEntry\", TranslationEntry);\n\nLanguage.addListener(\"buildTranslationMap\", (language) => {\n    for (let translationEntry of TranslationEntryStore.all()) {\n        if (translationEntry.languageId === language.id) {\n            language.translationMap.set(translationEntry.getTranslationKey().value, translationEntry.value);\n        }\n    }\n});\n","import {GenericObjectStore, StoreObject} from \"Store\";\nimport {TranslationKeyStore} from \"TranslationStore\";\n\nclass ErrorMessage extends StoreObject {\n    getTranslation() {\n        let translationKey = TranslationKeyStore.get(this.translationKeyId);\n    }\n}\n\nclass ErrorMessageStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"ErrorMessage\", ErrorMessage);\n    }\n}\n\nlet ErrorMessageStore = new ErrorMessageStoreClass();\n\nexport {ErrorMessageStore, ErrorMessage};\n","import {UI, ErrorModal} from \"UI\";\nimport {StoreObject} from \"Store\";\nimport {ErrorMessageStore, ErrorMessage} from \"ErrorMessageStore\";\n\nconst ErrorHandlers = {};\n\nErrorHandlers.wrapError = (error) => {\n    if (error instanceof StoreObject) {\n        return error;\n    }\n\n    if (error.id) {\n        return ErrorMessageStore.fakeCreate(error);\n    } else {\n        if (typeof error === \"string\" || error instanceof String) {\n            error = {message: error};\n        } else if (error instanceof Error) {\n            error = {\n                name: error.name,\n                message: error.message\n            };\n        }\n        return new ErrorMessage(error);\n    }\n};\n\nErrorHandlers.showErrorAlert = (error) => {\n    ErrorModal.show({\n        error: ErrorHandlers.wrapError(error)\n    });\n};\n\nErrorHandlers.PAGE_NOT_FOUND = ErrorHandlers.wrapError(\"Page not found.\");\n\nexport {ErrorHandlers};\n","import {Ajax} from \"Ajax\";\nimport {Dispatchable} from \"Dispatcher\";\n\nclass SocialAccountManager extends Dispatchable {\n    constructor(socialApp, options) {\n        super();\n        this.socialApp = socialApp;\n        this.options = options;\n    }\n\n    getSocialApp() {\n        return this.socialApp;\n    }\n\n    getClientId() {\n        return this.getSocialApp().getClientId();\n    }\n\n    setLoaded() {\n        this.loaded = true;\n        this.dispatch(\"loaded\");\n    }\n\n    static getInstance() {\n        if (!this._Global) {\n            this._Global = new this();\n        }\n        return this._Global;\n    }\n\n    // TODO: all managers should call the onError function (if one is passed in) to report issues\n    static login(callback, onError) {\n        this.getInstance().login(...arguments);\n    }\n\n    static connect(callback, onError) {\n        this.getInstance().connect(...arguments);\n    }\n}\n\nexport {SocialAccountManager};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nexport class SocialApp extends StoreObject {\n    getClientId() {\n        return this.clientId;\n    }\n}\n\nclass SocialAppStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"SocialApp\", SocialApp);\n    }\n\n    getSocialApps() {\n        return this.all();\n    }\n\n    getSocialAppByName(name) {\n        return this.all().find(socialApp => socialApp.name === name);\n    }\n}\n\nexport let SocialAppStore = new SocialAppStoreClass();\n","import {Ajax} from \"Ajax\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {NOOP_FUNCTION} from \"Utils\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\nimport {SocialAppStore} from \"SocialAppStore\";\n\nclass GoogleManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Google\"), {\n            loginByTokenUrl: \"/accounts/google/login/token/\",\n        });\n        this.ensureScriptNodeExists();\n    }\n\n    sendData(url, data, onSuccess=NOOP_FUNCTION) {\n        Ajax.postJSON(url, data).then(onSuccess);\n    }\n\n    ensureScriptNodeExists() {\n        const id = \"google-jsapi\";\n        if (document.getElementById(id)) {\n            return;\n        }\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.id = id;\n        scriptElement.async = true;\n        scriptElement.onload = () => {\n            gapi.load(\"auth2\", () => {\n                gapi.auth2.init({\n                    client_id: this.getClientId(),\n                }).then(() => {\n                    // Handle the initial sign-in state.\n                    // this.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n                    this.updateSigninStatus(this.getGoogleAuth().isSignedIn.get());\n\n                    // Listen for sign-in state changes.\n                    // gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus);\n                    this.getGoogleAuth().isSignedIn.listen(this.updateSigninStatus);\n\n                    this.setLoaded();\n                });\n            });\n        };\n        scriptElement.src = \"https://apis.google.com/js/platform.js\";\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    getGoogleAuth() {\n        return gapi.auth2.getAuthInstance();\n    }\n\n    getGoogleUser() {\n        return this.getGoogleAuth().currentUser.get();\n    }\n\n    getAuthResponse() {\n        return this.getGoogleUser().getAuthResponse();\n    }\n\n    updateSigninStatus(isSignedIn) {\n        if (isSignedIn) {\n            console.log(\"Google user is signed in\");\n        }\n    }\n\n    handleProcess(process) {\n        if (!this.loaded) {\n            this.addListenerOnce(\"loaded\", () => this.handleProcess(process));\n            return;\n        }\n        this.getGoogleAuth().grantOfflineAccess({\n            redirect_uri: \"postmessage\",\n            immediate: false,\n        }).then((data) => {\n            Object.assign(data, {\n                process: process,\n            });\n            this.sendData(this.options.loginByTokenUrl, data, () => self.location.reload());\n        });\n    }\n\n    login() {\n        this.handleProcess(\"login\");\n    }\n\n    connect() {\n        this.handleProcess(\"connect\")\n    }\n}\n\nexport {GoogleManager};\n","import {Ajax} from \"Ajax\";\nimport {Dispatchable} from \"Dispatcher\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\nimport {SocialAppStore} from \"SocialAppStore\";\n\nclass FacebookManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Facebook\"), {\n            version: \"v2.7\",\n            loginByTokenUrl: \"/accounts/facebook/login/token/\",\n            loginOptions: {\n                auth_type: \"rerequest\",\n                scope: \"email\"\n            },\n            logoutUrl: \"/accounts/logout/\",\n            // TODO: should probably look at https://www.facebook.com/translations/FacebookLocales.xml and Language.Locale\n            locale: \"en_US\",\n        });\n        this.ensureScriptNodeExists();\n    }\n\n    sendData(url, data) {\n        Ajax.postJSON(url, data).then(\n            (data) => {\n                if (data.next) {\n                    self.location.href = data.next;\n                } else {\n                    location.reload();\n                }\n            },\n            (error) => {\n                this.dispatch(\"loginError\", error);\n            }\n        );\n    }\n\n    ensureScriptNodeExists() {\n        self.fbAsyncInit = () => {\n            FB.init({\n                appId: this.getClientId(),\n                version: this.options.version,\n                status: true,\n                cookie: true,\n                xfbml: true\n            });\n\n            this.setLoaded();\n        };\n\n        const id = \"facebook-jssdk\";\n        if (document.getElementById(id)) {\n            return;\n        }\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.id = id;\n        scriptElement.async = true;\n        scriptElement.src = \"//connect.facebook.net/\" + this.options.locale + \"/sdk.js\";\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    onLoginCanceled(response) {\n    }\n\n    onLoginError(response) {\n    }\n\n    onLoginSuccess(response, nextUrl, process) {\n        let data = {\n            next: nextUrl || '',\n            process: process,\n            accessToken: response.authResponse.accessToken,\n            expiresIn: response.authResponse.expiresIn\n        };\n        this.sendData(this.options.loginByTokenUrl, data);\n    }\n\n    logout() {\n        if (!self.FB) {\n            return;\n        }\n        FB.logout((response) => {\n            this.onLogoutSuccess(response, nextUrl);\n        });\n    }\n\n    onLogoutSuccess(response) {\n        if (this.options.logoutUrl) {\n            this.sendData(this.options.logoutUrl, data);\n        }\n    }\n\n    handleProcess(nextUrl, action, process) {\n        if (!this.loaded) {\n            this.addListenerOnce(\"loaded\", () => this.handleProcess(process));\n            return;\n        }\n\n        if (action === \"reauthenticate\") {\n            this.options.loginOptions.auth_type = action;\n        }\n\n        FB.login((response) => {\n            if (response.authResponse) {\n                this.onLoginSuccess(response, nextUrl, process);\n            } else if (response && response.status && [\"not_authorized\", \"unknown\"].indexOf(response.status) > -1) {\n                this.onLoginCanceled(response);\n            } else {\n                this.onLoginError(response);\n            }\n        }, this.options.loginOptions);\n    }\n\n    login(nextUrl, action, process) {\n        this.handleProcess(nextUrl=self.location.pathname, action=\"authenticate\", process=\"login\");\n    }\n\n    connect(nextUrl, action, process) {\n        this.handleProcess(nextUrl=self.location.pathname, action=\"authenticate\", process=\"connect\");\n    }\n}\n\nexport {FacebookManager};\n","import {composeURL} from \"Fetch\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\nimport {SocialAppStore} from \"SocialAppStore\";\n\nclass GithubManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Github\"), {\n            loginWindowOptions: \"height=600,width=800,scrollbars=yes\",\n        });\n    }\n\n    login(callback) {\n        const githubUri = \"https://github.com/login/oauth/authorize\";\n\n        const rawParams = {\n            client_id: this.getClientId(),\n        };\n\n        const uri = composeURL(githubUri, rawParams);\n        const githubWindow = window.open(uri, \"githubWindow\", this.options.loginWindowOptions);\n\n        githubWindow.onbeforeunload = callback;\n    }\n}\n\nexport {GithubManager};\n","import {StoreObject, GenericObjectStore} from \"Store\";\n\nclass Country extends StoreObject {\n    toString() {\n        return this.name;\n    }\n\n    getIsoCode() {\n        return this.isoCode;\n    }\n\n    getEmojiName() {\n        return \"flag_\" + this.getIsoCode().toLowerCase()\n    }\n}\n\nconst ALL_COUNTRIES_PLACEHOLDER = (name) => ({id: 0, name: \"\", toString: () => name || \"All Countries\"});\nconst NO_COUNTRY_PLACEHOLDER = (name) => ({id: -1, name: \"\", toString: () => name || \"None\"});\n\nconst COUNTRY_COMPARATOR = (a, b) => {\n    if (a.name > b.name) {\n        return 1;\n    }\n    return -1;\n};\n\nclass CountryStoreClass extends GenericObjectStore {\n    allWithNone(noneName=\"None\") {\n         return [\n            NO_COUNTRY_PLACEHOLDER(noneName),\n            ...this.all().sort(COUNTRY_COMPARATOR)\n        ];\n    }\n\n    getCountriesFromIds(countriesIds, allCountries=true) {\n        let countries = [];\n        for (let countryId of countriesIds) {\n            countries.push(CountryStore.get(countryId));\n        }\n        let result = countries.sort(COUNTRY_COMPARATOR);\n        if (allCountries) {\n            result.unshift(ALL_COUNTRIES_PLACEHOLDER());\n        }\n        return result;\n    }\n}\n\nconst CountryStore = new CountryStoreClass(\"country\", Country);\n\n\nexport {Country, CountryStore, ALL_COUNTRIES_PLACEHOLDER};\n","import {StyleSheet, styleRule} from \"UI\";\nimport {Device} from \"Device\";\n\n\nlet loginHeight = 500;\nlet registerHeight = 500;\nlet width = 500;\nlet buttonHeight = 60;\nlet fontAwesomeIconHeight = 40;\nlet fontAwesomeIconWidth = 60;\nlet textColor = \"#252525\";\nlet signInButtonHeight = 50;\nlet signInButtonWidth = 120;\n\n\nclass LoginStyle extends StyleSheet {\n    fontFamily = \"lato, open sans\";\n\n    @styleRule\n    loginRegisterSystem = () => {\n        if (Device.isTouchDevice()) {\n            console.log(\"Touch device mode on\");\n            return {\n                position: \"absolute\",\n                height: loginHeight + \"px\",\n                width: width + \"px\",\n                backgroundColor: \"#fff\",\n                maxHeight: \"100%\",\n                maxWidth: \"100%\",\n            };\n        } else {\n            return {\n                maxWidth: \"100%\",\n                height: loginHeight + \"px\",\n                width: width + \"px\",\n                margin: \"0 auto\",\n                backgroundColor: \"#fff\",\n            };\n        }\n    };\n\n    @styleRule\n    loginRegisterButtons = {\n        display: \"inline-block\",\n        float: \"left\",\n        width: \"100%\",\n        height: buttonHeight / loginHeight * 100 + \"%\",\n    };\n\n    @styleRule\n    loginSystemButton = {\n        // height: buttonHeight + \"px\",\n        height: \"100%\",\n        // lineHeight: buttonHeight / loginHeight * 100 + \"%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        fontFamily: this.fontFamily,\n        fontSize: \"100%\",\n        width: \"50%\",\n        backgroundColor: \"#f6f6f6\",\n        color: textColor,\n        border: \"1px solid #d3d5d9\",\n        cursor: \"pointer\",\n        float: \"left\",\n        borderLeft: \"0\",\n        borderTop: \"0\",\n        textTransform: \"uppercase\",\n        fontSize: \"1.1em\",\n    };\n\n    @styleRule\n    registerSystemButton = {\n        // height: buttonHeight + \"px\",\n        height: \"100%\",\n        // lineHeight: buttonHeight / loginHeight * 100 + \"%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        fontFamily: this.fontFamily,\n        fontSize: \"100%\",\n        width: \"50%\",\n        backgroundColor: \"#f6f6f6\",\n        color: textColor,\n        border: \"1px solid #d3d5d9\",\n        cursor: \"pointer\",\n        float: \"left\",\n        borderRight: \"0\",\n        borderTop: \"0\",\n        textTransform: \"uppercase\",\n        fontSize: \"1.1em\",\n    };\n\n    selectedLeft = {\n        borderBottom: \"0\",\n        borderRight: \"0\",\n        backgroundColor: \"#fff\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    selectedLeftClass = {\n        borderBottom: \"0\",\n        borderRight: \"0\",\n        backgroundColor: \"#fff\",\n    };\n\n    selectedRight = {\n        borderBottom: \"0\",\n        borderLeft: \"0\",\n        backgroundColor: \"#fff\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    selectedRightClass = {\n        borderBottom: \"0\",\n        borderLeft: \"0\",\n        backgroundColor: \"#fff\",\n    };\n\n    @styleRule\n    loginWidget = {\n        height: loginHeight - buttonHeight + \"px\",\n        width: width + \"px\",\n        maxWidth: \"100%\",\n        padding: \"5% 10%\",\n        color: textColor,\n        borderTop: \"0px solid #d3d5d9\",\n    };\n\n    @styleRule\n    registerWidget = {\n        height: registerHeight - buttonHeight + \"px\",\n        width: width + \"px\",\n        maxWidth: \"100%\",\n        padding: \"5% 10%\",\n        color: textColor,\n        borderTop: \"0px solid #d3d5d9\",\n    };\n\n    fontAwesomeIcon = {\n        height: fontAwesomeIconHeight + \"px\",\n        lineHeight: fontAwesomeIconHeight + \"px\",\n        width: \"15%\",\n        maxWidth: \"15%\",\n        textAlign: \"center\",\n        fontSize: \"150%\",\n        display: \"inline-block\",\n        float: \"left\",\n        borderTopLeftRadius: \"5px\",\n        borderBottomLeftRadius: \"5px\",\n        borderRight: \"0px solid white\",\n        marginTop: \"20px\",\n    };\n\n    @styleRule\n    input = {\n        width: \"85%\",\n        maxWidth: \"85%\",\n        height: fontAwesomeIconHeight + \"px\",\n        lineHeight: fontAwesomeIconHeight + \"px\",\n        display: \"inline-block\",\n        float: \"left\",\n        borderRadius: \"0\",\n        borderTopRightRadius: \"5px\",\n        borderBottomRightRadius: \"5px\",\n        marginTop: \"20px\",\n        fontWeight: \"bold\",\n        color: textColor,\n        border: \"0px solid #d3d5d9\",\n        borderLeft: \"0px solid white\",\n        boxShadow: \"none\",\n        fontSize: \"85%\",\n        \":focus\": {\n            boxShadow: \"none\",\n            outline: \"none\",\n            border: \"0px solid #d3d5d9\",\n            borderLeft: \"0px solid white\",\n        }\n    };\n\n    @styleRule\n    countrySelect = {\n        width: \"85%\",\n        maxWidth: \"85%\",\n        lineHeight: \"30px\",\n        marginTop: \"30px\",\n        marginBottom: \"10px\",\n    };\n\n    @styleRule\n    badLogin = {\n        height: \"30px\",\n        width: \"100%\",\n        fontSize: \"14px\",\n        color: \"#d80000\",\n        textAlign: \"center\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    rememberMe = {\n        display: \"inline-block\",\n        float: \"left\",\n        paddingLeft: \"5px\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    forgotPassword = {\n        display: \"inline-block\",\n        float: \"right\",\n        fontFamily: this.fontFamily,\n        paddingRight: \"5px\",\n    };\n\n    @styleRule\n    signInButtonContainer = {\n        width: \"100%\",\n        height: \"50px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        margin: \"20px auto\"\n    };\n\n    @styleRule\n    signInButton = {\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        backgroundColor: \"#f6f6f6\",\n        marginTop: \"20px\",\n        width: signInButtonWidth + \"px\",\n        height: signInButtonHeight + \"px\",\n        textAlign: \"center\",\n        lineHeight: signInButtonHeight + \"px\",\n        border: \"0px solid #d3d5d9\",\n        fontSize: \"18px\",\n        color: \"#252525\",\n        fontFamily: this.fontFamily,\n        \":hover\": {\n            border: \"0px solid #0b79a7\",\n            borderBottom: \"2px solid #0b79a7\",\n            color: \"#0b79a7\",\n        }\n    };\n\n    @styleRule\n    horizontalLine = {\n        borderBottom: \"1px solid #d3d5d9\",\n        width: \"100%\",\n        marginTop: \"20px\",\n    };\n\n    connectWith = {\n        width: \"100%\",\n        textAlign: \"center\",\n        fontFamily: this.fontFamily,\n        marginTop: \"20px\",\n    };\n\n    connectIcons = {\n        width: \"60%\",\n        marginLeft: \"20%\",\n        marginRight: \"20%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        marginTop: \"20px\",\n    };\n\n    @styleRule\n    faLogo = {\n        height: \"40px\",\n        paddingLeft: \"15px\",\n        paddingRight: \"15px\",\n        borderRadius: \"3px\",\n        textAlign: \"center\",\n        fontSize: \"18px\",\n        marginLeft: \"5px\",\n        marginRight: \"5px\",\n        transition: \".2s\",\n        color: \"#fff\",\n        \":hover\": {\n            transition: \".2s\",\n            opacity: \".9\",\n        },\n        cursor: \"pointer\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    recaptchaContainer = {\n        display: \"flex\",\n        justifyContent: \"space-around\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    connectWithButtonsSpan = {\n        fontFamily: \"lato, open sans\",\n        paddingLeft: \"15px\",\n        fontSize: \"15px\",\n    };\n\n    @styleRule\n    thirdPartyLoginContainer = {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexWrap: \"wrap\",\n        margin: \"15px 0\",\n    };\n\n    socialConnectDimensions = \"35px\";\n\n    @styleRule\n    socialConnectButtonContainer = {\n        display: \"flex\",\n        alignItems: \"center\",\n        height: this.socialConnectDimensions,\n        color: \"#fff\",\n        paddingRight: \"10px\",\n        borderRadius: \"5px\",\n        margin: \"5px\",\n        outline: \"none\",\n        paddingTop: \"0\",\n        cursor: \"pointer\",\n        fontSize: \"13px\",\n        border: \"0\",\n        \":hover\": {\n            opacity: \".85\",\n        }\n    };\n\n    @styleRule\n    socialConnectButtonIcon = {\n        height: this.socialConnectDimensions,\n        width: this.socialConnectDimensions,\n        display: \"flex !important\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n}\n\n\nexport {LoginStyle}\n","import {\n    UI,\n    BasicTabTitle,\n    CheckboxInput,\n    EmailInput,\n    TextInput,\n    Link,\n    PasswordInput,\n    SubmitInput,\n    Switcher,\n    Select,\n    registerStyle,\n    TemporaryMessageArea\n} from \"UI\";\n\nimport {ensure} from \"Require\";\nimport {Ajax} from \"Ajax\";\nimport {GoogleManager} from \"./GoogleManager\";\nimport {FacebookManager} from \"./FacebookManager\";\nimport {GithubManager} from \"./GithubManager\";\nimport {CountryStore} from \"CountryStore\";\n\nimport {FAIcon} from \"FontAwesome\";\nimport {LoginStyle} from \"./LoginStyle\";\n\nimport {SocialAppStore} from \"SocialAppStore\";\n\nconst ERROR_TIMEOUT = 6 * 1000;\n\nconst accountsConfig = {\n    username: true,\n    country: true,\n};\n\nconst socialLoginSpecificInfo = {\n    Google: {\n        name: \"Google\",\n        color: \"#de4b39\",\n        icon: \"google-plus\",\n        loginManager: GoogleManager,\n    },\n    Facebook: {\n        name: \"Facebook\",\n        color: \"#3b5998\",\n        icon: \"facebook\",\n        loginManager: FacebookManager,\n    },\n    Github: {\n        name: \"Github\",\n        color: \"#000\",\n        icon: \"github\",\n        loginManager: GithubManager,\n    },\n};\n\n\n@registerStyle(LoginStyle)\nclass SocialConnectButton extends UI.Primitive(\"button\") {\n    extraNodeAttributes(attr) {\n        let {specificInfo} = this.options;\n\n        attr.addClass(this.styleSheet.socialConnectButtonContainer);\n        attr.setStyle({\n            backgroundColor: specificInfo.color,\n        });\n    }\n\n    getLoginManager() {\n        return this.options.specificInfo.loginManager.getInstance();\n    }\n\n    render() {\n        let {specificInfo} = this.options;\n\n        return [\n            <FAIcon icon={specificInfo.icon} className={this.styleSheet.socialConnectButtonIcon} />,\n            <span> {specificInfo.name}</span>\n        ];\n    }\n\n    onMount() {\n        // Access the login manager, to load any scripts needed by the social provider\n        // TODO: try to find a way to not load all provider scripts on the login page\n        this.getLoginManager();\n        this.addClickListener(() => {\n            const loginElement = this.options.loginElement;\n            loginElement && loginElement.clearErrorMessage();\n            this.getLoginManager().login();\n        });\n    }\n}\n\n@registerStyle(LoginStyle)\nclass ThirdPartyLogin extends UI.Element {\n    getSocialApps() {\n        return SocialAppStore.all();\n    }\n\n    getConnectWith() {\n        return (\n            <div style={this.styleSheet.connectWith}>\n                {UI.T(\"or connect with\")}\n            </div>\n        );\n    }\n\n    getConnectWithButtons() {\n        return (\n            <div className={this.styleSheet.thirdPartyLoginContainer}>\n                {\n                    this.getSocialApps().map(\n                        socialApp => <SocialConnectButton specificInfo={socialLoginSpecificInfo[socialApp.name]}\n                                                          loginElement={this.options.loginElement} />\n                    )\n                }\n            </div>\n        );\n    }\n\n    render() {\n        return [\n            this.getConnectWith(),\n            this.getConnectWithButtons(),\n        ];\n    }\n}\n\n@registerStyle(LoginStyle)\nclass LoginWidget extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginWidget);\n    }\n\n    getEmailInput(emailIcon=\"user\") {\n        return [\n            <div style={{width: \"100%\",}}>\n                <FAIcon\n                    icon={emailIcon}\n                    style={this.styleSheet.fontAwesomeIcon}\n                />\n                <EmailInput\n                    autofocus=\"autofocus\"\n                    placeholder=\"Email address\"\n                    name=\"email\"\n                    ref=\"emailInput\"\n                    className={this.styleSheet.input}\n                />\n            </div>\n        ];\n    }\n\n    getPasswordInput(passwordInputOptions={}) {\n        passwordInputOptions = Object.assign({\n            name: \"password\",\n            className: this.styleSheet.input,\n            ref: \"passwordInput\",\n            placeholder: \"Password\",\n            style: {marginBottom: \"20px\"}\n        }, passwordInputOptions);\n        return [\n            <div style={{width: \"80% !important\",}}>\n                <FAIcon icon=\"lock\"\n                        style={this.styleSheet.fontAwesomeIcon}\n                />\n                <PasswordInput {...passwordInputOptions} />\n            </div>\n        ];\n    }\n\n    getRememberMeCheckbox() {\n        return [\n            <CheckboxInput checked={true}\n                              ref=\"rememberInput\"\n                              style={{\n                                  \"float\": \"left\",\n                              }}\n            />,\n            <div className={this.styleSheet.rememberMe}>{UI.T(\"Remember me\")}</div>,\n        ];\n    }\n\n    getForgotPassword() {\n        return <Link className={this.styleSheet.forgotPassword} href=\"/accounts/password_reset\"\n                     value={UI.T(\"Forgot Password?\")} />;\n    }\n\n    getErrorArea() {\n        return <TemporaryMessageArea className={this.styleSheet.badLogin} ref=\"loginErrorMessage\"/>;\n    }\n\n    getSignInButton() {\n        return <div style={{width: \"100%\", height: \"50px\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\",}}>\n            <SubmitInput className={this.styleSheet.signInButton} value=\"Sign In\"/>\n        </div>;\n    }\n\n    getHorizontalLine() {\n        return <div className={this.styleSheet.horizontalLine}>\n        </div>;\n    }\n\n    render() {\n        const thirdPartyLogin = SocialAppStore.all().length ? [\n            this.getHorizontalLine(),\n            <ThirdPartyLogin loginElement={this}/>,\n\n        ]: null;\n        return [\n            <form ref=\"form\">\n                {this.getEmailInput()}\n                {this.getPasswordInput()}\n                {this.getRememberMeCheckbox()}\n                {this.getForgotPassword()}\n                {this.getSignInButton()}\n                <div style={{clear: \"both\", height: \"20px\"}}/>\n                {this.getErrorArea()}\n            </form>,\n            thirdPartyLogin,\n        ];\n    }\n\n    setErrorMessage(error) {\n        this.loginErrorMessage.showMessage(error.message, \"red\", ERROR_TIMEOUT);\n    }\n\n    clearErrorMessage() {\n        this.loginErrorMessage.clear();\n    }\n\n    sendLogin() {\n        this.clearErrorMessage();\n        const data = {\n            email: this.emailInput.getValue(),\n            password: this.passwordInput.getValue(),\n            remember: this.rememberInput.getValue()\n        };\n        Ajax.postJSON(\"/accounts/login/\", data).then(\n            () => location.reload(),\n            (error) => this.setErrorMessage(error)\n        );\n    }\n\n    onMount() {\n        if (this.form) {\n            this.form.addNodeListener(\"submit\", (event) => {\n                this.sendLogin();\n                event.preventDefault();\n            });\n        }\n    }\n}\n\n\nclass RecaptchaWidget extends UI.Element {\n    render() {\n        return <div key={Math.random()} />;\n    }\n\n    redraw() {\n        super.redraw();\n\n        if (window.grecaptcha && window.GOOGLE_RECAPTCHA_PUBLIC_KEY) {\n            this.captchaId = grecaptcha.render(this.children[0].node, {\n                \"sitekey\": window.GOOGLE_RECAPTCHA_PUBLIC_KEY,\n            });\n        }\n    }\n\n    getResponse() {\n        return grecaptcha.getResponse(this.captchaId);\n    }\n\n    onMount() {\n        window.onRecaptchaCallback = () => this.redraw();\n\n        ensure(\"https://www.google.com/recaptcha/api.js?render=explicit&onload=onRecaptchaCallback\", () => {});\n    }\n}\n\n\n@registerStyle(LoginStyle)\nclass RegisterWidget extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.registerWidget);\n    }\n\n    getSignUpButton() {\n        return  <div className={this.styleSheet.signInButtonContainer}>\n                    <SubmitInput className={this.styleSheet.signInButton} value=\"Sign Up\" ref=\"submitButton\"/>\n                </div>;\n    }\n\n    getUsernameInput() {\n        return [\n            <div style={{width: \"100%\",}}>\n                <FAIcon icon=\"user\"\n                        style={this.styleSheet.fontAwesomeIcon}/>\n                <TextInput\n                    placeholder=\"Username\"\n                    ref=\"usernameInput\"\n                    className={this.styleSheet.input}\n                />\n            </div>\n        ];\n    }\n\n    getCountryInput() {\n        return [\n            <div style={{width: \"100%\", marginBottom: \"20px\"}}>\n                <FAIcon icon=\"flag\" style={this.styleSheet.fontAwesomeIcon} />\n                <Select ref=\"countrySelect\" options={CountryStore.allWithNone(\"Don't set country\")}\n                        className={this.styleSheet.countrySelect} />\n                <div style={{clear: \"both\"}}/>\n            </div>\n        ];\n    }\n\n    render() {\n        let formFields = [\n            this.getEmailInput(),\n            this.getPasswordInput()\n        ];\n        if (accountsConfig.username) {\n            formFields.splice(1, 0, this.getUsernameInput());\n            formFields[0] = this.getEmailInput(\"envelope\");\n        }\n        if (accountsConfig.country) {\n            formFields[formFields.length - 1] = this.getPasswordInput({style: {}});\n            formFields.push(this.getCountryInput());\n        }\n        return [\n            <form ref=\"form\">\n                {formFields}\n                <div className={this.styleSheet.recaptchaContainer}>\n                    <RecaptchaWidget ref=\"recaptchaWidget\" />\n                    {this.getSignUpButton()}\n                    <TemporaryMessageArea ref=\"errorArea\" />\n                </div>\n            </form>\n        ];\n    }\n\n    sendRegistration() {\n        this.submitButton.updateOptions({value: \"Signing up...\"});\n\n        const data = {\n            email: this.emailInput.getValue(),\n            recaptchaKey: this.recaptchaWidget.getResponse(),\n            password: this.passwordInput.getValue(),\n        };\n        if (this.usernameInput) {\n            data.username = this.usernameInput.getValue();\n        }\n        if (this.countrySelect) {\n           data.countryId = this.countrySelect.get().id;\n        }\n        Ajax.postJSON(\"/accounts/signup_request/\", data).then(\n            () => {\n                this.recaptchaWidget.hide();\n                this.submitButton.hide();\n                this.errorArea.showMessage(\"Done! Please check your email to continue\", \"black\", 26 * 60 * 60 * 1000);\n            },\n            (error) => {\n                this.errorArea.showMessage(\"Error in registration: \" + error.message, \"red\", 4000);\n                this.submitButton.updateOptions({value: \"Sign Up\"});\n                this.recaptchaWidget.redraw();\n            }\n        );\n    }\n\n    onMount() {\n        this.form.addNodeListener(\"submit\", (event) => {\n            this.sendRegistration();\n            event.preventDefault();\n        })\n    }\n}\n\nRegisterWidget.prototype.getEmailInput = LoginWidget.prototype.getEmailInput;\nRegisterWidget.prototype.getPasswordInput = LoginWidget.prototype.getPasswordInput;\nRegisterWidget.prototype.getHorizontalLine = LoginWidget.prototype.getHorizontalLine;\n\n\n// original name: LoginRegisterSystem\n@registerStyle(LoginStyle)\nclass NormalLogin extends UI.Element {\n    constructor() {\n        super();\n\n        this.state = 0;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginRegisterSystem);\n    }\n\n    getLoginButton() {\n        let style = {};\n\n        if (this.state === 0) {\n            style = this.styleSheet.selectedLeft;\n        }\n\n        return <div className={this.styleSheet.loginSystemButton}\n                    style={style}\n                    ref=\"loginButton\">\n            {UI.T(\"Log In\")}\n        </div>\n    }\n\n    getRegisterButton() {\n        let style = {};\n\n        if (this.state === 1) {\n            style = this.styleSheet.selectedRight;\n        }\n\n        return <div className={this.styleSheet.registerSystemButton}\n                    style={style}\n                    ref=\"registerButton\">\n            {UI.T(\"Sign Up\")}\n        </div>\n    }\n\n    render() {\n        let result = [\n            <div className={this.styleSheet.loginRegisterButtons}>\n                {this.getLoginButton()}\n                {this.getRegisterButton()}\n            </div>,\n            <Switcher ref=\"switcher\">\n                <LoginWidget ref=\"loginWidget\" active={this.state === 0} />\n                <RegisterWidget ref=\"registerWidget\" active={this.state === 1} />\n            </Switcher>\n        ];\n\n        return result;\n    }\n\n    onMount() {\n        this.loginButton.addClickListener(() => {\n            this.state = 0;\n            this.switcher.setActive(this.loginWidget);\n            this.redraw();\n        });\n\n        this.registerButton.addClickListener(() => {\n            this.state = 1;\n            this.switcher.setActive(this.registerWidget);\n            this.redraw();\n        });\n    }\n}\n\n\n@registerStyle(LoginStyle)\nclass LoginTabButton extends UI.Primitive(BasicTabTitle, \"div\") {\n    getDefaultOptions() {\n        return {\n            children: [UI.T(\"Log In\")]\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginSystemButton);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.selectedLeftClass);\n        }\n    }\n}\n\n@registerStyle(LoginStyle)\nclass RegisterTabButton extends UI.Primitive(BasicTabTitle, \"div\") {\n    getDefaultOptions() {\n        return {\n            children: [UI.T(\"Register\")]\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.registerSystemButton);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.selectedRightClass);\n        }\n    }\n}\n\n\nclass Login extends UI.Element {\n    render() {\n        return [\n            <NormalLogin/>,\n        ];\n    }\n}\n\nexport {Login};\n","import {UI, Modal} from \"UI\";\nimport {Login} from \"Login\";\nimport {Device} from \"Device\";\n\nclass LoginModal extends Modal {\n    getModalWindowStyle() {\n        if (Device.isTouchDevice()) {\n            return {\n                position: \"relative\",\n                padding: \"0\",\n                boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n                // margin: \"60px auto\",\n                display: this.options.display || \"block\",\n                left: \"0\",\n                right: \"0\",\n                width: \"100vw\",\n                height: \"600px\",\n                background: \"white\",\n                overflow: this.options.overflow || \"auto\",\n                maxHeight: \"100%\",\n                maxWidth: \"500px\",\n                verticalAlign: \"center\",\n                margin: \"0 auto\",\n            }\n        }\n        return {\n            position: \"relative\",\n            padding: \"0\",\n            boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n            margin: \"60px auto\",\n            display: this.options.display || \"block\",\n            maxHeight: this.options.maxHeight || \"85%\",\n            left: \"0\",\n            right: \"0\",\n            width: \"500px\",\n            height: this.options.height || \"600px\",\n            background: \"white\",\n            overflow: this.options.overflow || \"auto\",\n        };\n    }\n\n    getGivenChildren() {\n        return <Login/>;\n    }\n\n    static requireLogin(func) {\n        if (USER.isAuthenticated) {\n            return func();\n        } else {\n            this.show();\n        }\n    }\n}\n\nexport {LoginModal};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\nimport {Orientation} from \"ui/Constants\";\n\nclass VotingWidgetStyle extends StyleSheet {\n    height = 40;\n    size = 1;\n    likeColor = this.options.likeColor || \"#1E8921\"; //            |\n    dislikeColor = this.options.dislikeColor || \"#C5302C\"; //      |- Triadic colors + Shades\n    notVoteColor = this.options.notVoteColor || \"#313534\";\n    balanceColor = this.options.balanceColor || \"#313534\";\n    orientation = Orientation.VERTICAL;\n\n    @styleRule\n    container = {\n        height: \"40px\",\n        width: \"100%\",\n        fontSize: \"14px\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        alignItems: \"center\",\n    };\n\n    mainClass = {\n        height: \"40px\",\n        lineHeight: \"40px\",\n        fontSize: \"14px\",\n        color: \"#767676\",\n        display: \"inline-block\",\n        float: \"right\",\n        textAlign: \"right\",\n    };\n\n    thumbsStyle = {\n        fontSize: this.height / 2 + \"px\",\n        lineHeight: this.height + \"px\",\n    };\n\n    @styleRule\n    displayStyle = {\n        display: \"inline-block\",\n        float: \"left\",\n        paddingLeft: \"3px\",\n    };\n\n    counterStyle = {\n        fontSize: 18 * this.size + \"px\",\n        fontWeight: \"900\",\n        color: this.balanceColor,\n    };\n\n    @styleRule\n    thumbsUpHoverStyle = {\n        transition: \".25s\",\n        \":hover\": {\n            color: this.likeColor,\n            opacity: \".8\",\n            transition: \".25s\",\n        }\n    };\n\n    @styleRule\n    thumbsDownHoverStyle = {\n        transition: \".25s\",\n        \":hover\": {\n            color: this.dislikeColor,\n            opacity: \".8\",\n            transition: \".25s\",\n        }\n    };\n\n    @styleRule\n    padding = {\n        width: \"3px\",\n        float: \"left\",\n        display: \"inline-block\",\n        height: this.height + \"px\",\n    };\n}\n\nexport {VotingWidgetStyle}","import {UI, registerStyle} from \"UI\";\nimport {LoginModal} from \"LoginModal\";\nimport {UserReactionCollection} from \"UserReactionStore\";\nimport {Orientation, VoteStatus} from \"ui/Constants\";\nimport {VotingWidgetStyle} from \"./VotingWidgetStyle\";\n\nclass VotingWidget extends UI.Element {\n    setOptions(options) {\n        options = Object.assign({\n            votesBalance: 0,\n            userVote: VoteStatus.NONE,\n            size: 1,\n            likeColor: this.options.likeColor || \"#1E8921\", //            |\n            dislikeColor: this.options.dislikeColor || \"#C5302C\", //      |- Triadic colors + Shades\n            notVoteColor: this.options.notVoteColor || \"#313534\",\n            balanceColor: this.options.balanceColor || \"#313534\",\n            orientation: Orientation.VERTICAL,\n        }, options);\n        super.setOptions(options);\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setStyle({\n            textAlign: \"center\",\n            marginRight: \"10px\",\n        });\n    }\n\n    render() {\n        let buttonsStyle = {\n            paddingLeft: \"4px\",\n            paddingRight: \"4px\",\n            paddingTop: \"0px\",\n            paddingBottom: \"0px\",\n            lineHeight: \"0px\",\n            backgroundColor: \"transparent\",\n            borderColor: \"transparent\",\n            fontSize: 40 * this.options.size + \"px\",\n            marginTop: 8 * this.options.size + \"px\",\n            marginBottom: 8 * this.options.size + \"px\",\n            display: this.options.orientation === Orientation.VERTICAL ? \"block\" : \"inline-block\",\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            opacity: 0.7,\n            cursor: \"pointer\",\n            color: this.options.notVoteColor,\n        };\n\n        let likeButtonStyle = Object.assign({}, buttonsStyle);\n        if (this.getUserVote() === VoteStatus.LIKE) {\n            likeButtonStyle.color = this.options.likeColor;\n        }\n\n        let dislikeButtonStyle = Object.assign({}, buttonsStyle);\n        if (this.getUserVote() === VoteStatus.DISLIKE) {\n            dislikeButtonStyle.color = this.options.dislikeColor;\n        }\n\n        let counterStyle = {\n            fontSize: 18 * this.options.size + \"px\",\n            fontWeight: \"900\",\n            \"color\": this.options.balanceColor,\n        };\n\n        return [\n            <span className=\"fa fa-caret-up voteButton\" ref=\"likeButton\"\n                       faIcon=\"caret-up\" style={likeButtonStyle} HTMLtitle=\"Click to like\"/>,\n            <span ref=\"counterContainer\" style={counterStyle}>\n                <UI.TextElement ref=\"counter\" value={this.getVotesBalance() + \"\"}/>\n            </span>,\n            <span className=\"fa fa-caret-down voteButton\" ref=\"dislikeButton\"\n                       faIcon=\"caret-down\" style={dislikeButtonStyle} HTMLtitle=\"Click to dislike\"/>,\n        ];\n    }\n\n    getVotesBalance() {\n        return this.options.votesBalance;\n    }\n\n    getUserVote() {\n        return this.options.userVote;\n    }\n}\n\nclass CommentVotingWidget extends VotingWidget {\n    getVotesBalance() {\n        return this.options.message.getVotesBalance();\n    }\n\n    getUserVote() {\n        return this.options.message.getUserVote();\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.updateTarget(this.options.message);\n    }\n\n    updateTarget(target) {\n        if (!target || target instanceof UserReactionCollection) {\n            this.options.target = target;\n            return;\n        }\n        const possibleTarget = target.getReactionCollection();\n        if (possibleTarget) {\n            this.options.target = possibleTarget;\n            return;\n        }\n        let tempListener = this.attachEventListener(target, \"createReactionCollection\", () => {\n            this.updateOptions({target: target.getReactionCollection()});\n            this.setupListener();\n            tempListener.remove();\n        });\n    }\n\n    setupListener() {\n        let target = this.options.target;\n        if (target) {\n            this.attachUpdateListener(target, () => {\n                this.redraw();\n            })\n        }\n    }\n\n\n    onMount() {\n        this.setupListener();\n        this.likeButton.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (this.getUserVote() === VoteStatus.LIKE) {\n                this.options.message.resetReaction();\n            } else {\n                this.options.message.like();\n            }\n        });\n        this.dislikeButton.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (this.getUserVote() === VoteStatus.DISLIKE) {\n                this.options.message.resetReaction();\n            } else {\n                this.options.message.dislike();\n            }\n        });\n\n        this.options.message.addListener(\"reaction\", () => {\n            this.redraw();\n        });\n    }\n}\n\n// TODO: rewrite\n@registerStyle(VotingWidgetStyle)\nclass CommentVotingWidgetWithThumbs extends CommentVotingWidget {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    getNumLikes() {\n        return this.options.message.getNumLikes();\n    }\n\n    getNumDislikes() {\n        return this.options.message.getNumDislikes();\n    }\n\n    render() {\n        let thumbsUpScoreStyle = {};\n        let thumbsDownScoreStyle = {};\n\n        // TODO: remove duplicate code\n        let likeButtonStyle = Object.assign({}, this.styleSheet.thumbsStyle);\n        if (this.getUserVote() === VoteStatus.LIKE) {\n            likeButtonStyle.color = thumbsUpScoreStyle.color = this.options.likeColor;\n            thumbsUpScoreStyle.fontWeight = \"bold\";\n        }\n\n        let dislikeButtonStyle = Object.assign({}, this.styleSheet.thumbsStyle);\n        if (this.getUserVote() === VoteStatus.DISLIKE) {\n            dislikeButtonStyle.color = thumbsDownScoreStyle.color = this.options.dislikeColor;\n            thumbsDownScoreStyle.fontWeight = \"bold\";\n        }\n\n        return [\n            <span className={this.styleSheet.displayStyle} style={thumbsUpScoreStyle}>{this.getNumLikes()}</span>,\n            <span className={\"fa fa-thumbs-up voteButton \" + this.styleSheet.displayStyle + \" \" + this.styleSheet.thumbsUpHoverStyle} ref=\"likeButton\" faIcon=\"thumbs-up\" style={likeButtonStyle} HTMLtitle=\"Click to like\"/>,\n            <div className={this.styleSheet.padding} />,\n            <span className={this.styleSheet.displayStyle} style={thumbsDownScoreStyle}>{this.getNumDislikes()}</span>,\n            <span className={\"fa fa-thumbs-down voteButton \" + this.styleSheet.displayStyle + \" \" + this.styleSheet.thumbsDownHoverStyle} ref=\"dislikeButton\" faIcon=\"thumbs-down\" style={dislikeButtonStyle} HTMLtitle=\"Click to dislike\"/>,\n        ];\n    }\n}\n\nexport {VotingWidget, CommentVotingWidget, CommentVotingWidgetWithThumbs};","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n\n\nclass ChatStyle extends StyleSheet {\n    navbarHeight = \"50px\";\n    renderMessageHeight = \"100px\";\n\n    fontFamily = \"lato, open sans\";\n    userFontSize = \"1.1em\";\n    commentFontSize = \"1.1em\";\n\n    backgroundColor = \"#fff\";\n    hrBackgroundColor = \"#ddd\";\n    hoverBackgroundColor = \"#f8f8f8\";\n\n    @styleRule\n    renderMessageView = {\n        height: \"100%\",\n        width: \"100%\",\n        overflowY: \"auto\",\n        overflowX: \"hidden\",\n        backgroundColor: this.backgroundColor,\n        position: \"relative\",\n        wordBreak: \"break-word\",\n    };\n\n    @styleRule\n    renderMessage = {\n        height: this.renderMessageHeight,\n        maxHeight: this.renderMessageHeight,\n        width: \"100%\",\n        borderTop: \"1px solid \" + this.hrBackgroundColor,\n        backgroundColor: this.backgroundColor,\n        position: \"relative\",\n    };\n\n    @styleRule\n    chatInput = {\n        height: \"100%\",\n        width: \"calc(100% - 50px)\",\n        // \"line-height\": \"30px\",\n        paddingTop: \"0\",\n        paddingBottom: \"0\",\n        fontSize: \"14px\",\n        borderRadius: \"0\",\n        fontFamily: this.fontFamily,\n        paddingLeft: \"8px\",\n        border: \"0px\",\n        paddingTop: \"5px\",\n        resize: \"none\",\n        transition: \".2s\",\n        display: \"inline-block\",\n        float: \"left\",\n        outline: \"none\",\n        position: \"absolute\",\n        \":focus\": {\n            outline: \"none\",\n            boxShadow: \"none\",\n        },\n        \":active\": {\n            outline: \"none\",\n            boxShadow: \"none\",\n        },\n    };\n\n    @styleRule\n    messageBoxButton = {\n        textAlign: \"center\",\n        flex: \"1\",\n        backgroundColor: \"#fff\",\n        fontFamily: this.fontFamily,\n        border: \"0\",\n        fontSize: \"18px\",\n        transition: \".2s\",\n        color: \"#333\",\n        padding: \"0\",\n        \":hover\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n            outline: \"none\",\n        },\n        \":focus:active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n        },\n        \":hover:active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n        },\n    };\n\n    previewButton = { // TODO: This is currently not restyled.\n        // We might not want to use it because previewButton is bad practice\n        height: \"30px\",\n        width: \"30px\",\n        borderRadius: \"100%\",\n        fontSize: \"100%\",\n        marginLeft: \"5px\",\n    };\n\n    loadMoreButton = {\n        border: \"0px\",\n        fontFamily: this.fontFamily,\n        color: \"#333\",\n        borderRadius: \"0\",\n        borderBottom: \"0\",\n        backgroundColor: \"#eee\",\n        padding: \"5px 10px\",\n        textTransform: \"uppercase\",\n        marginTop: \"15px\",\n    };\n\n    @styleRule\n    messageTimeStampHr = {\n        height: \"1px\",\n        marginTop: \"1.5em\",\n        marginBottom: \"1.5em\",\n        width: \"100%\",\n        maxWidth: \"100%\",\n        backgroundColor: this.hrBackgroundColor,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    messageTimeStamp = {\n        height: \"1.5em\",\n        width: \"auto\",\n        paddingLeft: \"10px\",\n        paddingRight: \"10px\",\n        backgroundColor: this.backgroundColor,\n        textAlign: \"center\",\n        fontFamily: this.fontFamily,\n        color: \"#222\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    groupChatMessage = {\n        width: \"100%\",\n        backgroundColor: \"#fff\",\n    };\n\n    @styleRule\n    comment = {\n        paddingLeft: \"12px\",\n        paddingRight: \"12px\",\n        paddingTop: \"12px\",\n        paddingBottom: \"12px\",\n        fontFamily: this.fontFamily,\n        \":hover\": {\n            backgroundColor: this.hoverBackgroundColor,\n        },\n    };\n\n    @styleRule\n    userHandle = {\n        fontSize: this.userFontSize,\n    };\n\n    @styleRule\n    commentContent = {\n        \" p\": {\n            marginTop: \"0\",\n            marginBottom: \"0\",\n            fontFamily: this.fontFamily,\n            fontSize: this.commentFontSize,\n            color: \"#454545\",\n            // textAlign: \"justify\",\n            wordWrap: \"break-word\",\n        },\n    };\n\n    @styleRule\n    timestamp = {\n        fontFamily: this.fontFamily,\n        color: \"#262626\",\n        fontWeight: \"bold\",\n        margin: \"0 10px\",\n    };\n}\n\nexport {ChatStyle};\n","// Plugins should be used to extends on runtime the functionality of a class, to easily split functionality\nimport {Dispatchable} from \"./Dispatcher\";\n\nclass Plugin extends Dispatchable {\n    constructor(parent) {\n        super();\n        this.linkToParent(parent);\n    }\n\n    linkToParent(parent) {\n        this.parent = parent;\n    }\n\n    name() {\n        return this.constructor.pluginName();\n    }\n\n    static pluginName() {\n        return this.name;\n    }\n}\n\n// TODO: rename this to use Mixin in title\nvar Pluginable = function (BaseClass) {\n    return class Pluginable extends BaseClass {\n        // TODO: this should probably take in a plugin instance also\n        registerPlugin(PluginClass) {\n            if (!this.hasOwnProperty(\"plugins\")) {\n                this.plugins = new Map();\n            }\n            // TODO: figure out plugin dependencies\n            let plugin = new PluginClass(this);\n            let pluginName = plugin.name();\n\n            if (this.plugins.has(pluginName)) {\n                console.error(\"You are overwriting an existing plugin: \", pluginName, \" for object \", this);\n            }\n\n            this.plugins.set(pluginName, plugin);\n        }\n\n        removePlugin(pluginName) {\n            let plugin = this.getPlugin(pluginName);\n            if (plugin) {\n                plugin.remove(this);\n                this.plugins.delete(plugin.name());\n            } else {\n                console.error(\"Can't remove plugin \", pluginName);\n            }\n        }\n\n        getPlugin(pluginName) {\n            if (!(typeof pluginName === \"string\")) {\n                pluginName = pluginName.pluginName();\n            }\n            if (this.plugins) {\n                return this.plugins.get(pluginName);\n            } else {\n                return null;\n            }\n        }\n    }\n};\n\nexport {Plugin, Pluginable};\n","import {UI, Switcher, AjaxButton, TextArea, Button, ButtonGroup, Panel, InfiniteScrollable, registerStyle} from \"UI\";\nimport {StemDate} from \"Time\";\nimport {GlobalState} from \"State\";\nimport {MessageThreadStore, MessageThread, MessageInstance, MessageInstanceStore, GroupChatStore} from \"MessageThreadStore\";\nimport {UserHandle} from \"UserHandle\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {LoginModal} from \"LoginModal\";\nimport {isDifferentDay} from \"Time\";\nimport {RunOnce} from \"Dispatcher\";\nimport {Ajax} from \"Ajax\";\nimport {ChatStyle} from \"ChatStyle\";\nimport {Pluginable} from \"Plugin\";\nimport {Level, Size} from \"ui/Constants\";\n\nimport {ButtonStyle} from \"ui/button/ButtonStyle\";\nimport {InputStyle} from \"ui/input/Style\";\n\nButtonStyle.getInstance().ensureFirstUpdate();\nInputStyle.getInstance().ensureFirstUpdate();\n\nclass PreviewMarkupButton extends Button {\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        super.setOptions(options);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            MarkupEditorModal.show({\n                classMap: ChatMarkupRenderer.classMap,\n                showCallback: (modal) => {modal.markupEditor.setValue(this.options.getValue());\n                                          modal.markupEditor.codeEditor.getAce().focus();},\n                hideCallback: (modal) => {this.options.setValue(modal.markupEditor.getValue());}\n            });\n        });\n    }\n}\n\nclass EditableMessage extends UI.Element {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            deletable: true,\n        });\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.message = options.message;\n    }\n\n    render() {\n        return [<Button ref=\"editButton\" onClick={() => this.toggleEditMode()}>{UI.T(\"Edit\")}</Button>,\n            <Switcher ref=\"contentSwitcher\">\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>\n        ];\n    }\n\n    showEditMode() {\n        if (!this.editContent) {\n            let writingSectionStyle = {\n                \"margin-top\": \"5px\"\n            };\n            let chatInputStyle = {\n                overflow: \"auto\",\n                height: \"60px\",\n                width: \"100%\",\n            };\n\n            this.editContent = <div style={writingSectionStyle}>\n                <TextArea ref={this.refLink(\"messageInput\")} style={chatInputStyle} className=\"form-control\"\n                             value={this.message.getContent()}/>\n                <ButtonGroup>\n                    <Button label={UI.T(\"Cancel\")} level={Level.DEFAULT} size={Size.SMALL}\n                               onClick={() => {this.hideEditMode()}} />\n                    <PreviewMarkupButton size={Size.SMALL}\n                                         getValue={() => {return this.messageInput.getValue();}}\n                                         setValue={(value) => {this.messageInput.setValue(value);this.messageInput.node.focus();}}\n                    />\n                    <Button label={UI.T(\"Save changes\")} level={Level.PRIMARY}\n                               onClick={() => this.saveMessageChanges()} size={Size.SMALL} />\n                    {this.options.deletable ? <Button level={Level.DANGER} label={UI.T(\"Delete\")} size={Size.SMALL}\n                                                         onClick={() => this.deleteMessage()}/> : \"\"}\n                </ButtonGroup>\n            </div>;\n        } else {\n            this.messageInput.setValue(this.message.getContent());\n        }\n\n        if (!this.contentSwitcher.hasChild(this.editContent)) {\n            this.contentSwitcher.appendChild(this.editContent);\n        }\n        this.contentSwitcher.setActive(this.editContent);\n    }\n\n    hideEditMode() {\n        this.contentSwitcher.setActive(this.contentContainer);\n    }\n\n    toggleEditMode() {\n        if (this.contentSwitcher.getActive() === this.contentContainer) {\n            this.showEditMode();\n        } else {\n            this.hideEditMode();\n        }\n    }\n\n    saveMessageChanges() {\n        let content = this.messageInput.getValue();\n\n        if (content) {\n            this.message.edit(content, () => {\n                this.hideEditMode();\n            });\n        }\n    }\n\n    deleteMessage() {\n        if (this.options.deletable) {\n            this.message.deleteMessage();\n        }\n    }\n\n    onMount() {\n        this.message.addListener(\"edit\", () => {\n            this.content.setValue(this.message.getContent());\n            this.redraw();\n        });\n\n        this.message.addListener(\"delete\", () => {\n            // TODO: refactor this, should delete message, not hide\n            this.hide();\n        });\n    }\n}\n\n\n@registerStyle(ChatStyle)\nclass GroupChatMessage extends EditableMessage {\n    setOptions(options) {\n        super.setOptions(options);\n        if (this.message.hasTemporaryId()) {\n            // TODO: this can also happen when editing a message, another case for later\n            this.message.addListener(\"postError\", () => {\n                this.redraw();\n            });\n            this.message.addListener(\"updateId\", () => {\n                // TODO: we might need to updated our position here\n                this.options.key = this.message.id;\n            })\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.groupChatMessage);\n    }\n\n    shouldShowDayTimestamp() {\n        let lastMessage = this.options.message.getPreviousMessage();\n        return !lastMessage || isDifferentDay(lastMessage.timeAdded, this.options.message.timeAdded);\n    }\n\n    render() {\n        let editButton;\n        //if (this.message.userId === USER.id || USER.isSuperUser) {\n        if (USER.isSuperUser) {\n            editButton = <a style={Object.assign({\"cursor\": \"pointer\"}, this.styleSheet.timestamp)}\n                            onClick={() => this.toggleEditMode()}>{UI.T(\"Edit\")}</a>;\n        }\n\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>;\n        }\n\n        let date = null;\n        if (this.shouldShowDayTimestamp()) {\n            date = <div ref=\"dayTimestamp\" className={this.styleSheet.messageTimeStampHr}>\n                <div className={this.styleSheet.messageTimeStamp}>\n                    {StemDate.unix(this.message.timeAdded).format(\"dddd, MMMM Do\")}\n                </div>\n            </div>;\n        }\n\n        let errorElement = null;\n        if (this.message.postError) {\n            errorElement = <span ref=\"errorArea\" style={{marginLeft: \"1rem\"}} className=\"fa fa-warning\"\n                                 HTMLTitle={\"Error: \" + this.message.postError}/>;\n        }\n\n        return [\n            date,\n            <div className={this.styleSheet.comment}>\n                <UserHandle userId={this.message.userId} className={this.styleSheet.userHandle} />\n                <span className={this.styleSheet.timestamp}>{this.message.getTimeOfDay()}</span>\n                {editButton}\n                {errorElement}\n                <div className={this.styleSheet.commentContent}>\n                    {this.contentSwitcher}\n                </div>\n            </div>\n        ];\n    }\n}\n\n\n@registerStyle(ChatStyle)\nclass PrivateChatMessage extends Panel {\n    setOptions(options) {\n        super.setOptions(options);\n        this.message = options.message;\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.addClass(this.styleSheet.groupChatMessage);\n        return attr;\n    }\n\n    shouldShowDayTimestamp() {\n        let lastMessage = this.options.message.getPreviousMessage();\n        return !lastMessage || isDifferentDay(lastMessage.timeAdded, this.options.message.timeAdded);\n    }\n\n    isOwnMessage() {\n        return this.message.userId === USER.id;\n    }\n\n    render() {\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>;\n        }\n\n        let date = null;\n        if (this.shouldShowDayTimestamp()) {\n            date = <div className={this.styleSheet.messageTimeStampHr}>\n                <div ref=\"dayTimestamp\" className={this.styleSheet.messageTimeStamp}>\n                    {StemDate.unix(this.message.timeAdded).format(\"dddd, MMMM Do\")}\n                </div>\n            </div>;\n        }\n\n        let errorElement = null;\n        if (this.message.postError) {\n            errorElement = <span ref=\"errorArea\" style={{marginLeft: \"1rem\"}} className=\"fa fa-warning\"\n                                 HTMLTitle={\"Error: \" + this.message.postError}/>;\n        }\n\n        let content = [\n            <div className={this.styleSheet.comment} style={{margin: \"8px 16px\", backgroundColor: \"#eee\",}}>\n                <UserHandle userId={this.message.userId} className={this.styleSheet.userHandle} />\n                <span className={this.styleSheet.timestamp}>{this.message.getTimeOfDay()}</span>\n                {errorElement}\n                <div className={this.styleSheet.commentContent}>\n                    {this.contentSwitcher}\n                </div>\n            </div>\n        ];\n\n        let paddingDiv = <div style={{flexGrow: \"1000000\"}} />;\n\n        let result;\n        if (this.isOwnMessage()) {\n            result = [\n                date,\n                <div style={{\n                    display: \"flex\",\n                }}>\n                    {paddingDiv}\n                    {content}\n                </div>\n            ];\n        } else {\n            result = [\n                date,\n                <div style={{\n                    display: \"flex\",\n                }}>\n                    {content}\n                    {paddingDiv}\n                </div>\n            ];\n        }\n\n        return result;\n    }\n}\n\n\nclass ChatMessageScrollSection extends InfiniteScrollable {\n    setOptions(options) {\n        options = Object.assign({\n            entryComparator: (a, b) => {\n                return a.getNormalizedId() - b.getNormalizedId();\n            }\n        }, options);\n        super.setOptions(options);\n    }\n\n    getTopMessage() {\n        return this.children[1];\n    }\n}\n\n\nlet ChatWidget = (ChatMessageClass) => {\n    @registerStyle(ChatStyle)\n    class ChatWidgetClass extends Pluginable(Panel) {\n        getDefaultOptions(options) {\n            return {\n                dateTimestamps: true,\n                renderMessage: (messageInstance) => {\n                    return <ChatMessageClass key={messageInstance.getNormalizedId()} message={messageInstance} />;\n                }\n            };\n        }\n\n        get messageThread() {\n            return this.options.messageThread;\n        }\n\n        setOptions(options) {\n            super.setOptions(options);\n            this.initializeShowLoadMoreButton();\n        }\n\n        extraNodeAttributes(attr) {\n            super.extraNodeAttributes(attr);\n            attr.setStyle({\n                display: \"flex\",\n                flexDirection: \"column\",\n            });\n        }\n\n        canOverwrite() {\n            return false;\n        }\n\n        initializeShowLoadMoreButton() {\n            // TODO: this is a shitty way of knowing if there are more messages!\n            if (this.messageThread.getNumMessages() >= 20) {\n                this.showLoadMoreButton = true;\n            }\n        }\n\n        createVirtualMessage(request, message) {\n            let virtualId = this.messageThread.getMaxMessageId() + \"-\" + MessageInstanceStore.generateVirtualId() + \"-\" + Math.random();\n            let virtualMessageInstance = MessageInstanceStore.createVirtualMessageInstance(message, this.messageThread, virtualId);\n            request.virtualId = virtualId;\n            return virtualMessageInstance;\n        }\n\n        sendMessage(message) {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            let request = Object.assign({}, this.options.baseRequest || {});\n\n            message = message || this.chatInput.getValue();\n            message = message.trim();\n\n            if (!message) {\n                return;\n            }\n            request.message = message;\n\n            // Create a virtual message to be drawn temporarily\n            let virtualMessageInstance = this.createVirtualMessage(request, message);\n\n            let onSuccess = (data) => {\n                if (data.error) {\n                    virtualMessageInstance.setPostError(data.error);\n                    return;\n                }\n                if (virtualMessageInstance && virtualMessageInstance.hasTemporaryId()) {\n                    MessageInstanceStore.applyUpdateObjectId(virtualMessageInstance, data.messageId);\n                    GlobalState.importState(data.state);\n                }\n            };\n\n            let onError = (error) => {\n                if (virtualMessageInstance) {\n                    virtualMessageInstance.setPostError(42);\n                }\n                console.log(\"Error in sending chat message:\\n\" + error.message);\n                console.log(error.stack);\n            };\n\n            this.messageWindow.scrollToBottom();\n\n            this.chatInput.setValue(\"\");\n            this.chatInput.dispatch(\"messageSent\");\n\n            Ajax.postJSON(this.getPostURL(), request).then(onSuccess, onError);\n        }\n\n        saveScrollPosition() {\n            this.scrollPosition = this.messageWindow.node.scrollTop;\n            this.scrollPercent = this.scrollPosition / (this.messageWindow.node.scrollHeight - this.messageWindow.node.clientHeight);\n        }\n\n        applyScrollPosition() {\n            this.messageWindow.node.scrollTop = this.scrollPosition || this.messageWindow.node.scrollHeight;\n            this.chatInput.node.focus();\n        }\n\n        addResizeListeners() {\n            this.messageWindow.addNodeListener(\"scroll\", () => {\n                let scrollTop = this.messageWindow.node.scrollTop;\n                if (scrollTop < 20) {\n                    this.loadMoreMessages();\n                }\n            });\n\n            this.addListener(\"hide\", () => {this.saveScrollPosition();});\n            this.addListener(\"show\", () => {this.applyScrollPosition();});\n\n            window.addEventListener(\"resize\", () => {\n                this.saveScrollPosition();\n                this.setAdaptiveHeight();\n            });\n\n            this.addListener(\"resize\", () => {\n                this.setAdaptiveHeight();\n                this.messageWindow.node.scrollTop = this.scrollPercent * (this.messageWindow.node.scrollHeight - this.messageWindow.node.clientHeight);\n            });\n        }\n\n        getDesiredHeight() {\n            if (this.options.style && this.options.style.height) {\n                return this.options.style.height;\n            }\n            let viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n            let navbarHeight = document.getElementById(\"navbar\").offsetHeight; // use offsetHeight to accommodate padding and margin\n\n            let availableHeight = viewportHeight - navbarHeight - (this.options.extraHeightOffset || 25);\n            return Math.max(availableHeight || 0, 100) + \"px\"; // it needs at least 100px\n        }\n\n        setAdaptiveHeight() {\n            this.setStyle(\"height\", this.getDesiredHeight());\n        }\n\n        setHeight(height) {\n            this.setStyle(\"height\", height);\n        }\n\n        renderMessageView() {\n            let loadMoreButton;\n\n\n            if (this.showLoadMoreButton) {\n                loadMoreButton = (\n                    <div className=\"text-center\">\n                        <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                       style={this.styleSheet.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                        />\n                    </div>\n                );\n            }\n\n            return [\n                <ChatMessageScrollSection className={this.styleSheet.renderMessageView}\n                                          ref=\"messageWindow\"\n                                          entryRenderer={this.options.renderMessage}\n                                          entries={this.messageThread.getMessages()}\n                                          staticTop={loadMoreButton} />\n            ];\n        }\n\n        getGetType() {\n            return \"GET\";\n        }\n\n        loadMoreMessages() {\n            // TODO: wrap this in something\n            if (this.outstandingRequest) {\n                return;\n            }\n            this.outstandingRequest = true;\n\n            const topMessage = this.messageWindow.getTopMessage();\n\n            let messageInstances = this.messageThread.getMessages();\n            let lastMessageId = 999999999;\n            if (messageInstances.length) {\n                lastMessageId = messageInstances[0].id;\n            }\n\n            let request = Object.assign({\n                lastMessageId: lastMessageId\n            }, this.options.baseRequest || {});\n\n            if (this.loadMoreButton) {\n                this.loadMoreButton.ajaxCall({\n                    url: this.getGetURL(),\n                    type: this.getGetType(),\n                    dataType: \"json\",\n                    data: request,\n                    success: (data) => {\n                        if (!data.state || !data.state.MessageInstance || data.state.MessageInstance.length < 20) {\n                            if (this.loadMoreButton) {\n                                this.loadMoreButton.hide();\n                            }\n                            this.showLoadMoreButton = false;\n                        }\n                        let scrollPosition = this.messageWindow.getExcessTop();\n                        let oldHeight = this.messageWindow.node.scrollHeight;\n\n                        let scrollDelta = 0;\n                        if (!topMessage.shouldShowDayTimestamp()) {\n                            scrollDelta += topMessage.dayTimestamp.getHeight();\n                            topMessage.dayTimestamp.addClass(\"hidden\");\n                        }\n                        this.messageWindow.scrollToHeight(scrollPosition + this.messageWindow.node.scrollHeight - oldHeight - scrollDelta);\n\n                        this.outstandingRequest = false;\n                    },\n                    complete: () => {\n                        //TODO(@Rocky): find out why this doesn't work\n                        this.outstandingRequest = false;\n                    }\n                });\n            }\n        }\n\n        renderMessageBox() {\n            return <div ref=\"writingSection\" className={this.styleSheet.renderMessage}>\n                <TextArea readOnly={this.messageThread.muted}\n                             ref=\"chatInput\"\n                             placeholder=\"Type a message...\"\n                             className={this.styleSheet.chatInput} />\n                <div style={{display: \"flex\", flexDirection: \"column\", height: \"100%\", position: \"absolute\", right: \"0px\", width: \"50px\"}}>\n                    <Button ref=\"sendMessageButton\"\n                               faIcon=\"paper-plane\"\n                               disabled={this.messageThread.muted}\n                               onClick={() => this.sendMessage()}\n                               className={this.styleSheet.messageBoxButton} />\n                    <PreviewMarkupButton ref=\"previewMessageButton\"\n                                   getValue={() => {return this.chatInput.getValue();}}\n                                   setValue={(value) => {this.chatInput.setValue(value);this.chatInput.node.focus();}}\n                                   className={this.styleSheet.messageBoxButton}\n                                   faIcon=\"eye\" />\n                </div>\n            </div>;\n        }\n\n        renderStatus() {\n            if (this.messageThread.muted) {\n                return [\n                    <h4 style={{color: \"red\", textAlign: \"center\"}}>This chat is currently turned off.</h4>\n                ];\n            } else {\n                if (USER.isSuperUser) {\n                    let userData = [];\n                    for (let userId of this.messageThread.online) {\n                        userData.push([\n                            <UserHandle id={parseInt(userId)}/>\n                        ]);\n                    }\n                    return userData;\n                }\n            }\n        }\n\n        render() {\n            return [\n                this.renderMessageView(),\n                this.renderMessageBox(),\n            ];\n        }\n\n        getDefaultPlugins() {\n            return ChatWidget.defaultPlugins || [];\n        }\n\n        onMount() {\n            super.onMount();\n\n            for (let plugin of (this.options.plugins || this.getDefaultPlugins())) {\n                this.registerPlugin(plugin);\n            }\n\n            this.attachUpdateListener(this.messageThread, (event) => {\n                if (event.type === \"muted\") {\n                    this.redraw();\n                }\n            });\n\n            this.attachListener(this.messageThread, \"newMessage\", (event) => {\n                //console.log(\"Received chat message: \", event);\n                let messageInstance = MessageInstanceStore.get(event.data.id);\n\n                // We calculate before adding new message\n                let messageWindowScrollTop = this.messageWindow.node.scrollTop;\n                let messageWindowscrollMax = this.messageWindow.node.scrollHeight - this.messageWindow.node.offsetHeight;\n                this.messageWindow.insertEntry(messageInstance);\n\n                // If we were at the bottom before message was appended, scroll automatically\n                if (messageWindowScrollTop + 20 > messageWindowscrollMax) {\n                    setTimeout(() => {\n                        this.messageWindow.scrollToBottom();\n                    }, 0);\n                }\n            });\n\n            this.addResizeListeners();\n        }\n    }\n    return ChatWidgetClass;\n};\n\nclass GroupChatWidget extends ChatWidget(GroupChatMessage) {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            display: \"flex\",\n            flexDirection: \"column\",\n            overflowY: \"hidden\",\n        });\n    }\n\n    getGetURL() {\n        return \"/chat/group_chat_state/\";\n    }\n\n    renderMessageView() {\n        let loadMoreButton;\n\n        if (this.showLoadMoreButton) {\n            loadMoreButton = (\n                <div className=\"text-center\">\n                    <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                   style={this.styleSheet.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                    />\n                </div>\n            );\n        }\n\n        return [\n            <ChatMessageScrollSection className={this.styleSheet.renderMessageView}\n                                      ref=\"messageWindow\"\n                                      entryRenderer={this.options.renderMessage}\n                                      entries={this.messageThread.getMessages()}\n                                      staticTop={loadMoreButton}/>\n        ];\n    }\n}\n\nclass PrivateChatWidget extends ChatWidget(PrivateChatMessage) {\n    setOptions(options) {\n        options = Object.assign({\n            messageThread: options.privateChat.getMessageThread(),\n            baseRequest: {\n                userId: options.privateChat.getOtherUserId(),\n                privateChatId: options.privateChat.id\n            }\n        }, options);\n        super.setOptions(options);\n    }\n\n    setPrivateChat(privateChat) {\n        this.options.privateChat = privateChat;\n        this.setOptions(this.options);\n    }\n\n    getPostURL() {\n        return \"/chat/private_chat_post/\";\n    }\n\n    getGetType() {\n        return \"POST\"; // It might create a chat if it doesn't have one\n    }\n\n    getGetURL() {\n        return \"/chat/private_chat_state/\";\n    }\n}\n\nclass VotableChatMessage extends GroupChatMessage {\n    render() {\n        let result = super.render();\n        result[1].options.children.push(<CommentVotingWidgetWithThumbs style={{display: \"inline-block\"}} message={this.options.message} />);\n        return result;\n    }\n}\n\nclass VotableGroupChatWidget extends ChatWidget(VotableChatMessage) {\n    setOptions(options) {\n        options.messageThread = options.messageThread || MessageThreadStore.get(GroupChatStore.get(options.chatId).messageThreadId);\n        super.setOptions(options);\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    getGetURL() {\n        return \"/chat/group_chat_state/\";\n    }\n}\n\nexport {ChatWidget, EditableMessage,\n    GroupChatWidget, PrivateChatWidget, VotableGroupChatWidget,\n    GroupChatMessage, PrivateChatMessage, VotableChatMessage,\n    PreviewMarkupButton, ChatMessageScrollSection};\n","import {StyleSheet, styleRule} from \"UI\";\n\nclass CommentWidgetStyle extends StyleSheet {\n    loadMoreButton = {\n        border: \"0px\",\n        color: \"#333\",\n        borderRadius: \"0\",\n        borderBottom: \"0\",\n        backgroundColor: \"#eee\",\n        padding: \"5px 10px\",\n    };\n\n    writingSectionStyle = {\n        height: \"auto\",\n        marginTop: \"10px\",\n    };\n\n    @styleRule\n    chatInputStyle = {\n        height: \"30px\",\n        width: \"100%\",\n        paddingBottom: \"0\",\n        fontSize: \"14px\",\n        borderRadius: \"0\",\n        outline: \"none\",\n        paddingLeft: \"8px\",\n        paddingTop: \"5px\",\n        resize: \"none\",\n        transition: \".2s\",\n        display: \"block\",\n        border: \"1px solid #aaa\",\n        \":focus\": {\n            height: \"120px\",\n            transition: \".2s\",\n        },\n        \":active\": {\n            height: \"120px\",\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    chatInputMax = {\n        height: \"120px\",\n    };\n\n    previewButtonStyle = { // TODO: This is currently not restyled. We might not want to use it because previewButton is bad practice\n        height: \"30px\",\n        width: \"auto\",\n        fontSize: \"100%\",\n        marginLeft: \"5px\",\n    };\n}\n\nexport {CommentWidgetStyle}","import {UI, TimePassedSpan, Switcher, AjaxButton, TextArea, Button, registerStyle} from \"UI\";\nimport {GlobalState} from \"State\";\nimport {GroupChatStore, MessageThreadStore, MessageThread, MessageInstance} from \"MessageThreadStore\";\nimport {ChatMessageScrollSection, ChatWidget, EditableMessage} from \"ChatWidget\";\nimport {isDifferentDay, StemDate} from \"Time\";\nimport {UserHandle} from \"UserHandle\";\nimport {LoginModal} from \"LoginModal\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {BlogStyle} from \"BlogStyle\";\nimport {Level} from \"ui/Constants\";\nimport {MarkupRenderer} from \"MarkupRenderer\";\nimport {CommentWidgetStyle} from \"./CommentWidgetStyle\";\n\n\nclass ThreadMessage extends EditableMessage {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            deletable: false,\n        });\n    }\n\n    render() {\n        let messageDate = <TimePassedSpan timeStamp={this.message.getDate()} style={{color: \"#666 !important\", textTransform: \"uppercase\", fontSize: \".85em\",}} />\n\n        let editButton;\n        if (this.message.userId === USER.id || USER.isSuperUser) {\n            editButton = <a style={Object.assign({\"cursor\": \"pointer\", padding: \"0 10px\", fontSize: \"1.05em\", lineHeight: \"0px\",})} onClick={() => this.toggleEditMode()}>\n                edit\n            </a>;\n        }\n\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <div ref=\"contentContainer\">\n                    <MarkupRenderer ref=\"content\" value={this.message.getContent()} />\n                </div>\n            </Switcher>;\n        }\n\n        let votes = <CommentVotingWidgetWithThumbs height={40} style={{float: \"left\"}} message={this.message} ref=\"commentVotingWidget\" />;\n\n        return [\n            <span style={{float: \"right\", display: \"inline-block\", height: \"40px\", lineHeight: \"40px\",}}>{messageDate}</span>,\n            <div style={{\n                height: \"40px\",\n                lineHeight: \"40px\",\n            }}>\n                <div style={{\n                    height: \"40px\",\n                    lineHeight: \"40px\",\n                    display: \"inline-block\",\n                    float: \"left\",\n                    fontSize: \".95em\",\n                    color: \"#333\",\n                }}>\n                    <UserHandle userId={this.message.userId} style={{fontSize: \"1.1em\",}}/>\n                </div>\n                {editButton}\n            </div>,\n            <div style={{\n                paddingTop: \"5px\",\n                fontSize: \"16px\",\n            }}>\n                {this.contentSwitcher}\n            </div>,\n            <div style={{\n                height: \"40px\",\n            }}>\n                {votes}\n            </div>,\n            <div style={{\n                height: \"1px\",\n                width: \"100%\",\n                backgroundColor: \"#ddd\",\n            }}></div>,\n        ];\n    }\n}\n\nclass ToggleLogin extends UI.Primitive(\"span\") {\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            LoginModal.show();\n            return;\n        });\n    }\n}\n\n\n@registerStyle(BlogStyle)\nclass BlogCommentWidget extends ChatWidget(ThreadMessage) {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            entryComparator: (a, b) => {\n                return b.getNormalizedId() - a.getNormalizedId();\n            }\n        })\n    }\n\n    get commentWidgetStyle() {\n        return CommentWidgetStyle.getInstance();\n    }\n\n    renderMessageView() {\n        let loadMoreButton;\n\n        if (this.showLoadMoreButton) {\n            loadMoreButton = (\n                <div className=\"text-center\">\n                    <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                style={this.commentWidgetStyle.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                    />\n                </div>\n            );\n        }\n\n        return [\n            <ChatMessageScrollSection ref=\"messageWindow\"\n                                      entryRenderer={this.options.renderMessage}\n                                      entries={this.messageThread.getMessages(true)}\n                                      entryComparator={this.options.entryComparator}\n                                      staticTop={loadMoreButton} />\n        ];\n    }\n\n    renderMessageBox() {\n        return [\n            <div ref=\"writingSection\" style={this.commentWidgetStyle.writingSectionStyle}>\n                <TextArea readOnly={this.messageThread.muted}\n                          ref=\"chatInput\"\n                          onChange={() => {\n                              if (this.chatInput.getValue()) {\n                                  this.chatInput.addClass(this.commentWidgetStyle.chatInputMax);\n                              } else {\n                                  this.chatInput.removeClass(this.commentWidgetStyle.chatInputMax);\n                              }\n                          }}\n                          className={this.commentWidgetStyle.chatInputStyle}\n                          placeholder=\"Leave a comment...\"/>\n                <Button disabled={this.messageThread.muted}\n                           label=\"SUBMIT\"\n                           ref=\"sendMessageButton\"\n                           className={this.styleSheet.sendMessageButtonStyle}\n                           level={Level.PRIMARY}\n                           onClick={() => this.sendMessage()} />\n                {/*{this.messageThread.hasMarkupEnabled() ?\n                        <PreviewMarkupButton disabled={this.messageThread.muted} ref=\"markupButton\" style={previewButtonStyle}\n                                         getValue={() => {return this.chatInput.getValue();}}\n                                         setValue={(value) => {this.chatInput.setValue(value);this.chatInput.node.focus();}}\n                        /> : null}*/ /* UNCOMMENT THIS !! */}\n            </div>\n        ];\n    }\n\n    render() {\n        return [\n            this.renderMessageBox(),\n            this.renderMessageView(),\n        ];\n    }\n\n    getDefaultPlugins() {\n        return CommentWidget.defaultPlugins || [];\n    }\n\n    createVirtualMessage(request, message) {\n        return null;\n    }\n}\n\n@registerStyle(BlogStyle)\nclass CommentWidget extends BlogCommentWidget {\n    setOptions(options) {\n        super.setOptions(options);\n\n        this.key = this.messageThread.id;\n\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n        this.options.dateTimestamps = false;\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    renderMessageBox() {\n        if (USER.isAuthenticated) {\n            return super.renderMessageBox();\n        } else {\n            return <div style={{\n                color: \"#333\",\n                paddingTop: \"5px\",\n                paddingBottom: \"5px\",\n            }}>You need to&nbsp;\n                <ToggleLogin style={{\n                    backgroundColor: \"#eee\",\n                    cursor: \"pointer\",\n                    padding: \"5px 10px\",\n                }}>\n                    login\n                </ToggleLogin>\n                &nbsp;to send a comment.</div>;\n        }\n    }\n\n    render() {\n        let commentsCount = this.messageThread.getMessages().length;\n        let commentsTitle;\n\n        commentsTitle = <div className={this.styleSheet.commentsTitle}>\n            {commentsCount} {commentsCount != 1 ? \"comments\" : \"comment\"}\n        </div>;\n\n        return [commentsTitle, super.render()];\n    }\n}\n\nclass AsyncCommentThread extends UI.Element {\n    getMessageThread() {\n        let groupChat = GroupChatStore.get(this.options.chatId);\n        return groupChat && groupChat.getMessageThread();\n    }\n\n    render() {\n        let messageThread = this.getMessageThread();\n        let commentWidgetOptions = {\n            marginBottom: \"10px\",\n            paddingBottom: \"10px\",\n            height: \"auto\",\n            width: \"100%\",\n            marginTop: \"50px\",\n            marginLeft: \"0px\",\n            marginRight: \"0px\",\n            border: \"0px\",\n            maxWidth: \"900px\"\n        };\n\n        if (messageThread) {\n            return [<CommentWidget ref=\"commentsSection\" chatId={this.options.chatId} messageThread={messageThread}\n                                   style={commentWidgetOptions} />];\n        } else {\n            GroupChatStore.fetch(this.options.chatId, (groupChat) => {\n                this.redraw();\n            });\n            return [\n                <div style={{\n                    width: \"100%\",\n                    height: \"60px\",\n                    lineHeight: \"60px\",\n                    fontSize: \"1em\",\n                    textAlign: \"center\",\n                    textTransform: \"uppercase\",\n                    fontWeight: \"bold\",\n                }}>\n                    <span className=\"fa fa-spinner fa-spin\" style={{\n                        padding: \"0 8px\",\n                    }}/>\n                    Comments loading...\n                </div>\n            ];\n        }\n    }\n}\n\nexport {CommentWidget, AsyncCommentThread};\n","import {UI} from \"./UIBase\";\nimport {keyframesRule} from \"../decorators/Style\";\nimport {registerStyle} from \"./style/Theme\";\nimport {StyleSheet} from \"./Style\";\n\nfunction getCircleStyle(size, borderSize, color, animationName, animationDuration) {\n    return {\n        position: \"absolute\",\n\n        height: size + \"px\",\n        width: size + \"px\",\n\n        border: borderSize + \"px solid \" + color,\n        borderRadius: size + \"px\",\n        borderRight: borderSize + \"px transparent\",\n        borderBottom: borderSize + \"px transparent\",\n\n        rotate: \"0deg\",\n        transform: \"rotate(45deg)\",\n\n        animationName: animationName,\n        animationDuration: animationDuration,\n        animationIterationCount: \"infinite\",\n        animationTimingFunction: \"linear\",\n    };\n}\n\nfunction createCircle(size, borderSize, color, animationName, animationDuration) {\n    return <div style={getCircleStyle(size, borderSize, color, animationName, animationDuration)} />;\n}\n\nclass RotatingHelperStyle extends StyleSheet {\n    @keyframesRule\n    rotateClockwise = {\n        \"0%\": {\n            transform: \"rotate(0deg)\"\n        },\n        \"100%\":  {\n            transform: \"rotate(360deg)\"\n        }\n    };\n\n    @keyframesRule\n    rotateCounterclockwise = {\n        \"0%\": {\n            transform: \"rotate(0deg)\"\n        },\n        \"100%\":  {\n            transform: \"rotate(-360deg)\"\n        }\n    }\n}\n\n@registerStyle(RotatingHelperStyle)\nclass ConcentricCirclesLoadingScreen extends UI.Element {\n    render() {\n        let centerConstant = 100;\n        return <div style={{\n            height: \"100%\",\n            width: \"100%\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            marginTop: \"200px\",\n        }}>\n            {createCircle(225 - centerConstant, 5, \"#3a4859\", this.styleSheet.rotateClockwise, \"2.25s\")}\n            {createCircle(200 - centerConstant, 4, \"#666666\", this.styleSheet.rotateCounterclockwise, \"1.5s\")}\n            {createCircle(175 - centerConstant, 3, \"#aaaaaa\", this.styleSheet.rotateClockwise, \"1s\")}\n            {createCircle(150 - centerConstant, 2, \"#20232d\", this.styleSheet.rotateCounterclockwise, \"3s\")}\n        </div>;\n    }\n}\n\nexport {ConcentricCirclesLoadingScreen}\n","import {ensure} from \"../base/Require\";\n\nlet DelayedElement = (BaseClass) => class DelayedElement extends BaseClass {\n    applyNodeAttributesNotLoaded() {\n        super.applyNodeAttributes();\n    }\n\n    applyNodeAttributesLoaded() {\n        super.applyNodeAttributes();\n    }\n\n    applyNodeAttributes() {\n        if (!this._loaded) {\n            return this.applyNodeAttributesNotLoaded();\n        } else {\n            return this.applyNodeAttributesLoaded();\n        }\n    }\n\n    renderNotLoaded() {\n        return \"Loading component...\";\n    }\n\n    renderLoaded() {\n        return super.render();\n    }\n\n    render() {\n        if (!this._loaded) {\n            return this.renderNotLoaded();\n        } else {\n            return this.renderLoaded();\n        }\n    }\n\n    setLoaded() {\n        if (this._loaded) {\n            return;\n        }\n        this._loaded = true;\n        if (!this.node) {\n            return;\n        }\n        super.redraw();\n        if (!this._executedMount) {\n            this._executedMount = true;\n            this.onDelayedMount();\n        }\n    }\n\n    beforeRedrawNotLoaded() {\n        // Implement here anything you might need\n    }\n\n    redrawNotLoaded() {\n        this.beforeRedrawNotLoaded();\n        // The previous code might have triggered a redraw, skip if that was the case\n        if (!this._loaded) {\n            super.redraw();\n        }\n    }\n\n    redrawLoaded() {\n        super.redraw();\n    }\n\n    redraw() {\n        if (!this._loaded) {\n            return this.redrawNotLoaded();\n        }\n        return this.redrawLoaded();\n    }\n\n    onMount() {\n        // Nothing to be done here\n    }\n\n    onDelayedMount() {\n        super.onMount();\n    }\n};\n\nlet ScriptDelayedElement = (BaseClass, scripts) => class ScriptDelayedElement extends DelayedElement(BaseClass) {\n    beforeRedrawNotLoaded() {\n        // TODO: what happens if this gets destroyed before the load finishes? Should cancel this\n        ensure(scripts, () => {\n            this.setLoaded();\n        });\n    }\n};\n\nexport {DelayedElement, ScriptDelayedElement}\n","import {UI} from \"./UIBase\";\nimport {ConcentricCirclesLoadingScreen} from \"./ConcentricCirclesLoadingScreen\";\nimport {DelayedElement} from \"./DelayedElement\";\nimport {Ajax} from \"base/Ajax\";\nimport {GlobalState} from \"state/State\";\nimport {CardPanel} from \"./CardPanel\";\nimport {Level} from \"./Constants\";\n\n// You can configure the loading/error states by defining the \"renderLoading\" and \"renderError\" attributes of the\n// function somewhere globally in your app.\n// Example:\n// StateDependentElement.renderLoading = \"Loading...\";\n// or\n// StateDependentElement.renderLoading = () => <MyCustomLoadingAnimation />\n// StateDependentElement.renderError = (error) => <MyCustomErrorMessageClass error={error} />\n\nexport let StateDependentElement = (BaseClass) => class StateDependentElementClass extends DelayedElement(BaseClass) {\n    importState(data) {\n        GlobalState.importState(data.state || {});\n        for (let key of Object.keys(data)) {\n            if (key !== \"state\") {\n                this.options[key] = data[key];\n            }\n        }\n    }\n\n    getAjaxUrl() {\n        let url = location.pathname;\n        if (!url.endsWith(\"/\")) {\n            url += \"/\";\n        }\n        return url;\n    }\n\n    getAjaxRequest() {\n        return {};\n    }\n\n    renderNotLoaded() {\n        let renderLoading = StateDependentElement.renderLoading;\n        if (typeof renderLoading === \"function\") {\n            renderLoading = renderLoading();\n        }\n        return renderLoading;\n    }\n\n    setError(error) {\n        this.options.error = error;\n    }\n\n    renderError() {\n        let renderError = StateDependentElement.renderError;\n        if (typeof renderError === \"function\") {\n            renderError = renderError(this.options.error);\n        }\n        return renderError;\n    }\n\n    renderLoaded() {\n        if (this.options.error) {\n            return this.renderError();\n        }\n        return super.renderLoaded();\n    }\n\n    onDelayedMount() {\n        if (!this.options.error) {\n            super.onDelayedMount();\n        }\n    }\n\n    beforeRedrawNotLoaded() {\n        Ajax.getJSON(this.getAjaxUrl(), this.getAjaxRequest()).then(\n            (data) => {\n                this.importState(data);\n                this.setLoaded();\n            },\n            (error) => {\n                this.setError(error);\n                this.setLoaded();\n            }\n        );\n    }\n};\n\nStateDependentElement.renderLoading = () => <ConcentricCirclesLoadingScreen/>;\n\nStateDependentElement.renderError = (error, message) => {\n    return <div style={{maxWidth: \"300px\", margin: \"0 auto\", marginTop: \"30px\"}}>\n            <CardPanel title={UI.T(\"Error in opening the URL\")} level={Level.ERROR}>\n                <h3>{message || error.message}</h3>\n            </CardPanel>\n        </div>;\n};\n","import {Ajax} from \"Ajax\";\nimport {UI, Button, Link, Modal, Form, FormField, TextInput, FormGroup, CheckboxInput, TemporaryMessageArea} from \"UI\";\nimport {StemDate} from \"Time\";\nimport {GlobalState} from \"State\";\nimport {BlogEntryStore} from \"BlogStore\";\nimport {ArticleStore} from \"ArticleStore\";\nimport {MarkupEditor} from \"markup/MarkupEditor\";\nimport {UserHandle} from \"UserHandle\";\nimport {BlogArticleRenderer} from \"./BlogArticleRenderer\";\nimport {ArticleEditor} from \"ArticleEditor\";\nimport {AsyncCommentThread} from \"CommentWidget\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {slugify} from \"Utils\";\nimport {FAIcon} from \"FontAwesome\";\nimport {BlogStyle} from \"BlogStyle\";\nimport {StateDependentElement} from \"StateDependentElement\";\nimport {Route, Router} from \"Router\";\nimport {Dispatcher} from \"Dispatcher\";\n\nimport {Theme} from \"ui/style/Theme\";\nimport {Level} from \"ui/Constants\";\n\nexport class BlogEntryEditModal extends Modal {\n    getModalWindowStyle() {\n        return Object.assign({}, super.getModalWindowStyle(), {\n            margin: \"0 auto\",\n            maxHeight: \"100%\",\n            overflow: \"initial\",\n            display: \"flex\",\n            flexDirection: \"column\",\n            top: \"1vh\",\n            height: \"98vh\",\n        });\n    }\n\n    getGivenChildren() {\n        let entry = BlogEntryStore.get(this.options.entryId);\n        let article = entry.getArticle();\n\n        let discussionButton = null;\n        if (!entry.discussionId) {\n            discussionButton = <Button level={Level.WARNING} label=\"Create discussion\"\n                                       onClick={() => this.createDiscussion()} style={{marginLeft: \"5px\"}}/>;\n        }\n\n        return [\n            <h3>Edit Entry</h3>,\n            <Form>\n                <FormField label=\"Title\">\n                    <TextInput ref=\"titleInput\" value={article.name} />\n                </FormField>\n                <FormField label=\"URL Name\">\n                    <TextInput ref=\"urlInput\" value={entry.urlName} />\n                </FormField>\n                <FormField label=\"Visible\">\n                    <CheckboxInput ref=\"visibleCheckbox\" value={entry.visible} />\n                </FormField>\n                <Button level={Level.PRIMARY} label=\"Change settings\" onClick={() => this.changeSettings()} />\n                {discussionButton}\n                <TemporaryMessageArea ref=\"messageArea\"/>\n            </Form>,\n            <ArticleEditor ref=\"contentEditor\" articleId={article.id} style={{flex: \"1\"}} />\n        ];\n    }\n\n    changeSettings() {\n        let title = this.titleInput.getValue();\n        let urlName = this.urlInput.getValue();\n\n        let request = {\n            entryId: this.options.entryId,\n            isVisible: this.visibleCheckbox.getValue(),\n        };\n\n        if (title) {\n            request.title = title;\n        }\n\n        if (urlName) {\n            request.urlName = urlName;\n        }\n\n        Ajax.postJSON(\"/blog/change_entry_settings/\", request).then(\n            (data) => {\n                if (data.urlName) {\n                    Router.changeURL([\"blog\", data.urlName]);\n                }\n                this.hide();\n            }\n        );\n    }\n\n    createDiscussion() {\n        let request = {\n            entryId: this.options.entryId\n        };\n\n        Ajax.postJSON(\"/blog/create_entry_discussion/\", request).then(\n            () => this.hide()\n        );\n    }\n}\n\nexport class NewBlogEntryModal extends Modal {\n    getGivenChildren() {\n        return [\n            <h1>New Entry</h1>,\n            <FormGroup>\n                <FormField label=\"Title\">\n                    <TextInput ref=\"titleInput\" />\n                </FormField>\n                <FormField label=\"URL Name\">\n                    <TextInput ref=\"urlInput\" />\n                </FormField>\n                <FormField label=\"Visible\">\n                    <CheckboxInput ref=\"visibleCheckbox\"/>\n                </FormField>\n                <Button label=\"Add Entry\" level={Level.PRIMARY} onClick={() => {this.addEntry()}}/>\n                <MarkupEditor ref=\"postContentMarkup\" style={{height: \"450px\"}} />\n            </FormGroup>\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n\n        this.titleInput.onKeyUp(() => {\n            this.urlInput.setValue(slugify(this.titleInput.getValue()));\n        });\n    }\n\n    addEntry() {\n        let data = {};\n\n        let title = this.titleInput.getValue();\n        if (title) {\n            data.title = title;\n        }\n\n        let urlName = this.urlInput.getValue();\n        if (urlName) {\n            data.urlName = urlName;\n        }\n\n        data.isVisible = this.visibleCheckbox.getValue();\n\n        let content = this.postContentMarkup.getValue();\n        if (content) {\n            data.content = content;\n        }\n\n        Ajax.postJSON(\"/blog/add_entry/\", data).then(\n            (data) => {\n                let blogEntry = BlogEntryStore.get(data.blogEntryId);\n                Router.changeURL([\"blog\", blogEntry.urlName]);\n                this.hide();\n            }\n        );\n    }\n}\n\nclass BlogEntryPreview extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.setStyle({\n            position: \"relative\",\n            maxHeight: \"420px\",\n            marginTop: \"45px\",\n            marginBottom: \"45px\",\n        });\n    }\n\n    canOverwrite(obj) {\n        return super.canOverwrite(obj) && this.options.entryId === obj.options.entryId;\n    }\n\n    getBlogEntry() {\n        return BlogEntryStore.get(this.options.entryId);\n    }\n\n    getBlogArticle() {\n        return this.getBlogEntry().getArticle();\n    }\n\n    getEntryURL() {\n        return \"/blog/\" + this.getBlogEntry().urlName + \"/\";\n    }\n\n    render() {\n        const blogStyle = this.getStyleSheet();\n        const article = this.getBlogArticle();\n\n        // TODO: not actually the published date\n        let publishedDate = article.dateCreated;\n        let publishedFormat = StemDate.unix(publishedDate).format(\"LL\");\n        let modifiedFormat;\n\n        let articleInfoStyle = {\n            color: \"#777\",\n            fontSize: \"1em\",\n            margin: \"0\",\n            fontStyle: \"italic\",\n        };\n\n        if (article.dateModified > article.dateCreated) {\n            modifiedFormat = <p style={articleInfoStyle}>{UI.T(\"Last update on\")} {StemDate.unix(article.dateModified).format(\"LL\")}.</p>\n        }\n\n        return [\n            <div style={{height: \"100%\",}}>\n                <div style={{\n                    boxShadow: \"0px 0px 10px rgb(160, 162, 168)\",\n                    \"background-color\": \"#fff\",\n                    \"padding\": \"1% 4% 10px 4%\",\n                    \"margin\": \"0 auto\",\n                    \"width\": \"900px\",\n                    \"max-width\": \"100%\",\n                    position: \"relative\"\n                }}>\n                    <div style={blogStyle.writtenBy}>\n                        {UI.T(\"Written by\")} <UserHandle\n                        userId={article.userCreatedId}/>, {publishedFormat}.{modifiedFormat}\n                    </div>\n                    <div style={blogStyle.title}>\n                        <Link href={this.getEntryURL()} value={article.name}\n                              style={{\"text-decoration\": \"none\", \"color\": \"inherit\"}}/>\n                    </div>\n                    <BlogArticleRenderer article={article} style={blogStyle.blogArticleRenderer}/>\n                    <div className={blogStyle.whiteOverlay}></div>\n                    <Link href={this.getEntryURL()} style={blogStyle.link} value={UI.T(\"Continue reading\")}/>\n                </div>\n            </div>\n        ];\n    }\n}\n\nclass BlogEntryView extends UI.Element {\n    get pageTitle() {\n        return this.getBlogArticle().name;\n    }\n\n    getBlogEntry() {\n        return BlogEntryStore.get(this.options.entryId);\n    }\n\n    getBlogArticle() {\n        return this.getBlogEntry().getArticle();\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSheet().blogEntryView);\n    }\n\n    getComments() {\n        let chatId = this.getBlogEntry().discussionId;\n        if (!chatId) {\n            return null;\n        }\n        return (<div style={{marginBottom: \"20px\", marginTop: \"20px\"}}>\n            <AsyncCommentThread chatId={chatId}/>\n        </div>);\n    }\n\n    render() {\n        const article = this.getBlogArticle();\n        const blogStyle = this.getStyleSheet();\n\n        // TODO: not actually the published date\n        let publishedDate = article.dateCreated;\n        let publishedFormat = StemDate.unix(publishedDate).format(\"LL\");\n        let modifiedFormat;\n\n        let articleInfoStyle = {\n            margin: \"3px\",\n            color: \"#777\",\n            fontSize: \"1em\",\n            fontStyle: \"italic\",\n        };\n\n        if (article.dateModified > article.dateCreated) {\n            modifiedFormat = <p style={articleInfoStyle}>Last update on {StemDate.unix(article.dateModified).format(\"LL\")}.</p>\n        }\n\n        let blogEntryEditButton;\n        // TODO: should use proper rights\n        if (USER.isSuperUser) {\n            blogEntryEditButton = <Button level={Level.DEFAULT} label=\"Edit\" onClick={() => {\n                BlogEntryEditModal.show({entryId: this.getBlogEntry().id, fillScreen: true});\n            }}/>\n        }\n\n        return [\n            <div style={{\n                \"background-color\": \"#fff\",\n                \"padding\": \"2% 5%\",\n                \"box-shadow\": \"rgb(160, 160, 160) 0px 3px 15px\",\n            }}>\n                {blogEntryEditButton}\n                <div style={blogStyle.writtenBy}>\n                    Written by <UserHandle userId={article.userCreatedId}/> on {publishedFormat}.\n                    {modifiedFormat}\n                </div>\n                <div style={blogStyle.title}>{article.name}</div>\n                <BlogArticleRenderer style={blogStyle.article} article={article}/>\n                <div style={{\n                    \"margin-top\": \"30px\",\n                    \"margin-bottom\": \"10px\",\n                }}>\n                    <Link href=\"/blog/\" style={blogStyle.link} value=\"Back to the Main Blog\"/>\n                </div>\n                {this.getComments()}\n            </div>,\n            <div className={blogStyle.bottomSection}>\n            </div>\n        ];\n    }\n}\n\nclass BlogEntryList extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.setStyle(\"paddingTop\", \"10px\");\n    }\n\n    showNewBlogPostModal() {\n        let modal = <NewBlogEntryModal fillScreen/>;\n        modal.show();\n    }\n\n    render() {\n        const blogStyle = this.getStyleSheet();\n\n        let entries = [];\n\n        let blogEntries = BlogEntryStore.all().sort((a, b) => {\n            return b.getArticle().dateCreated - a.getArticle().dateCreated;\n        });\n\n        for (let entry of blogEntries) {\n            entries.push(<BlogEntryPreview key={entry.id} entryId={entry.id}/>);\n        }\n\n        return [\n            USER.isSuperUser ?\n                <Button label=\"New Entry\"\n                        level={Level.DEFAULT}\n                        onClick={() => this.showNewBlogPostModal()}\n                />\n                : null,\n            <div ref=\"entriesList\">\n                {entries}\n            </div>,\n            <Button label={this.options.finishedLoading ? UI.T(\"End of blog\") : UI.T(\"Load More\")}\n                    ref=\"loadMoreButton\"\n                    style={{margin: \"0px auto\", display: \"block\"}}\n                    className={blogStyle.loadMoreButton}\n                    disabled={this.options.finishedLoading} />,\n            <div style={{\n                height: \"45px\",\n                width: \"100%\",\n            }}/>\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n\n        this.loadMoreButton.addClickListener(() => {\n            if (!this.options.finishedLoading) {\n                Ajax.getJSON(\"/blog/\", {\n                    lastDate: Math.min.apply(null, BlogEntryStore.all().map(x => x.getArticle().dateCreated))\n                }).then(\n                    (data) => {\n                        this.options.finishedLoading = data.finishedLoading;\n                        if (this.options.finishedLoading) {\n                            this.loadMoreButton.options.label = UI.T(\"No more posts\");\n                            this.loadMoreButton.redraw();\n                            this.loadMoreButton.disable();\n                        }\n                        this.redraw();\n                    }\n                );\n            }\n        });\n\n        this.attachCreateListener(BlogEntryStore, () => {\n            this.redraw();\n        });\n    }\n}\n\nTheme.register(BlogEntryView, BlogStyle);\nTheme.register(BlogEntryPreview, BlogStyle);\nTheme.register(BlogEntryList, BlogStyle);\n\nclass DelayedBlogEntryList extends StateDependentElement(BlogEntryList) {\n}\n\nclass DelayedBlogEntryView extends StateDependentElement(BlogEntryView) {\n    getBlogEntry() {\n        return BlogEntryStore.getEntryForURL(this.options.entryURL);\n    }\n\n    get pageTitle() {\n        if (this.getBlogEntry()) {\n            return super.pageTitle;\n        } else {\n            return null;\n        }\n    }\n\n    set pageTitle(value) {\n    }\n\n    onDelayedMount() {\n        super.onDelayedMount();\n        Router.updateURL();\n    }\n\n    getAjaxUrl() {\n        return \"/blog/get_blog_post/\";\n    }\n\n    getAjaxRequest() {\n        return {\n            entryUrlName: this.options.entryURL,\n        }\n    }\n}\n\nclass BlogRoute extends Route {\n    getSubroutes() {\n        return [\n            new Route(\"%s\", (options) => {\n                let entryURL = options.args[options.args.length - 1];\n\n                let blogEntry = BlogEntryStore.getEntryForURL(entryURL);\n\n                if (blogEntry) {\n                    return <BlogEntryView entryId={blogEntry.id} />;\n                } else {\n                    return <DelayedBlogEntryView entryURL={entryURL} />;\n                }\n            }),\n        ]\n    }\n\n    constructor(expr=\"blog\", options={}) {\n        options.title = options.title || \"Blog\";\n        super(expr, DelayedBlogEntryList, [], options);\n        this.subroutes = this.getSubroutes();\n    }\n}\n\nexport {BlogEntryPreview, DelayedBlogEntryList, DelayedBlogEntryView, BlogEntryView, BlogRoute};\n","import {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {MessageThreadStore, MessageInstanceStore} from \"MessageThreadStore\";\nimport {PublicUserStore} from \"UserStore\";\nimport {Ajax} from \"Ajax\";\nimport {NOOP_FUNCTION} from \"Utils\";\n\nclass Forum extends StoreObject {\n    constructor() {\n        super(...arguments);\n        this.forumThreads = new Map();\n        // TODO: not appropriate to register to streams here\n        this.registerToStream();\n        ForumThreadStore.addDeleteListener((forumThread) => {\n            if (forumThread.parentId === this.id && this.forumThreads.has(forumThread.id)) {\n                this.deleteForumThread(forumThread);\n            }\n        });\n    }\n\n    getStreamName() {\n        return \"forum-\" + this.id;\n    }\n\n    getForumThreads() {\n        let forumThreads = Array.from(this.forumThreads.values());\n        // Filter out hidden forum threads\n        forumThreads = forumThreads.filter(forumThread => forumThread.isVisible());\n        forumThreads.sort((a, b) => {return b.id - a.id});\n        return forumThreads;\n    }\n\n    addForumThread(forumThread, event) {\n        this.forumThreads.set(forumThread.id, forumThread);\n        this.dispatch(\"newForumThread\", event);\n    }\n\n    deleteForumThread(forumThread) {\n        this.forumThreads.delete(forumThread.id);\n        this.dispatch(\"deleteForumThread\", forumThread);\n    }\n}\n\nvar ForumStore = new GenericObjectStore(\"forum\", Forum);\n\nclass ForumThread extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        let parent = this.getParent();\n        parent && parent.addForumThread(this);\n    }\n\n    getAuthor() {\n        return PublicUserStore.get(this.authorId);\n    }\n\n    isPinned() {\n        return this.pinnedIndex != null;\n    }\n\n    getPinIndex() {\n        return this.pinnedIndex;\n    }\n\n    getTitle() {\n        return this.title;\n    }\n\n    getContentMessage() {\n        return MessageInstanceStore.get(this.contentMessageId);\n    }\n\n    getVotesBalance() {\n        let message = this.getContentMessage();\n        if (message) {\n            return message.getVotesBalance();\n        }\n        return this.votesBalance;\n    }\n\n    getParent() {\n        return ForumStore.get(this.parentId);\n    }\n\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getTimeAdded() {\n        // TODO: maybe return formatted time\n        return this.timeAdded;\n    }\n\n    getLastActive() {\n        return this.lastActive;\n    }\n\n    getNumReplies() {\n        return this.getNumMessages() - 1;\n    }\n\n    deleteThread(onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/forum/edit_forum_thread/\", {\n            forumThreadId: this.id,\n            hidden: true,\n        }).then(onSuccess, onError);\n    }\n\n    getNumMessages() {\n        return this.numMessages;\n    }\n\n    isVisible() {\n        return !this.hidden;\n    }\n\n    isLoaded() {\n        // TODO: this needs to be fixed to support dynamic loading\n        // console.warn(this.getNumReplies(), this.getMessageThread().getNumMessages());\n        return this.getMessageThread() != null && this.getNumReplies() === this.getMessageThread().getNumMessages() - 1;\n    }\n}\n\nconst ForumThreadStore = new GenericObjectStore(\"forumthread\", ForumThread, {\n    dependencies: [\"forum\", \"messageinstance\"]\n});\n\n\nexport {ForumStore, ForumThreadStore};","import {UI, Button} from \"UI\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {Level} from \"ui/Constants\";\n\nclass EditThreadReplyButton extends Button {\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        options.level = options.level || Level.PRIMARY;\n        super.setOptions(options);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            EditThreadReplyModal.show({\n                messageInstance: this.options.messageInstance,\n                classMap: ChatMarkupRenderer.classMap\n            });\n        });\n    }\n}\n\nclass EditThreadReplyModal extends MarkupEditorModal {\n    onMount() {\n        super.onMount();\n        this.markupEditor.setValue(this.options.messageInstance.getContent());\n        // this.markupEditor.codeEditor.getAce().focus();\n        this.doneButton.addClickListener(() => {\n            this.options.messageInstance.edit(this.markupEditor.getValue());\n        });\n    }\n}\n\nexport {EditThreadReplyButton};\n","import {UI, ActionModal, ActionModalButton} from \"UI\";\n\nclass DeleteThreadReplyModal extends ActionModal {\n    getTitle() {\n        return UI.T(\"Delete message\");\n    }\n\n    getActionName() {\n        return UI.T(\"Delete\");\n    }\n\n    getBody() {\n        return <p>{UI.T(\"Are you sure you want to delete the message?\")}</p>;\n    }\n\n    action() {\n        this.options.messageInstance.deleteMessage();\n        this.hide();\n    }\n}\n\nlet DeleteThreadReplyButton = ActionModalButton(DeleteThreadReplyModal);\n\nexport {DeleteThreadReplyButton};","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n//import {CSAStyle} from \"CSAStyle\";\n\nconst colors = {\n    // BLUE: \"#20232d\",\n    BLUE: \"#202e3e\",\n    HOVER_BLUE: \"#364251\",\n    // BLACK: \"#181a22\",\n    BLACK: \"#1c2937\",\n    // HOVER_BLACK: \"#323539\",\n    HOVER_BLACK: \"#364251\",\n    WHITE: \"#eee\",\n};\n\n\nclass ForumThreadReplyStyle extends StyleSheet {\n    fontFamily = \"lato, open sans\";\n\n    @styleRule\n    mainClass = {\n        width: \"90%\",\n        margin: \"0 auto\",\n        maxWidth: \"1200px\",\n    }\n\n    @styleRule\n    repliesUserAndDate = {\n        height: \"40px\",\n        width: \"100%\",\n        lineHeight: \"40px\",\n        fontSize: \"15px\",\n        marginTop: \"8px\",\n        marginBottom: \"8px\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    repliesUser = {\n        display: \"inline-block\",\n        float: \"left\",\n        color: \"#444\",\n        fontSize: \"14px\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    repliesDate = {\n        display: \"inline-block\",\n        float: \"right\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    repliesContent = {\n        marginBottom: \"15px\",\n        fontSize: \"16px\",\n    };\n}\n\n\nlet height = 70;\n\nclass ForumThreadPanelStyle extends StyleSheet {\n    fontFamily = \"lato, open sans\";\n    fontSize = \"0.9em\";\n    numRepliesFontSize = \"1.03em\";\n    messageFontSize = \"1.2em\";\n    buttonFontSize = \"1em\";\n\n    @styleRule\n    mainClass = {\n        margin: \"0 auto\",\n        marginBottom: \"20px\",\n        width: \"100%\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    title = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        fontSize: \"2em\",\n        fontFamily: this.fontFamily,\n        color: \"#333\",\n        minHeight: \"50px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    backButton = {\n        color: \"#444\",\n        fontSize: this.fontsize,\n        textDecoration: \"none\",\n        transition: \".15s\",\n        opacity: \"1\",\n        \":hover\": {\n            opacity: \"1\",\n            color: \"#337ab7\",\n            transition: \".15s\",\n        },\n    };\n\n    @styleRule\n    replyButtonDiv = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        height: \"50px\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        margin: \"0 auto\",\n    };\n\n    @styleRule\n    replyButton = {\n        margin: \"0\",\n    };\n\n    @styleRule\n    fullPost = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        fontSize: this.fontSize,\n        border: \"1px solid #ddd\",\n        borderTop: \"0\",\n    };\n\n    @styleRule\n    dislikeButton = {\n        display: \"inline-block\",\n        float: \"right\",\n        marginRight: \"16px\",\n    };\n\n    @styleRule\n    likeButton = {\n        display: \"inline-block\",\n        float: \"right\",\n        marginRight: \"8px\",\n    };\n\n    @styleRule\n    author = {\n        color: \"#262626\",\n        fontSize: this.fontSize,\n        height: \"50px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        paddingLeft: \"0\",\n        // justifyContent: \"center\",\n        textTransform: \"uppercase\",\n        // fontWeight: \"bold\",\n    };\n\n    @styleRule\n    header = {\n    };\n\n    @styleRule\n    message = {\n        padding: \"5px 12px\",\n        fontSize: this.messageFontSize,\n        color: colors.BLUE,\n        \" p\": {\n            marginBottom: \"0\",\n            padding: \"5px 0\",\n        },\n    };\n\n    @styleRule\n    buttons = {\n        height: \"50px\",\n        width: \"100%\",\n        paddingTop: \"12px\",\n    };\n\n    @styleRule\n    bottomPanel = {\n        height: \"50px\",\n        width: \"100%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n    };\n\n    @styleRule\n    voting = {\n        paddingRight: \"12px\",\n        fontFamily: this.fontFamily,\n    };\n\n    @styleRule\n    numReplies = {\n        height: \"50px\",\n        fontSize: this.numRepliesFontSize,\n        paddingLeft: \"12px\",\n        color: \"#767676\",\n        display: \"flex\",\n        alignItems: \"center\",\n        fontWeight: \"bold\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    replies = {\n        width: \"100%\",\n        color: \"#444\",\n    };\n\n    @styleRule\n    editDeleteButtons = {\n        width: \"100%\",\n        height: \"50px\",\n        padding: \"0 7px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n    };\n\n    @styleRule\n    editButton = {\n        height: \"35px\",\n        width: \"35px\",\n        margin: \"0 4px\",\n        border: \"0\",\n        borderRadius: \"0\",\n        color: \"#fff\",\n        backgroundColor: \"#333\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontSize: this.buttonFontSize,\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: \"#454545\",\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    deleteButton = {\n        height: \"35px\",\n        width: \"35px\",\n        margin: \"0 4px\",\n        border: \"0\",\n        borderRadius: \"0\",\n        color: \"#fff\",\n        backgroundColor: \"#333\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontSize: this.buttonFontSize,\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: \"#454545\",\n            transition: \".2s\",\n        },\n    };\n}\n\n\nclass ButtonStyle extends StyleSheet {\n    @styleRule\n    button = {\n        marginLeft: \"16px\",\n        color: \"#fff\",\n        height: \"30px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: colors.BLUE,\n        border: \"0\",\n        padding: \"5px 10px\",\n        marginBottom: \"0\",\n        borderColor: colors.BLUE,\n        fontSize: \"13px\",\n        transition: \".2s\",\n        outline: \"none\",\n        \":hover\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n\n}\n\n\nclass ForumThreadHeaderStyle extends StyleSheet {\n    constructor() {\n        super({\n            updateOnResize: true,\n        });\n    }\n\n    fontSize = \"0.85em\";\n    widthLimit = 800;\n\n    tagsHeight = 50;\n    fontFamily = \"lato, open sans\";\n    // borderTopColor = \"rgb(232, 189, 35)\";\n    borderTopColor = \"#333\";\n\n    baseStyleObject = {\n        height: this.tagsHeight + \"px\",\n        // display: \"inline-block\",\n        // float: \"left\",\n        fontFamily: this.fontFamily,\n        color: \"#262626\",\n        // letterSpacing: \"-0.3px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        textTransform: \"uppercase\",\n        fontWeight: \"bold\",\n    };\n    \n    @styleRule\n    mainClass = {\n        height: \"40px\",\n        width: \"100%\",\n        maxWidth: \"1200px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        // borderBottom: \"2px solid #333\",// + this.borderTopColor,\n        color: \"#aaa\",\n        display: \"flex\",\n\n\n        boxSizing: \"content-box\",\n        backgroundColor: \"#eaeaea\",\n        height: this.tagsHeight + \"px\",\n        borderTop: \"3px solid \" + this.borderTopColor,\n    };\n\n    @styleRule\n    tagsTitle = [this.baseStyleObject, {\n        // marginLeft: \"1%\",\n        // width: \"40%\",\n        paddingLeft: \"12px\",\n        flex: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"1.5\";\n            }\n            return \"3\";\n        },\n        justifyContent: \"initial\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsAuthor = [this.baseStyleObject, {\n        // width: \"14%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".7\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsReplies = [this.baseStyleObject, {\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsViews = [this.baseStyleObject, {\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n        display: () => {\n            console.log(window.innerWidth);\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    tagsVotes = [this.baseStyleObject, {\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    tagsActivity = [this.baseStyleObject, {\n        // width: \"20%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"12px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n}\n\n\nclass ForumThreadPreviewStyle extends StyleSheet {\n    // functionality\n    maxHeight = 50;\n    lines = 2;\n    lineHeight = this.maxHeight / this.lines;\n\n    // design\n    fontSize = \".88em\";\n    fontFamily = \"lato, open sans\";\n    color = \"#aaa\";\n\n    @styleRule\n    forumThreadPreview = {\n        maxHeight: this.maxHeight + \"px\",\n        lineHeight: this.lineHeight + \"px\",\n        overflow: \"hidden\",\n        fontSize: this.fontSize,\n        fontFamily: this.fontFamily,\n        color: this.color,\n        \" *\": {\n            marginBottom: \"0\",\n        },\n    };\n}\n\n\nclass ForumThreadBubbleStyle extends StyleSheet {\n    constructor() {\n        super({\n            updateOnResize: true,\n        });\n    }\n\n    fontFamily = \"lato, open sans\";\n    fontSize = \"1em\";\n    titlePaddingBottom = \"10px\";\n    widthLimit = 800;\n\n    baseStyleObject = {\n        display: \"inline-block\",\n        verticalAlign: \"top\",\n        fontFamily: this.fontFamily,\n        fontSize: this.fontSize,\n    };\n\n    @styleRule\n    backgroundColorOddInstances = {\n        backgroundColor: \"#f4f6f7\",\n        \":hover\": {\n            backgroundColor: \"#eff1f2\",\n        },\n    };\n\n    @styleRule\n    backgroundColorPinnedInstances = {\n        backgroundColor: \"#f4f6f7\",\n        \":hover\": {\n            backgroundColor: \"#eff1f2\",\n        },\n    };\n\n    @styleRule\n    backgroundColorEvenInstances = {\n        backgroundColor: \"#fff\",\n        \":hover\": {\n            backgroundColor: \"#fafafa\",\n        }\n    };\n\n    @styleRule\n    mainClass = {\n        width: \"100%\",\n        maxWidth: \"1200px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        color: \"#555\",\n        border: \"1px solid #ddd\",\n        borderTop: \"0\",\n        display: \"flex\",\n    };\n\n    @styleRule\n    threadTitleAndPreview = {\n        flexDirection: \"column\",\n        flex: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"1.5\";\n            }\n            return \"3\";\n        },\n        paddingTop: \"25px\",\n        paddingBottom: \"25px\",\n        paddingLeft: \"12px\",\n    }\n\n    @styleRule\n    threadTitle = [this.baseStyleObject, {\n        // width: \"40%\",\n        // maxWidth: \"50%\",\n        // flex: \"1.5\",\n        flexDirection: \"column\",\n        textAlign: \"justify\",\n        // paddingRight: \"8px\",\n        verticalAlign: \"middle\",\n        wordWrap: \"break-word\",\n        color: \"#252628\",\n        paddingBottom: this.titlePaddingBottom,\n    }];\n\n    @styleRule\n    pinnedIcon = {\n        textAlign: \"center\",\n        display: \"inline-block\",\n        float: \"left\",\n        height: \"60px\",\n        paddingTop: \"25px\",\n        paddingRight: \"12px\",\n    };\n\n    @styleRule\n    threadTitleSpan = {\n        display: \"inline-block\",\n        verticalAlign: \"middle\",\n        lineHeight: \"20px\",\n        // maxWidth: \"95%\",\n        transition: \"0.2s\",\n        fontSize: \"1.2em\",\n        \":hover\": {\n            color: \"#337ab7\",\n            transition: \"0.2s\",\n        }\n    };\n\n    @styleRule\n    threadAuthor = [this.baseStyleObject, {\n        // width: \"14%\",\n        // maxWidth: \"14%\",\n        flex: \".7\",\n        // paddingLeft: \"8px\",\n        textAlign: \"center\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n    }];\n\n    @styleRule\n    threadReplies = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontWeight: \"bold\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n    }];\n\n    @styleRule\n    threadRepliesSpan = {\n        transition: \"0.2s\",\n        \":hover\": {\n            color: \"#337ab7\",\n            transition: \"0.2s\",\n        }\n    };\n\n    @styleRule\n    threadViews = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    threadVotes = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    threadActivity = [this.baseStyleObject, {\n        // width: \"20%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"12px\",\n        fontFamily: this.fontFamily,\n        fontSize: \".85em\",\n    }];\n}\n\n\nclass ForumPanelStyle extends StyleSheet {\n    textColor = \"#333\";\n    headerItemHeight = 50;\n    fontFamily = \"lato, open sans\";\n\n    @styleRule\n    mainClass = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    title = {\n        width: \"100%\",\n        // textAlign: \"center\",\n        fontSize: \"2em\",\n        fontFamily: this.fontFamily,\n        color: this.textColor,\n        height: this.headerItemHeight + \"px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    buttonParent = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        height: this.headerItemHeight + \"px\",\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    button = {\n        margin: \"0\",\n    };\n\n    @styleRule\n    header = {\n        height: 2 * this.headerItemHeight + \"px\",\n        width: \"100%\",\n    };\n}\n\n\nexport {\n    ForumThreadReplyStyle, \n    ForumThreadPanelStyle, \n    ButtonStyle, \n    ForumThreadHeaderStyle, \n    ForumThreadPreviewStyle,\n    ForumThreadBubbleStyle, \n    ForumPanelStyle\n};\n","import {Ajax} from \"Ajax\";\nimport {UI, Button, registerStyle} from \"UI\";\nimport {GlobalState} from \"State\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {ButtonStyle} from \"ForumStyle\";\nimport {Level, Size} from \"ui/Constants\";\n\n@registerStyle(ButtonStyle)\nclass CreateThreadReplyButton extends Button {\n    getDefaultOptions() {\n        return {\n            level: Level.PRIMARY,\n            size: Size.LARGE,\n            label: UI.T(\"Preview\")\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.button);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (!this.markupEditorModal) {\n                this.markupEditorModal = <CreateThreadReplyModal forumThreadId={this.options.forumThreadId}\n                    classMap={ChatMarkupRenderer.classMap}\n                />;\n            }\n            this.markupEditorModal.show();\n        });\n    }\n}\n\nclass CreateThreadReplyModal extends MarkupEditorModal {\n    onMount() {\n        super.onMount();\n        this.doneButton.addClickListener(() => {\n            this.createThreadReply();\n        });\n    }\n\n    createThreadReply() {\n        // TODO: should be a dispatch: it should jump and highlight your post\n        Ajax.postJSON(\"/forum/forum_thread_post/\", {\n            forumThreadId: this.options.forumThreadId,\n            message: this.markupEditor.getValue(),\n        });\n    }\n}\n\nexport {CreateThreadReplyButton};\n","import {Ajax} from \"Ajax\";\nimport {GlobalState} from \"State\";\nimport {\n    ActionModal,\n    ActionModalButton,\n    Button,\n    Input,\n    Link,\n    Panel,\n    Router,\n    TimePassedSpan,\n    UI,\n    registerStyle,\n} from \"UI\";\nimport {ConcentricCirclesLoadingScreen} from \"ui/ConcentricCirclesLoadingScreen\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {UserHandle} from \"UserHandle\";\nimport {EditThreadReplyButton} from \"EditThreadReplyButton\";\nimport {DeleteThreadReplyButton} from \"DeleteThreadReplyButton\";\nimport {CreateThreadReplyButton} from \"CreateThreadReplyButton\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {ForumThreadPanelStyle, ForumThreadReplyStyle} from \"ForumStyle\";\nimport {ButtonStyle} from \"ForumStyle\";\nimport {Level, Size} from \"ui/Constants\";\nimport {NOOP_FUNCTION} from \"Utils\";\n\nlet forumThreadPanelStyle = ForumThreadPanelStyle.getInstance();\nlet buttonStyle = ButtonStyle.getInstance();\n\n\nclass CreateForumThreadModal extends MarkupEditorModal {\n    getGivenChildren() {\n        let inputStyle = {\n            \"margin-bottom\": \"4px\",\n            \"border\": \"0\",\n            //\"border-radius\": \"4px\",\n            //\"border\": \"2px solid #dcdcdc\",\n            \"outline\": \"none\",\n            \"color\": \"#333\",\n            \"font-size\": \"14px\",\n            \"padding-left\": \"8px\",\n            \"width\": \"100%\",\n            \"text-align\": \"center\",\n            \"font-weight\": \"bold\",\n        };\n\n        return [\n            <Input label={UI.T(\"Title\")} ref=\"titleInput\" style={inputStyle} placeholder=\"Click here to edit the title (max. 160 characters).\" />,\n            ...super.getGivenChildren(),\n        ];\n    }\n\n    onMount() {\n        this.doneButton.addClickListener(() => {\n            this.createForumThread();\n        });\n    }\n\n    routeToThread(forumThreadId) {\n        // TODO: add the temp forum title\n        Router.changeURL([\"forum\", forumThreadId, \"title\"])\n    }\n\n    createForumThread() {\n        let request = {\n            forumId: this.options.forumId,\n            title: this.titleInput.getValue(),\n            message: this.markupEditor.getValue(),\n        };\n\n        Ajax.postJSON(\"/forum/create_forum_thread/\", request).then(\n            (data) => {\n                this.routeToThread(data.forumThreadId);\n                this.titleInput.setValue(\"\");\n                this.markupEditor.setValue(\"\");\n                this.markupEditor.redraw();\n                this.hide();\n            }\n        );\n    }\n}\n\n@registerStyle(ButtonStyle)\nclass CreateForumThreadButton extends Button {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.button);\n    }\n\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        options.level = options.level || Level.PRIMARY;\n        options.size = options.size || Size.LARGE;\n        super.setOptions(options);\n    }\n\n    getModalClass() {\n        return CreateForumThreadModal;\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            this.getModalClass().show({\n                forumId: this.options.forumId,\n                classMap: ChatMarkupRenderer.classMap,\n            });\n        });\n    }\n}\n\nclass DeleteForumThreadModal extends ActionModal {\n    getTitle() {\n        return UI.T(\"Delete forum thread\");\n    }\n\n    getActionName() {\n        return UI.T(\"Delete\");\n    }\n\n    getBody() {\n        return <p>\n            {UI.T(\"Are you sure you want to delete thread\")}\n            {\" \\\"\" + this.options.forumThread.title + \"\\\"?\"}\n        </p>;\n    }\n\n    action() {\n        this.options.forumThread.deleteThread();\n        this.hide();\n    }\n}\n\nlet DeleteForumThreadButton = ActionModalButton(DeleteForumThreadModal);\n\nclass ForumThreadReply extends UI.Element {\n    extraNodeAttributes(attr) {\n        // attr.addClass(forumThreadReplyStyle.mainClass);\n    }\n\n    getMessageInstance() {\n        return this.options.messageInstance;\n    }\n\n    render() {\n        let messageInstance = this.getMessageInstance();\n        let deleteMessage;\n        let editMessage;\n        let editAndDeleteButtons = <span/>;\n\n        if (USER.isSuperUser || USER.id === messageInstance.userId) {\n            deleteMessage = <DeleteThreadReplyButton\n                faIcon=\"trash\"\n                level={Level.DANGER}\n                className={forumThreadPanelStyle.deleteButton}\n                modalOptions={{messageInstance: messageInstance}} />;\n            editMessage = <EditThreadReplyButton\n                faIcon={\"pencil\"}\n                level={Level.INFO}\n                messageInstance={messageInstance}\n                forumThreadPanel={this}\n                className={forumThreadPanelStyle.editButton} />;\n            editAndDeleteButtons = <div className={forumThreadPanelStyle.editDeleteButtons} style={{width: \"auto\",}}>\n                {editMessage}\n                {deleteMessage}\n            </div>;\n        }\n\n        return [\n            <div className={forumThreadPanelStyle.fullPost}>\n                <div className={forumThreadPanelStyle.author}\n                    style={{\n                        fontSize: \"1em\",\n                        paddingLeft: \"12px\",\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                        alignItems: \"center\",\n                    }}>\n                    <UserHandle id={messageInstance.userId} style={{\n                        textTransform: \"initial\",\n                        fontSize: \"1.1em\",\n                    }}/>\n                    <TimePassedSpan timeStamp={messageInstance.getDate()} style={{\n                        color: \"#262626 !important\",\n                        paddingRight: \"12px\",\n                    }}/>\n                </div>\n                <ChatMarkupRenderer ref={this.refLink(\"postContent\" + messageInstance.id)} value={messageInstance.getContent()} className={forumThreadPanelStyle.message}/>\n                <div className={forumThreadPanelStyle.bottomPanel}>\n                    {editAndDeleteButtons}\n                    <CommentVotingWidgetWithThumbs height={40} balanceColor={\"#313534\"} notVoteColor={\"#313534\"} message={messageInstance} className={forumThreadPanelStyle.voting}/>\n                </div>\n            </div>\n        ];\n    }\n\n    onMount() {\n        this.attachEventListener(this.getMessageInstance(), \"messageDelete\", () => {\n            this.hide();\n        });\n        this.attachEventListener(this.getMessageInstance(), \"messageEdit\", () => {\n            this.redraw();\n        });\n    }\n}\n\n@registerStyle(ForumThreadPanelStyle)\nclass ForumThreadPanel extends Panel {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    returnToMainForum() {\n        Router.changeURL(this.getMainForumURL());\n    }\n\n    getMainForumURL() {\n        return \"/forum/\";\n    }\n\n    getForumThreadState(callback=NOOP_FUNCTION) {\n        let request = {\n            forumThreadId: this.options.forumThread.id,\n        };\n\n        Ajax.postJSON(\"/forum/forum_thread_state/\", request).then(\n            callback,\n            (error) => {\n                this.returnToMainForum();\n                ErrorHandlers.showErrorAlert(error);\n            }\n        );\n    }\n\n    getForumThread() {\n        return this.options.forumThread;\n    }\n\n    getTitle() {\n        return [\n            <div className={this.styleSheet.title}>\n                <Link href={this.getMainForumURL()} className={this.styleSheet.backButton}\n                    value={<span className=\"fa fa-arrow-left\" style={{\n                        paddingRight: \"10px\",\n                        fontSize: \".8em\",\n                        color: \"#333\",\n                    }} />} />\n                {this.getForumThread().getTitle()}\n            </div>\n        ];\n    }\n\n    getAuthor() {\n        return <div className={this.styleSheet.author}>\n            {UI.T(\"written by\")}&nbsp;\n            <UserHandle id={this.getForumThread().authorId} style={{\n                textTransform: \"initial\",\n            }}/>\n            &nbsp;\n            <TimePassedSpan timeStamp={this.getForumThread().getTimeAdded()} style={{color: \"#262626 !important\",}}/>\n        </div>;\n    }\n\n    getMessage() {\n        return <div className={this.styleSheet.message}>\n                 <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.getForumThread().getContentMessage().getContent()} style={{height:\"auto\"}}/>\n            </div>;\n    }\n\n    getNumReplies(postsLength) {\n        return [\n            <div className={this.styleSheet.numReplies}>\n                <span style={{\"font-weight\": \"bold\", }}>{postsLength}</span>\n                &nbsp;{\"replies in this thread\" + (postsLength == 0 ? \", be the first one to comment\" : \"\")}\n            </div>\n        ];\n    }\n\n    getVoting() {\n        return <div className={this.styleSheet.voting}>\n            <CommentVotingWidgetWithThumbs height={40} balanceColor={\"#313534\"} notVoteColor={\"#313534\"} message={this.getForumThread().getContentMessage()} style={{\"margin-left\": \"0\", }} />\n        </div>;\n    }\n\n    render() {\n        if (!this.options.forumThread.isLoaded()) {\n            this.getForumThreadState(() => {\n                this.redraw();\n                this.initializeListeners();\n            });\n            return <ConcentricCirclesLoadingScreen />;\n        }\n\n        let replies = [];\n        let spaceBetween;\n        let forumThread = this.options.forumThread;\n\n        // sort the forum replies by the activity date\n        let forumThreadMessages = Array.from(forumThread.getMessageThread().getMessages());\n        forumThreadMessages.sort((a, b) => {\n            return a.getDate() - b.getDate();\n        });\n\n        for (let messageInstance of forumThreadMessages) {\n            if (messageInstance !== forumThread.getContentMessage()) {\n                replies.push(<ForumThreadReply className={this.styleSheet.replies} messageInstance={messageInstance} />);\n            }\n        }\n\n        if (replies.length) {\n            spaceBetween = <div style={{\n                height: \"60px\",\n                borderBottom: \"1px solid #ddd\",\n                width: \"90%\",\n                maxWidth: \"1200px\",\n                margin: \"0 auto\",\n            }}></div>;\n        }\n\n        let deleteButton;\n        let editButton;\n        let editAndDeleteButtons;\n\n        if (USER.isSuperUser || USER.id === this.getForumThread().authorId) {\n            deleteButton = <DeleteForumThreadButton faIcon=\"trash\"\n                                                    level={Level.DANGER}\n                                                    className={this.styleSheet.deleteButton}\n                                                    modalOptions = {{\n                                                        forumThread: this.getForumThread()\n                                                    }}/>;\n            editButton = <EditThreadReplyButton faIcon=\"pencil\"\n                                                level={Level.INFO}\n                                                className={this.styleSheet.editButton}\n                                                messageInstance={this.getForumThread().getContentMessage()}/>;\n            editAndDeleteButtons = <div className={this.styleSheet.editDeleteButtons}>\n                {editButton}\n                {deleteButton}\n            </div>;\n        }\n\n        return [\n            <div style={{marginBottom: \"60px\",}}>\n                <div className={this.styleSheet.header}>\n                    {this.getTitle()}\n                    <div className={this.styleSheet.replyButtonDiv}>\n                        {this.getAuthor()}\n                        <CreateThreadReplyButton\n                            label={UI.T(\"REPLY\")}\n                            className={this.styleSheet.replyButton}\n                            size={Size.DEFAULT}\n                            forumThreadId={forumThread.id}\n                            forumThread={this.getForumThread()}\n                            classMap={ChatMarkupRenderer.classMap}\n                        />\n                    </div>\n                </div>\n                <div style={{width: \"90%\", maxWidth: \"1200px\", margin: \"0 auto\", height: \"3px\", backgroundColor: \"#333\", marginTop: \"10px\",}}></div>\n                <div className={this.styleSheet.fullPost}>\n                    {this.getMessage()}\n                    <div className={this.styleSheet.bottomPanel}>\n                        {this.getNumReplies(replies.length)}\n                        {this.getVoting()}\n                    </div>\n                    {editAndDeleteButtons}\n                </div>\n                {spaceBetween}\n                {replies}\n            </div>\n        ];\n    }\n\n    deleteThread() {\n        this.getForumThread().deleteThread();\n    }\n\n    initializeListeners() {\n        // These listeners need to be attached after the ForumThread is loaded in the js state\n        this.getForumThread().getMessageThread().addListener(\"newMessage\", () => {\n            this.redraw();\n        });\n        this.getForumThread().getMessageThread().addListener(\"deleteMessage\", () => {\n            this.redraw();\n        });\n        this.getForumThread().getContentMessage().addEventListener(\"messageEdit\", () => {\n            this.content.setValue(this.getForumThread().getContentMessage().getContent());\n            this.content.redraw();\n        });\n    }\n\n    onMount() {\n        // This applies only for a newly created forum thread, since the listeners from\n        // render do not get attached when the thread is already in the state.\n\n        if (this.options.forumThread.isLoaded()) {\n            this.initializeListeners();\n        }\n\n        this.getForumThread().addDeleteListener(() => {\n            this.returnToMainForum();\n        });\n    }\n}\n\nexport {CreateForumThreadButton, ForumThreadPanel};\n","import {UI, Panel, Link, Route, Router, TimePassedSpan, registerStyle, CardPanel} from \"ui/UI\";\nimport {Dispatcher} from \"base/Dispatcher\";\nimport {Ajax} from \"base/Ajax\";\nimport {GlobalState} from \"state/State\";\nimport {PreviewMarkupButton} from \"ChatWidget\";\nimport {UserHandle} from \"UserHandle\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {MessageThreadStore, MessageInstanceStore} from \"state/MessageThreadStore\";\nimport {StateDependentElement} from \"StateDependentElement\";\nimport {Size, Level} from \"ui/Constants\";\nimport {slugify} from \"base/Utils\";\n\nimport {ForumStore, ForumThreadStore} from \"./state/ForumStore\";\nimport {ForumThreadPanel, CreateForumThreadButton} from \"./ForumThread\";\nimport {ForumThreadHeaderStyle, ForumThreadPreviewStyle, ForumThreadBubbleStyle, ForumPanelStyle} from \"./ForumStyle\";\n\n\n@registerStyle(ForumThreadHeaderStyle)\nexport class ForumThreadHeader extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    getTitle() {\n        return <div className={this.styleSheet.tagsTitle}>\n            {UI.T(\"Title\")}\n        </div>;\n    }\n\n    getAuthor() {\n        return <div className={this.styleSheet.tagsAuthor}>\n            {UI.T(\"Author\")}\n        </div>;\n    }\n\n    getReplies() {\n        return <div className={this.styleSheet.tagsReplies}>\n            {UI.T(\"Replies\")}\n        </div>;\n    }\n\n    getViews() {\n        return <div className={this.styleSheet.tagsViews}>\n            {UI.T(\"Views\")}\n        </div>;\n    }\n\n    getVotes() {\n        return <div className={this.styleSheet.tagsVotes}>\n            {UI.T(\"Score\")}\n        </div>;\n    }\n\n    getActivity() {\n        return <div className={this.styleSheet.tagsActivity}>\n            {UI.T(\"Active\")}\n        </div>;\n    }\n\n    render() {\n        return [\n            this.getTitle(),\n            this.getAuthor(),\n            this.getReplies(),\n            this.getViews(),\n            this.getVotes(),\n            this.getActivity(),\n        ];\n    }\n}\n\n@registerStyle(ForumThreadPreviewStyle)\nexport class ForumThreadPreview extends ChatMarkupRenderer {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.forumThreadPreview);\n    }\n}\n\n@registerStyle(ForumThreadBubbleStyle)\nexport class ForumThreadBubble extends UI.Element {\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.addClass(this.styleSheet.mainClass);\n        // couldn't figure out how to solve this easier and better\n        // if (this.options.isPinned) {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorPinnedInstances));\n        // } else if (this.options.color == 0) {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorOddInstances));\n        // } else {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorEvenInstances));\n        // }\n        return attr;\n    }\n\n    getHref() {\n        return \"/forum/\" + this.getForumThread().id + \"/\" + slugify(this.getForumThread().getTitle());\n    }\n\n    getForumThread() {\n        return this.options.forumThread;\n    }\n\n    getThreadTitle() {\n        let pinned = \"\";\n        if (this.getForumThread().isPinned()) {\n            pinned = <span className={\"fa fa-thumb-tack \" + this.styleSheet.pinnedIcon} aria-hidden=\"true\" style={{paddingTop: \"0\", lineHeight: \"20px\", height: \"20px\",}}/>;\n        }\n        let forumThread = this.getForumThread();\n        return [\n            <div className={this.styleSheet.threadTitleAndPreview}>\n                <div className={this.styleSheet.threadTitle}\n                    style={{paddingBottom: () => {\n                        if (forumThread.getContentMessage().content) {\n                            return this.styleSheet.titlePaddingBottom;\n                        }\n                        return \"0\";\n                    }}}>\n                    {pinned}\n                    <Link style={{\"text-decoration\": \"none\", \"color\": \"inherit\", \"font-size\": \"14px\", \"text-align\": \"justify\"}} href={this.getHref()}\n                        value={<span className={this.styleSheet.threadTitleSpan}>\n                                {this.getForumThread().getTitle()}\n                                </span>} />\n                </div>\n                <ForumThreadPreview value={this.getForumThread().getContentMessage().content} />\n            </div>\n        ];\n    }\n\n    getThreadAuthor() {\n        return [\n            <span className={this.styleSheet.threadAuthor}>\n                <UserHandle id={this.getForumThread().authorId} style={{\n                    \"line-height\": \"normal\",\n                    wordBreak: \"break-word\",\n                }} />\n            </span>\n        ];\n    }\n\n    getThreadReplies() {\n        return [\n            <div className={this.styleSheet.threadReplies}>\n                <Link style={{\n                    \"text-decoration\": \"none\",\n                    \"color\": \"inherit\",\n                }} href={this.getHref()} value={\n                    <span className={this.styleSheet.threadRepliesSpan}>\n                        {this.getForumThread().getNumReplies()}\n                    </span>\n                } />\n            </div>\n        ];\n    }\n\n    getThreadViews() {\n        return [\n            <div className={this.styleSheet.threadViews}>\n                {this.getForumThread().numViews}\n            </div>\n        ];\n    }\n\n    getThreadVotes() {\n        return [\n            <div className={this.styleSheet.threadVotes}>\n                {this.getForumThread().getVotesBalance()}\n            </div>\n        ];\n    }\n\n    getThreadActivity() {\n        let threadActivity = this.getForumThread().getLastActive();\n        /* TODO @mihaic, this should support custom color option (but I didn't want to change stem files on my own). check UIPrimitives.jsx line 400 */\n        return [\n            <div className={this.styleSheet.threadActivity}>\n                <TimePassedSpan timeStamp={threadActivity} />\n            </div>\n        ]\n    }\n\n    render() {\n        return [\n            this.getThreadTitle(),\n            this.getThreadAuthor(),\n            this.getThreadReplies(),\n            this.getThreadViews(),\n            this.getThreadVotes(),\n            this.getThreadActivity(),\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n        this.getForumThread().addUpdateListener(() => {\n            this.redraw();\n        });\n        this.getForumThread().addDeleteListener(() => {\n            this.hide();\n        });\n    }\n}\n\nexport class ForumThreadList extends UI.Element {\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setStyle({\n            width: \"90%\",\n            margin: \"0 auto\",\n            marginTop: \"10px\",\n            marginBottom: \"60px\",\n            // boxShadow: \"0px 0px 10px #ddd\", // TODO: Do we want this?\n        });\n        return attr;\n    }\n\n    getBubbleClass() {\n        return ForumThreadBubble;\n    }\n\n    render() {\n        let forumThreads = Array.from(this.options.forum.getForumThreads());\n\n        forumThreads.sort((a, b) => {\n            if (a.isPinned() && b.isPinned()) {\n                return b.getPinIndex() - a.getPinIndex();\n            }\n            if (a.isPinned()) {\n                return -1;\n            }\n            if (b.isPinned()) {\n                return 1;\n            }\n            return b.lastActive - a.lastActive;\n        });\n\n        let result = [];\n        let color = 1;\n        result.push(<ForumThreadHeader/>);\n        let Bubble = this.getBubbleClass();\n        for (let forumThread of forumThreads) {\n            result.push(<Bubble forumThread={forumThread} color={color} isPinned={forumThread.isPinned()}/>);\n            if (!forumThread.isPinned()) {\n                color = !color;\n            }\n        }\n        return result;\n    }\n\n    onMount() {\n        super.onMount();\n        this.options.forum.addListener(\"newForumThread\", () => {\n            this.redraw();\n        });\n    }\n}\n\n@registerStyle(ForumPanelStyle)\nexport class ForumPanel extends Panel {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    getTitle() {\n        return <div className={this.styleSheet.title}>\n                {this.options.forum.name}\n            </div>;\n    }\n\n    getButton() {\n        return <div className={this.styleSheet.buttonParent}>\n            <CreateForumThreadButton\n                label=\"NEW POST\"\n                className={this.styleSheet.button}\n                size={Size.DEFAULT}\n                forumId={this.options.forum.id}\n            />\n        </div>;\n    }\n\n    getForumThreadList() {\n        return <ForumThreadList forum={this.options.forum}/>;\n    }\n\n    render() {\n        return [\n            <div className={this.styleSheet.header}>\n                {this.getTitle()}\n                {this.getButton()}\n            </div>,\n            this.getForumThreadList(),\n        ];\n    }\n\n    onMount() {\n        this.attachListener(ForumThreadStore, \"create\", () => this.redraw());\n        this.attachListener(ForumThreadStore, \"delete\", () => this.redraw());\n    }\n}\n\nexport class DelayedForumPanel extends StateDependentElement(ForumPanel) {\n    importState(data) {\n        super.importState(data);\n        this.options.forum = ForumStore.get(this.options.forumId);\n    }\n}\n\nexport class DelayedForumThreadPanel extends StateDependentElement(ForumThreadPanel) {\n    // TODO: must be able to specify if URL is POST or GET in StateDependentElement\n    beforeRedrawNotLoaded() {\n        Ajax.postJSON(\"/forum/forum_thread_state/\", {\n            forumThreadId: this.options.forumThreadId,\n        }).then(\n            (data) => {\n                this.importState(data);\n                this.setLoaded();\n            },\n            () => {}\n        );\n    }\n\n    importState(data) {\n        super.importState(data);\n        this.options.forumThread = ForumThreadStore.get(this.options.forumThreadId);\n    }\n}\n\nexport class ForumRoute extends Route {\n    getSubroutes() {\n        return [\n            new Route([\"%s\", \"%s\"], (options) => {\n                const forumThreadId = options.args[options.args.length - 2];\n\n                const forumThread = ForumThreadStore.get(forumThreadId);\n\n                if (forumThread) {\n                    return <ForumThreadPanel forumThread={forumThread} />;\n                } else {\n                    return <DelayedForumThreadPanel forumThreadId={forumThreadId} />;\n                }\n            }),\n        ]\n    }\n\n    constructor(expr=\"forum\", options={}) {\n        super(expr, DelayedForumPanel, [], options);\n        this.subroutes = this.getSubroutes();\n    }\n}\n","import {UI, Route} from \"UI\";\nimport {IndexPage} from \"./IndexPage\";\nimport {BlogRoute} from \"BlogPanel\";\nimport {ForumRoute} from \"ForumPanel\";\n\nexport const MAIN_ROUTE = new Route(null, IndexPage, [\n    new BlogRoute(),\n    new ForumRoute(),\n]);","import {StyleSheet, styleRule} from \"../Style\";\nimport {darken, enhance} from \"ui/Color\";\n\n\nclass NavStyle extends StyleSheet {\n    // Custom variables\n    getColors() {\n        const themeProperties = this.themeProperties;\n\n        const navManagerColor = themeProperties.COLOR_PRIMARY;\n        const navBarColor = themeProperties.NAV_MANAGER_COLOR_NAV_BAR || navManagerColor;\n        const sidePanelColor = themeProperties.NAV_MANAGER_COLOR_SIDE_PANEL || enhance(navManagerColor, 0.05);\n\n        this.colors = {\n            boxShadowNavManager: themeProperties.NAV_MANAGER_BOX_SHADOW_NAV_MANAGER,\n            boxShadowSidePanel: themeProperties.NAV_MANAGER_BOX_SHADOW_SIDE_PANEL,\n            sidepanelBackground: themeProperties.NAV_MANAGER_SIDE_PANEL_BACKGROUND_COLOR || sidePanelColor,\n            sidepanelHover: themeProperties.NAV_MANAGER_SIDE_PANEL_HOVER_COLOR || enhance(sidePanelColor, 0.1),\n            navbarBackground: themeProperties.NAV_MANAGER_NAV_BAR_BACKGROUND_COLOR || navBarColor,\n            navbarHover: themeProperties.NAV_MANAGER_NAV_BAR_HOVER_COLOR || enhance(navBarColor, 0.1),\n            hr: themeProperties.NAV_MANAGER_HR_COLOR || enhance(sidePanelColor, 0.15),\n            text: themeProperties.NAV_MANAGER_TEXT_COLOR || enhance(navManagerColor, 1),\n        };\n\n        return this.colors;\n    }\n\n    dimensions = {\n        collapseArrowWidth: \"20px\",\n        navbarHeight: \"50px\",\n        sidepanelElementHeight: \"30px\",\n        sidepanelWidthLeft: \"250px\",\n        sidepanelWidth: \"330px\",\n        sidepanelHideWidth: \"335px\",\n        sidepanelTransitionDuration: \".15s\",\n        boxShadowWidth: \"5px\",\n        backgroundTransitionDuration: \".2s\",\n    };\n\n    // Icons\n    @styleRule\n    icon = {\n        color: this.getColors().text,\n        lineHeight: this.dimensions.navbarHeight,\n        height: this.dimensions.navbarHeight,\n        width: this.dimensions.navbarHeight,\n        display: \"inline-block\",\n        cursor: \"pointer\",\n        textAlign: \"center\",\n        \":hover\": {\n            backgroundColor: this.getColors().navbarHover,\n        }\n    };\n\n    @styleRule\n    sideIcon = {\n        fontSize: \"120%\",\n    };\n\n    @styleRule\n    wrappedIcon = {\n        fontSize: \"100%\",\n        flex: \"1\",\n    };\n\n    // Nav manager elements\n    navElement = {\n        transition: `background-color ${this.dimensions.backgroundTransitionDuration}`,\n    };\n\n    @styleRule\n    navLinkElement = {\n        display: \"block\",\n        color: this.getColors().text,\n        textDecoration: \"none\",\n        listStyleType: \"none\",\n        \":hover\": {\n            backgroundColor: this.getColors().sidepanelHover,\n            color: this.getColors().text,\n            textDecoration: \"none\",\n        },\n        \":focus\": {\n            color: this.getColors().text,\n            textDecoration: \"none\",\n        },\n        \":active\": {\n            color: this.getColors().text,\n            textDecoration: \"none\",\n        },\n        \":visited\": {\n            color: this.getColors().text,\n            textDecoration: \"none\",\n        },\n    };\n\n\n    // Navbar\n    @styleRule\n    navManager = {\n        display: \"flex\",\n        height: this.dimensions.navbarHeight,\n        lineHeight: this.dimensions.navbarHeight,\n        width: \"100%\",\n        backgroundColor: this.getColors().navbarBackground,\n        boxShadow: this.getColors().boxShadowNavManager,\n        zIndex: \"9999\",\n        position: \"fixed\",\n    };\n\n\n    // Navbar elements\n    @styleRule\n    navElementHorizontal = {\n        color: this.getColors().text,\n        backgroundColor: this.getColors().navbarBackground,\n        listStyleType: \"none\",\n        cursor: \"pointer\",\n        \">:nth-child(2)\": {\n            position: \"absolute\",\n        }\n    };\n\n    @styleRule\n    navElementHorizontalArrow = {\n        paddingLeft: \".1em\",\n        verticalAlign: \"middle\",\n    };\n\n    @styleRule\n    navElementValueHorizontal = [\n        this.navElement, {\n            padding: \"0 0.7em\",\n            color: this.getColors().text,\n            width: \"100%\",\n            \":hover\": {\n                backgroundColor: this.getColors().navbarHover,\n            },\n        }\n    ];\n\n    @styleRule\n    navSectionHorizontal = {\n        display: \"inline-block\",\n        paddingLeft: \"0\",\n        height: this.dimensions.navbarHeight,\n        marginBottom: \"0\",\n    };\n\n\n    // Sidepanel\n    sidePanel = {\n        top: \"0\",\n        bottom: \"0\",\n        height: \"100%\",\n        backgroundColor: () => this.getColors().sidepanelBackground,\n        overflow: \"hidden\",\n        position: \"fixed\",\n        zIndex: \"3000\",\n        boxShadow: () => this.getColors().boxShadowSidePanel,\n        width: () => this.dimensions.sidepanelWidth,\n        transitionDuration: () => this.dimensions.sidepanelTransitionDuration,\n    };\n\n    @styleRule\n    leftSidePanel = [\n        this.sidePanel, {\n            overflowY: \"scroll\",\n            width: this.dimensions.sidepanelWidthLeft,\n            \"-ms-overflow-style\": \"none\",\n            overflow: \"-moz-scrollbars-none\",\n            \"::-webkit-scrollbar\": {\n                display: \"none\"\n            }\n        }\n    ];\n\n    @styleRule\n    rightSidePanel = this.sidePanel;\n\n\n    // Sidepanel elements\n    @styleRule\n    navElementVertical = {\n        color: this.getColors().text,\n        cursor: \"pointer\",\n        listStyleType: \"none\",\n        minHeight: this.dimensions.sidepanelElementHeight,\n        overflow: \"hidden\",\n        position: \"relative\",\n        \">*\": {\n            paddingLeft: this.dimensions.collapseArrowWidth,\n        },\n    };\n\n    @styleRule\n    navElementVerticalArrow = {\n        width: this.dimensions.collapseArrowWidth,\n        textAlign: \"center\",\n    };\n\n    @styleRule\n    navElementValueVertical = [\n        this.navElement, {\n            color: this.getColors().text,\n            zIndex: \"1\",\n            position: \"relative\",\n            width: \"100%\",\n            height: this.dimensions.sidepanelElementHeight,\n            lineHeight: this.dimensions.sidepanelElementHeight,\n            \":hover\": {\n                backgroundColor: this.getColors().sidepanelHover,\n            },\n        }\n    ];\n\n    @styleRule\n    navSectionVertical = {\n        paddingLeft: \"0\",\n        marginBottom: \"0\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    navCollapseElement = {\n        color: this.getColors().text,\n        textAlign: \"initial\",\n        lineHeight: this.dimensions.sidepanelElementHeight,\n    };\n\n    @styleRule\n    sidePanelGroup = {\n        paddingTop: this.dimensions.navbarHeight,\n        height: \"inherit\",\n        width: this.dimensions.sidepanelWidth,\n        position: \"absolute\",\n        zIndex: \"3\",\n    };\n\n    @styleRule\n    hrStyle = {\n        margin: \"10px 5%\",\n        borderTop: () => \"2px solid \" + this.getColors().hr,\n    };\n\n\n    // Sidepanel transitions\n    @styleRule\n    navVerticalLeftHide = {\n        marginLeft: \"-\" + this.dimensions.sidepanelHideWidth,\n        overflow: \"hidden\",\n    };\n\n    @styleRule\n    navVerticalRightHide = {\n        marginRight: \"-\" + this.dimensions.sidepanelHideWidth,\n        overflow: \"hidden\",\n    };\n}\n\n\nexport {NavStyle};\n","import {Dispatchable} from \"./Dispatcher\";\n\n// Class for working with the Window.localStorage and Window.sessionStorage objects\n// All keys are prefixed with our custom name, so we don't have to worry about polluting the global storage namespace\n// Keys must be strings, and values are modified by the serialize/deserialize methods,\n// which by default involve JSON conversion\nclass StorageMap extends Dispatchable {\n    static SEPARATOR = \"-@#%-\";\n\n    constructor(storage, name=\"\") {\n        super();\n        this.storage = storage;\n        this.name = name;\n        this.prefix = name + this.constructor.SEPARATOR;\n    }\n\n    getPrefix() {\n        return this.prefix;\n    }\n\n    getRawKey(key) {\n        return this.getPrefix() + key;\n    }\n\n    // Method to serialize the values\n    serialize(value) {\n        return JSON.stringify(value);\n    }\n\n    // Method to deserialize the value (which can be null if there is no value)\n    deserialize(value) {\n        return value && JSON.parse(value);\n    }\n\n    set(key, value) {\n        try {\n            this.storage.setItem(this.getRawKey(key), this.serialize(value));\n        }\n        catch(e) {\n            return false;\n        }\n        return true;\n    }\n\n    delete(key) {\n        this.storage.removeItem(this.getRawKey(key));\n    }\n\n    getRaw(key) {\n        return this.storage.getItem(this.getRawKey(key));\n    }\n\n    get(key, defaultValue = null) {\n        const value = this.getRaw(key);\n        if (value == null) {\n            return defaultValue;\n        }\n        return this.deserialize(value);\n    }\n\n    has(key) {\n        return (this.getRaw(key) != null);\n    }\n\n    keys() {\n        let result = [];\n        const totalStorageKeys = this.storage.length;\n        const prefixLenth = this.getPrefix().length;\n        for (let i = 0; i < totalStorageKeys; i++) {\n            const key = this.storage.key(i);\n            if (key.startsWith(this.getPrefix())) {\n                result.push(key.substr(prefixLenth));\n            }\n        }\n        return result;\n    }\n\n    values() {\n        return this.keys().map(key => this.get(key));\n    }\n\n    entries() {\n        return this.keys().map(key => [key, this.get(key)]);\n    }\n\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n\n    // Remove all of the keys that start with out prefix\n    clear() {\n        for (let key of this.keys()) {\n            this.delete(key);\n        }\n    }\n}\n\n// SessionStorageMap can be used to preserve data on tab refreshes\nexport class SessionStorageMap extends StorageMap {\n    constructor(name=\"\") {\n        super(window.sessionStorage, name);\n    }\n}\n\n// LocalStorageMap can be used to store data across all our tabs\nexport class LocalStorageMap extends StorageMap {\n    constructor(name=\"\") {\n        super(window.localStorage, name);\n    }\n\n    // Since we don't want a listener attached to window storage event for each map, we create a global one\n    // Any raw key that contains our separator has its original map identified and gets dispatched only for that map\n    static getChangeDispatchable() {\n        if (!this.CHANGE_DISPATCHABLE) {\n            this.CHANGE_DISPATCHABLE = new Dispatchable();\n            window.addEventListener(\"storage\", (event) => {\n                let separatorIndex = event.key.indexOf(this.SEPARATOR);\n                if (separatorIndex === -1) {\n                    // This is not an event associated with a storage map\n                    return;\n                }\n                const name = event.key.substr(0, separatorIndex);\n                const actualKey = event.key.substr(separatorIndex + this.SEPARATOR.length);\n                let newEvent = {\n                    originalEvent: event,\n                    key: actualKey,\n                    oldValue: event.oldValue,\n                    newValue: event.newValue,\n                };\n                this.CHANGE_DISPATCHABLE.dispatch(name, newEvent);\n            });\n        }\n        return this.CHANGE_DISPATCHABLE;\n    }\n\n    // Add a listener for all change event on the current map\n    // Only works if we're being backed by Window.localStorage and only received events from other tabs (not the current tab)\n    // The event has the following fields: key, oldValue, newValue, url, storageArea, originalEvent\n    // The key is modified to be the same the one you used in the map\n    addChangeListener(callback, doDeserialization=true) {\n        let realCallback = callback;\n        if (doDeserialization) {\n            realCallback = (event) => {\n                event.oldValue = this.deserialize(event.oldValue);\n                event.newValue = this.deserialize(event.newValue);\n                callback(event);\n            }\n        }\n\n        return this.constructor.getChangeDispatchable().addListener(this.name, realCallback);\n    }\n}\n","import {UI, Link, Switcher} from \"../UI\";\nimport {FACollapseIcon} from \"../FontAwesome\"; //TODO: more flexibility, do not require FAIcons in NavElements\nimport {SessionStorageMap} from \"../../base/StorageMap\";\nimport {Orientation, Direction} from \"../Constants\";\n\nlet navSessionManager = new SessionStorageMap(\"navManager\");\n\nconst BasicOrientedElementInterface = (BaseClass) => class BasicOrientedElement extends BaseClass {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    getOrientation() {\n        if (this.options.orientation) {\n            return this.options.orientation;\n        }\n        if (this.parent && typeof this.parent.getOrientation === \"function\") {\n            return this.parent.getOrientation();\n        }\n        return Orientation.HORIZONTAL;\n    }\n};\n\nconst BasicOrientedElement = BasicOrientedElementInterface(UI.Element);\nconst BasicOrientedLinkElement = BasicOrientedElementInterface(Link);\n\n\n// NavElements should know if they are in vertical or horizontal mode, so they can behave differently\nconst NavElementInterface = (BaseClass) => class NavElement extends BaseClass {\n    constructor() {\n        super(...arguments);\n        this.isToggled = this.getToggledState();\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            // it is in the navbar\n            attr.addClass(this.styleSheet.navElementHorizontal);\n\n            if (this.parent instanceof NavSection) {\n                attr.setStyle(\"float\", \"left\");\n            } else {\n                // it is an element in a dropdown\n                attr.addClass(this.styleSheet.navCollapseElement);\n            }\n        } else {\n            // it is in the sidebar\n            attr.addClass(this.styleSheet.navElementVertical);\n        }\n    }\n\n    getSelf() {\n        const style = (this.getOrientation() === Orientation.HORIZONTAL ?\n                        this.styleSheet.navElementValueHorizontal : this.styleSheet.navElementValueVertical);\n        const marginLeft = this.getOrientation() === Orientation.VERTICAL && this.getGivenChildren().length ? \"-20px\" : \"0\";\n\n        return <BasicOrientedElement className={style} style={{marginLeft: marginLeft}}>\n            {this.getValue()}\n        </BasicOrientedElement>;\n    }\n\n    getSubElements() {\n        let childrenToRender = this.getGivenChildren();\n        if (childrenToRender.length) {\n            let subElementsClass;\n            if (!this.isToggled) {\n                subElementsClass = \"hidden\";\n            }\n            return <BasicOrientedElement ref=\"contentArea\" className={subElementsClass}>\n                {childrenToRender}\n            </BasicOrientedElement>;\n        }\n        return null;\n    }\n\n    getValue() {\n        let result;\n        if (this.getGivenChildren().length) {\n            if (this.getOrientation() === Orientation.VERTICAL) {\n                // is in the sidebar\n                result = [\n                    <FACollapseIcon ref=\"collapseIcon\" collapsed={!this.isToggled} className={this.styleSheet.navElementVerticalArrow} />,\n                    this.options.value\n                ];\n            } else if (this.getOrientation() === Orientation.HORIZONTAL) {\n                // is in the navbar\n                result = [\n                    this.options.value,\n                    <FACollapseIcon collapsed={false} className={this.styleSheet.navElementHorizontalArrow} />,\n                ];\n            }\n        } else {\n            result = this.options.value;\n        }\n        return result;\n    }\n\n    render() {\n        return [\n            this.getSelf(),\n            this.getSubElements(),\n        ];\n    }\n\n    showChildren() {\n        this.contentArea.removeClass(\"hidden\");\n    }\n\n    hideChildren() {\n        this.contentArea.addClass(\"hidden\");\n    }\n\n    toggleChildren() {\n        if (!this.getGivenChildren().length) {\n            return;\n        }\n\n        if (!this.isToggled) {\n            this.showChildren();\n        } else {\n            this.hideChildren();\n        }\n\n        if (this.collapseIcon) {\n            this.collapseIcon.setCollapsed(this.isToggled);\n        }\n        this.isToggled = !this.isToggled;\n\n        this.saveToggledState();\n    }\n\n    getSessionKeyName() {\n        let sessionKeyName = this.options.sessionKey || this.options.href;\n        if (!sessionKeyName) {\n            throw Error(\"Persistent nav element needs a unique session key!\");\n        }\n        return sessionKeyName;\n    }\n\n    getLocalToggledState() {\n        if (this.hasOwnProperty(\"isToggled\")) {\n            return !!this.isToggled;\n        }\n        return !!this.options.defaultToggled;\n    }\n\n    getToggledState() {\n        if (!this.options.persistent) {\n            return this.getLocalToggledState();\n        }\n        let sessionKeyName = this.getSessionKeyName();\n        return navSessionManager.get(sessionKeyName, this.getLocalToggledState());\n    }\n\n    saveToggledState() {\n        if (!this.options.persistent) {\n            return;\n        }\n        let sessionKeyName = this.getSessionKeyName();\n        navSessionManager.set(sessionKeyName, this.getLocalToggledState());\n    }\n\n    onMount() {\n        super.onMount();\n        this.addNodeListener(\"mouseenter\", () => {\n            if (this.getOrientation() === Orientation.HORIZONTAL && this.getGivenChildren().length) {\n                this.showChildren();\n            }\n        });\n        this.addNodeListener(\"mouseleave\", () => {\n            if (this.getOrientation() === Orientation.HORIZONTAL && this.getGivenChildren().length) {\n                this.hideChildren();\n            }\n        });\n        this.addClickListener((event) => {\n            if (this.getOrientation() === Orientation.VERTICAL) {\n                event.stopPropagation();\n                this.toggleChildren();\n            }\n        });\n    }\n};\n\nconst NavElement = NavElementInterface(UI.Primitive(BasicOrientedElement, \"li\"));\nclass NavLinkElement extends NavElementInterface(BasicOrientedLinkElement) {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.navLinkElement);\n    }\n}\n\n\nclass NavSection extends UI.Primitive(\"ul\") {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            // it is in the navbar\n            attr.addClass(this.styleSheet.navSectionHorizontal);\n            // this is functionality, should be isolated from the actual design\n            attr.setStyle(\"float\", this.getAnchor());\n        } else {\n            // it is in the sidebar\n            attr.addClass(this.styleSheet.navSectionVertical);\n        }\n    }\n\n    getAnchor() {\n        return this.options.anchor || Direction.LEFT;\n    }\n\n    getOrientation() {\n        return this.parent.getOrientation();\n    }\n}\n\n\nclass NavAnchoredNotifications extends NavSection {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            position: \"relative\",\n        });\n    }\n\n    getSwitcherStyle() {\n        return {\n            position: \"absolute\",\n            maxWidth: \"calc(100vw - 76px)\",\n            top: \"50px\",\n            right: \"0\",\n            height: \"300px\",\n            width: \"400px\",\n            boxShadow: \"0px 0px 10px #666\",\n            zIndex: \"-1\",\n        };\n    }\n\n    render() {\n        return [\n            this.options.children,\n            <Switcher ref=\"switcher\" style={this.getSwitcherStyle()} className=\"hidden\" />\n        ];\n    }\n\n    show(content, child) {\n        this.activeChild = child;\n        this.switcher.removeClass(\"hidden\");\n        this.switcher.setActive(content, child);\n        this.bodyListener = document.body.addEventListener(\"click\", () => this.hide());\n    }\n\n    hide() {\n        this.switcher.addClass(\"hidden\");\n        this.activeChild = null;\n        document.body.removeEventListener(\"click\", this.bodyListener);\n    }\n\n    onMount() {\n        this.addListener(\"changeSwitcher\", (content, child) => {\n            if (this.activeChild == child) {\n                this.hide();\n            } else {\n                this.show(content, child);\n            }\n        });\n\n        this.switcher.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nexport {BasicOrientedElement, NavElement, NavLinkElement, NavSection, NavAnchoredNotifications, navSessionManager};\n","import {UI} from \"UI\";\nimport {NavElement} from \"NavElement\";\nimport {FAIcon} from \"../FontAwesome\";\nimport {Size} from \"../Constants\";\n\nexport class NavIcon extends NavElement {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.icon);\n    }\n\n    getValue() {\n        return [\n            this.getIcon(),\n            this.getContent()\n        ];\n    }\n\n    getContent() {\n        return null;\n    }\n\n    getIcon() {\n        return null;\n    }\n\n    onMount() {\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nexport class LeftSideNavIcon extends NavIcon {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.sideIcon);\n    }\n\n    getIcon() {\n        return <FAIcon icon=\"bars\" size={Size.LARGE}/>;\n    }\n}\n\n\nexport class RightSideNavIcon extends NavIcon {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.sideIcon);\n    }\n\n    getIcon() {\n        return <FAIcon icon=\"ellipsis-v\" size={Size.LARGE}/>;\n    }\n}\n\n\nexport class WrappedNavIcon extends NavIcon {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.wrappedIcon);\n    }\n\n    getIcon() {\n        return <FAIcon icon=\"ellipsis-h\" size={Size.LARGE}/>;\n    }\n}\n","import {Device} from \"../../base/Device\";\nimport {Dispatcher} from \"../../base/Dispatcher\";\nimport {StemDate} from \"../../time/Time\";\n\nlet maxDistanceFromSide = 25; // Pixels\nlet minSwipeDistance = 60;    // Pixels\nlet minSwipeSpeed = 0.5;      // Pixels per millisecond\n\nfunction touchEventHandler(ignoreCondition, successCondition, onSuccess, xType=\"client\") {\n    return (event) => {\n        if (ignoreCondition(event.targetTouches[0][xType + \"X\"])) {\n            return;\n        }\n        let startX = event.targetTouches[0][xType + \"X\"];\n        let panelToggler = new Dispatcher();\n        let startTime = StemDate.now();\n\n        let touchCallback = (event) => {\n            if (successCondition(event.targetTouches[0][xType + \"X\"], startX, StemDate.now() - startTime)) {\n                panelToggler.dispatch(true);\n            }\n        };\n        let touchendCallback = () => {\n            panelToggler.dispatch(false);\n        };\n        document.addEventListener(\"touchmove\", touchCallback);\n        document.addEventListener(\"touchend\", touchendCallback);\n\n        panelToggler.addListener((success) => {\n            if (success) {\n                onSuccess();\n            }\n            document.removeEventListener(\"touchmove\", touchCallback);\n            document.removeEventListener(\"touchend\", touchendCallback);\n        });\n    }\n}\n\nfunction initializeSwipeRight(navManager, maxDistance=maxDistanceFromSide, minDistance=minSwipeDistance, minSpeed=minSwipeSpeed) {\n    document.addEventListener(\"touchstart\", touchEventHandler(\n        (touchX) => (navManager.leftSidePanel.visible ||\n                        window.pageXOffset !== 0 ||\n                            touchX > maxDistance),\n        (touchX, startX, duration) => (touchX - startX >= minDistance && (touchX - startX) / duration >= minSpeed),\n        () => navManager.toggleLeftSidePanel()\n    ));\n    navManager.leftSidePanel.addNodeListener(\"touchstart\", touchEventHandler(\n        () => (!navManager.leftSidePanel.visible),\n        (touchX, startX) => (startX - touchX >= minDistance && (startX - touchX) >= minSpeed),\n        () => navManager.toggleLeftSidePanel()\n    ));\n}\n\nfunction initializeSwipeLeft(navManager, maxDistance=maxDistanceFromSide, minDistance=minSwipeDistance, minSpeed=minSwipeSpeed) {\n    document.addEventListener(\"touchstart\", touchEventHandler(\n        (touchX) => (navManager.rightSidePanel.visible || window.innerWidth - touchX > maxDistance),\n        (touchX, startX, duration) => (startX - touchX >= minDistance && (startX - touchX) / duration >= minSpeed),\n        () => navManager.toggleRightSidePanel()\n    ));\n    navManager.rightSidePanel.addNodeListener(\"touchstart\", touchEventHandler(\n        () => (!navManager.rightSidePanel.visible),\n        (touchX, startX, duration) => (touchX - startX >= minDistance && (touchX - startX) / duration >= minSpeed),\n        () => navManager.toggleRightSidePanel()\n    ));\n}\n\nfunction initializeSwipeEvents(navManager, maxDistanceFromSide=maxDistanceFromSide, minDistance=minSwipeDistance, minSpeed=minSwipeSpeed) {\n    if (!Device.isTouchDevice()) {\n        return;\n    }\n    if (navManager.leftSidePanel) {\n        initializeSwipeRight(navManager, maxDistanceFromSide, minDistance, minSpeed);\n    }\n    if (navManager.rightSidePanel) {\n        initializeSwipeLeft(navManager, maxDistanceFromSide, minDistance, minSpeed);\n    }\n}\n\nexport {maxDistanceFromSide, initializeSwipeRight, initializeSwipeLeft, initializeSwipeEvents};","import {UI, changeParent, registerStyle} from \"../UI\";\nimport {NavStyle} from \"NavStyle\";\nimport {Carousel, CarouselStyle} from \"../Carousel\";\nimport {LeftSideNavIcon, RightSideNavIcon, WrappedNavIcon} from \"./NavIcon\";\nimport {BasicOrientedElement, NavSection} from \"./NavElement\";\nimport {initializeSwipeEvents} from \"./NavSwipeDetection\";\nimport {SessionStorageMap} from \"../../base/StorageMap\";\nimport {Orientation, Direction} from \"../Constants\";\n\n\nclass SidePanelGroup extends UI.Element {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.sidePanelGroup);\n        if (this.options.anchor === Direction.RIGHT) {\n            attr.setStyle(\"right\", 0);\n        } else {\n            attr.setStyle(\"width\", \"250px\");\n        }\n    }\n\n    getOrientation() {\n        return Orientation.VERTICAL;\n    }\n\n}\n\n\n@registerStyle(NavStyle)\nclass SidePanel extends UI.Element {\n    constructor() {\n        super(...arguments);\n\n        if (!this.node) {\n            this.mount(document.body);\n        }\n\n        if (this.options.name) {\n            this.storageSerializer = new SessionStorageMap(\"sidePanel\" + this.options.name);\n            this.visible = this.storageSerializer.get(\"visible\");\n        }\n\n        if (this.visible) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.options.anchor === Direction.RIGHT) {\n            attr.addClass(this.styleSheet.rightSidePanel);\n            attr.setStyle(\"right\", \"0\");\n        } else {\n            attr.addClass(this.styleSheet.leftSidePanel);\n        }\n    }\n\n    setVisible(value) {\n        this.visible = value;\n        if (this.storageSerializer) {\n            this.storageSerializer.set(\"visible\", value);\n        }\n    }\n\n    show() {\n        if (this.options.anchor === Direction.RIGHT) {\n            this.removeClass(this.styleSheet.navVerticalRightHide);\n        } else {\n            this.removeClass(this.styleSheet.navVerticalLeftHide);\n        }\n\n        this.setVisible(true);\n    }\n\n    hide() {\n        if (this.options.anchor === Direction.RIGHT) {\n            this.addClass(this.styleSheet.navVerticalRightHide);\n        } else {\n            this.addClass(this.styleSheet.navVerticalLeftHide);\n        }\n\n        this.setVisible(false);\n    }\n\n    toggle() {\n        if (this.visible) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    }\n\n    render() {\n        return <SidePanelGroup ref=\"this.wrappedPanel\" anchor={this.options.anchor}>\n            {this.getGivenChildren()}\n        </SidePanelGroup>;\n    }\n\n    onMount() {\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nclass NavCarouselStyle extends CarouselStyle {\n    hoverColor = () => NavStyle.getInstance().getColors().sidepanelHover;\n    textColor = () => NavStyle.getInstance().getColors().text;\n    navigatorTransitionTime = () => NavStyle.getInstance().dimensions.backgroundTransitionDuration;\n}\n\n\n@registerStyle(NavStyle)\nclass NavManager extends UI.Primitive(\"nav\") {\n    getCarouselStyleSheet() {\n        return this.options.carouselStyleSheet || NavCarouselStyle.getInstance();\n    }\n\n    getDefaultOptions() {\n        return {\n            persistentLeftSidePanel: true,\n            persistentRightSidePanel: true,\n        };\n    }\n\n    constructor(options) {\n        super(options);\n\n        this.leftSidePanel = <SidePanel anchor={Direction.LEFT} name=\"left\" persistent={this.options.persistentLeftSidePanel}>\n            <Carousel ref={this.refLink(\"carousel\")} styleSheet={this.getCarouselStyleSheet()}>\n                <BasicOrientedElement orientation={Orientation.VERTICAL} ref={this.refLink(\"navigationPanel\")}\n                                      styleSheet={this.styleSheet}>\n                    {this.getLeftSidePanelChildren()}\n                </BasicOrientedElement>\n            </Carousel>\n        </SidePanel>;\n\n        this.rightSidePanel = <SidePanel anchor={Direction.RIGHT} name=\"right\" persistent={this.options.persistentRightSidePanel}>\n            {this.getRightSidePanelChildren()}\n        </SidePanel>;\n    }\n\n    getLeftSidePanelChildren() {\n        return [];\n    }\n\n    getRightSidePanelChildren() {\n        return [];\n    }\n\n    getLeftConditionedChildren() {\n        return [];\n    }\n\n    getRightConditionedChildren() {\n        return [];\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.navManager);\n    }\n\n    getOrientation() {\n        return Orientation.HORIZONTAL;\n    }\n\n    leftSideIconAction() {\n        if (this.wrapped) {\n            if (this.carousel.getActive() === this.navigationPanel) {\n                this.toggleLeftSidePanel();\n            } else {\n                this.carousel.setActive(this.navigationPanel);\n                if (!this.leftSidePanel.visible) {\n                    this.toggleLeftSidePanel();\n                }\n            }\n        } else {\n            this.toggleLeftSidePanel();\n        }\n    }\n\n    // TODO: lots of duplicate code here, with left/right stuff\n    getLeftSideIcon() {\n        if (!this.leftSidePanel) {\n            return null;\n        }\n\n        if (!this.leftPanelToggler) {\n            this.leftPanelToggler = <LeftSideNavIcon onClick={() => this.leftSideIconAction()} />;\n        }\n        return this.leftPanelToggler;\n    }\n\n    rightSideIconAction() {\n        this.toggleRightSidePanel();\n    }\n\n    getRightSideIcon() {\n        if (!this.rightSidePanel) {\n            return null;\n        }\n        if (!this.rightPanelToggler) {\n            this.rightPanelToggler = <RightSideNavIcon onClick={() => this.rightSideIconAction()} />;\n        }\n        return this.rightPanelToggler;\n    }\n\n    getFixedWidth() {\n        let width = 10;\n        for (let child of this.children) {\n            width += child.getWidth();\n        }\n        width -= this.getLeftConditioned().getWidth();\n        width -= this.getRightConditioned().getWidth();\n        return width;\n    }\n\n    wrappedIconAction() {\n        if (this.wrapped) {\n            if (this.carousel.getActive() === this.wrappedPanel) {\n                this.toggleLeftSidePanel();\n            } else {\n                this.carousel.setActive(this.wrappedPanel);\n                if (!this.leftSidePanel.visible) {\n                    this.toggleLeftSidePanel();\n                }\n            }\n        } else {\n            this.toggleLeftSidePanel();\n        }\n    }\n\n    getWrappedIcon() {\n        if (!this.wrappedToggler) {\n            this.wrappedToggler = <WrappedNavIcon onClick={() => this.wrappedIconAction()}\n                                               className={this.wrapped ? \"\" : \"hidden\"} />;\n        }\n        return this.wrappedToggler;\n    }\n\n    getLeftFixed() {\n        return [];\n    }\n\n    getRightFixed() {\n        return [];\n    }\n\n    getLeftConditionedWrapper() {\n        if (!this.leftConditionedWrapper) {\n            this.leftConditionedWrapper = <NavSection anchor={Direction.LEFT}>\n                {this.getLeftConditioned()}\n            </NavSection>;\n        }\n        return this.leftConditionedWrapper;\n    }\n\n    getRightConditionedWrapper() {\n        if (!this.rightConditionedWrapper) {\n            this.rightConditionedWrapper = <NavSection anchor={Direction.RIGHT}>\n                {this.getRightConditioned()}\n            </NavSection>;\n        }\n        return this.rightConditionedWrapper;\n    }\n\n    getLeftConditioned() {\n        if (!this.leftConditioned) {\n            this.leftConditioned = <NavSection>{this.getLeftConditionedChildren()}</NavSection>;\n        }\n        return this.leftConditioned;\n    }\n\n    getRightConditioned() {\n        if (!this.rightConditioned) {\n            this.rightConditioned =  <NavSection>{this.getRightConditionedChildren()}</NavSection>;\n        }\n        return this.rightConditioned;\n    }\n\n    toggleSidePanel(mainPanel, toggleEvent) {\n        let secondaryPanel = (mainPanel == this.leftSidePanel ? this.rightSidePanel : this.leftSidePanel);\n        mainPanel.toggle();\n        this.dispatch(toggleEvent, mainPanel.visible);\n        if (secondaryPanel && mainPanel.visible && secondaryPanel.visible) {\n            mainPanel.setStyle(\"z-index\", 3001);\n            secondaryPanel.setStyle(\"z-index\", 3000);\n        }\n    }\n\n    toggleLeftSidePanel() {\n        this.toggleSidePanel(this.leftSidePanel, \"toggledLeftSide\");\n    }\n\n    toggleRightSidePanel() {\n        this.toggleSidePanel(this.rightSidePanel, \"toggledRightSide\");\n    }\n\n    render() {\n        return [\n            this.getLeftSideIcon(),\n            this.getLeftFixed(),\n            this.getLeftConditionedWrapper(),\n            this.getWrappedIcon(),\n            <NavSection style={{marginLeft: \"auto\"}}>\n              {this.getRightConditionedWrapper()}\n            </NavSection>,\n            this.getRightFixed(),\n            this.getRightSideIcon(),\n        ];\n    }\n\n    bindToNode() {\n        super.bindToNode(...arguments);\n        this.onMount();\n    }\n\n    checkForWrap() {\n        const wrapNavElements = () => {\n            this.wrapped = true;\n            this.wrappedPanel = <BasicOrientedElement orientation={Orientation.VERTICAL} styleSheet={this.styleSheet}/>;\n            this.carousel.appendChild(this.wrappedPanel);\n\n            changeParent(this.getRightConditioned(), this.wrappedPanel);\n            changeParent(this.getLeftConditioned(), this.wrappedPanel);\n            this.getRightConditioned().redraw();\n            this.getLeftConditioned().redraw();\n            this.getWrappedIcon().removeClass(\"hidden\");\n        };\n\n        const unwrapNavElements = () => {\n            this.wrapped = false;\n            this.getWrappedIcon().addClass(\"hidden\");\n            changeParent(this.getLeftConditioned(), this.getLeftConditionedWrapper());\n            changeParent(this.getRightConditioned(), this.getRightConditionedWrapper());\n            this.carousel.eraseChild(this.wrappedPanel);\n            this.getLeftConditioned().redraw();\n            this.getRightConditioned().redraw();\n        };\n\n        if (this.getLeftConditioned().children.length || this.getRightConditioned().children.length) {\n            if (!this.wrapped) {\n                this.unwrappedTotalWidth = 10;\n                for (let child of this.children) {\n                    this.unwrappedTotalWidth += child.getWidth();\n                }\n            }\n            if (window.innerWidth < this.unwrappedTotalWidth && !this.wrapped) {\n                wrapNavElements();\n                this.dispatch(\"wrapped\", true);\n            } else if (window.innerWidth >= this.unwrappedTotalWidth && this.wrapped) {\n                unwrapNavElements();\n                this.dispatch(\"wrapped\", false);\n            }\n        } else if (this.wrapped) {\n            unwrapNavElements();\n        }\n    }\n\n    onMount() {\n        NavManager.Global = this;\n        initializeSwipeEvents(this);\n        setTimeout(() => this.checkForWrap());\n        window.addEventListener(\"resize\", () => this.checkForWrap());\n        this.addListener(\"maybeWrap\", () => this.checkForWrap());\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nlet initializeNavbar = () => {\n    NavManager.Global = NavManager.Global || new NavManager();\n    return NavManager.Global;\n};\n\n\nexport {NavManager, initializeNavbar, NavCarouselStyle}\n","import {Ajax} from \"base/Ajax\";\nimport {Dispatcher} from \"base/Dispatcher\";\n\nexport function logout() {\n    Dispatcher.Global.dispatch(\"logout\");\n    Ajax.postJSON(\"/accounts/logout/\", {}).then(\n            () => {\n                Dispatcher.Global.dispatch(\"logoutSuccess\");\n                location.reload();\n            }\n        );\n}\n","import {UI} from \"UI\";\nimport {NavManager} from \"navmanager/NavManager\";\nimport {\n    BasicOrientedElement,\n    NavAnchoredNotifications,\n    NavElement,\n    NavLinkElement,\n    NavSection,\n    navSessionManager,\n} from \"navmanager/NavElement\";\nimport {Direction, Orientation} from \"UI\";\nimport {LoginModal} from \"LoginModal\";\nimport {logout} from \"Logout\";\nimport {FAIcon} from \"ui/FontAwesome\";\n\n/*\n * This is the NavManager file of your app.\n *\n * Note that the whole app is a single page app.\n * Follow the instructions below in order to customize your application.\n */\n\nclass AppNavManager extends NavManager {\n    leftSidePanel = null;\n    rightSidePanel = null;\n\n    getLeftFixed() {\n        return [\n            <NavSection anchor={Direction.LEFT} style={{margin: 0}}>\n                <NavLinkElement value=\"Home\" href=\"/\" />\n                <NavLinkElement value=\"Blog\" href=\"/blog\" />\n            </NavSection>\n        ];\n    }\n\n    getUserElement() {\n        if (USER.isAuthenticated) {\n            return <NavElement value={[<FAIcon icon=\"user\" style={{marginRight: \"0.3rem\"}} />, USER.email]}>\n                <NavElement value={UI.T(\"Settings\")} />\n                <NavElement value={UI.T(\"Logout\")} onClick={() => logout()}/>\n            </NavElement>;\n        } else {\n            return <NavElement value={UI.T(\"Login/Signup\")} onClick={() => LoginModal.show()} />;\n        }\n    }\n\n    getRightFixed() {\n        return [\n            <NavSection anchor={Direction.RIGHT} style={{margin: 0}}>\n                {this.getUserElement()}\n            </NavSection>\n        ];\n    }\n}\n\n\nexport {AppNavManager};","import {UI, Link, Router, GlobalContainer} from \"../ui/UI\";\nimport {isLocalUrl, trimLocalUrl} from \"../base/Utils\";\nimport {Dispatcher} from \"../base/Dispatcher\";\n\n\nexport function singlePageLinkOnMount() {\n    this.addClickListener((event) => {\n        if (event.shiftKey || event.ctrlKey || event.metaKey || !isLocalUrl(this.options.href)) {\n            // Leave it to the browser\n            return;\n        }\n        event.preventDefault();\n        Router.changeURL(trimLocalUrl(this.options.href));\n    });\n}\n\nexport class StemApp extends UI.Element {\n    static init() {\n        Link.prototype.onMount = singlePageLinkOnMount;\n        return self.appInstance = this.create(document.body);\n    }\n\n    getRoutes() {\n        return this.options.routes;\n    }\n\n    getBeforeContainer() {\n        return null;\n    }\n\n    getRouterOptions() {\n        return {\n            style: {\n                height: \"100%\",\n            }\n        }\n    }\n\n    getRouter() {\n        return <Router routes={this.getRoutes()} ref=\"router\" {...this.getRouterOptions()}/>;\n    }\n\n    getContainer() {\n        return <GlobalContainer>\n            {this.getRouter()}\n            </GlobalContainer>;\n    }\n\n    getAfterContainer() {\n        return null;\n    }\n\n    render() {\n        return [\n            this.getBeforeContainer(),\n            this.getContainer(),\n            this.getAfterContainer(),\n        ]\n    }\n\n    onMount() {\n        this.router && this.router.addListener(\"change\", () => {\n            document.body.click();\n            Dispatcher.Global.dispatch(\"closeAllModals\");\n        });\n    }\n}\n","import {Dispatcher} from \"base/Dispatcher\";\n\nclass WebsocketStreamHandler extends Dispatcher {\n    constructor(streamName, options={}) {\n        super();\n        this.streamName = streamName;\n        this.options = options;\n        this.bytesReceived = 0;\n        this.isIndexed = false;\n        this.lastMessageIndex = -1;\n        this.messageBuffer = new Map();\n        this.missedPackets = 0;\n    }\n\n    processPacket(packet) {\n        this.bytesReceived += packet.length;\n\n        let firstSpace = packet.indexOf(\" \");\n        let type, payload;\n        if (firstSpace > 0) {\n            type = packet.substr(0, firstSpace).trim();\n            payload = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketStreamHandler: Could not process stream packet: \" + packet);\n            return;\n        }\n\n        if (type === \"i\") {\n            this.processIndexedPacket(payload);\n        } else if (type === \"v\") {\n            this.processVanillaPacket(payload);\n        } else if (type === \"n\") {\n            this.processMissedPacket(payload);\n        } else {\n            console.error(\"WebsocketStreamHandler: invalid packet type \" + type);\n        }\n    }\n\n    processIndexedMessage(index, message) {\n        this.isIndexed = true;\n        if (this.lastMessageIndex == -1) {\n            this.lastMessageIndex = index;\n            this.processVanillaPacket(message);\n        } else if (this.lastMessageIndex + 1 == index) {\n            this.lastMessageIndex = index;\n            this.processVanillaPacket(message);\n            ++index;\n            while (this.messageBuffer.has(index)) {\n                message = this.messageBuffer.get(index);\n                this.messageBuffer.delete(index);\n                this.lastMessageIndex = index;\n                this.processVanillaPacket(message);\n                ++index;\n            }\n        } else {\n            this.messageBuffer.set(index, message);\n        }\n    }\n\n    processMissedPacket(packet) {\n        this.processIndexedMessage(parseInt(packet), WebsocketStreamHandler.MISSING_MESSAGE);\n    }\n\n    processVanillaPacket(packet) {\n        if (packet == WebsocketStreamHandler.MISSING_MESSAGE) {\n            this.missedPackets++;\n        }\n\n        if (!this.options.rawMessage) {\n            try {\n                packet = JSON.parse(packet);\n            } catch (exception) {\n                if (!this.options.parseMayFail) {\n                    console.error(\"WebsocketStreamHandler: Failed to parse \", packet, \" on stream \", this.streamName,\n                                  \" Exception:\", exception.message);\n                    return;\n                }\n            }\n        }\n        this.dispatch(packet);\n    }\n\n    processIndexedPacket(packet) {\n        let firstSpace = packet.indexOf(\" \");\n        let message, index;\n        if (firstSpace > 0) {\n            index = parseInt(packet.substr(0, firstSpace).trim());\n            message = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketStreamHandler: Could not process indexed stream packet: \" + packet);\n            return;\n        }\n\n        this.processIndexedMessage(index, message);\n    }\n\n    haveIndex() {\n        return this.isIndexed;\n    }\n\n    getLastIndex() {\n        return this.lastMessageIndex;\n    }\n}\n\nWebsocketStreamHandler.MISSING_MESSAGE = \"INVALID_MESSAGE_MISSING_FROM_ROLLING_WINDOW\";\n\nexport {WebsocketStreamHandler};\n","import {Dispatchable} from \"base/Dispatcher\";\nimport {WebsocketStreamHandler} from \"./WebsocketStreamHandler\";\n\nclass WebsocketSubscriber extends Dispatchable {\n    constructor(url=self.WEBSOCKET_URL) {\n        super();\n        this.url = url;\n        this.streamHandlers = new Map();\n        this.attemptedConnect = false;\n        this.connectionStatus = WebsocketSubscriber.ConnectionStatus.NONE;\n        this.websocket = null;\n        this.failedReconnectAttempts = 0;\n        this.streamStatus = new Map();\n        //TODO: should probably try to connect right now!\n    }\n\n    setConnectionStatus(connectionStatus) {\n        this.connectionStatus = connectionStatus;\n        this.dispatch(\"connectionStatus\", connectionStatus);\n    }\n\n    connect() {\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTING);\n        try {\n            console.log(\"WebsocketSubscriber: Connecting to \" + this.url + \" ...\");\n            this.websocket = new WebSocket(this.url);\n            this.websocket.onopen = () => {\n                this.onWebsocketOpen();\n            };\n            this.websocket.onmessage = (event) => {\n                this.onWebsocketMessage(event);\n            };\n            this.websocket.onerror = (event) => {\n                this.onWebsocketError(event);\n            };\n            this.websocket.onclose = (event) => {\n                this.onWebsocketClose(event);\n            };\n\n        } catch (e) {\n            this.tryReconnect();\n            console.error(\"WebsocketSubscriber: Failed to connect to \", this.url, \"\\nError: \", e.message);\n        }\n    }\n\n    tryReconnect() {\n        let reconnectWait = Math.min(WebsocketSubscriber.CONNECT_RETRY_TIMEOUT * this.failedReconnectAttempts,\n                                     WebsocketSubscriber.CONNECT_RETRY_MAX_TIMEOUT);\n\n        this.failedReconnectAttempts++;\n\n        if (!this.reconnectTimeout) {\n            this.reconnectTimeout = setTimeout(() => {\n                this.reconnectTimeout = null;\n                console.log(\"WebsocketSubscriber: Trying to reconnect websocket connection\");\n                this.connect();\n            }, reconnectWait);\n        }\n    }\n\n    // Stream options:\n    // rawMessage = true means we won't try to decode a json object from the message\n    // parseMayFail = true means that we'll pass the raw message if JSON.parse fails\n    subscribe(streamName) {\n        // TODO: make sure to not explicitly support streams with spaces in the name\n        console.log(\"WebsocketSubscriber: Subscribing to stream \", streamName);\n\n        if (!this.attemptedConnect) {\n            this.connect();\n            this.attemptedConnect = true;\n        }\n\n        if (this.streamHandlers.has(streamName)) {\n            console.warning(\"WebsocketSubscriber: Already subscribed to stream \", streamName);\n            return;\n        }\n\n        // Check if the websocket connection is open\n        if (this.websocket && this.websocket.readyState === 1) {\n            this.sendSubscribe(streamName);\n        }   //TODO: no else?\n\n        let streamHandler = new WebsocketStreamHandler(streamName);\n        this.streamHandlers.set(streamName, streamHandler);\n        return streamHandler;\n    }\n\n    canSendSubscribe(streamName) {\n        if (this.streamStatus.has(streamName)) {\n            let streamStatus = this.streamStatus.get(streamName);\n            return streamStatus.status == WebsocketSubscriber.StreamStatus.UNSUBSCRIBED ||\n                    streamStatus.status == WebsocketSubscriber.StreamStatus.NONE;\n        }\n        return true;\n    }\n\n    updateStreamStatus(streamName, index) {\n        let streamStatus = null;\n        if (!this.streamStatus.has(streamName)) {\n            streamStatus = {\n                index: index,\n                status: WebsocketSubscriber.StreamStatus.SUBSCRIBING,\n                checkTimeout: null,\n                tryCount: 0,\n            };\n        } else {\n            streamStatus = this.streamStatus.get(streamName);\n            streamStatus.status = WebsocketSubscriber.StreamStatus.SUBSCRIBING;\n        }\n        if (streamStatus.checkTimeout != null) {\n            clearTimeout(streamStatus.checkTimeout);\n            streamStatus.checkTimeout = null;\n        }\n        streamStatus.tryCount ++;\n        let streamTimeout = Math.min(WebsocketSubscriber.STREAM_SUBSCRIBE_TIMEOUT * streamStatus.tryCount,\n                                     WebsocketSubscriber.STREAM_SUBSCRIBE_MAX_TIMEOUT);\n        streamStatus.checkTimeout = setTimeout(() => {\n            this.subscribeTimeout(streamName);\n        }, streamTimeout);\n        this.streamStatus.set(streamName, streamStatus);\n    }\n\n    subscribeTimeout(streamName) {\n        console.log(\"WebsocketSubscriber: stream subscribe timeout for #\" + streamName +\n                    \" reached! Trying to resubscribe again!\");\n        let streamStatus = this.streamStatus.get(streamName);\n        streamStatus.checkTimeout = null;\n        streamStatus.status = WebsocketSubscriber.StreamStatus.NONE;\n        if (streamStatus.index) {\n            this.sendResubscribe(streamName, streamStatus.index);\n        } else {\n            this.sendSubscribe(streamName);\n        }\n    }\n\n    sendSubscribe(streamName) {\n        if (this.canSendSubscribe(streamName)) {\n            this.send(\"s \" + streamName);\n            this.updateStreamStatus(streamName);\n        }\n    }\n\n    sendResubscribe(streamName, index) {\n        if (this.canSendSubscribe(streamName)) {\n            this.send(\"r \" + index + \" \" + streamName);\n            this.updateStreamStatus(streamName, index);\n        }\n    }\n\n    resubscribe() {\n        // Iterate over all streams and resubscribe to them\n        for (let key of this.streamHandlers.keys()) {\n            if (this.streamHandlers.get(key).haveIndex()) {\n                let index = this.streamHandlers.get(key).getLastIndex();\n                console.log(\"WebsocketSubscriber: Sending (re)subscribe to indexed stream \", key, \" from index \", index);\n                this.sendResubscribe(key, index);\n            } else {\n                console.log(\"WebsocketSubscriber: Sending (re)subscribe to stream \", key);\n                this.sendSubscribe(key);\n            }\n        }\n    }\n\n    onStreamSubscribe(streamName) {\n        if (!this.streamStatus.has(streamName)) {\n            console.error(\"WebsocketSubscriber: received subscribe success response for unrequested stream #\" +\n                          streamName);\n        }\n        let streamStatus = this.streamStatus.get(streamName);\n        if (streamStatus.checkTimeout) {\n            clearTimeout(streamStatus.checkTimeout);\n            streamStatus.checkTimeout = null;\n        }\n        streamStatus.status = WebsocketSubscriber.StreamStatus.SUBSCRIBED;\n    }\n\n    onWebsocketOpen() {\n        this.previousFailedReconnectAttempts = this.failedReconnectAttempts;\n        this.failedReconnectAttempts = 0;\n        console.log(\"WebsocketSubscriber: Websocket connection established!\");\n\n        this.reset();\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTED);\n        this.resubscribe();\n    }\n\n    processStreamPacket(packet) {\n        let firstSpace = packet.indexOf(\" \");\n        let streamName, afterStreamName;\n        if (firstSpace > 0) {\n            streamName = packet.substr(0, firstSpace).trim();\n            afterStreamName = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketSubscriber: Could not process stream packet: \" + packet);\n            return;\n        }\n\n        let streamHandler = this.streamHandlers.get(streamName);\n        // TODO: have a special mode if no handler is registered\n        if (!streamHandler) {\n            console.error(\"WebsocketSubscriber: No handler for websocket stream \", streamName);\n            return;\n        }\n        streamHandler.processPacket(afterStreamName);\n    }\n\n    fatalErrorClose(data) {\n        this.failedReconnectAttempts = this.previousFailedReconnectAttempts;\n        console.error(\"WebsocketSubscriber: server fatal error close: \", data);\n        this.onWebsocketError(data);\n    }\n\n    onWebsocketMessage(event) {\n        if (event.data === WebsocketSubscriber.HEARTBEAT_MESSAGE) {\n            // TODO: keep track of the last heartbeat timestamp\n        } else {\n            let firstSpace = event.data.indexOf(\" \");\n            let type, payload;\n\n            if (firstSpace > 0) {\n                type = event.data.substr(0, firstSpace).trim();\n                payload = event.data.substr(firstSpace + 1).trim();\n            } else {\n                type = event.data;\n                payload = \"\";\n            }\n\n            if (type === \"e\" || type === \"error\") { // error\n                console.error(\"WebsocketSubscriber: Websocket error: \", payload);\n                payload = payload.split(\" \")\n                const errorType = payload[0];\n                if (errorType === \"invalidSubscription\") {\n                    // Stop trying to resubscribe to a stream that's been rejected by the server\n                    const streamName = payload[1];\n                    const streamStatus = this.streamStatus.get(streamName);\n                    if (streamStatus && streamStatus.checkTimeout != null) {\n                        clearTimeout(streamStatus.checkTimeout);\n                        streamStatus.checkTimeout = null;\n                    }\n                }\n            } else if (type === \"s\") { // subscribed\n                console.log(\"WebsocketSubscriber: Successfully subscribed to stream \", payload);\n                this.onStreamSubscribe(payload);\n            } else if (type === \"m\") { // stream message\n                this.processStreamPacket(payload);\n            } else if (type  === \"c\") { // command\n                this.dispatch(\"serverCommand\", payload);\n            } else if (type == \"efc\") { // error - fatal - close\n                this.fatalErrorClose(payload);\n            } else {\n                console.error(\"WebsocketSubscriber: Can't process \" + event.data);\n            }\n        }\n    }\n\n    reset() {\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.DISCONNECTED);\n        for (let streamStatus of this.streamStatus) {\n            if (streamStatus.checkTimeout) {\n                clearTimeout(streamStatus.checkTimeout);\n            }\n        }\n        this.streamStatus.clear();\n    }\n\n    onWebsocketError(event) {\n        console.error(\"WebsocketSubscriber: Websocket connection is broken!\");\n        this.reset();\n        this.tryReconnect();\n    }\n\n    onWebsocketClose(event) {\n        console.log(\"WebsocketSubscriber: Connection closed!\");\n        this.reset();\n        this.tryReconnect();\n    }\n\n    send(message) {\n        // TODO: if the websocket is not open, enqueue WebsocketSubscriber message to be sent on open or just fail?\n        this.websocket.send(message);\n    }\n\n    getStreamHandler(streamName) {\n        let streamHandler = this.streamHandlers.get(streamName);\n        if (!streamHandler) {\n            streamHandler = this.subscribe(streamName);\n        }\n        return streamHandler;\n    }\n\n    // this should be pretty much the only external function\n    addStreamListener(streamName, callback) {\n        let streamHandler = this.getStreamHandler(streamName);\n        if (streamHandler.callbackExists(callback)) {\n            return;\n        }\n        streamHandler.addListener(callback);\n    }\n}\n\nWebsocketSubscriber.ConnectionStatus = {\n    NONE: 0,\n    CONNECTING: 1,\n    CONNECTED: 2,\n    DISCONNECTED: 3\n};\n\nWebsocketSubscriber.StreamStatus = {\n    NONE: 0,\n    SUBSCRIBING: 1,\n    SUBSCRIBED: 2,\n    UNSUBSCRIBED: 3\n};\n\nWebsocketSubscriber.STREAM_SUBSCRIBE_TIMEOUT = 1000;\nWebsocketSubscriber.STREAM_SUBSCRIBE_MAX_TIMEOUT = 10000;\n\nWebsocketSubscriber.CONNECT_RETRY_TIMEOUT = 1500;\nWebsocketSubscriber.CONNECT_RETRY_MAX_TIMEOUT = 15000;\n\nWebsocketSubscriber.HEARTBEAT_MESSAGE = \"-hrtbt-\";\n\nWebsocketSubscriber.Global = new WebsocketSubscriber();\n\nWebsocketSubscriber.addListener = function (streamName, callback) {\n    return this.Global.addStreamListener(streamName, callback);\n};\n\nexport {WebsocketSubscriber};\n","import {StyleSheet} from \"ui/Style\";\nimport {styleRule, styleRuleCustom} from \"decorators/Style\";\n\nexport class GlobalStyleSheet extends StyleSheet {\n    @styleRuleCustom({selector: \"body\"})\n    body = {\n        margin: 0,\n        fontFamily: this.themeProperties.FONT_FAMILY_SANS_SERIF\n    };\n\n    @styleRuleCustom({selector: \".hidden\"})\n    hidden = {\n        display: \"none !important\"\n    };\n\n    @styleRuleCustom({selector: \"*\"})\n    everything = {\n        boxSizing: \"border-box\"\n    };\n\n    @styleRuleCustom({selector: \"a\"})\n    a = {\n        textDecoration: \"none\",\n        color: this.themeProperties.COLOR_LINK || \"#337ab7\"\n    };\n\n    @styleRuleCustom({selector: \"hr\"})\n    hr = {\n        height: 0,\n        marginTop: \"20px\",\n        marginBottom: \"20px\",\n        border: 0,\n        borderTop: \"1px solid #eee\",\n        boxSizing: \"content-box\",\n    };\n\n    @styleRuleCustom({selector: \"code, pre\"})\n    codeAndPre = {\n        fontFamily: this.themeProperties.FONT_FAMILY_MONOSPACE,\n    };\n\n    @styleRuleCustom({selector: \"code\"})\n    code ={\n        padding: \"2px 4px\", // TODO: should be in rem\n        fontSize: \"90%\",\n        color: \"#345 !important\", // TODO: take colors from theme\n        backgroundColor: \"#f8f2f4 !important\",\n        borderRadius: this.themeProperties.BUTTON_BORDER_RADIUS,\n    };\n\n    @styleRuleCustom({selector: \"pre\"})\n    pre = {\n        overflow: \"auto\",\n        display: \"block\",\n        padding: this.themeProperties.BUTTON_BORDER_RADIUS,\n        margin: \"0 0 10px\",\n        fontSize: \"13px\",\n        lineHeight: \"1.42857143\",\n        color: \"#333\",\n        wordBreak: \"break-all\",\n        wordWrap: \"break-word\",\n        backgroundColor: \"#f5f5f5\",\n        border: \"1px solid #ccc\",\n    };\n\n    @styleRuleCustom({selector: \"pre code\"})\n    preInCode = {\n        padding: 0,\n        fontSize: \"inherit\",\n        color: \"inherit\",\n        whiteSpace: \"pre-wrap\",\n        backgroundColor: \"transparent\",\n        borderRadius: 0,\n    };\n}\n","import {Ajax} from \"base/Ajax\";\nimport {StemApp} from \"app/StemApp\";\nimport {getCookie} from \"base/Utils\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {GlobalState} from \"state/State\";\nimport {WebsocketSubscriber} from \"websocket/WebsocketSubscriber\";\nimport {GlobalStyleSheet} from \"./GlobalStyleSheet\";\nimport {ViewportMeta} from \"ui/UIPrimitives\";\nimport {StemDate} from \"time/Date\";\nimport {ServerTime} from \"time/Time\";\n\nexport class EstablishmentApp extends StemApp {\n    static MIN_VIEWPORT_META_WIDTH = 375; // Iphone 6\n\n    static init() {\n        this.loadPublicState();\n        this.addAjaxProcessors();\n        this.registerWebsocketStreams();\n        this.initializeViewportMeta();\n        this.configureTheme();\n        this.initializeGlobalStyle();\n        return super.init();\n    }\n\n    static loadPublicState() {\n        GlobalState.importState(self.PUBLIC_STATE || {});\n    }\n\n    static addAjaxProcessors() {\n        // Add the csrf cookie and credential for all requests\n        Ajax.addPreprocessor((options) => {\n            options.credentials = options.credentials || \"include\";\n            options.headers.set(\"X-CSRFToken\", getCookie(\"csrftoken\"));\n        });\n\n        // Add a postprocessor to load any state received from an Ajax response\n        Ajax.addPostprocessor((payload) => {\n            payload.state && GlobalState.importState(payload.state);\n        });\n\n        // Sync server time\n        Ajax.addPostprocessor((payload, xhrPromise) => {\n            const responseHeaders = xhrPromise.getResponseHeaders();\n            const responseDate = responseHeaders.get(\"date\");\n            if (responseDate) {\n                // Estimate server time, with 500ms rounding and 100 ms latency\n                const estimatedServerTime = new StemDate(responseDate).add(600);\n                ServerTime.set(estimatedServerTime, true);\n            }\n        });\n\n        // Raise any error, to be handled by the error processor\n        Ajax.addPostprocessor((payload) => {\n            if (payload.error) {\n                throw payload.error;\n            }\n        });\n\n        // Prettify any error, so it's in a standardized format\n        Ajax.addErrorPostprocessor((error) => {\n            return ErrorHandlers.wrapError(error);\n        });\n\n        // Add a default error handler\n        Ajax.errorHandler = (error) => ErrorHandlers.showErrorAlert(error);\n    }\n\n    static registerWebsocketStreams() {\n        // TODO: first check if websockets are enabled\n        GlobalState.registerStream = function (streamName) {\n            WebsocketSubscriber.addListener(streamName, GlobalState.applyEventWrapper);\n        };\n\n        //Register on the global event stream\n        GlobalState.registerStream(\"global-events\");\n\n        //Register on the user event stream\n        if (self.USER && self.USER.id) {\n            GlobalState.registerStream(\"user-\" + self.USER.id + \"-events\");\n        }\n    }\n\n    static initializeViewportMeta() {\n        return this.viewportMeta = ViewportMeta.create(document.head);\n    }\n\n    static configureTheme() {\n        // Nothing to do by default\n    }\n\n    static initializeGlobalStyle() {\n        GlobalStyleSheet.initialize();\n    }\n}\n","import {UI} from \"ui/UI\";\nimport {MAIN_ROUTE} from \"./Routes\"\nimport {AppNavManager} from \"./AppNavManager.jsx\";\nimport {EstablishmentApp} from \"EstablishmentApp\";\n\nexport class AppClass extends EstablishmentApp {\n    getBeforeContainer() {\n        return <AppNavManager ref=\"navManager\"/>;\n    }\n\n    getRoutes() {\n        return MAIN_ROUTE;\n    }\n}"],"names":["PageTitleManager","prefix","updatePageTitle","defaultTitle","title","getPrefix","getTitle","getFullPageTitle","Error","setDefaultTitle","mapIterator","filterIterator","unwrapArray","elements","Array","isArray","Symbol","iterator","from","allProperElements","i","length","result","unwrappedElement","j","push","isLocalUrl","url","host","self","location","origin","startsWith","r","RegExp","test","trimLocalUrl","slice","splitInChunks","array","maxChunkSize","chunks","splice","defaultComparator","a","b","isNumber","aStr","toString","bStr","slugify","string","trim","replace","toLowerCase","suffixNumber","value","suffix","Number","setObjectPrototype","obj","Class","__proto__","prototype","isPlainObject","nodeType","constructor","Object","deepCopy","target","arguments","entries","key","clone","src","dashCase","str","rez","getCookie","name","cookies","document","cookie","split","decodeURIComponent","substring","uniqueId","objectWeakMap","WeakMap","constructorWeakMap","totalObjectCount","has","objConstructor","objIndex","get","set","objUniqueId","padNumber","num","minLength","strNum","String","getOrdinalSuffix","suffixes","lastDigit","isTeen","Math","floor","suffixWithOrdinal","instantiateNative","BaseClass","NewClass","args","extendsNative","targetClass","includes","allKeys","getOwnPropertySymbols","concat","getOwnPropertyNames","newClass","create","property","getOwnPropertyDescriptor","defineProperty","NOOP_FUNCTION","iter","func","DispatcherHandle","dispatcher","callback","warn","removeListener","undefined","remove","Dispatcher","options","listeners","error","callbackExists","handler","addListener","payload","listener","DispatchersSymbol","Dispatchable","dispatchers","getDispatcher","dispatch","call","CleanupJobs","map","x","addListenerOnce","runCleanupJobs","cleanupJob","hasOwnProperty","_cleanupJobs","add","cleanup","dispatcherHandle","Map","getAttachCleanupJobMethod","methodName","addCleanupJob","attachListener","attachEventListener","attachCreateListener","attachUpdateListener","attachDeleteListener","Global","RunOnce","timeout","setTimeout","jobs","job","index","indexOf","SingleActiveElementDispatcher","element","addChangeListener","forceDispatch","_active","newElement","defaultToPixelsAttributes","Set","CreateNodeAttributesMap","oldAttributesMap","allowedAttributesArray","allowedAttributesMap","attribute","reverseNameMap","domName","ClassNameSet","join","className","NodeAttributes","assign","style","node","attributesMap","defaultAttributesMap","whitelistedAttributes","applyAttribute","keys","styleKey","setStyle","removeStyle","applyStyleToNode","classes","getClassArray","cls","getClassNameSet","classList","delete","attributeOptions","noValue","setAttribute","removeAttribute","addedAttributes","nodeAttributes","attributes","attr","attributeName","applyClassName","UI","BaseUIElement","existingChild","getNodeType","ref","parent","onUnmount","removeRef","TextElement","nextSibling","createNode","applyRef","redraw","insertBefore","onMount","Node","TEXT_NODE","createTextNode","getValue","STEM_DEBUG","stemElement","newValue","nodeValue","UIElement","children","setOptions","defaultOptions","getDefaultOptions","updateOptions","preservedOptions","getPreservedOptions","addListenersFromOptions","createElement","child","destroyNode","clearNode","newChild","copyState","childrenKeyMap","childKey","render","renderingStack","getChildrenToRender","pop","newChildren","getChildrenForRedraw","applyNodeAttributes","domNode","getElementKeyMap","prevChildNode","currentChildNode","firstChild","newChildKey","canOverwrite","overwriteChild","mount","newChildrenSet","returnCopy","getOptionsAsNodeAttributes","extraNodeAttributes","getNodeAttributes","apply","domAttributesMap","addClass","removeClass","hasClass","eventType","addListenerMethodName","handlerMethodName","event","arrayName","doRedraw","nextSiblingNode","Element","bindToNode","insertChildNodeBefore","position","nextChildNode","destroy","eraseChildAtIndex","erasedChild","removeChild","childElement","lastChild","body","contains","parameter","parseFloat","offsetWidth","offsetHeight","getWidthOrHeight","addEventListener","removeNodeListener","removeEventListener","addNodeListener","getStyleSheet","styleSheet","parentNode","uiElement","tag","primitiveMap","Primitive","baseClassPrimitiveMap","resultClass","Orientation","Direction","Level","Size","VoteStatus","ActionStatus","getOffset","left","top","nodePosition","nodeStyle","offsetLeft","offsetTop","offsetParent","getComputedStyle","computedStyle","window","getPropertyValue","changeParent","newParent","currentParent","eraseChild","appendChild","StyleInstance","selector","StyleElement","ALLOWED_SELECTOR_STARTS","DynamicStyleElement","getClassName","instanceCounter","selectorName","ownStyle","haveOwnStyle","isProperValue","firstChar","charAt","subStyle","getStyleInstances","unshift","getSelector","KeyframeElement","getKeyframeName","keyframeName","keyframe","getKeyframeInstance","isDescriptor","desc","decorate","handleDescriptor","entryArgs","createDefaultSetter","descriptor","configurable","enumerable","initializer","ret","lazyInitialize","lazyInit","evaluateStyleRuleObject","getStyleRuleKey","getKeyframesRuleKey","styleRuleWithOptions","targetMethodName","styleRuleDecorator","objInitializer","inherit","parentDesc","getPrototypeOf","parentStyle","getKey","styleRule","styleRuleInherit","styleRuleCustom","keyframesRule","keyframesRuleInherit","StyleSheet","head","getElementName","updateOnResize","update","delayedMount","ensureMounted","getTheme","addStyleSheet","styleElement","styleElementOptions","theme","defaultValue","getProperty","_firstUpdate","ensureFirstUpdate","elementOptions","nameKey","styleInstances","styleInstance","keyframes","styleElements","getProperties","singletonInstance","getInstance","log","elementNameCounter","ExclusiveClassSet","classInstance","Device","_isTouchDevice","navigator","MaxTouchPoints","msMaxTouchPoints","mobileDevices","_isMobileDevice","device","userAgent","min","touches","touch","identifier","getEventTouchIdentifier","find","axis","reference","coordName","getEventTouch","originalEvent","getEventCoord","opr","addons","opera","InstallTrigger","HTMLElement","documentMode","StyleMedia","chrome","webstore","eventName","cachedSupportedValues","onEventName","isSupported","Draggable","_clickCallbacks","_clickDragListeners","callbackWrapper","_okForClick","clickDragListener","dragForClickStarted","dragForClick","addDragListener","removeDragListener","listenerWrapper","onWrapperDrag","eventX","getEventX","eventY","getEventY","deltaX","_lastX","deltaY","_lastY","onDrag","onWrapperStart","onStart","onWrapperEnd","onEnd","touchEventIdentifier","preventDefault","createDragListenerWrapper","touchListenerWrapper","createTouchDragListenerWrapper","_dragListeners","COLORS_BY_NAME","Color","color","setColor","parseColor","rgba","getRgba","values","hex3","match","parseInt","hex6","substr","rgb","firstColor","secondColor","t","firstColorArray","secondColorArray","convertToRgba","lighten","amount","interpolate","darken","root","pow","enhance","isLight","buildColors","dark","colors","darkenPercents","getInstanceForObject","Theme","styleSheetSymbol","classSet","styleSheetSet","properties","updateStyleSheets","getAllStyleSheets","register","styleSheetGetter","registerStyle","styleClass","GlobalStyle","setProperties","BasicLevelSizeStyleSheet","level","type","size","BasicLevelStyleSheet","colorToStyleFunction","textColor","colorStyleRule","themeProperties","COLOR_PRIMARY","COLOR_SECONDARY","COLOR_PLAIN","COLOR_SUCCESS","COLOR_INFO","COLOR_WARNING","COLOR_DANGER","FlexContainerStyle","orientation","ContainerStyle","mobilePixels","desktopPercent","isMobileDevice","getSizeStyle","Utils","FlexContainer","Container","SimpleStyledElement","getLevel","getSize","IconableInterface","beforeChildren","getLabel","label","faIcon","getFaIcon","iconOptions","labelColorToStyle","darker","regular","LabelStyle","COLOR_GRAY","Label","DEFAULT","badgeColorToStyle","BadgeStyle","Badge","progressBarColorToStyle","ProgressBarStyle","ProgressBar","container","valueInPercent","HORIZONTAL","barStyle","height","barOptions","disableTransition","striped","active","backgroundColor","Panel","SlideBar","barSize","getOrientation","getProgressBarStyle","getSliderStyle","max","progressBar","slider","getOrientationAttribute","getSliderValue","getDragConfig","HorizontalSlideBar","width","barWidth","setValue","VerticalSlideBar","barHeight","VERTICAL","Link","newTab","Image","RawHTML","innerHTML","__innerHTML","getInnerHTML","ViewportMeta","getDesiredScale","MIN_WIDTH","minDeviceWidth","screen","availWidth","scale","getContent","desiredScale","maybeUpdate","TemporaryMessageArea","margin","textElement","message","displayDuration","clear","clearValueTimeout","ScrollableMixin","scrollHeight","clientHeight","scrollTop","getExcessTop","getDesiredExcessHeightTop","getExcessBottom","getDesiredExcessHeightBottom","haveExcessTop","popChildTop","haveExcessBottom","popChildBottom","removeExcessBottom","insertChild","removeExcessTop","maxScrollTop","scrollInfo","scrollToHeight","InfiniteScrollable","id","staticTop","entry","renderEntry","entryRenderer","insertEntry","entryComparator","TimePassedSpan","getTimeDeltaDisplay","timeStamp","timeNow","Date","now","timeDelta","timeUnitsInSeconds","timeUnits","_updateListener","addIntervalListener","updateFunction","TIME_DISPATCHER","setInterval","InputStyle","InputableElement","inputElement","Input","getInputType","SubmitInput","TextInput","NumberInput","val","EmailInput","PasswordInput","FileInput","files","getFiles","formData","FormData","file","append","CheckboxInput","checkboxInput","checked","TextArea","readOnly","Select","givenOptions","selectOptions","selected","select","selectedIndex","getIndex","setIndex","FormStyle","separatedLineInputStyle","Form","form","FormGroup","formGroup","errorMessage","errorField","textContent","hasError","float","getGivenChildren","getErrorField","FormField","inline","formField","sameLine","separatedLine","contentFirst","MozStyleElements","SVGNodeAttributes","transform","translate","fixMozAttributes","SVG","createElementNS","point","svgNode","ownerSVGElement","createSVGPoint","svgPoint","y","matrixTransform","getScreenCTM","inverse","rect","getBoundingClientRect","clientLeft","clientTop","getScreenCoordinatedForPoint","state","scrollLeft","pos","bottom","right","getBBox","parentElement","newOpacity","opacity","getSvg","Text","selectable","text","setX","setY","fillOnly","EPS","isZero","epsilon","abs","equal","val1","val2","crossProduct","p1","p2","p0","polarToCartesian","angle","radius","orig","cos","sin","SVGRoot","RawSVG","Group","Defs","ClipPath","Path","getPath","d","newPath","getTotalLength","len","getPointAtLength","totalLength","getLength","p3","atan2","PI","Circle","center","cx","cy","pathString","Stop","RadialGradient","Ellipse","CircleArc","startAngle","endAngle","angleDiff","startPoint","math","endPoint","sweepFlag","largeArcFlag","Rect","Line","x1","y1","x2","y2","Polygon","getPolygonPath","points","setPath","Transition","context","duration","startTime","dependsOn","speedFactor","transition","isStopped","stopped","setStartTime","functionWrapper","pauseTime","nextStep","getEndTime","time","ratio","restart","stop","lastT","getFraction","Modifier","reverseFunc","TransitionList","transitions","forceFinish","pause","resume","onNewFrame","finished","stk","canAdvance","setSpeedFactor","sortByEndTime","endTime","transitionEndTime","sort","hasDependencyOn","sortByStartTime","forceStart","startPercent","animationFrameId","paused","requestAnimationFrame","AnimatedSVG","animationWrapper","repeat","blinkTransition","config","interval","executeLastStep","times","changeOpacityTransition","setOpacity","changeColorTransition","getColor","moveTransition","coords","setPosition","changeFillTransition","Switcher","childMap","numRedraws","fullHeight","overwriteElements","activeChild","existingElements","newElements","keyMap","lazyRender","getChildProperties","isUpToDate","updateChild","updateActiveChild","redrawIndex","doMount","setActive","childProperties","isMounted","preserveScroll","deactivateChild","activateChild","isInDocument","Router","routes","pageTitle","urlParts","page","getRoutes","getPage","getPageNotFound","activePage","getActive","setTitle","setGlobalRouter","path","pathname","filter","replaceHistory","joinURLParts","historyArgs","history","replaceState","pushState","updateURL","setURL","parseURL","router","onpopstate","Route","expr","pageGenerator","subroutes","cachedPages","isArg","ARG_KEY","argsArray","serializedArgs","generatorArgs","myPageTitle","getPageTitle","matchesOwnNode","generatePage","subroute","matches","TerminalRoute","translationMap","TranslationElements","TranslationTextElement","strings","evaluateSprintf","evaluate","T","BaseTabAreaStyle","DefaultTabAreaStyle","MinimalistTabAreaStyle","BasicTabTitle","tab","activeTab","existingElement","babelHelpers.get","panel","activeTabDispatcher","getPanel","addClickListener","TabTitleArea","TabArea","tabArea","tabHref","createTabPanel","tabTitle","tabPanel","titleArea","switcherArea","tabTitles","nav","tabPanels","switcher","autoActive","getTitleArea","getSwitcher","onSetActive","MultiMap","nKey","normalizeKey","nValue","normalizeValue","items","Headers","TypeError","polyfill","polyfillHeaders","global","URLSearchParams","decode","query","encode","encodeURIComponent","polyfillURLSearchParams","fileReaderReady","reader","Promise","resolve","reject","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","Body","bodyUsed","bodyInit","_bodyInit","_bodyText","Blob","isPrototypeOf","_bodyBlob","_bodyFormData","DataView","_bodyArrayBuffer","cloneBuffer","buffer","ArrayBuffer","isView","headers","rejected","setBodyUsed","then","view","Uint8Array","chars","fromCharCode","readArrayBufferAsText","JSON","parse","bytes","shift","byteLength","Request","input","method","normalizeMethod","headerArgs","referrer","referrerPolicy","mode","credentials","cache","initialize","upcased","toUpperCase","methods","polyfillRequest","Response","status","ok","statusText","response","redirectStatuses","RangeError","polyfillResponse","parseHeaders","xhr","rawHeader","getAllResponseHeaders","rawHeaderLines","line","parts","getURLSearchParams","data","urlSearchParams","instance","composeURL","params","XHRPromise","request","XMLHttpRequest","promiseResolve","promiseReject","getResponseHeaders","responseText","responseInit","responseURL","dataType","ontimeout","open","withCredentials","responseType","forEach","setRequestHeader","send","getXHR","postprocessors","fetch","defaultPostprocessors","errorPostprocessors","defaultErrorPostprocessors","getPostprocessors","postprocessor","exception","onSuccess","onComplete","getErrorPostprocessors","onError","_chained","errorHandler","onResolve","onReject","getPromise","catch","abort","addXHRListener","jQueryCompatibilityPreprocessor","contentType","urlParams","arrayValue","preprocessors","defaultPreprocessors","preprocessor","success","complete","AjaxHandler","ajaxHandler","Ajax","parentHandler","baseOptions","getPreprocessors","getErrorHandler","post","inherited","FixedURLAjaxHandler","buttonColorToStyle","darker1","darker2","darker3","hoverDisabled","ButtonStyle","INFO","BUTTON_BORDER_RADIUS","BASE_BORDER_RADIUS","ButtonGroupStyle","RadioButtonGroupStyle","Button","disabled","enabled","StateButton","statusOptions","statusLabel","enable","RUNNING","disable","SUCCESS","FAILED","stateOptions","AjaxButton","stateResetTimeout","clearResetTimeout","setState","resetToDefaultTimeout","ajaxPromise","getAjaxHandler","scheduleStateReset","ajax","ButtonGroup","RadioButtonGroup","buttons","cardPanelColorToStyle","CardPanelStyle","CARD_PANEL_HEADER_HEIGHT","CARD_PANEL_TEXT_TRANSFORM","CARD_PANEL_HEADING_PADDING","cardPanelHeaderColorToStyle","CARD_PANEL_HEADER_HEIGHT_LARGE","CARD_PANEL_HEADING_PADDING_LARGE","BASE_BORDER_WIDTH","BASE_BOX_SHADOW","BASE_BORDER_STYLE","CardPanelHeaderStyle","CardPanel","PRIMARY","headingClasses","getHeaderStyleSheet","headingCentered","headingLevel","centered","bodyCentered","bodyClasses","getHeadingClasses","getBodyClasses","bodyStyle","RowListStyle","ROW_LIST_ROW_HEIGHT","ROW_LIST_ROW_PADDING","ROW_LIST_ROW_HEIGHT_LARGE","ROW_LIST_ROW_PADDING_LARGE","COLOR_PLAIN_ALTERNATIVE","ROW_LIST_ROW_BORDER_WIDTH","BASE_BORDER_COLOR","RowList","rowList","rowClasses","alternateColors","alternativeColorsOddRow","noAlternativeColors","rows","rowParser","row","getRowClasses","CollapsibleStyle","transitionDuration","CollapsiblePanelStyle","CollapsibleMixin","CollapsibleClass","CollapsibleElement","collapsibleStyleSheet","collapsed","collapsibleStyle","getCollapsibleStyleSheet","collapsing","transitionEndFunction","CollapsiblePanel","expand","collapse","contentArea","toggleButton","collapsedButton","setChildren","collapsedPanelClass","collapsedHeadingClass","hiddenClass","contentStyle","noPadding","heading","button","toggle","overflow","DelayedCollapsiblePanel","_haveExpanded","getDelayedChildren","FloatingWindowStyle","ModalStyle","FloatingWindow","visibleAnimated","hiddenAnimated","fadeIn","fadeOut","transitionTime","VolatileFloatingWindow","hideListener","hide","show","bindWindowListeners","unbindWindowListeners","notVisible","stopPropagation","Modal","visible","background","getModalWindow","closeButton","zIndex","EXTRA_LARGE","border","getModalWindowStyle","fillScreen","display","maxHeight","isVisible","modalWindow","behindPanel","modalContainer","destroyOnHide","detachListener","closeListenerHandler","modal","ActionModal","actionName","closeName","header","getHeader","getBody","getFooter","footer","getActionName","getActionLevel","action","getCloseName","getActionButton","ActionModalButton","modalOptions","getModalOptions","ErrorModal","DANGER","GlobalContainerStyle","innerHeight","NAV_MANAGER_NAVBAR_HEIGHT","MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE","MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP","MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE","MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP","GlobalContainer","default","isTouchDevice","Divider","dragMousedown","divider","domEvent","dragMousemoveFunction","dragMousemove","dragMouseupFunction","dragMouseup","touchDeviceTriggered","dividerMousedownFunction","DividerStyle","AccordionStyle","SectionDividerStyle","barThickness","barPadding","DividerBar","noTextSelection","verticalDivider","horizontalDivider","SectionDivider","uncollapsedSizes","verticalSection","horizontalSection","getWidth","getHeight","setWidth","setHeight","minWidth","minHeight","getDimension","panels","dividers","parentSize","childSize","unCollapsedCount","fixed","getVisibleDivider","setDimension","recalculateDimensions","getHiddenDivider","expandChild","collapseChild","fixedTotalSize","unfixedTotalSize","dividerEvent","previousEvent","previousPanel","getPreviousUnfixedChild","nextPanel","getNextUnfixedChild","panelsSize","deltaFunction","mouseMoveListener","delta","nextSize","previousSize","getMinDimension","mouseUpListener","dividerMouseDownFunction","leftChildVisible","FAIcon","icon","getIcon","FACollapseIcon","setCollapsed","FASortIcon","direction","UP","DOWN","AccordionDivider","grabbing","grab","collapseIcon","toggleCollapsed","Accordion","accordion","dragTriggered","panelsHeight","totalFlex","getPreviousVisibleChild","getNextVisibleChild","sign","toggleChild","toggleClass","childrenStatus","flex","CarouselStyle","navigatorHeight","hoverColor","navigatorTransitionTime","CarouselNavigator","navigatorIcon","Carousel","carousel","setActiveIndex","activeIndex","marginLeft","pusher","RangePanelStyle","rowHeight","EntriesManager","rawEntries","cacheEntries","cachedEntries","sortEntries","filterEntries","getRawEntries","low","high","getComparator","getFilter","comparator","TableStyle","cellStyle","theadCellStyle","SortableTableStyle","sortIcon","TableRow","rowCells","columns","column","renderEntryCell","Table","setColumns","table","renderTableHead","renderTableBody","renderHeaderCell","getEntries","RowClass","getRowClass","getEntryKey","getRowOptions","headerStyle","renderColumnHeader","headerName","columnDefaults","TableRowInCollapsibleTable","CollapsibleTableStyle","collapsibleTableStyle","CollapsibleTableRow","renderCollapsible","padding","getInitialCollapsedContent","DelayedCollapsibleTableRow","CollapsibleTableInterface","BaseTableClass","toggleColumn","rowClass","CollapsibleTable","SortableTableInterface","SortIconClass","SortableTable","columnSortingOrder","sortByColumn","sortBy","sortDescending","visibility","colCmp","col","keyA","rawValue","keyB","cmp","cmpRes","sortedEntries","TimeUnit","baseUnit","multiplier","pluralName","milliseconds","getMilliseconds","variableMultiplier","variableDuration","isVariable","date","timeUnit","CANONICAL","ALL","FIXED_DURATION","VARIABLE_DURATION","MILLISECOND","SECOND","MINUTE","HOUR","DAY","WEEK","MONTH","QUARTER","TRIMESTER","SEMESTER","YEAR","dateMethodSuffix","Duration","relativeDuration","toDuration","increm","negate","toMilliseconds","toSeconds","toMinutes","toHours","locale","addCanonicalTimeUnit","timeUnitsName","addCanonicalTimeUnits","MAX_AUTO_UNIX_TIME","BaseDate","StemDate","toDate","setTime","getTime","toUnix","toTimeUnit","getDateValue","equals","diff","isBefore","isAfter","isSameOrAfter","isSameOrBefore","getDay","count","currentValue","roundDown","addUnit","roundUp","isAbsolute","loc","token","tokenFormattersMap","tokens","splitToTokens","evalToken","fromUnixMilliseconds","getTimezoneOffset","year","getFullYear","lastDayInMonth","getMonth","getDate","months","isLeapYear","month","totalDays","getDaysCountPerMonth","getDayInYear","getWeekDay","unixMilliseconds","unixSecons","highResTimestamp","performance","timing","navigationStart","unixTime","fromUnixSeconds","candidate","lastIsLetter","escapeByCurlyBracket","escapeBySquareBracket","charCode","charCodeAt","isLetter","format","pattern","utc","miniWeekDays","shortWeekDays","longWeekdays","shortMonths","longMonths","DateLocale","formats","longDate","toISOString","getHours","getMinutes","getSeconds","ServerTime","subtract","offset","onlyIfMissing","serverPageLoad","responseStart","DAY_IN_MILLISECONDS","isDifferentDay","timeA","timeB","DatePickerTable","TimePickerWidget","hours","minutes","seconds","textSpanStyle","marginRight","changeCallback","hourSlider","minuteSlider","secondSlider","DateTimeWindow","computeInitial","initialDateTime","formatISO","currentDate","toTimeString","output","datePicker","timePicker","DateTimePicker","setDate","integerTokens","number","isNaN","years","days","textInput","parseDateFromString","dateString","enqueueIfNotLoaded","isLoaded","enqueueMethodCall","EnqueuedMethodsClass","methodCallQueue","methodCall","CodeEditor","getAce","aceMode","applyAceOptions","aceResize","ace","requireAce","onDelayedMount","edit","$blockScrolling","Infinity","resolveQueuedMethods","renderer","$textLayer","setAceMode","setAceKeyboardHandler","aceKeyboardHandler","setAceTheme","aceTheme","setAceFontSize","fontSize","setAceTabSize","tabSize","setAceLineNumberVisible","showLineNumber","setAcePrintMarginVisible","showPrintMargin","setAcePrintMarginSize","printMarginSize","setReadOnly","setUseWrapMode","lineWrapping","numLines","maxLines","minLines","setAceOptions","langTools","setBasicAutocompletion","enableBasicAutocompletion","setLiveAutocompletion","enableLiveAutocompletion","setSnippets","enableSnippets","resize","sourceCode","fakeUserChange","apiChange","getSession","setMode","$keybindingId","keyboardHandler","aceName","setKeyboardHandler","getMode","setTheme","getFontSize","getOption","setShowGutter","getShowGutter","setShowPrintMargin","getShowPrintMargin","setPrintMarginColumn","getPrintMarginColumn","annotations","setAnnotations","setOption","foldStyle","setFoldStyle","setHighlightActiveLine","setHighlightGutterLine","getScrollTop","setScrollTop","startLine","startCol","endLine","endCol","Range","AceRange","addMarker","marker","removeMarker","lineHeight","doc","getTextRange","getDocument","session","getLine","gotoLine","insert","addAceSessionEventListener","on","focus","editor","editorRow","editorColumn","undoManager","setUndoManager","lastRow","lastRowLength","scrolledToBottom","isRowFullyVisible","scrollToLine","StaticCodeHighlighter","TodoStyle","Todo","todo","divClassName","uncheckedTodo","checkedTodo","toggleTodo","TodoList","todoItems","todos","IndexPage","State","stores","applyEventWrapper","applyEvent","objectType","store","getStore","individualEvent","importState","getStoreForEvent","objectId","stateMap","storeState","getDependencies","dependency","importStateFromTempMap","next","GlobalState","DefaultState","StoreSymbol","StoreObject","setStore","handlers","e","_eventDispatcher","addUpdateListener","getState","registerStream","getStreamName","BaseStore","ObjectWrapper","attachToState","addStore","dependencies","GenericObjectStore","objects","getObjectIdForEvent","asIterable","sendDispatch","existingObject","getObjectForEvent","refreshEvent","newObject","createObject","applyCreateEvent","applyEventToObject","objDeleted","applyDeleteEvent","applyUpdateOrCreateEvent","fakeCreate","fakeExisting","object","SingletonStore","AjaxFetchMixin","BaseStoreClass","successCallback","errorCallback","forceFetch","fetchJobs","fetchTimeout","executeAjaxFetch","fetchTimeoutDuration","ids","requestData","getFetchRequestData","fetchURL","fetchType","fetchJob","idFetchJobs","maxFetchObjectCount","idChunks","fetchJobsChunks","requests","getFetchRequestObject","getFetchRequests","requestObject","VirtualStoreObjectMixin","BaseStoreObjectClass","newId","oldId","hasTemporaryId","VirtualStoreMixin","generateVirtualId","virtualId","updateId","existingVirtualObject","getVirtualObject","applyUpdateObjectId","virtualIdCounter","LanguageObject","localName","LanguageStoreClass","isoCode","all","language","Locale","Language","Article","edits","user","USER","isSuperUser","userCreatedId","articleEdit","ArticleStore","article","baseArticleId","languageId","ArticleEdit","articleId","ArticleStoreClass","baseArticle","getTranslation","ArticleEditStore","addCreateListener","getArticle","addEdit","BlogEntry","BlogEntryStoreClass","urlName","blogEntry","BlogEntryStore","StringStream","pointer","steps","ch","whitespaceChar","whitespaceStart","done","at","validChars","skipWhitespace","whitespace","wordStart","nanString","advance","NaN","char","infinityString","isDigit","isHexDigit","numberStart","peek","delimiter","maxLength","delimiterMatch","delimiterIndex","delimiterLength","search","newStream","kmp","prefixLength","ModifierAutomation","startNode","lastNode","startPatternNode","patternPrefix","patternNode","leftWhitespace","whitespaceNode","newNode","backNode","patternLastNode","captureContent","capture","captureNode","endPattern","endCaptureNode","endPatternPrefix","endPatternNodes","endPatternLastNode","endNode","patternStep","endPatternStep","currentArray","originalString","matcher","arrayLocation","currentElement","newArray","end","isJSX","nextState","modifierStart","modifierEnd","modifierCapture","start","reverse","wrap","processChildren","processChild","isDummy","isString","content","InlineModifierMixin","BaseModifierClass","lastElement","lastIndexOf","LineStartModifierMixin","groupConsecutive","isValidElement","wrapItem","patternIndex","patternEnd","itemTag","RawContentModifierMixin","BlockCodeModifier","codeOptions","codeBlock","firstLineEnd","firstLine","lineStream","word","MarkupParser","parseOptions","codeHighlighter","getElement","HeaderModifier","hashtagIndex","hashtagEnd","headerLevel","nextChar","HorizontalRuleModifier","UnorderedListModifier","OrderedListModifier","ParagraphModifier","capturedContent","lineStart","StrongModifier","ItalicModifier","InlineCodeModifier","InlineVarModifier","InlineLatexModifier","LinkModifier","checkAndAddUrl","isCorrectUrl","trimProtocol","modifiers","uiElements","arr","parseUIElements","modifier","modify","el","stream","textStart","elementStart","parseUIElement","optionsEnd","contentStart","uiElementStart","remainingContent","validOptionName","optionName","optionString","foundStringEnd","bracketCount","validJSON","jsonString","parseJSON5","escapee","renderChar","chr","m","SyntaxError","lineNumber","columnNumber","stringify","c","base","isFinite","hex","uffff","delim","inlineComment","blockComment","comment","white","source","reviver","walk","holder","k","v","MarkupClassMap","fallback","extraClasses","classMap","extraClass","classObject","registerMarkup","getClass","GLOBAL","MarkupRenderer","parser","registerDependencies","reparse","convertToUI","MarkupEditor","rendererOptions","refLink","showButtons","textAlign","getEditor","getMarkupRenderer","markup","markupRenderer","separator","updateValue","editorPanel","codeEditor","toggleLeftButton","sectionDivider","setLevel","toggleRightButton","rendererPanel","setEditorOptions","User","keyChain","currentDict","customSettings","getCustomSetting","lastKey","timeouts","postJSON","setCustomSetting","UserStore","getCurrentUser","PublicUser","displayName","username","PublicUserStoreClass","PublicUserStore","UserNotification","userId","getUser","lastReadNotificationId","UserNotificationStore","UserHandle","setUser","handle","cursor","getProfileUrl","getDisplayHandle","ArticleRenderer","markupClassMap","showEditButton","canBeEditedByUser","editButtonUrl","getEditButton","dependencyArray","requireAndRedraw","RecursiveArticleRenderer","ArticleSwitcher","articleChildMap","getPageForArticle","initialArticle","initialArticleId","setActiveArticleId","CSAStyle","BlogStyle","fontFamily","titleFontSize","writtenBy","link","blogArticleRenderer","BLUE","HOVER_BLUE","BlogArticleRendererStyle","hStyle","BlogArticleRenderer","BlogQuote","quote","TransferOwnershipModal","marginTop","ownerFormInput","newOwner","messageArea","showMessage","transferOwnershipButton","DeleteArticleModal","deleteArticle","deleteArticleButton","articles","getArticleIndex","CreateArticleModal","createArticle","articleNameInput","dependencyInput","languageSelect","isPublic","publicCheckbox","createArticleButton","addArticle","AddTranslationModal","ArticleTable","resetColumnSortingOrder","unix","dateCreated","dateModified","transferOwnershipModal","setArticle","deleteArticleModal","ArticleManager","SMALL","addButton","createArticleModal","marginBottom","getArticles","getJSON","TranslationManager","addTranslationModal","getTranslations","deleteRedirectLink","ArticleMarkupEditor","ArticleEditor","DiffWidgetClass","versions","versionsLabels","getEdits","leftEditable","rightEditable","initializeVersioning","translationsPanel","baseArticleForm","ownershipPanel","setOwner","revisionsPanel","flexDirection","arrows","markupEditor","saveMarkup","articleNameFormInput","dependencyFormInput","saveOptions","saveMarkupMessageArea","saveMarkupButton","addNewVersion","saveOptionsMessageArea","saveOptionsButton","setOwnerMessageArea","setOwnerButton","leftIndex","leftTextSelector","rightIndex","rightTextSelector","setLeftIndex","setRightIndex","diffWidget","setLeftText","setRightText","updateEditable","setLeftEditable","setRightEditable","onbeforeunload","UserReactionCollection","reactions","getUserReactionStore","reaction","collectionId","currentUser","getReactions","userReaction","currentUserReaction","getCurrentUserReaction","UserReaction","UserReactionCollectionStore","UserReactionStore","MessageInstance","messageId","timeAdded","MessageThreadStore","messageThreadId","fakeIfMissing","reactionCollection","reactionCollectionId","getReactionCollection","upvotesCount","downvotesCount","getNumLikes","getNumDislikes","getCurrentUserReactionType","ans","currentId","getNormalizedId","getMessageThread","getMessages","hasMarkupEnabled","react","deleteMessageInstance","messageThread","messages","postError","MessageThread","streamName","online","markupEnabled","messageInstance","orderDescending","lastMessage","MessageInstanceStoreClass","messageContent","temporaryId","virtualMessageInstance","MessageInstanceStore","createEvent","addMessageInstance","BaseChatObject","GroupChat","GroupChatStoreClass","GroupChatStore","PrivateChat","user1Id","user2Id","PrivateChatStore","getChatWithUser","myUserId","privateChat","fetchForUser","privateChatId","BasePopup","contentPadding","arrowDirection","arrowColor","createArrowStyle","baseArrowOutline","baseArrow","getArrow","arrowMargin","left2","popupArrow","popupArrowOutline","setParentNode","manual","bindInsideParent","Popup","contentFontSize","paddingLeft","paddingTop","paddingBottom","getTitleAreaContent","newTitle","documentListener","supportsEvent","fakeClickEvent","initEvent","dispatchEvent","blur","closeButtonColor","Emoji","ClickableEmote","redrawTimeout","textBox","appendValue","getValueText","afterClick","ClickableEmoji","ClickableTwitchEmote","EmojiButton","getTextBox","closePopup","emotesList","emoji","EmojiMini","EMOJI","twitchEmoji","TWITCH_EMOTICONS","emojiPopup","getPopup","MarkupEditorModal","getMarkupEditorStyle","appendGraphExample","getButtonStyle","appendSubmissionExample","appendCodeExample","appendLinkExample","appendLatexExample","hideCallback","showCallback","doneButton","ChatMarkupRenderer","ScriptResolver","scriptPath","loaded","scriptElement","async","onLoad","getElementsByTagName","scriptResolveMap","ensureSingle","script","scriptResolver","ensure","scripts","promises","TranslationKey","TranslationKeyStore","TranslationEntry","translationKeyId","TranslationEntryStore","translationEntry","getTranslationKey","ErrorMessage","translationKey","ErrorMessageStoreClass","ErrorMessageStore","ErrorHandlers","wrapError","showErrorAlert","PAGE_NOT_FOUND","SocialAccountManager","socialApp","getSocialApp","getClientId","_Global","login","connect","SocialApp","clientId","SocialAppStoreClass","SocialAppStore","GoogleManager","getSocialAppByName","ensureScriptNodeExists","getElementById","load","auth2","init","updateSigninStatus","getGoogleAuth","isSignedIn","listen","setLoaded","gapi","getAuthInstance","getGoogleUser","getAuthResponse","process","handleProcess","grantOfflineAccess","sendData","loginByTokenUrl","reload","FacebookManager","href","fbAsyncInit","version","nextUrl","authResponse","accessToken","expiresIn","FB","logout","onLogoutSuccess","logoutUrl","loginOptions","auth_type","onLoginSuccess","onLoginCanceled","onLoginError","GithubManager","githubUri","rawParams","uri","githubWindow","loginWindowOptions","Country","getIsoCode","ALL_COUNTRIES_PLACEHOLDER","NO_COUNTRY_PLACEHOLDER","COUNTRY_COMPARATOR","CountryStoreClass","noneName","countriesIds","allCountries","countries","countryId","CountryStore","loginHeight","registerHeight","buttonHeight","fontAwesomeIconHeight","signInButtonHeight","signInButtonWidth","LoginStyle","selectedLeft","selectedRight","fontAwesomeIcon","connectWith","connectIcons","socialConnectDimensions","ERROR_TIMEOUT","accountsConfig","socialLoginSpecificInfo","SocialConnectButton","specificInfo","socialConnectButtonContainer","loginManager","socialConnectButtonIcon","getLoginManager","loginElement","clearErrorMessage","ThirdPartyLogin","thirdPartyLoginContainer","getSocialApps","getConnectWith","getConnectWithButtons","LoginWidget","loginWidget","emailIcon","passwordInputOptions","rememberMe","forgotPassword","badLogin","alignItems","justifyContent","signInButton","horizontalLine","thirdPartyLogin","getHorizontalLine","getEmailInput","getPasswordInput","getRememberMeCheckbox","getForgotPassword","getSignInButton","getErrorArea","loginErrorMessage","emailInput","passwordInput","rememberInput","setErrorMessage","sendLogin","RecaptchaWidget","random","grecaptcha","GOOGLE_RECAPTCHA_PUBLIC_KEY","captchaId","getResponse","onRecaptchaCallback","RegisterWidget","registerWidget","signInButtonContainer","allWithNone","countrySelect","formFields","getUsernameInput","country","getCountryInput","recaptchaContainer","getSignUpButton","submitButton","recaptchaWidget","usernameInput","errorArea","sendRegistration","NormalLogin","loginRegisterSystem","loginSystemButton","registerSystemButton","loginRegisterButtons","getLoginButton","getRegisterButton","loginButton","registerButton","LoginTabButton","selectedLeftClass","RegisterTabButton","selectedRightClass","Login","LoginModal","isAuthenticated","VotingWidgetStyle","likeColor","dislikeColor","notVoteColor","balanceColor","mainClass","thumbsStyle","counterStyle","VotingWidget","NONE","buttonsStyle","likeButtonStyle","getUserVote","LIKE","dislikeButtonStyle","DISLIKE","getVotesBalance","votesBalance","userVote","CommentVotingWidget","updateTarget","possibleTarget","tempListener","setupListener","likeButton","resetReaction","like","dislikeButton","dislike","CommentVotingWidgetWithThumbs","thumbsUpScoreStyle","thumbsDownScoreStyle","fontWeight","displayStyle","thumbsUpHoverStyle","thumbsDownHoverStyle","ChatStyle","navbarHeight","renderMessageHeight","userFontSize","commentFontSize","hrBackgroundColor","hoverBackgroundColor","previewButton","loadMoreButton","Plugin","linkToParent","pluginName","Pluginable","PluginClass","plugins","plugin","getPlugin","PreviewMarkupButton","EditableMessage","toggleEditMode","editContent","writingSectionStyle","chatInputStyle","hideEditMode","messageInput","saveMessageChanges","deletable","deleteMessage","contentSwitcher","hasChild","contentContainer","showEditMode","GroupChatMessage","groupChatMessage","getPreviousMessage","editButton","timestamp","shouldShowDayTimestamp","messageTimeStampHr","messageTimeStamp","errorElement","userHandle","getTimeOfDay","commentContent","PrivateChatMessage","paddingDiv","flexGrow","isOwnMessage","ChatMessageScrollSection","ChatWidget","ChatMessageClass","ChatWidgetClass","initializeShowLoadMoreButton","getNumMessages","showLoadMoreButton","getMaxMessageId","createVirtualMessageInstance","baseRequest","chatInput","createVirtualMessage","setPostError","stack","messageWindow","scrollToBottom","getPostURL","scrollPosition","scrollPercent","loadMoreMessages","saveScrollPosition","applyScrollPosition","setAdaptiveHeight","viewportHeight","documentElement","availableHeight","extraHeightOffset","getDesiredHeight","renderMessageView","renderMessage","outstandingRequest","topMessage","getTopMessage","messageInstances","lastMessageId","ajaxCall","getGetURL","getGetType","oldHeight","scrollDelta","dayTimestamp","muted","sendMessage","messageBoxButton","userData","renderMessageBox","defaultPlugins","getDefaultPlugins","registerPlugin","messageWindowScrollTop","messageWindowscrollMax","addResizeListeners","GroupChatWidget","chatId","PrivateChatWidget","getOtherUserId","VotableChatMessage","VotableGroupChatWidget","CommentWidgetStyle","previewButtonStyle","ThreadMessage","messageDate","textTransform","votes","ToggleLogin","BlogCommentWidget","commentWidgetStyle","chatInputMax","sendMessageButtonStyle","CommentWidget","dateTimestamps","commentsCount","commentsTitle","AsyncCommentThread","groupChat","commentWidgetOptions","getCircleStyle","borderSize","animationName","animationDuration","createCircle","RotatingHelperStyle","ConcentricCirclesLoadingScreen","centerConstant","rotateClockwise","rotateCounterclockwise","DelayedElement","_loaded","applyNodeAttributesNotLoaded","applyNodeAttributesLoaded","renderNotLoaded","renderLoaded","_executedMount","beforeRedrawNotLoaded","redrawNotLoaded","redrawLoaded","StateDependentElement","endsWith","renderLoading","renderError","getAjaxUrl","getAjaxRequest","setError","maxWidth","ERROR","BlogEntryEditModal","entryId","discussionButton","discussionId","WARNING","createDiscussion","changeSettings","titleInput","urlInput","visibleCheckbox","changeURL","NewBlogEntryModal","addEntry","onKeyUp","postContentMarkup","blogEntryId","BlogEntryPreview","getBlogEntry","blogStyle","getBlogArticle","publishedDate","publishedFormat","modifiedFormat","articleInfoStyle","getEntryURL","whiteOverlay","BlogEntryView","blogEntryView","blogEntryEditButton","getComments","bottomSection","BlogEntryList","blogEntries","showNewBlogPostModal","finishedLoading","DelayedBlogEntryList","DelayedBlogEntryView","getEntryForURL","entryURL","BlogRoute","getSubroutes","Forum","forumThreads","registerToStream","addDeleteListener","forumThread","parentId","deleteForumThread","ForumStore","ForumThread","getParent","addForumThread","authorId","pinnedIndex","contentMessageId","getContentMessage","lastActive","numMessages","hidden","getNumReplies","ForumThreadStore","EditThreadReplyButton","EditThreadReplyModal","DeleteThreadReplyModal","DeleteThreadReplyButton","ForumThreadReplyStyle","ForumThreadPanelStyle","numRepliesFontSize","messageFontSize","buttonFontSize","fontsize","ForumThreadHeaderStyle","widthLimit","tagsHeight","borderTopColor","baseStyleObject","innerWidth","ForumThreadPreviewStyle","lines","ForumThreadBubbleStyle","titlePaddingBottom","ForumPanelStyle","headerItemHeight","CreateThreadReplyButton","LARGE","markupEditorModal","forumThreadId","CreateThreadReplyModal","createThreadReply","forumThreadPanelStyle","buttonStyle","CreateForumThreadModal","inputStyle","createForumThread","forumId","routeToThread","CreateForumThreadButton","getModalClass","DeleteForumThreadModal","deleteThread","DeleteForumThreadButton","ForumThreadReply","getMessageInstance","editMessage","editAndDeleteButtons","deleteButton","editDeleteButtons","fullPost","author","bottomPanel","voting","ForumThreadPanel","getMainForumURL","returnToMainForum","backButton","getForumThread","getTimeAdded","postsLength","numReplies","getForumThreadState","initializeListeners","replies","spaceBetween","forumThreadMessages","replyButtonDiv","getAuthor","replyButton","getMessage","getVoting","ForumThreadHeader","tagsTitle","tagsAuthor","tagsReplies","tagsViews","tagsVotes","tagsActivity","getReplies","getViews","getVotes","getActivity","ForumThreadPreview","forumThreadPreview","ForumThreadBubble","pinned","isPinned","pinnedIcon","threadTitleAndPreview","threadTitle","getHref","threadTitleSpan","threadAuthor","threadReplies","threadRepliesSpan","threadViews","numViews","threadVotes","threadActivity","getLastActive","getThreadTitle","getThreadAuthor","getThreadReplies","getThreadViews","getThreadVotes","getThreadActivity","ForumThreadList","forum","getForumThreads","getPinIndex","Bubble","getBubbleClass","ForumPanel","buttonParent","getButton","getForumThreadList","DelayedForumPanel","DelayedForumThreadPanel","ForumRoute","MAIN_ROUTE","NavStyle","dimensions","navElement","backgroundTransitionDuration","sidePanel","getColors","sidepanelBackground","boxShadowSidePanel","sidepanelWidth","sidepanelTransitionDuration","navManagerColor","navBarColor","NAV_MANAGER_COLOR_NAV_BAR","sidePanelColor","NAV_MANAGER_COLOR_SIDE_PANEL","NAV_MANAGER_BOX_SHADOW_NAV_MANAGER","NAV_MANAGER_BOX_SHADOW_SIDE_PANEL","NAV_MANAGER_SIDE_PANEL_BACKGROUND_COLOR","NAV_MANAGER_SIDE_PANEL_HOVER_COLOR","NAV_MANAGER_NAV_BAR_BACKGROUND_COLOR","NAV_MANAGER_NAV_BAR_HOVER_COLOR","NAV_MANAGER_HR_COLOR","NAV_MANAGER_TEXT_COLOR","navbarHover","sidepanelHover","navbarBackground","boxShadowNavManager","sidepanelWidthLeft","sidepanelElementHeight","collapseArrowWidth","hr","sidepanelHideWidth","StorageMap","storage","SEPARATOR","setItem","getRawKey","serialize","removeItem","getItem","getRaw","deserialize","totalStorageKeys","prefixLenth","SessionStorageMap","sessionStorage","LocalStorageMap","localStorage","doDeserialization","realCallback","oldValue","getChangeDispatchable","CHANGE_DISPATCHABLE","separatorIndex","actualKey","newEvent","navSessionManager","BasicOrientedElementInterface","BasicOrientedElement","BasicOrientedLinkElement","NavElementInterface","isToggled","getToggledState","navElementHorizontal","NavSection","navCollapseElement","navElementVertical","navElementValueHorizontal","navElementValueVertical","childrenToRender","subElementsClass","navElementVerticalArrow","navElementHorizontalArrow","getSelf","getSubElements","showChildren","hideChildren","saveToggledState","sessionKeyName","sessionKey","defaultToggled","persistent","getLocalToggledState","getSessionKeyName","toggleChildren","NavElement","NavLinkElement","navLinkElement","navSectionHorizontal","getAnchor","navSectionVertical","anchor","LEFT","NavAnchoredNotifications","getSwitcherStyle","bodyListener","NavIcon","LeftSideNavIcon","sideIcon","RightSideNavIcon","WrappedNavIcon","wrappedIcon","maxDistanceFromSide","minSwipeDistance","minSwipeSpeed","touchEventHandler","ignoreCondition","successCondition","xType","targetTouches","startX","panelToggler","touchCallback","touchendCallback","initializeSwipeRight","navManager","maxDistance","minDistance","minSpeed","touchX","leftSidePanel","pageXOffset","toggleLeftSidePanel","initializeSwipeLeft","rightSidePanel","toggleRightSidePanel","initializeSwipeEvents","SidePanelGroup","sidePanelGroup","RIGHT","SidePanel","storageSerializer","navVerticalRightHide","navVerticalLeftHide","setVisible","NavCarouselStyle","NavManager","carouselStyleSheet","persistentLeftSidePanel","getCarouselStyleSheet","getLeftSidePanelChildren","persistentRightSidePanel","getRightSidePanelChildren","wrapped","navigationPanel","leftPanelToggler","leftSideIconAction","rightPanelToggler","rightSideIconAction","getLeftConditioned","getRightConditioned","wrappedPanel","wrappedToggler","wrappedIconAction","leftConditionedWrapper","rightConditionedWrapper","leftConditioned","getLeftConditionedChildren","rightConditioned","getRightConditionedChildren","mainPanel","toggleEvent","secondaryPanel","toggleSidePanel","getLeftSideIcon","getLeftFixed","getLeftConditionedWrapper","getWrappedIcon","getRightConditionedWrapper","getRightFixed","getRightSideIcon","wrapNavElements","unwrapNavElements","unwrappedTotalWidth","checkForWrap","AppNavManager","email","getUserElement","singlePageLinkOnMount","shiftKey","ctrlKey","metaKey","StemApp","getRouterOptions","getRouter","getBeforeContainer","getContainer","getAfterContainer","click","appInstance","WebsocketStreamHandler","bytesReceived","isIndexed","lastMessageIndex","messageBuffer","missedPackets","packet","firstSpace","processIndexedPacket","processVanillaPacket","processMissedPacket","processIndexedMessage","MISSING_MESSAGE","rawMessage","parseMayFail","WebsocketSubscriber","WEBSOCKET_URL","streamHandlers","attemptedConnect","connectionStatus","ConnectionStatus","websocket","failedReconnectAttempts","streamStatus","setConnectionStatus","CONNECTING","WebSocket","onopen","onWebsocketOpen","onmessage","onWebsocketMessage","onWebsocketError","onclose","onWebsocketClose","tryReconnect","reconnectWait","CONNECT_RETRY_TIMEOUT","CONNECT_RETRY_MAX_TIMEOUT","reconnectTimeout","warning","readyState","sendSubscribe","streamHandler","StreamStatus","UNSUBSCRIBED","SUBSCRIBING","checkTimeout","tryCount","streamTimeout","STREAM_SUBSCRIBE_TIMEOUT","STREAM_SUBSCRIBE_MAX_TIMEOUT","subscribeTimeout","sendResubscribe","canSendSubscribe","updateStreamStatus","haveIndex","getLastIndex","SUBSCRIBED","previousFailedReconnectAttempts","reset","CONNECTED","resubscribe","afterStreamName","processPacket","HEARTBEAT_MESSAGE","errorType","onStreamSubscribe","processStreamPacket","fatalErrorClose","DISCONNECTED","subscribe","getStreamHandler","addStreamListener","GlobalStyleSheet","FONT_FAMILY_SANS_SERIF","COLOR_LINK","FONT_FAMILY_MONOSPACE","EstablishmentApp","loadPublicState","addAjaxProcessors","registerWebsocketStreams","initializeViewportMeta","configureTheme","initializeGlobalStyle","PUBLIC_STATE","addPreprocessor","addPostprocessor","xhrPromise","responseHeaders","responseDate","estimatedServerTime","addErrorPostprocessor","viewportMeta","MIN_VIEWPORT_META_WIDTH","AppClass"],"mappings":"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"}